(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function qw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eP={exports:{}},w0={},tP={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=Symbol.for("react.element"),BL=Symbol.for("react.portal"),IL=Symbol.for("react.fragment"),LL=Symbol.for("react.strict_mode"),NL=Symbol.for("react.profiler"),FL=Symbol.for("react.provider"),kL=Symbol.for("react.context"),UL=Symbol.for("react.forward_ref"),OL=Symbol.for("react.suspense"),zL=Symbol.for("react.memo"),HL=Symbol.for("react.lazy"),u2=Symbol.iterator;function GL(n){return n===null||typeof n!="object"?null:(n=u2&&n[u2]||n["@@iterator"],typeof n=="function"?n:null)}var nP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iP=Object.assign,rP={};function Wu(n,e,t){this.props=n,this.context=e,this.refs=rP,this.updater=t||nP}Wu.prototype.isReactComponent={};Wu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Wu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function sP(){}sP.prototype=Wu.prototype;function $w(n,e,t){this.props=n,this.context=e,this.refs=rP,this.updater=t||nP}var eS=$w.prototype=new sP;eS.constructor=$w;iP(eS,Wu.prototype);eS.isPureReactComponent=!0;var f2=Array.isArray,aP=Object.prototype.hasOwnProperty,tS={current:null},oP={key:!0,ref:!0,__self:!0,__source:!0};function lP(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)aP.call(e,i)&&!oP.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:wh,type:n,key:s,ref:a,props:r,_owner:tS.current}}function VL(n,e){return{$$typeof:wh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function nS(n){return typeof n=="object"&&n!==null&&n.$$typeof===wh}function WL(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var d2=/\/+/g;function wy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?WL(""+n.key):e.toString(36)}function ug(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case wh:case BL:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+wy(a,0):i,f2(r)?(t="",n!=null&&(t=n.replace(d2,"$&/")+"/"),ug(r,e,t,"",function(u){return u})):r!=null&&(nS(r)&&(r=VL(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(d2,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",f2(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+wy(s,o);a+=ug(s,e,t,l,r)}else if(l=GL(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+wy(s,o++),a+=ug(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Xp(n,e,t){if(n==null)return n;var i=[],r=0;return ug(n,i,"","",function(s){return e.call(t,s,r++)}),i}function jL(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Hi={current:null},fg={transition:null},JL={ReactCurrentDispatcher:Hi,ReactCurrentBatchConfig:fg,ReactCurrentOwner:tS};Bt.Children={map:Xp,forEach:function(n,e,t){Xp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Xp(n,function(){e++}),e},toArray:function(n){return Xp(n,function(e){return e})||[]},only:function(n){if(!nS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Bt.Component=Wu;Bt.Fragment=IL;Bt.Profiler=NL;Bt.PureComponent=$w;Bt.StrictMode=LL;Bt.Suspense=OL;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JL;Bt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=iP({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=tS.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)aP.call(e,l)&&!oP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:wh,type:n.type,key:r,ref:s,props:i,_owner:a}};Bt.createContext=function(n){return n={$$typeof:kL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:FL,_context:n},n.Consumer=n};Bt.createElement=lP;Bt.createFactory=function(n){var e=lP.bind(null,n);return e.type=n,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(n){return{$$typeof:UL,render:n}};Bt.isValidElement=nS;Bt.lazy=function(n){return{$$typeof:HL,_payload:{_status:-1,_result:n},_init:jL}};Bt.memo=function(n,e){return{$$typeof:zL,type:n,compare:e===void 0?null:e}};Bt.startTransition=function(n){var e=fg.transition;fg.transition={};try{n()}finally{fg.transition=e}};Bt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Bt.useCallback=function(n,e){return Hi.current.useCallback(n,e)};Bt.useContext=function(n){return Hi.current.useContext(n)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(n){return Hi.current.useDeferredValue(n)};Bt.useEffect=function(n,e){return Hi.current.useEffect(n,e)};Bt.useId=function(){return Hi.current.useId()};Bt.useImperativeHandle=function(n,e,t){return Hi.current.useImperativeHandle(n,e,t)};Bt.useInsertionEffect=function(n,e){return Hi.current.useInsertionEffect(n,e)};Bt.useLayoutEffect=function(n,e){return Hi.current.useLayoutEffect(n,e)};Bt.useMemo=function(n,e){return Hi.current.useMemo(n,e)};Bt.useReducer=function(n,e,t){return Hi.current.useReducer(n,e,t)};Bt.useRef=function(n){return Hi.current.useRef(n)};Bt.useState=function(n){return Hi.current.useState(n)};Bt.useSyncExternalStore=function(n,e,t){return Hi.current.useSyncExternalStore(n,e,t)};Bt.useTransition=function(){return Hi.current.useTransition()};Bt.version="18.2.0";tP.exports=Bt;var N=tP.exports;const vn=qw(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XL=N,KL=Symbol.for("react.element"),QL=Symbol.for("react.fragment"),YL=Object.prototype.hasOwnProperty,ZL=XL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qL={key:!0,ref:!0,__self:!0,__source:!0};function cP(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)YL.call(e,i)&&!qL.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:KL,type:n,key:s,ref:a,props:r,_owner:ZL.current}}w0.Fragment=QL;w0.jsx=cP;w0.jsxs=cP;eP.exports=w0;var iS=eP.exports;const bo=iS.Fragment,C=iS.jsx,te=iS.jsxs;var $x={},uP={exports:{}},mr={},fP={exports:{}},dP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(I,J){var j=I.length;I.push(J);e:for(;0<j;){var V=j-1>>>1,Q=I[V];if(0<r(Q,J))I[V]=J,I[j]=Q,j=V;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var J=I[0],j=I.pop();if(j!==J){I[0]=j;e:for(var V=0,Q=I.length,ge=Q>>>1;V<ge;){var xe=2*(V+1)-1,be=I[xe],ce=xe+1,Ye=I[ce];if(0>r(be,j))ce<Q&&0>r(Ye,be)?(I[V]=Ye,I[ce]=j,V=ce):(I[V]=be,I[xe]=j,V=xe);else if(ce<Q&&0>r(Ye,j))I[V]=Ye,I[ce]=j,V=ce;else break e}}return J}function r(I,J){var j=I.sortIndex-J.sortIndex;return j!==0?j:I.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,p=3,v=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(I){for(var J=t(u);J!==null;){if(J.callback===null)i(u);else if(J.startTime<=I)i(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(I){if(g=!1,M(I),!m)if(t(l)!==null)m=!0,ue(E);else{var J=t(u);J!==null&&pe(A,J.startTime-I)}}function E(I,J){m=!1,g&&(g=!1,x(T),T=-1),v=!0;var j=p;try{for(M(J),h=t(l);h!==null&&(!(h.expirationTime>J)||I&&!H());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var Q=V(h.expirationTime<=J);J=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&i(l),M(J)}else i(l);h=t(l)}if(h!==null)var ge=!0;else{var xe=t(u);xe!==null&&pe(A,xe.startTime-J),ge=!1}return ge}finally{h=null,p=j,v=!1}}var R=!1,D=null,T=-1,B=5,L=-1;function H(){return!(n.unstable_now()-L<B)}function Z(){if(D!==null){var I=n.unstable_now();L=I;var J=!0;try{J=D(!0,I)}finally{J?W():(R=!1,D=null)}}else R=!1}var W;if(typeof S=="function")W=function(){S(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=Z,W=function(){ie.postMessage(null)}}else W=function(){w(Z,0)};function ue(I){D=I,R||(R=!0,W())}function pe(I,J){T=w(function(){I(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){m||v||(m=!0,ue(E))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(I){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var j=p;p=J;try{return I()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var j=p;p=I;try{return J()}finally{p=j}},n.unstable_scheduleCallback=function(I,J,j){var V=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=j+Q,I={id:d++,callback:J,priorityLevel:I,startTime:j,expirationTime:Q,sortIndex:-1},j>V?(I.sortIndex=j,e(u,I),t(l)===null&&I===t(u)&&(g?(x(T),T=-1):g=!0,pe(A,j-V))):(I.sortIndex=Q,e(l,I),m||v||(m=!0,ue(E))),I},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(I){var J=p;return function(){var j=p;p=J;try{return I.apply(this,arguments)}finally{p=j}}}})(dP);fP.exports=dP;var $L=fP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=N,hr=$L;function Te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pP=new Set,Id={};function zl(n,e){wu(n,e),wu(n+"Capture",e)}function wu(n,e){for(Id[n]=e,n=0;n<e.length;n++)pP.add(e[n])}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e1=Object.prototype.hasOwnProperty,eN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h2={},p2={};function tN(n){return e1.call(p2,n)?!0:e1.call(h2,n)?!1:eN.test(n)?p2[n]=!0:(h2[n]=!0,!1)}function nN(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iN(n,e,t,i){if(e===null||typeof e>"u"||nN(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gi(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){gi[n]=new Gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];gi[e]=new Gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){gi[n]=new Gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){gi[n]=new Gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){gi[n]=new Gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){gi[n]=new Gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){gi[n]=new Gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){gi[n]=new Gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){gi[n]=new Gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var rS=/[\-:]([a-z])/g;function sS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(rS,sS);gi[e]=new Gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(rS,sS);gi[e]=new Gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(rS,sS);gi[e]=new Gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){gi[n]=new Gi(n,1,!1,n.toLowerCase(),null,!1,!1)});gi.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){gi[n]=new Gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function aS(n,e,t,i){var r=gi.hasOwnProperty(e)?gi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iN(e,t,r,i)&&(t=null),i||r===null?tN(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ca=hP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kp=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),t1=Symbol.for("react.profiler"),mP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),lS=Symbol.for("react.forward_ref"),n1=Symbol.for("react.suspense"),i1=Symbol.for("react.suspense_list"),cS=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),vP=Symbol.for("react.offscreen"),m2=Symbol.iterator;function Cf(n){return n===null||typeof n!="object"?null:(n=m2&&n[m2]||n["@@iterator"],typeof n=="function"?n:null)}var Sn=Object.assign,Sy;function od(n){if(Sy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Sy=e&&e[1]||""}return`
`+Sy+n}var My=!1;function _y(n,e){if(!n||My)return"";My=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{My=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?od(n):""}function rN(n){switch(n.tag){case 5:return od(n.type);case 16:return od("Lazy");case 13:return od("Suspense");case 19:return od("SuspenseList");case 0:case 2:case 15:return n=_y(n.type,!1),n;case 11:return n=_y(n.type.render,!1),n;case 1:return n=_y(n.type,!0),n;default:return""}}function r1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zc:return"Fragment";case Oc:return"Portal";case t1:return"Profiler";case oS:return"StrictMode";case n1:return"Suspense";case i1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case gP:return(n.displayName||"Context")+".Consumer";case mP:return(n._context.displayName||"Context")+".Provider";case lS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cS:return e=n.displayName||null,e!==null?e:r1(n.type)||"Memo";case $a:e=n._payload,n=n._init;try{return r1(n(e))}catch{}}return null}function sN(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return r1(e);case 8:return e===oS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Co(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aN(n){var e=yP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Qp(n){n._valueTracker||(n._valueTracker=aN(n))}function xP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=yP(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Ig(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function s1(n,e){var t=e.checked;return Sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function g2(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Co(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wP(n,e){e=e.checked,e!=null&&aS(n,"checked",e,!1)}function a1(n,e){wP(n,e);var t=Co(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?o1(n,e.type,t):e.hasOwnProperty("defaultValue")&&o1(n,e.type,Co(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function v2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function o1(n,e,t){(e!=="number"||Ig(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ld=Array.isArray;function lu(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Co(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function l1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Sn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function y2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Te(92));if(ld(t)){if(1<t.length)throw Error(Te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Co(t)}}function SP(n,e){var t=Co(e.value),i=Co(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function x2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function MP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function c1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?MP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Yp,_P=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ld(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var md={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oN=["Webkit","ms","Moz","O"];Object.keys(md).forEach(function(n){oN.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),md[e]=md[n]})});function AP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||md.hasOwnProperty(n)&&md[n]?(""+e).trim():e+"px"}function bP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=AP(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var lN=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u1(n,e){if(e){if(lN[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function f1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var d1=null;function uS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var h1=null,cu=null,uu=null;function w2(n){if(n=_h(n)){if(typeof h1!="function")throw Error(Te(280));var e=n.stateNode;e&&(e=b0(e),h1(n.stateNode,n.type,e))}}function CP(n){cu?uu?uu.push(n):uu=[n]:cu=n}function EP(){if(cu){var n=cu,e=uu;if(uu=cu=null,w2(n),e)for(n=0;n<e.length;n++)w2(e[n])}}function TP(n,e){return n(e)}function PP(){}var Ay=!1;function RP(n,e,t){if(Ay)return n(e,t);Ay=!0;try{return TP(n,e,t)}finally{Ay=!1,(cu!==null||uu!==null)&&(PP(),EP())}}function Nd(n,e){var t=n.stateNode;if(t===null)return null;var i=b0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Te(231,e,typeof t));return t}var p1=!1;if(xa)try{var Ef={};Object.defineProperty(Ef,"passive",{get:function(){p1=!0}}),window.addEventListener("test",Ef,Ef),window.removeEventListener("test",Ef,Ef)}catch{p1=!1}function cN(n,e,t,i,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var gd=!1,Lg=null,Ng=!1,m1=null,uN={onError:function(n){gd=!0,Lg=n}};function fN(n,e,t,i,r,s,a,o,l){gd=!1,Lg=null,cN.apply(uN,arguments)}function dN(n,e,t,i,r,s,a,o,l){if(fN.apply(this,arguments),gd){if(gd){var u=Lg;gd=!1,Lg=null}else throw Error(Te(198));Ng||(Ng=!0,m1=u)}}function Hl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function DP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function S2(n){if(Hl(n)!==n)throw Error(Te(188))}function hN(n){var e=n.alternate;if(!e){if(e=Hl(n),e===null)throw Error(Te(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return S2(r),n;if(s===i)return S2(r),e;s=s.sibling}throw Error(Te(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(Te(189))}}if(t.alternate!==i)throw Error(Te(190))}if(t.tag!==3)throw Error(Te(188));return t.stateNode.current===t?n:e}function BP(n){return n=hN(n),n!==null?IP(n):null}function IP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=IP(n);if(e!==null)return e;n=n.sibling}return null}var LP=hr.unstable_scheduleCallback,M2=hr.unstable_cancelCallback,pN=hr.unstable_shouldYield,mN=hr.unstable_requestPaint,Ln=hr.unstable_now,gN=hr.unstable_getCurrentPriorityLevel,fS=hr.unstable_ImmediatePriority,NP=hr.unstable_UserBlockingPriority,Fg=hr.unstable_NormalPriority,vN=hr.unstable_LowPriority,FP=hr.unstable_IdlePriority,S0=null,Rs=null;function yN(n){if(Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(S0,n,void 0,(n.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:SN,xN=Math.log,wN=Math.LN2;function SN(n){return n>>>=0,n===0?32:31-(xN(n)/wN|0)|0}var Zp=64,qp=4194304;function cd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function kg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=cd(o):(s&=a,s!==0&&(i=cd(s)))}else a=t&~r,a!==0?i=cd(a):s!==0&&(i=cd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-cs(e),r=1<<t,i|=n[t],e&=~r;return i}function MN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _N(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-cs(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=MN(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function g1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kP(){var n=Zp;return Zp<<=1,!(Zp&4194240)&&(Zp=64),n}function by(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Sh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-cs(e),n[e]=t}function AN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-cs(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function dS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-cs(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var qt=0;function UP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var OP,hS,zP,HP,GP,v1=!1,$p=[],fo=null,ho=null,po=null,Fd=new Map,kd=new Map,io=[],bN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _2(n,e){switch(n){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Fd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(e.pointerId)}}function Tf(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_h(e),e!==null&&hS(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function CN(n,e,t,i,r){switch(e){case"focusin":return fo=Tf(fo,n,e,t,i,r),!0;case"dragenter":return ho=Tf(ho,n,e,t,i,r),!0;case"mouseover":return po=Tf(po,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Fd.set(s,Tf(Fd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,kd.set(s,Tf(kd.get(s)||null,n,e,t,i,r)),!0}return!1}function VP(n){var e=hl(n.target);if(e!==null){var t=Hl(e);if(t!==null){if(e=t.tag,e===13){if(e=DP(t),e!==null){n.blockedOn=e,GP(n.priority,function(){zP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=y1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);d1=i,t.target.dispatchEvent(i),d1=null}else return e=_h(t),e!==null&&hS(e),n.blockedOn=t,!1;e.shift()}return!0}function A2(n,e,t){dg(n)&&t.delete(e)}function EN(){v1=!1,fo!==null&&dg(fo)&&(fo=null),ho!==null&&dg(ho)&&(ho=null),po!==null&&dg(po)&&(po=null),Fd.forEach(A2),kd.forEach(A2)}function Pf(n,e){n.blockedOn===e&&(n.blockedOn=null,v1||(v1=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,EN)))}function Ud(n){function e(r){return Pf(r,n)}if(0<$p.length){Pf($p[0],n);for(var t=1;t<$p.length;t++){var i=$p[t];i.blockedOn===n&&(i.blockedOn=null)}}for(fo!==null&&Pf(fo,n),ho!==null&&Pf(ho,n),po!==null&&Pf(po,n),Fd.forEach(e),kd.forEach(e),t=0;t<io.length;t++)i=io[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<io.length&&(t=io[0],t.blockedOn===null);)VP(t),t.blockedOn===null&&io.shift()}var fu=Ca.ReactCurrentBatchConfig,Ug=!0;function TN(n,e,t,i){var r=qt,s=fu.transition;fu.transition=null;try{qt=1,pS(n,e,t,i)}finally{qt=r,fu.transition=s}}function PN(n,e,t,i){var r=qt,s=fu.transition;fu.transition=null;try{qt=4,pS(n,e,t,i)}finally{qt=r,fu.transition=s}}function pS(n,e,t,i){if(Ug){var r=y1(n,e,t,i);if(r===null)Ny(n,e,i,Og,t),_2(n,i);else if(CN(r,n,e,t,i))i.stopPropagation();else if(_2(n,i),e&4&&-1<bN.indexOf(n)){for(;r!==null;){var s=_h(r);if(s!==null&&OP(s),s=y1(n,e,t,i),s===null&&Ny(n,e,i,Og,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ny(n,e,i,null,t)}}var Og=null;function y1(n,e,t,i){if(Og=null,n=uS(i),n=hl(n),n!==null)if(e=Hl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=DP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Og=n,null}function WP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gN()){case fS:return 1;case NP:return 4;case Fg:case vN:return 16;case FP:return 536870912;default:return 16}default:return 16}}var so=null,mS=null,hg=null;function jP(){if(hg)return hg;var n,e=mS,t=e.length,i,r="value"in so?so.value:so.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return hg=r.slice(n,1<i?1-i:void 0)}function pg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function em(){return!0}function b2(){return!1}function gr(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?em:b2,this.isPropagationStopped=b2,this}return Sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=em)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=em)},persist:function(){},isPersistent:em}),e}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gS=gr(ju),Mh=Sn({},ju,{view:0,detail:0}),RN=gr(Mh),Cy,Ey,Rf,M0=Sn({},Mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rf&&(Rf&&n.type==="mousemove"?(Cy=n.screenX-Rf.screenX,Ey=n.screenY-Rf.screenY):Ey=Cy=0,Rf=n),Cy)},movementY:function(n){return"movementY"in n?n.movementY:Ey}}),C2=gr(M0),DN=Sn({},M0,{dataTransfer:0}),BN=gr(DN),IN=Sn({},Mh,{relatedTarget:0}),Ty=gr(IN),LN=Sn({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),NN=gr(LN),FN=Sn({},ju,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kN=gr(FN),UN=Sn({},ju,{data:0}),E2=gr(UN),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=HN[n])?!!e[n]:!1}function vS(){return GN}var VN=Sn({},Mh,{key:function(n){if(n.key){var e=ON[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=pg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vS,charCode:function(n){return n.type==="keypress"?pg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?pg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),WN=gr(VN),jN=Sn({},M0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T2=gr(jN),JN=Sn({},Mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vS}),XN=gr(JN),KN=Sn({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),QN=gr(KN),YN=Sn({},M0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ZN=gr(YN),qN=[9,13,27,32],yS=xa&&"CompositionEvent"in window,vd=null;xa&&"documentMode"in document&&(vd=document.documentMode);var $N=xa&&"TextEvent"in window&&!vd,JP=xa&&(!yS||vd&&8<vd&&11>=vd),P2=String.fromCharCode(32),R2=!1;function XP(n,e){switch(n){case"keyup":return qN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Hc=!1;function eF(n,e){switch(n){case"compositionend":return KP(e);case"keypress":return e.which!==32?null:(R2=!0,P2);case"textInput":return n=e.data,n===P2&&R2?null:n;default:return null}}function tF(n,e){if(Hc)return n==="compositionend"||!yS&&XP(n,e)?(n=jP(),hg=mS=so=null,Hc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JP&&e.locale!=="ko"?null:e.data;default:return null}}var nF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nF[n.type]:e==="textarea"}function QP(n,e,t,i){CP(i),e=zg(e,"onChange"),0<e.length&&(t=new gS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var yd=null,Od=null;function iF(n){a3(n,0)}function _0(n){var e=Wc(n);if(xP(e))return n}function rF(n,e){if(n==="change")return e}var YP=!1;if(xa){var Py;if(xa){var Ry="oninput"in document;if(!Ry){var B2=document.createElement("div");B2.setAttribute("oninput","return;"),Ry=typeof B2.oninput=="function"}Py=Ry}else Py=!1;YP=Py&&(!document.documentMode||9<document.documentMode)}function I2(){yd&&(yd.detachEvent("onpropertychange",ZP),Od=yd=null)}function ZP(n){if(n.propertyName==="value"&&_0(Od)){var e=[];QP(e,Od,n,uS(n)),RP(iF,e)}}function sF(n,e,t){n==="focusin"?(I2(),yd=e,Od=t,yd.attachEvent("onpropertychange",ZP)):n==="focusout"&&I2()}function aF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _0(Od)}function oF(n,e){if(n==="click")return _0(e)}function lF(n,e){if(n==="input"||n==="change")return _0(e)}function cF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var hs=typeof Object.is=="function"?Object.is:cF;function zd(n,e){if(hs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!e1.call(e,r)||!hs(n[r],e[r]))return!1}return!0}function L2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function N2(n,e){var t=L2(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=L2(t)}}function qP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?qP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function $P(){for(var n=window,e=Ig();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ig(n.document)}return e}function xS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uF(n){var e=$P(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&qP(t.ownerDocument.documentElement,t)){if(i!==null&&xS(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=N2(t,s);var a=N2(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var fF=xa&&"documentMode"in document&&11>=document.documentMode,Gc=null,x1=null,xd=null,w1=!1;function F2(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;w1||Gc==null||Gc!==Ig(i)||(i=Gc,"selectionStart"in i&&xS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xd&&zd(xd,i)||(xd=i,i=zg(x1,"onSelect"),0<i.length&&(e=new gS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Gc)))}function tm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Vc={animationend:tm("Animation","AnimationEnd"),animationiteration:tm("Animation","AnimationIteration"),animationstart:tm("Animation","AnimationStart"),transitionend:tm("Transition","TransitionEnd")},Dy={},e3={};xa&&(e3=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function A0(n){if(Dy[n])return Dy[n];if(!Vc[n])return n;var e=Vc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in e3)return Dy[n]=e[t];return n}var t3=A0("animationend"),n3=A0("animationiteration"),i3=A0("animationstart"),r3=A0("transitionend"),s3=new Map,k2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(n,e){s3.set(n,e),zl(e,[n])}for(var By=0;By<k2.length;By++){var Iy=k2[By],dF=Iy.toLowerCase(),hF=Iy[0].toUpperCase()+Iy.slice(1);Io(dF,"on"+hF)}Io(t3,"onAnimationEnd");Io(n3,"onAnimationIteration");Io(i3,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(r3,"onTransitionEnd");wu("onMouseEnter",["mouseout","mouseover"]);wu("onMouseLeave",["mouseout","mouseover"]);wu("onPointerEnter",["pointerout","pointerover"]);wu("onPointerLeave",["pointerout","pointerover"]);zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pF=new Set("cancel close invalid load scroll toggle".split(" ").concat(ud));function U2(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,dN(i,e,void 0,n),n.currentTarget=null}function a3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;U2(r,o,u),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;U2(r,o,u),s=l}}}if(Ng)throw n=m1,Ng=!1,m1=null,n}function sn(n,e){var t=e[b1];t===void 0&&(t=e[b1]=new Set);var i=n+"__bubble";t.has(i)||(o3(e,n,2,!1),t.add(i))}function Ly(n,e,t){var i=0;e&&(i|=4),o3(t,n,i,e)}var nm="_reactListening"+Math.random().toString(36).slice(2);function Hd(n){if(!n[nm]){n[nm]=!0,pP.forEach(function(t){t!=="selectionchange"&&(pF.has(t)||Ly(t,!1,n),Ly(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[nm]||(e[nm]=!0,Ly("selectionchange",!1,e))}}function o3(n,e,t,i){switch(WP(e)){case 1:var r=TN;break;case 4:r=PN;break;default:r=pS}t=r.bind(null,e,t,n),r=void 0,!p1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Ny(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=hl(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}RP(function(){var u=s,d=uS(t),h=[];e:{var p=s3.get(n);if(p!==void 0){var v=gS,m=n;switch(n){case"keypress":if(pg(t)===0)break e;case"keydown":case"keyup":v=WN;break;case"focusin":m="focus",v=Ty;break;case"focusout":m="blur",v=Ty;break;case"beforeblur":case"afterblur":v=Ty;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=C2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=XN;break;case t3:case n3:case i3:v=NN;break;case r3:v=QN;break;case"scroll":v=RN;break;case"wheel":v=ZN;break;case"copy":case"cut":case"paste":v=kN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=T2}var g=(e&4)!==0,w=!g&&n==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var S=u,M;S!==null;){M=S;var A=M.stateNode;if(M.tag===5&&A!==null&&(M=A,x!==null&&(A=Nd(S,x),A!=null&&g.push(Gd(S,A,M)))),w)break;S=S.return}0<g.length&&(p=new v(p,m,null,t,d),h.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",p&&t!==d1&&(m=t.relatedTarget||t.fromElement)&&(hl(m)||m[wa]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(m=t.relatedTarget||t.toElement,v=u,m=m?hl(m):null,m!==null&&(w=Hl(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(v=null,m=u),v!==m)){if(g=C2,A="onMouseLeave",x="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(g=T2,A="onPointerLeave",x="onPointerEnter",S="pointer"),w=v==null?p:Wc(v),M=m==null?p:Wc(m),p=new g(A,S+"leave",v,t,d),p.target=w,p.relatedTarget=M,A=null,hl(d)===u&&(g=new g(x,S+"enter",m,t,d),g.target=M,g.relatedTarget=w,A=g),w=A,v&&m)t:{for(g=v,x=m,S=0,M=g;M;M=dc(M))S++;for(M=0,A=x;A;A=dc(A))M++;for(;0<S-M;)g=dc(g),S--;for(;0<M-S;)x=dc(x),M--;for(;S--;){if(g===x||x!==null&&g===x.alternate)break t;g=dc(g),x=dc(x)}g=null}else g=null;v!==null&&O2(h,p,v,g,!1),m!==null&&w!==null&&O2(h,w,m,g,!0)}}e:{if(p=u?Wc(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var E=rF;else if(D2(p))if(YP)E=lF;else{E=aF;var R=sF}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=oF);if(E&&(E=E(n,u))){QP(h,E,t,d);break e}R&&R(n,p,u),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&o1(p,"number",p.value)}switch(R=u?Wc(u):window,n){case"focusin":(D2(R)||R.contentEditable==="true")&&(Gc=R,x1=u,xd=null);break;case"focusout":xd=x1=Gc=null;break;case"mousedown":w1=!0;break;case"contextmenu":case"mouseup":case"dragend":w1=!1,F2(h,t,d);break;case"selectionchange":if(fF)break;case"keydown":case"keyup":F2(h,t,d)}var D;if(yS)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Hc?XP(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(JP&&t.locale!=="ko"&&(Hc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Hc&&(D=jP()):(so=d,mS="value"in so?so.value:so.textContent,Hc=!0)),R=zg(u,T),0<R.length&&(T=new E2(T,n,null,t,d),h.push({event:T,listeners:R}),D?T.data=D:(D=KP(t),D!==null&&(T.data=D)))),(D=$N?eF(n,t):tF(n,t))&&(u=zg(u,"onBeforeInput"),0<u.length&&(d=new E2("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=D))}a3(h,e)})}function Gd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function zg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Nd(n,t),s!=null&&i.unshift(Gd(n,s,r)),s=Nd(n,e),s!=null&&i.push(Gd(n,s,r))),n=n.return}return i}function dc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function O2(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,r?(l=Nd(t,s),l!=null&&a.unshift(Gd(t,l,o))):r||(l=Nd(t,s),l!=null&&a.push(Gd(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var mF=/\r\n?/g,gF=/\u0000|\uFFFD/g;function z2(n){return(typeof n=="string"?n:""+n).replace(mF,`
`).replace(gF,"")}function im(n,e,t){if(e=z2(e),z2(n)!==e&&t)throw Error(Te(425))}function Hg(){}var S1=null,M1=null;function _1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var A1=typeof setTimeout=="function"?setTimeout:void 0,vF=typeof clearTimeout=="function"?clearTimeout:void 0,H2=typeof Promise=="function"?Promise:void 0,yF=typeof queueMicrotask=="function"?queueMicrotask:typeof H2<"u"?function(n){return H2.resolve(null).then(n).catch(xF)}:A1;function xF(n){setTimeout(function(){throw n})}function Fy(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ud(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ud(e)}function mo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function G2(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ju=Math.random().toString(36).slice(2),Ps="__reactFiber$"+Ju,Vd="__reactProps$"+Ju,wa="__reactContainer$"+Ju,b1="__reactEvents$"+Ju,wF="__reactListeners$"+Ju,SF="__reactHandles$"+Ju;function hl(n){var e=n[Ps];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wa]||t[Ps]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=G2(n);n!==null;){if(t=n[Ps])return t;n=G2(n)}return e}n=t,t=n.parentNode}return null}function _h(n){return n=n[Ps]||n[wa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Wc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Te(33))}function b0(n){return n[Vd]||null}var C1=[],jc=-1;function Lo(n){return{current:n}}function an(n){0>jc||(n.current=C1[jc],C1[jc]=null,jc--)}function rn(n,e){jc++,C1[jc]=n.current,n.current=e}var Eo={},Ti=Lo(Eo),Zi=Lo(!1),Pl=Eo;function Su(n,e){var t=n.type.contextTypes;if(!t)return Eo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function qi(n){return n=n.childContextTypes,n!=null}function Gg(){an(Zi),an(Ti)}function V2(n,e,t){if(Ti.current!==Eo)throw Error(Te(168));rn(Ti,e),rn(Zi,t)}function l3(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Te(108,sN(n)||"Unknown",r));return Sn({},t,i)}function Vg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Eo,Pl=Ti.current,rn(Ti,n),rn(Zi,Zi.current),!0}function W2(n,e,t){var i=n.stateNode;if(!i)throw Error(Te(169));t?(n=l3(n,e,Pl),i.__reactInternalMemoizedMergedChildContext=n,an(Zi),an(Ti),rn(Ti,n)):an(Zi),rn(Zi,t)}var la=null,C0=!1,ky=!1;function c3(n){la===null?la=[n]:la.push(n)}function MF(n){C0=!0,c3(n)}function No(){if(!ky&&la!==null){ky=!0;var n=0,e=qt;try{var t=la;for(qt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}la=null,C0=!1}catch(r){throw la!==null&&(la=la.slice(n+1)),LP(fS,No),r}finally{qt=e,ky=!1}}return null}var Jc=[],Xc=0,Wg=null,jg=0,Ir=[],Lr=0,Rl=null,fa=1,da="";function al(n,e){Jc[Xc++]=jg,Jc[Xc++]=Wg,Wg=n,jg=e}function u3(n,e,t){Ir[Lr++]=fa,Ir[Lr++]=da,Ir[Lr++]=Rl,Rl=n;var i=fa;n=da;var r=32-cs(i)-1;i&=~(1<<r),t+=1;var s=32-cs(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,fa=1<<32-cs(e)+r|t<<r|i,da=s+n}else fa=1<<s|t<<r|i,da=n}function wS(n){n.return!==null&&(al(n,1),u3(n,1,0))}function SS(n){for(;n===Wg;)Wg=Jc[--Xc],Jc[Xc]=null,jg=Jc[--Xc],Jc[Xc]=null;for(;n===Rl;)Rl=Ir[--Lr],Ir[Lr]=null,da=Ir[--Lr],Ir[Lr]=null,fa=Ir[--Lr],Ir[Lr]=null}var fr=null,cr=null,dn=!1,rs=null;function f3(n,e){var t=Ur(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function j2(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fr=n,cr=mo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fr=n,cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Rl!==null?{id:fa,overflow:da}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ur(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,fr=n,cr=null,!0):!1;default:return!1}}function E1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function T1(n){if(dn){var e=cr;if(e){var t=e;if(!j2(n,e)){if(E1(n))throw Error(Te(418));e=mo(t.nextSibling);var i=fr;e&&j2(n,e)?f3(i,t):(n.flags=n.flags&-4097|2,dn=!1,fr=n)}}else{if(E1(n))throw Error(Te(418));n.flags=n.flags&-4097|2,dn=!1,fr=n}}}function J2(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fr=n}function rm(n){if(n!==fr)return!1;if(!dn)return J2(n),dn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!_1(n.type,n.memoizedProps)),e&&(e=cr)){if(E1(n))throw d3(),Error(Te(418));for(;e;)f3(n,e),e=mo(e.nextSibling)}if(J2(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){cr=mo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}cr=null}}else cr=fr?mo(n.stateNode.nextSibling):null;return!0}function d3(){for(var n=cr;n;)n=mo(n.nextSibling)}function Mu(){cr=fr=null,dn=!1}function MS(n){rs===null?rs=[n]:rs.push(n)}var _F=Ca.ReactCurrentBatchConfig;function es(n,e){if(n&&n.defaultProps){e=Sn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Jg=Lo(null),Xg=null,Kc=null,_S=null;function AS(){_S=Kc=Xg=null}function bS(n){var e=Jg.current;an(Jg),n._currentValue=e}function P1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function du(n,e){Xg=n,_S=Kc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Yi=!0),n.firstContext=null)}function Hr(n){var e=n._currentValue;if(_S!==n)if(n={context:n,memoizedValue:e,next:null},Kc===null){if(Xg===null)throw Error(Te(308));Kc=n,Xg.dependencies={lanes:0,firstContext:n}}else Kc=Kc.next=n;return e}var pl=null;function CS(n){pl===null?pl=[n]:pl.push(n)}function h3(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,CS(e)):(t.next=r.next,r.next=t),e.interleaved=t,Sa(n,i)}function Sa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var eo=!1;function ES(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function va(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function go(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,zt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Sa(n,t)}return r=i.interleaved,r===null?(e.next=e,CS(i)):(e.next=r.next,r.next=e),i.interleaved=e,Sa(n,t)}function mg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,dS(n,t)}}function X2(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Kg(n,e,t,i){var r=n.updateQueue;eo=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,d=u=l=null,o=s;do{var p=o.lane,v=o.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,g=o;switch(p=e,v=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(v,h,p);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(v,h,p):m,p==null)break e;h=Sn({},h,p);break e;case 2:eo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[o]:p.push(o))}else v={eventTime:v,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=v,l=h):d=d.next=v,a|=p;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Bl|=a,n.lanes=a,n.memoizedState=h}}function K2(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Te(191,r));r.call(i)}}}var m3=new hP.Component().refs;function R1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Sn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var E0={isMounted:function(n){return(n=n._reactInternals)?Hl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Oi(),r=yo(n),s=va(i,r);s.payload=e,t!=null&&(s.callback=t),e=go(n,s,r),e!==null&&(us(e,n,r,i),mg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Oi(),r=yo(n),s=va(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=go(n,s,r),e!==null&&(us(e,n,r,i),mg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Oi(),i=yo(n),r=va(t,i);r.tag=2,e!=null&&(r.callback=e),e=go(n,r,i),e!==null&&(us(e,n,i,t),mg(e,n,i))}};function Q2(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!zd(t,i)||!zd(r,s):!0}function g3(n,e,t){var i=!1,r=Eo,s=e.contextType;return typeof s=="object"&&s!==null?s=Hr(s):(r=qi(e)?Pl:Ti.current,i=e.contextTypes,s=(i=i!=null)?Su(n,r):Eo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Y2(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&E0.enqueueReplaceState(e,e.state,null)}function D1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=m3,ES(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Hr(s):(s=qi(e)?Pl:Ti.current,r.context=Su(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(R1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&E0.enqueueReplaceState(r,r.state,null),Kg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Df(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Te(309));var i=t.stateNode}if(!i)throw Error(Te(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;o===m3&&(o=r.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(Te(284));if(!t._owner)throw Error(Te(290,n))}return n}function sm(n,e){throw n=Object.prototype.toString.call(e),Error(Te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Z2(n){var e=n._init;return e(n._payload)}function v3(n){function e(x,S){if(n){var M=x.deletions;M===null?(x.deletions=[S],x.flags|=16):M.push(S)}}function t(x,S){if(!n)return null;for(;S!==null;)e(x,S),S=S.sibling;return null}function i(x,S){for(x=new Map;S!==null;)S.key!==null?x.set(S.key,S):x.set(S.index,S),S=S.sibling;return x}function r(x,S){return x=xo(x,S),x.index=0,x.sibling=null,x}function s(x,S,M){return x.index=M,n?(M=x.alternate,M!==null?(M=M.index,M<S?(x.flags|=2,S):M):(x.flags|=2,S)):(x.flags|=1048576,S)}function a(x){return n&&x.alternate===null&&(x.flags|=2),x}function o(x,S,M,A){return S===null||S.tag!==6?(S=Wy(M,x.mode,A),S.return=x,S):(S=r(S,M),S.return=x,S)}function l(x,S,M,A){var E=M.type;return E===zc?d(x,S,M.props.children,A,M.key):S!==null&&(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$a&&Z2(E)===S.type)?(A=r(S,M.props),A.ref=Df(x,S,M),A.return=x,A):(A=Sg(M.type,M.key,M.props,null,x.mode,A),A.ref=Df(x,S,M),A.return=x,A)}function u(x,S,M,A){return S===null||S.tag!==4||S.stateNode.containerInfo!==M.containerInfo||S.stateNode.implementation!==M.implementation?(S=jy(M,x.mode,A),S.return=x,S):(S=r(S,M.children||[]),S.return=x,S)}function d(x,S,M,A,E){return S===null||S.tag!==7?(S=_l(M,x.mode,A,E),S.return=x,S):(S=r(S,M),S.return=x,S)}function h(x,S,M){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Wy(""+S,x.mode,M),S.return=x,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Kp:return M=Sg(S.type,S.key,S.props,null,x.mode,M),M.ref=Df(x,null,S),M.return=x,M;case Oc:return S=jy(S,x.mode,M),S.return=x,S;case $a:var A=S._init;return h(x,A(S._payload),M)}if(ld(S)||Cf(S))return S=_l(S,x.mode,M,null),S.return=x,S;sm(x,S)}return null}function p(x,S,M,A){var E=S!==null?S.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return E!==null?null:o(x,S,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Kp:return M.key===E?l(x,S,M,A):null;case Oc:return M.key===E?u(x,S,M,A):null;case $a:return E=M._init,p(x,S,E(M._payload),A)}if(ld(M)||Cf(M))return E!==null?null:d(x,S,M,A,null);sm(x,M)}return null}function v(x,S,M,A,E){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(M)||null,o(S,x,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Kp:return x=x.get(A.key===null?M:A.key)||null,l(S,x,A,E);case Oc:return x=x.get(A.key===null?M:A.key)||null,u(S,x,A,E);case $a:var R=A._init;return v(x,S,M,R(A._payload),E)}if(ld(A)||Cf(A))return x=x.get(M)||null,d(S,x,A,E,null);sm(S,A)}return null}function m(x,S,M,A){for(var E=null,R=null,D=S,T=S=0,B=null;D!==null&&T<M.length;T++){D.index>T?(B=D,D=null):B=D.sibling;var L=p(x,D,M[T],A);if(L===null){D===null&&(D=B);break}n&&D&&L.alternate===null&&e(x,D),S=s(L,S,T),R===null?E=L:R.sibling=L,R=L,D=B}if(T===M.length)return t(x,D),dn&&al(x,T),E;if(D===null){for(;T<M.length;T++)D=h(x,M[T],A),D!==null&&(S=s(D,S,T),R===null?E=D:R.sibling=D,R=D);return dn&&al(x,T),E}for(D=i(x,D);T<M.length;T++)B=v(D,x,T,M[T],A),B!==null&&(n&&B.alternate!==null&&D.delete(B.key===null?T:B.key),S=s(B,S,T),R===null?E=B:R.sibling=B,R=B);return n&&D.forEach(function(H){return e(x,H)}),dn&&al(x,T),E}function g(x,S,M,A){var E=Cf(M);if(typeof E!="function")throw Error(Te(150));if(M=E.call(M),M==null)throw Error(Te(151));for(var R=E=null,D=S,T=S=0,B=null,L=M.next();D!==null&&!L.done;T++,L=M.next()){D.index>T?(B=D,D=null):B=D.sibling;var H=p(x,D,L.value,A);if(H===null){D===null&&(D=B);break}n&&D&&H.alternate===null&&e(x,D),S=s(H,S,T),R===null?E=H:R.sibling=H,R=H,D=B}if(L.done)return t(x,D),dn&&al(x,T),E;if(D===null){for(;!L.done;T++,L=M.next())L=h(x,L.value,A),L!==null&&(S=s(L,S,T),R===null?E=L:R.sibling=L,R=L);return dn&&al(x,T),E}for(D=i(x,D);!L.done;T++,L=M.next())L=v(D,x,T,L.value,A),L!==null&&(n&&L.alternate!==null&&D.delete(L.key===null?T:L.key),S=s(L,S,T),R===null?E=L:R.sibling=L,R=L);return n&&D.forEach(function(Z){return e(x,Z)}),dn&&al(x,T),E}function w(x,S,M,A){if(typeof M=="object"&&M!==null&&M.type===zc&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Kp:e:{for(var E=M.key,R=S;R!==null;){if(R.key===E){if(E=M.type,E===zc){if(R.tag===7){t(x,R.sibling),S=r(R,M.props.children),S.return=x,x=S;break e}}else if(R.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$a&&Z2(E)===R.type){t(x,R.sibling),S=r(R,M.props),S.ref=Df(x,R,M),S.return=x,x=S;break e}t(x,R);break}else e(x,R);R=R.sibling}M.type===zc?(S=_l(M.props.children,x.mode,A,M.key),S.return=x,x=S):(A=Sg(M.type,M.key,M.props,null,x.mode,A),A.ref=Df(x,S,M),A.return=x,x=A)}return a(x);case Oc:e:{for(R=M.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===M.containerInfo&&S.stateNode.implementation===M.implementation){t(x,S.sibling),S=r(S,M.children||[]),S.return=x,x=S;break e}else{t(x,S);break}else e(x,S);S=S.sibling}S=jy(M,x.mode,A),S.return=x,x=S}return a(x);case $a:return R=M._init,w(x,S,R(M._payload),A)}if(ld(M))return m(x,S,M,A);if(Cf(M))return g(x,S,M,A);sm(x,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,S!==null&&S.tag===6?(t(x,S.sibling),S=r(S,M),S.return=x,x=S):(t(x,S),S=Wy(M,x.mode,A),S.return=x,x=S),a(x)):t(x,S)}return w}var _u=v3(!0),y3=v3(!1),Ah={},Ds=Lo(Ah),Wd=Lo(Ah),jd=Lo(Ah);function ml(n){if(n===Ah)throw Error(Te(174));return n}function TS(n,e){switch(rn(jd,e),rn(Wd,n),rn(Ds,Ah),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:c1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=c1(e,n)}an(Ds),rn(Ds,e)}function Au(){an(Ds),an(Wd),an(jd)}function x3(n){ml(jd.current);var e=ml(Ds.current),t=c1(e,n.type);e!==t&&(rn(Wd,n),rn(Ds,t))}function PS(n){Wd.current===n&&(an(Ds),an(Wd))}var gn=Lo(0);function Qg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uy=[];function RS(){for(var n=0;n<Uy.length;n++)Uy[n]._workInProgressVersionPrimary=null;Uy.length=0}var gg=Ca.ReactCurrentDispatcher,Oy=Ca.ReactCurrentBatchConfig,Dl=0,wn=null,Qn=null,oi=null,Yg=!1,wd=!1,Jd=0,AF=0;function Si(){throw Error(Te(321))}function DS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!hs(n[t],e[t]))return!1;return!0}function BS(n,e,t,i,r,s){if(Dl=s,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gg.current=n===null||n.memoizedState===null?TF:PF,n=t(i,r),wd){s=0;do{if(wd=!1,Jd=0,25<=s)throw Error(Te(301));s+=1,oi=Qn=null,e.updateQueue=null,gg.current=RF,n=t(i,r)}while(wd)}if(gg.current=Zg,e=Qn!==null&&Qn.next!==null,Dl=0,oi=Qn=wn=null,Yg=!1,e)throw Error(Te(300));return n}function IS(){var n=Jd!==0;return Jd=0,n}function Cs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?wn.memoizedState=oi=n:oi=oi.next=n,oi}function Gr(){if(Qn===null){var n=wn.alternate;n=n!==null?n.memoizedState:null}else n=Qn.next;var e=oi===null?wn.memoizedState:oi.next;if(e!==null)oi=e,Qn=n;else{if(n===null)throw Error(Te(310));Qn=n,n={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},oi===null?wn.memoizedState=oi=n:oi=oi.next=n}return oi}function Xd(n,e){return typeof e=="function"?e(n):e}function zy(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var i=Qn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Dl&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=i):l=l.next=h,wn.lanes|=d,Bl|=d}u=u.next}while(u!==null&&u!==s);l===null?a=i:l.next=o,hs(i,e.memoizedState)||(Yi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,wn.lanes|=s,Bl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Hy(n){var e=Gr(),t=e.queue;if(t===null)throw Error(Te(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);hs(s,e.memoizedState)||(Yi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function w3(){}function S3(n,e){var t=wn,i=Gr(),r=e(),s=!hs(i.memoizedState,r);if(s&&(i.memoizedState=r,Yi=!0),i=i.queue,LS(A3.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||oi!==null&&oi.memoizedState.tag&1){if(t.flags|=2048,Kd(9,_3.bind(null,t,i,r,e),void 0,null),ci===null)throw Error(Te(349));Dl&30||M3(t,e,r)}return r}function M3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function _3(n,e,t,i){e.value=t,e.getSnapshot=i,b3(e)&&C3(n)}function A3(n,e,t){return t(function(){b3(e)&&C3(n)})}function b3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!hs(n,t)}catch{return!0}}function C3(n){var e=Sa(n,1);e!==null&&us(e,n,1,-1)}function q2(n){var e=Cs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:n},e.queue=n,n=n.dispatch=EF.bind(null,wn,n),[e.memoizedState,n]}function Kd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=wn.updateQueue,e===null?(e={lastEffect:null,stores:null},wn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function E3(){return Gr().memoizedState}function vg(n,e,t,i){var r=Cs();wn.flags|=n,r.memoizedState=Kd(1|e,t,void 0,i===void 0?null:i)}function T0(n,e,t,i){var r=Gr();i=i===void 0?null:i;var s=void 0;if(Qn!==null){var a=Qn.memoizedState;if(s=a.destroy,i!==null&&DS(i,a.deps)){r.memoizedState=Kd(e,t,s,i);return}}wn.flags|=n,r.memoizedState=Kd(1|e,t,s,i)}function $2(n,e){return vg(8390656,8,n,e)}function LS(n,e){return T0(2048,8,n,e)}function T3(n,e){return T0(4,2,n,e)}function P3(n,e){return T0(4,4,n,e)}function R3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function D3(n,e,t){return t=t!=null?t.concat([n]):null,T0(4,4,R3.bind(null,e,n),t)}function NS(){}function B3(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&DS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function I3(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&DS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function L3(n,e,t){return Dl&21?(hs(t,e)||(t=kP(),wn.lanes|=t,Bl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Yi=!0),n.memoizedState=t)}function bF(n,e){var t=qt;qt=t!==0&&4>t?t:4,n(!0);var i=Oy.transition;Oy.transition={};try{n(!1),e()}finally{qt=t,Oy.transition=i}}function N3(){return Gr().memoizedState}function CF(n,e,t){var i=yo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},F3(n))k3(e,t);else if(t=h3(n,e,t,i),t!==null){var r=Oi();us(t,n,i,r),U3(t,e,i)}}function EF(n,e,t){var i=yo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(F3(n))k3(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,hs(o,a)){var l=e.interleaved;l===null?(r.next=r,CS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=h3(n,e,r,i),t!==null&&(r=Oi(),us(t,n,i,r),U3(t,e,i))}}function F3(n){var e=n.alternate;return n===wn||e!==null&&e===wn}function k3(n,e){wd=Yg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function U3(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,dS(n,t)}}var Zg={readContext:Hr,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},TF={readContext:Hr,useCallback:function(n,e){return Cs().memoizedState=[n,e===void 0?null:e],n},useContext:Hr,useEffect:$2,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,vg(4194308,4,R3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return vg(4194308,4,n,e)},useInsertionEffect:function(n,e){return vg(4,2,n,e)},useMemo:function(n,e){var t=Cs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Cs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=CF.bind(null,wn,n),[i.memoizedState,n]},useRef:function(n){var e=Cs();return n={current:n},e.memoizedState=n},useState:q2,useDebugValue:NS,useDeferredValue:function(n){return Cs().memoizedState=n},useTransition:function(){var n=q2(!1),e=n[0];return n=bF.bind(null,n[1]),Cs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=wn,r=Cs();if(dn){if(t===void 0)throw Error(Te(407));t=t()}else{if(t=e(),ci===null)throw Error(Te(349));Dl&30||M3(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,$2(A3.bind(null,i,s,n),[n]),i.flags|=2048,Kd(9,_3.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Cs(),e=ci.identifierPrefix;if(dn){var t=da,i=fa;t=(i&~(1<<32-cs(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=AF++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},PF={readContext:Hr,useCallback:B3,useContext:Hr,useEffect:LS,useImperativeHandle:D3,useInsertionEffect:T3,useLayoutEffect:P3,useMemo:I3,useReducer:zy,useRef:E3,useState:function(){return zy(Xd)},useDebugValue:NS,useDeferredValue:function(n){var e=Gr();return L3(e,Qn.memoizedState,n)},useTransition:function(){var n=zy(Xd)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:w3,useSyncExternalStore:S3,useId:N3,unstable_isNewReconciler:!1},RF={readContext:Hr,useCallback:B3,useContext:Hr,useEffect:LS,useImperativeHandle:D3,useInsertionEffect:T3,useLayoutEffect:P3,useMemo:I3,useReducer:Hy,useRef:E3,useState:function(){return Hy(Xd)},useDebugValue:NS,useDeferredValue:function(n){var e=Gr();return Qn===null?e.memoizedState=n:L3(e,Qn.memoizedState,n)},useTransition:function(){var n=Hy(Xd)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:w3,useSyncExternalStore:S3,useId:N3,unstable_isNewReconciler:!1};function bu(n,e){try{var t="",i=e;do t+=rN(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Gy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function B1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var DF=typeof WeakMap=="function"?WeakMap:Map;function O3(n,e,t){t=va(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){$g||($g=!0,G1=i),B1(n,e)},t}function z3(n,e,t){t=va(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){B1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){B1(n,e),typeof i!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function eb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new DF;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=jF.bind(null,n,e,t),e.then(n,n))}function tb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function nb(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=va(-1,1),e.tag=2,go(t,e,1))),t.lanes|=1),n)}var BF=Ca.ReactCurrentOwner,Yi=!1;function ki(n,e,t,i){e.child=n===null?y3(e,null,t,i):_u(e,n.child,t,i)}function ib(n,e,t,i,r){t=t.render;var s=e.ref;return du(e,r),i=BS(n,e,t,i,s,r),t=IS(),n!==null&&!Yi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ma(n,e,r)):(dn&&t&&wS(e),e.flags|=1,ki(n,e,i,r),e.child)}function rb(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!VS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,H3(n,e,s,i,r)):(n=Sg(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:zd,t(a,i)&&n.ref===e.ref)return Ma(n,e,r)}return e.flags|=1,n=xo(s,i),n.ref=e.ref,n.return=e,e.child=n}function H3(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(zd(s,i)&&n.ref===e.ref)if(Yi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Yi=!0);else return e.lanes=n.lanes,Ma(n,e,r)}return I1(n,e,t,i,r)}function G3(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Yc,lr),lr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rn(Yc,lr),lr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,rn(Yc,lr),lr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,rn(Yc,lr),lr|=i;return ki(n,e,r,t),e.child}function V3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function I1(n,e,t,i,r){var s=qi(t)?Pl:Ti.current;return s=Su(e,s),du(e,r),t=BS(n,e,t,i,s,r),i=IS(),n!==null&&!Yi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ma(n,e,r)):(dn&&i&&wS(e),e.flags|=1,ki(n,e,t,r),e.child)}function sb(n,e,t,i,r){if(qi(t)){var s=!0;Vg(e)}else s=!1;if(du(e,r),e.stateNode===null)yg(n,e),g3(e,t,i),D1(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Hr(u):(u=qi(t)?Pl:Ti.current,u=Su(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&Y2(e,a,i,u),eo=!1;var p=e.memoizedState;a.state=p,Kg(e,i,a,r),l=e.memoizedState,o!==i||p!==l||Zi.current||eo?(typeof d=="function"&&(R1(e,t,d,i),l=e.memoizedState),(o=eo||Q2(e,t,o,i,p,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,p3(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:es(e.type,o),a.props=u,h=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Hr(l):(l=qi(t)?Pl:Ti.current,l=Su(e,l));var v=t.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==l)&&Y2(e,a,i,l),eo=!1,p=e.memoizedState,a.state=p,Kg(e,i,a,r);var m=e.memoizedState;o!==h||p!==m||Zi.current||eo?(typeof v=="function"&&(R1(e,t,v,i),m=e.memoizedState),(u=eo||Q2(e,t,u,i,p,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return L1(n,e,t,i,s,r)}function L1(n,e,t,i,r,s){V3(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&W2(e,t,!1),Ma(n,e,s);i=e.stateNode,BF.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=_u(e,n.child,null,s),e.child=_u(e,null,o,s)):ki(n,e,o,s),e.memoizedState=i.state,r&&W2(e,t,!0),e.child}function W3(n){var e=n.stateNode;e.pendingContext?V2(n,e.pendingContext,e.pendingContext!==e.context):e.context&&V2(n,e.context,!1),TS(n,e.containerInfo)}function ab(n,e,t,i,r){return Mu(),MS(r),e.flags|=256,ki(n,e,t,i),e.child}var N1={dehydrated:null,treeContext:null,retryLane:0};function F1(n){return{baseLanes:n,cachePool:null,transitions:null}}function j3(n,e,t){var i=e.pendingProps,r=gn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),rn(gn,r&1),n===null)return T1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=D0(a,i,0,null),n=_l(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=F1(t),e.memoizedState=N1,n):FS(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return IF(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=xo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=xo(o,s):(s=_l(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?F1(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=N1,i}return s=n.child,n=s.sibling,i=xo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function FS(n,e){return e=D0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function am(n,e,t,i){return i!==null&&MS(i),_u(e,n.child,null,t),n=FS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function IF(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=Gy(Error(Te(422))),am(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=D0({mode:"visible",children:i.children},r,0,null),s=_l(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&_u(e,n.child,null,a),e.child.memoizedState=F1(a),e.memoizedState=N1,s);if(!(e.mode&1))return am(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Te(419)),i=Gy(s,i,void 0),am(n,e,a,i)}if(o=(a&n.childLanes)!==0,Yi||o){if(i=ci,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Sa(n,r),us(i,n,r,-1))}return GS(),i=Gy(Error(Te(421))),am(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=JF.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,cr=mo(r.nextSibling),fr=e,dn=!0,rs=null,n!==null&&(Ir[Lr++]=fa,Ir[Lr++]=da,Ir[Lr++]=Rl,fa=n.id,da=n.overflow,Rl=e),e=FS(e,i.children),e.flags|=4096,e)}function ob(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),P1(n.return,e,t)}function Vy(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function J3(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ki(n,e,i.children,t),i=gn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ob(n,t,e);else if(n.tag===19)ob(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rn(gn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Qg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Vy(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Qg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Vy(e,!0,t,null,s);break;case"together":Vy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ma(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Bl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Te(153));if(e.child!==null){for(n=e.child,t=xo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function LF(n,e,t){switch(e.tag){case 3:W3(e),Mu();break;case 5:x3(e);break;case 1:qi(e.type)&&Vg(e);break;case 4:TS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;rn(Jg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rn(gn,gn.current&1),e.flags|=128,null):t&e.child.childLanes?j3(n,e,t):(rn(gn,gn.current&1),n=Ma(n,e,t),n!==null?n.sibling:null);rn(gn,gn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return J3(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rn(gn,gn.current),i)break;return null;case 22:case 23:return e.lanes=0,G3(n,e,t)}return Ma(n,e,t)}var X3,k1,K3,Q3;X3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};k1=function(){};K3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,ml(Ds.current);var s=null;switch(t){case"input":r=s1(n,r),i=s1(n,i),s=[];break;case"select":r=Sn({},r,{value:void 0}),i=Sn({},i,{value:void 0}),s=[];break;case"textarea":r=l1(n,r),i=l1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Hg)}u1(t,i);var a;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Id.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(o=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Id.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&sn("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Q3=function(n,e,t,i){t!==i&&(e.flags|=4)};function Bf(n,e){if(!dn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Mi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function NF(n,e,t){var i=e.pendingProps;switch(SS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(e),null;case 1:return qi(e.type)&&Gg(),Mi(e),null;case 3:return i=e.stateNode,Au(),an(Zi),an(Ti),RS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(rm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rs!==null&&(j1(rs),rs=null))),k1(n,e),Mi(e),null;case 5:PS(e);var r=ml(jd.current);if(t=e.type,n!==null&&e.stateNode!=null)K3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Te(166));return Mi(e),null}if(n=ml(Ds.current),rm(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ps]=e,i[Vd]=s,n=(e.mode&1)!==0,t){case"dialog":sn("cancel",i),sn("close",i);break;case"iframe":case"object":case"embed":sn("load",i);break;case"video":case"audio":for(r=0;r<ud.length;r++)sn(ud[r],i);break;case"source":sn("error",i);break;case"img":case"image":case"link":sn("error",i),sn("load",i);break;case"details":sn("toggle",i);break;case"input":g2(i,s),sn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},sn("invalid",i);break;case"textarea":y2(i,s),sn("invalid",i)}u1(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&im(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&im(i.textContent,o,n),r=["children",""+o]):Id.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&sn("scroll",i)}switch(t){case"input":Qp(i),v2(i,s,!0);break;case"textarea":Qp(i),x2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Hg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=MP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Ps]=e,n[Vd]=i,X3(n,e,!1,!1),e.stateNode=n;e:{switch(a=f1(t,i),t){case"dialog":sn("cancel",n),sn("close",n),r=i;break;case"iframe":case"object":case"embed":sn("load",n),r=i;break;case"video":case"audio":for(r=0;r<ud.length;r++)sn(ud[r],n);r=i;break;case"source":sn("error",n),r=i;break;case"img":case"image":case"link":sn("error",n),sn("load",n),r=i;break;case"details":sn("toggle",n),r=i;break;case"input":g2(n,i),r=s1(n,i),sn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Sn({},i,{value:void 0}),sn("invalid",n);break;case"textarea":y2(n,i),r=l1(n,i),sn("invalid",n);break;default:r=i}u1(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?bP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_P(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ld(n,l):typeof l=="number"&&Ld(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Id.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sn("scroll",n):l!=null&&aS(n,s,l,a))}switch(t){case"input":Qp(n),v2(n,i,!1);break;case"textarea":Qp(n),x2(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Co(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?lu(n,!!i.multiple,s,!1):i.defaultValue!=null&&lu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Hg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mi(e),null;case 6:if(n&&e.stateNode!=null)Q3(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Te(166));if(t=ml(jd.current),ml(Ds.current),rm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ps]=e,(s=i.nodeValue!==t)&&(n=fr,n!==null))switch(n.tag){case 3:im(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&im(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ps]=e,e.stateNode=i}return Mi(e),null;case 13:if(an(gn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dn&&cr!==null&&e.mode&1&&!(e.flags&128))d3(),Mu(),e.flags|=98560,s=!1;else if(s=rm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[Ps]=e}else Mu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mi(e),s=!1}else rs!==null&&(j1(rs),rs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||gn.current&1?Yn===0&&(Yn=3):GS())),e.updateQueue!==null&&(e.flags|=4),Mi(e),null);case 4:return Au(),k1(n,e),n===null&&Hd(e.stateNode.containerInfo),Mi(e),null;case 10:return bS(e.type._context),Mi(e),null;case 17:return qi(e.type)&&Gg(),Mi(e),null;case 19:if(an(gn),s=e.memoizedState,s===null)return Mi(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Bf(s,!1);else{if(Yn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Qg(n),a!==null){for(e.flags|=128,Bf(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rn(gn,gn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ln()>Cu&&(e.flags|=128,i=!0,Bf(s,!1),e.lanes=4194304)}else{if(!i)if(n=Qg(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Bf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!dn)return Mi(e),null}else 2*Ln()-s.renderingStartTime>Cu&&t!==1073741824&&(e.flags|=128,i=!0,Bf(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ln(),e.sibling=null,t=gn.current,rn(gn,i?t&1|2:t&1),e):(Mi(e),null);case 22:case 23:return HS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?lr&1073741824&&(Mi(e),e.subtreeFlags&6&&(e.flags|=8192)):Mi(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function FF(n,e){switch(SS(e),e.tag){case 1:return qi(e.type)&&Gg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Au(),an(Zi),an(Ti),RS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PS(e),null;case 13:if(an(gn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Mu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return an(gn),null;case 4:return Au(),null;case 10:return bS(e.type._context),null;case 22:case 23:return HS(),null;case 24:return null;default:return null}}var om=!1,bi=!1,kF=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Qc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){En(n,e,i)}else t.current=null}function U1(n,e,t){try{t()}catch(i){En(n,e,i)}}var lb=!1;function UF(n,e){if(S1=Ug,n=$P(),xS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=n,p=null;t:for(;;){for(var v;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)p=h,h=v;for(;;){if(h===n)break t;if(p===t&&++u===r&&(o=a),p===s&&++d===i&&(l=a),(v=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=v}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(M1={focusedElem:n,selectionRange:t},Ug=!1,Ke=e;Ke!==null;)if(e=Ke,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ke=n;else for(;Ke!==null;){e=Ke;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,x=e.stateNode,S=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:es(e.type,g),w);x.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(A){En(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}return m=lb,lb=!1,m}function Sd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&U1(e,t,s)}r=r.next}while(r!==i)}}function P0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function O1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Y3(n){var e=n.alternate;e!==null&&(n.alternate=null,Y3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ps],delete e[Vd],delete e[b1],delete e[wF],delete e[SF])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Z3(n){return n.tag===5||n.tag===3||n.tag===4}function cb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Z3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function z1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Hg));else if(i!==4&&(n=n.child,n!==null))for(z1(n,e,t),n=n.sibling;n!==null;)z1(n,e,t),n=n.sibling}function H1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(H1(n,e,t),n=n.sibling;n!==null;)H1(n,e,t),n=n.sibling}var hi=null,ns=!1;function Ha(n,e,t){for(t=t.child;t!==null;)q3(n,e,t),t=t.sibling}function q3(n,e,t){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(S0,t)}catch{}switch(t.tag){case 5:bi||Qc(t,e);case 6:var i=hi,r=ns;hi=null,Ha(n,e,t),hi=i,ns=r,hi!==null&&(ns?(n=hi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):hi.removeChild(t.stateNode));break;case 18:hi!==null&&(ns?(n=hi,t=t.stateNode,n.nodeType===8?Fy(n.parentNode,t):n.nodeType===1&&Fy(n,t),Ud(n)):Fy(hi,t.stateNode));break;case 4:i=hi,r=ns,hi=t.stateNode.containerInfo,ns=!0,Ha(n,e,t),hi=i,ns=r;break;case 0:case 11:case 14:case 15:if(!bi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&U1(t,e,a),r=r.next}while(r!==i)}Ha(n,e,t);break;case 1:if(!bi&&(Qc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){En(t,e,o)}Ha(n,e,t);break;case 21:Ha(n,e,t);break;case 22:t.mode&1?(bi=(i=bi)||t.memoizedState!==null,Ha(n,e,t),bi=i):Ha(n,e,t);break;default:Ha(n,e,t)}}function ub(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new kF),e.forEach(function(i){var r=XF.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Qr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:hi=o.stateNode,ns=!1;break e;case 3:hi=o.stateNode.containerInfo,ns=!0;break e;case 4:hi=o.stateNode.containerInfo,ns=!0;break e}o=o.return}if(hi===null)throw Error(Te(160));q3(s,a,r),hi=null,ns=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){En(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$3(e,n),e=e.sibling}function $3(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qr(e,n),bs(n),i&4){try{Sd(3,n,n.return),P0(3,n)}catch(g){En(n,n.return,g)}try{Sd(5,n,n.return)}catch(g){En(n,n.return,g)}}break;case 1:Qr(e,n),bs(n),i&512&&t!==null&&Qc(t,t.return);break;case 5:if(Qr(e,n),bs(n),i&512&&t!==null&&Qc(t,t.return),n.flags&32){var r=n.stateNode;try{Ld(r,"")}catch(g){En(n,n.return,g)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&wP(r,s),f1(o,a);var u=f1(o,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?bP(r,h):d==="dangerouslySetInnerHTML"?_P(r,h):d==="children"?Ld(r,h):aS(r,d,h,u)}switch(o){case"input":a1(r,s);break;case"textarea":SP(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?lu(r,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?lu(r,!!s.multiple,s.defaultValue,!0):lu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Vd]=s}catch(g){En(n,n.return,g)}}break;case 6:if(Qr(e,n),bs(n),i&4){if(n.stateNode===null)throw Error(Te(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(g){En(n,n.return,g)}}break;case 3:if(Qr(e,n),bs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ud(e.containerInfo)}catch(g){En(n,n.return,g)}break;case 4:Qr(e,n),bs(n);break;case 13:Qr(e,n),bs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(OS=Ln())),i&4&&ub(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(bi=(u=bi)||d,Qr(e,n),bi=u):Qr(e,n),bs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Ke=n,d=n.child;d!==null;){for(h=Ke=d;Ke!==null;){switch(p=Ke,v=p.child,p.tag){case 0:case 11:case 14:case 15:Sd(4,p,p.return);break;case 1:Qc(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){En(i,t,g)}}break;case 5:Qc(p,p.return);break;case 22:if(p.memoizedState!==null){db(h);continue}}v!==null?(v.return=p,Ke=v):db(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=AP("display",a))}catch(g){En(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){En(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qr(e,n),bs(n),i&4&&ub(n);break;case 21:break;default:Qr(e,n),bs(n)}}function bs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Z3(t)){var i=t;break e}t=t.return}throw Error(Te(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ld(r,""),i.flags&=-33);var s=cb(n);H1(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=cb(n);z1(n,o,a);break;default:throw Error(Te(161))}}catch(l){En(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function OF(n,e,t){Ke=n,eR(n)}function eR(n,e,t){for(var i=(n.mode&1)!==0;Ke!==null;){var r=Ke,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||om;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||bi;o=om;var u=bi;if(om=a,(bi=l)&&!u)for(Ke=r;Ke!==null;)a=Ke,l=a.child,a.tag===22&&a.memoizedState!==null?hb(r):l!==null?(l.return=a,Ke=l):hb(r);for(;s!==null;)Ke=s,eR(s),s=s.sibling;Ke=r,om=o,bi=u}fb(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ke=s):fb(n)}}function fb(n){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bi||P0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!bi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:es(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&K2(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}K2(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ud(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}bi||e.flags&512&&O1(e)}catch(p){En(e,e.return,p)}}if(e===n){Ke=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function db(n){for(;Ke!==null;){var e=Ke;if(e===n){Ke=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function hb(n){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{P0(4,e)}catch(l){En(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){En(e,r,l)}}var s=e.return;try{O1(e)}catch(l){En(e,s,l)}break;case 5:var a=e.return;try{O1(e)}catch(l){En(e,a,l)}}}catch(l){En(e,e.return,l)}if(e===n){Ke=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ke=o;break}Ke=e.return}}var zF=Math.ceil,qg=Ca.ReactCurrentDispatcher,kS=Ca.ReactCurrentOwner,zr=Ca.ReactCurrentBatchConfig,zt=0,ci=null,Gn=null,mi=0,lr=0,Yc=Lo(0),Yn=0,Qd=null,Bl=0,R0=0,US=0,Md=null,Qi=null,OS=0,Cu=1/0,sa=null,$g=!1,G1=null,vo=null,lm=!1,ao=null,e0=0,_d=0,V1=null,xg=-1,wg=0;function Oi(){return zt&6?Ln():xg!==-1?xg:xg=Ln()}function yo(n){return n.mode&1?zt&2&&mi!==0?mi&-mi:_F.transition!==null?(wg===0&&(wg=kP()),wg):(n=qt,n!==0||(n=window.event,n=n===void 0?16:WP(n.type)),n):1}function us(n,e,t,i){if(50<_d)throw _d=0,V1=null,Error(Te(185));Sh(n,t,i),(!(zt&2)||n!==ci)&&(n===ci&&(!(zt&2)&&(R0|=t),Yn===4&&ro(n,mi)),$i(n,i),t===1&&zt===0&&!(e.mode&1)&&(Cu=Ln()+500,C0&&No()))}function $i(n,e){var t=n.callbackNode;_N(n,e);var i=kg(n,n===ci?mi:0);if(i===0)t!==null&&M2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&M2(t),e===1)n.tag===0?MF(pb.bind(null,n)):c3(pb.bind(null,n)),yF(function(){!(zt&6)&&No()}),t=null;else{switch(UP(i)){case 1:t=fS;break;case 4:t=NP;break;case 16:t=Fg;break;case 536870912:t=FP;break;default:t=Fg}t=lR(t,tR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function tR(n,e){if(xg=-1,wg=0,zt&6)throw Error(Te(327));var t=n.callbackNode;if(hu()&&n.callbackNode!==t)return null;var i=kg(n,n===ci?mi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=t0(n,i);else{e=i;var r=zt;zt|=2;var s=iR();(ci!==n||mi!==e)&&(sa=null,Cu=Ln()+500,Ml(n,e));do try{VF();break}catch(o){nR(n,o)}while(1);AS(),qg.current=s,zt=r,Gn!==null?e=0:(ci=null,mi=0,e=Yn)}if(e!==0){if(e===2&&(r=g1(n),r!==0&&(i=r,e=W1(n,r))),e===1)throw t=Qd,Ml(n,0),ro(n,i),$i(n,Ln()),t;if(e===6)ro(n,i);else{if(r=n.current.alternate,!(i&30)&&!HF(r)&&(e=t0(n,i),e===2&&(s=g1(n),s!==0&&(i=s,e=W1(n,s))),e===1))throw t=Qd,Ml(n,0),ro(n,i),$i(n,Ln()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Te(345));case 2:ol(n,Qi,sa);break;case 3:if(ro(n,i),(i&130023424)===i&&(e=OS+500-Ln(),10<e)){if(kg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Oi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=A1(ol.bind(null,n,Qi,sa),e);break}ol(n,Qi,sa);break;case 4:if(ro(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-cs(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zF(i/1960))-i,10<i){n.timeoutHandle=A1(ol.bind(null,n,Qi,sa),i);break}ol(n,Qi,sa);break;case 5:ol(n,Qi,sa);break;default:throw Error(Te(329))}}}return $i(n,Ln()),n.callbackNode===t?tR.bind(null,n):null}function W1(n,e){var t=Md;return n.current.memoizedState.isDehydrated&&(Ml(n,e).flags|=256),n=t0(n,e),n!==2&&(e=Qi,Qi=t,e!==null&&j1(e)),n}function j1(n){Qi===null?Qi=n:Qi.push.apply(Qi,n)}function HF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!hs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ro(n,e){for(e&=~US,e&=~R0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-cs(e),i=1<<t;n[t]=-1,e&=~i}}function pb(n){if(zt&6)throw Error(Te(327));hu();var e=kg(n,0);if(!(e&1))return $i(n,Ln()),null;var t=t0(n,e);if(n.tag!==0&&t===2){var i=g1(n);i!==0&&(e=i,t=W1(n,i))}if(t===1)throw t=Qd,Ml(n,0),ro(n,e),$i(n,Ln()),t;if(t===6)throw Error(Te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ol(n,Qi,sa),$i(n,Ln()),null}function zS(n,e){var t=zt;zt|=1;try{return n(e)}finally{zt=t,zt===0&&(Cu=Ln()+500,C0&&No())}}function Il(n){ao!==null&&ao.tag===0&&!(zt&6)&&hu();var e=zt;zt|=1;var t=zr.transition,i=qt;try{if(zr.transition=null,qt=1,n)return n()}finally{qt=i,zr.transition=t,zt=e,!(zt&6)&&No()}}function HS(){lr=Yc.current,an(Yc)}function Ml(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,vF(t)),Gn!==null)for(t=Gn.return;t!==null;){var i=t;switch(SS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gg();break;case 3:Au(),an(Zi),an(Ti),RS();break;case 5:PS(i);break;case 4:Au();break;case 13:an(gn);break;case 19:an(gn);break;case 10:bS(i.type._context);break;case 22:case 23:HS()}t=t.return}if(ci=n,Gn=n=xo(n.current,null),mi=lr=e,Yn=0,Qd=null,US=R0=Bl=0,Qi=Md=null,pl!==null){for(e=0;e<pl.length;e++)if(t=pl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}pl=null}return n}function nR(n,e){do{var t=Gn;try{if(AS(),gg.current=Zg,Yg){for(var i=wn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Yg=!1}if(Dl=0,oi=Qn=wn=null,wd=!1,Jd=0,kS.current=null,t===null||t.return===null){Yn=1,Qd=e,Gn=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=mi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=tb(a);if(v!==null){v.flags&=-257,nb(v,a,o,s,e),v.mode&1&&eb(s,u,e),e=v,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){eb(s,u,e),GS();break e}l=Error(Te(426))}}else if(dn&&o.mode&1){var w=tb(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),nb(w,a,o,s,e),MS(bu(l,o));break e}}s=l=bu(l,o),Yn!==4&&(Yn=2),Md===null?Md=[s]:Md.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=O3(s,l,e);X2(s,x);break e;case 1:o=l;var S=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(vo===null||!vo.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=z3(s,o,e);X2(s,A);break e}}s=s.return}while(s!==null)}sR(t)}catch(E){e=E,Gn===t&&t!==null&&(Gn=t=t.return);continue}break}while(1)}function iR(){var n=qg.current;return qg.current=Zg,n===null?Zg:n}function GS(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),ci===null||!(Bl&268435455)&&!(R0&268435455)||ro(ci,mi)}function t0(n,e){var t=zt;zt|=2;var i=iR();(ci!==n||mi!==e)&&(sa=null,Ml(n,e));do try{GF();break}catch(r){nR(n,r)}while(1);if(AS(),zt=t,qg.current=i,Gn!==null)throw Error(Te(261));return ci=null,mi=0,Yn}function GF(){for(;Gn!==null;)rR(Gn)}function VF(){for(;Gn!==null&&!pN();)rR(Gn)}function rR(n){var e=oR(n.alternate,n,lr);n.memoizedProps=n.pendingProps,e===null?sR(n):Gn=e,kS.current=null}function sR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=FF(t,e),t!==null){t.flags&=32767,Gn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yn=6,Gn=null;return}}else if(t=NF(t,e,lr),t!==null){Gn=t;return}if(e=e.sibling,e!==null){Gn=e;return}Gn=e=n}while(e!==null);Yn===0&&(Yn=5)}function ol(n,e,t){var i=qt,r=zr.transition;try{zr.transition=null,qt=1,WF(n,e,t,i)}finally{zr.transition=r,qt=i}return null}function WF(n,e,t,i){do hu();while(ao!==null);if(zt&6)throw Error(Te(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Te(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(AN(n,s),n===ci&&(Gn=ci=null,mi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||lm||(lm=!0,lR(Fg,function(){return hu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=zr.transition,zr.transition=null;var a=qt;qt=1;var o=zt;zt|=4,kS.current=null,UF(n,t),$3(t,n),uF(M1),Ug=!!S1,M1=S1=null,n.current=t,OF(t),mN(),zt=o,qt=a,zr.transition=s}else n.current=t;if(lm&&(lm=!1,ao=n,e0=r),s=n.pendingLanes,s===0&&(vo=null),yN(t.stateNode),$i(n,Ln()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if($g)throw $g=!1,n=G1,G1=null,n;return e0&1&&n.tag!==0&&hu(),s=n.pendingLanes,s&1?n===V1?_d++:(_d=0,V1=n):_d=0,No(),null}function hu(){if(ao!==null){var n=UP(e0),e=zr.transition,t=qt;try{if(zr.transition=null,qt=16>n?16:n,ao===null)var i=!1;else{if(n=ao,ao=null,e0=0,zt&6)throw Error(Te(331));var r=zt;for(zt|=4,Ke=n.current;Ke!==null;){var s=Ke,a=s.child;if(Ke.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Ke=u;Ke!==null;){var d=Ke;switch(d.tag){case 0:case 11:case 15:Sd(8,d,s)}var h=d.child;if(h!==null)h.return=d,Ke=h;else for(;Ke!==null;){d=Ke;var p=d.sibling,v=d.return;if(Y3(d),d===u){Ke=null;break}if(p!==null){p.return=v,Ke=p;break}Ke=v}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ke=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ke=a;else e:for(;Ke!==null;){if(s=Ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ke=x;break e}Ke=s.return}}var S=n.current;for(Ke=S;Ke!==null;){a=Ke;var M=a.child;if(a.subtreeFlags&2064&&M!==null)M.return=a,Ke=M;else e:for(a=S;Ke!==null;){if(o=Ke,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:P0(9,o)}}catch(E){En(o,o.return,E)}if(o===a){Ke=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Ke=A;break e}Ke=o.return}}if(zt=r,No(),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(S0,n)}catch{}i=!0}return i}finally{qt=t,zr.transition=e}}return!1}function mb(n,e,t){e=bu(t,e),e=O3(n,e,1),n=go(n,e,1),e=Oi(),n!==null&&(Sh(n,1,e),$i(n,e))}function En(n,e,t){if(n.tag===3)mb(n,n,t);else for(;e!==null;){if(e.tag===3){mb(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vo===null||!vo.has(i))){n=bu(t,n),n=z3(e,n,1),e=go(e,n,1),n=Oi(),e!==null&&(Sh(e,1,n),$i(e,n));break}}e=e.return}}function jF(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Oi(),n.pingedLanes|=n.suspendedLanes&t,ci===n&&(mi&t)===t&&(Yn===4||Yn===3&&(mi&130023424)===mi&&500>Ln()-OS?Ml(n,0):US|=t),$i(n,e)}function aR(n,e){e===0&&(n.mode&1?(e=qp,qp<<=1,!(qp&130023424)&&(qp=4194304)):e=1);var t=Oi();n=Sa(n,e),n!==null&&(Sh(n,e,t),$i(n,t))}function JF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aR(n,t)}function XF(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Te(314))}i!==null&&i.delete(e),aR(n,t)}var oR;oR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Zi.current)Yi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Yi=!1,LF(n,e,t);Yi=!!(n.flags&131072)}else Yi=!1,dn&&e.flags&1048576&&u3(e,jg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;yg(n,e),n=e.pendingProps;var r=Su(e,Ti.current);du(e,t),r=BS(null,e,i,n,r,t);var s=IS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(i)?(s=!0,Vg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ES(e),r.updater=E0,e.stateNode=r,r._reactInternals=e,D1(e,i,n,t),e=L1(null,e,i,!0,s,t)):(e.tag=0,dn&&s&&wS(e),ki(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(yg(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=QF(i),n=es(i,n),r){case 0:e=I1(null,e,i,n,t);break e;case 1:e=sb(null,e,i,n,t);break e;case 11:e=ib(null,e,i,n,t);break e;case 14:e=rb(null,e,i,es(i.type,n),t);break e}throw Error(Te(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:es(i,r),I1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:es(i,r),sb(n,e,i,r,t);case 3:e:{if(W3(e),n===null)throw Error(Te(387));i=e.pendingProps,s=e.memoizedState,r=s.element,p3(n,e),Kg(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=bu(Error(Te(423)),e),e=ab(n,e,i,t,r);break e}else if(i!==r){r=bu(Error(Te(424)),e),e=ab(n,e,i,t,r);break e}else for(cr=mo(e.stateNode.containerInfo.firstChild),fr=e,dn=!0,rs=null,t=y3(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Mu(),i===r){e=Ma(n,e,t);break e}ki(n,e,i,t)}e=e.child}return e;case 5:return x3(e),n===null&&T1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,_1(i,r)?a=null:s!==null&&_1(i,s)&&(e.flags|=32),V3(n,e),ki(n,e,a,t),e.child;case 6:return n===null&&T1(e),null;case 13:return j3(n,e,t);case 4:return TS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=_u(e,null,i,t):ki(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:es(i,r),ib(n,e,i,r,t);case 7:return ki(n,e,e.pendingProps,t),e.child;case 8:return ki(n,e,e.pendingProps.children,t),e.child;case 12:return ki(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,rn(Jg,i._currentValue),i._currentValue=a,s!==null)if(hs(s.value,a)){if(s.children===r.children&&!Zi.current){e=Ma(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=va(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),P1(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Te(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),P1(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ki(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,du(e,t),r=Hr(r),i=i(r),e.flags|=1,ki(n,e,i,t),e.child;case 14:return i=e.type,r=es(i,e.pendingProps),r=es(i.type,r),rb(n,e,i,r,t);case 15:return H3(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:es(i,r),yg(n,e),e.tag=1,qi(i)?(n=!0,Vg(e)):n=!1,du(e,t),g3(e,i,r),D1(e,i,r,t),L1(null,e,i,!0,n,t);case 19:return J3(n,e,t);case 22:return G3(n,e,t)}throw Error(Te(156,e.tag))};function lR(n,e){return LP(n,e)}function KF(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(n,e,t,i){return new KF(n,e,t,i)}function VS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function QF(n){if(typeof n=="function")return VS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===lS)return 11;if(n===cS)return 14}return 2}function xo(n,e){var t=n.alternate;return t===null?(t=Ur(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Sg(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")VS(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case zc:return _l(t.children,r,s,e);case oS:a=8,r|=8;break;case t1:return n=Ur(12,t,e,r|2),n.elementType=t1,n.lanes=s,n;case n1:return n=Ur(13,t,e,r),n.elementType=n1,n.lanes=s,n;case i1:return n=Ur(19,t,e,r),n.elementType=i1,n.lanes=s,n;case vP:return D0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case mP:a=10;break e;case gP:a=9;break e;case lS:a=11;break e;case cS:a=14;break e;case $a:a=16,i=null;break e}throw Error(Te(130,n==null?n:typeof n,""))}return e=Ur(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function _l(n,e,t,i){return n=Ur(7,n,i,e),n.lanes=t,n}function D0(n,e,t,i){return n=Ur(22,n,i,e),n.elementType=vP,n.lanes=t,n.stateNode={isHidden:!1},n}function Wy(n,e,t){return n=Ur(6,n,null,e),n.lanes=t,n}function jy(n,e,t){return e=Ur(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function YF(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=by(0),this.expirationTimes=by(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=by(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function WS(n,e,t,i,r,s,a,o,l){return n=new YF(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ur(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ES(s),n}function ZF(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function cR(n){if(!n)return Eo;n=n._reactInternals;e:{if(Hl(n)!==n||n.tag!==1)throw Error(Te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(n.tag===1){var t=n.type;if(qi(t))return l3(n,t,e)}return e}function uR(n,e,t,i,r,s,a,o,l){return n=WS(t,i,!0,n,r,s,a,o,l),n.context=cR(null),t=n.current,i=Oi(),r=yo(t),s=va(i,r),s.callback=e??null,go(t,s,r),n.current.lanes=r,Sh(n,r,i),$i(n,i),n}function B0(n,e,t,i){var r=e.current,s=Oi(),a=yo(r);return t=cR(t),e.context===null?e.context=t:e.pendingContext=t,e=va(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=go(r,e,a),n!==null&&(us(n,r,a,s),mg(n,r,a)),a}function n0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function jS(n,e){gb(n,e),(n=n.alternate)&&gb(n,e)}function qF(){return null}var fR=typeof reportError=="function"?reportError:function(n){console.error(n)};function JS(n){this._internalRoot=n}I0.prototype.render=JS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Te(409));B0(n,e,null,null)};I0.prototype.unmount=JS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Il(function(){B0(null,n,null,null)}),e[wa]=null}};function I0(n){this._internalRoot=n}I0.prototype.unstable_scheduleHydration=function(n){if(n){var e=HP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<io.length&&e!==0&&e<io[t].priority;t++);io.splice(t,0,n),t===0&&VP(n)}};function XS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function L0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function vb(){}function $F(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=n0(a);s.call(u)}}var a=uR(e,i,n,0,null,!1,!1,"",vb);return n._reactRootContainer=a,n[wa]=a.current,Hd(n.nodeType===8?n.parentNode:n),Il(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var u=n0(l);o.call(u)}}var l=WS(n,0,!1,null,null,!1,!1,"",vb);return n._reactRootContainer=l,n[wa]=l.current,Hd(n.nodeType===8?n.parentNode:n),Il(function(){B0(e,l,t,i)}),l}function N0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=n0(a);o.call(l)}}B0(e,a,n,r)}else a=$F(t,e,n,r,i);return n0(a)}OP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=cd(e.pendingLanes);t!==0&&(dS(e,t|1),$i(e,Ln()),!(zt&6)&&(Cu=Ln()+500,No()))}break;case 13:Il(function(){var i=Sa(n,1);if(i!==null){var r=Oi();us(i,n,1,r)}}),jS(n,1)}};hS=function(n){if(n.tag===13){var e=Sa(n,134217728);if(e!==null){var t=Oi();us(e,n,134217728,t)}jS(n,134217728)}};zP=function(n){if(n.tag===13){var e=yo(n),t=Sa(n,e);if(t!==null){var i=Oi();us(t,n,e,i)}jS(n,e)}};HP=function(){return qt};GP=function(n,e){var t=qt;try{return qt=n,e()}finally{qt=t}};h1=function(n,e,t){switch(e){case"input":if(a1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=b0(i);if(!r)throw Error(Te(90));xP(i),a1(i,r)}}}break;case"textarea":SP(n,t);break;case"select":e=t.value,e!=null&&lu(n,!!t.multiple,e,!1)}};TP=zS;PP=Il;var e4={usingClientEntryPoint:!1,Events:[_h,Wc,b0,CP,EP,zS]},If={findFiberByHostInstance:hl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},t4={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=BP(n),n===null?null:n.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||qF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{S0=cm.inject(t4),Rs=cm}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e4;mr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XS(e))throw Error(Te(200));return ZF(n,e,null,t)};mr.createRoot=function(n,e){if(!XS(n))throw Error(Te(299));var t=!1,i="",r=fR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=WS(n,1,!1,null,null,t,!1,i,r),n[wa]=e.current,Hd(n.nodeType===8?n.parentNode:n),new JS(e)};mr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Te(188)):(n=Object.keys(n).join(","),Error(Te(268,n)));return n=BP(e),n=n===null?null:n.stateNode,n};mr.flushSync=function(n){return Il(n)};mr.hydrate=function(n,e,t){if(!L0(e))throw Error(Te(200));return N0(null,n,e,!0,t)};mr.hydrateRoot=function(n,e,t){if(!XS(n))throw Error(Te(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=fR;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=uR(e,null,n,1,t??null,r,!1,s,a),n[wa]=e.current,Hd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new I0(e)};mr.render=function(n,e,t){if(!L0(e))throw Error(Te(200));return N0(null,n,e,!1,t)};mr.unmountComponentAtNode=function(n){if(!L0(n))throw Error(Te(40));return n._reactRootContainer?(Il(function(){N0(null,null,n,!1,function(){n._reactRootContainer=null,n[wa]=null})}),!0):!1};mr.unstable_batchedUpdates=zS;mr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!L0(t))throw Error(Te(200));if(n==null||n._reactInternals===void 0)throw Error(Te(38));return N0(n,e,t,!1,i)};mr.version="18.2.0-next-9e3b772b8-20220608";function dR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dR)}catch(n){console.error(n)}}dR(),uP.exports=mr;var n4=uP.exports,yb=n4;$x.createRoot=yb.createRoot,$x.hydrateRoot=yb.hydrateRoot;function Eu(){return Eu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Eu.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ea="148",i4={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r4={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},hR=0,J1=1,pR=2,s4=3,a4=0,KS=1,QS=2,Zc=3,Ns=0,pi=1,ha=2,fd=3,ln=0,Al=1,X1=2,K1=3,Q1=4,mR=5,cl=100,gR=101,vR=102,Y1=103,Z1=104,yR=200,xR=201,wR=202,SR=203,YS=204,ZS=205,MR=206,_R=207,AR=208,bR=209,CR=210,qS=0,$S=1,i0=2,Yd=3,Zd=4,eM=5,tM=6,F0=7,bh=0,ER=1,TR=2,fs=0,PR=1,RR=2,DR=3,nM=4,BR=5,k0=300,To=301,Po=302,qd=303,$d=304,Xu=306,Pi=1e3,Vn=1001,Tu=1002,ht=1003,eh=1004,o4=1004,pu=1005,l4=1005,qe=1006,U0=1007,c4=1007,Fs=1008,u4=1008,cn=1009,IR=1010,LR=1011,iM=1012,NR=1013,pa=1014,Pn=1015,er=1016,FR=1017,kR=1018,wo=1020,UR=1021,OR=1022,pn=1023,O0=1024,zR=1025,So=1026,Ro=1027,z0=1028,HR=1029,rM=1030,GR=1031,VR=1033,Mg=33776,_g=33777,Ag=33778,bg=33779,q1=35840,$1=35841,ew=35842,tw=35843,WR=36196,nw=37492,iw=37496,rw=37808,sw=37809,aw=37810,ow=37811,lw=37812,cw=37813,uw=37814,fw=37815,dw=37816,hw=37817,pw=37818,mw=37819,gw=37820,vw=37821,yw=36492,jR=2200,JR=2201,XR=2202,Pu=2300,Ll=2301,Cg=2302,gl=2400,vl=2401,th=2402,H0=2500,sM=2501,KR=0,aM=1,r0=2,ps=3e3,Wt=3001,ui=3200,ks=3201,Ta=0,QR=1,YR="",is="srgb",Ru="srgb-linear",f4=0,Eg=7680,d4=7681,h4=7682,p4=7683,m4=34055,g4=34056,v4=5386,y4=512,x4=513,w4=514,S4=515,M4=516,_4=517,A4=518,ZR=519,nh=35044,b4=35048,C4=35040,E4=35045,T4=35049,P4=35041,R4=35046,D4=35050,B4=35042,I4="100",s0="300 es",a0=1035;class Vr{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const _i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let xb=1234567;const bl=Math.PI/180,ih=180/Math.PI;function dr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_i[n&255]+_i[n>>8&255]+_i[n>>16&255]+_i[n>>24&255]+"-"+_i[e&255]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[t&63|128]+_i[t>>8&255]+"-"+_i[t>>16&255]+_i[t>>24&255]+_i[i&255]+_i[i>>8&255]+_i[i>>16&255]+_i[i>>24&255]).toLowerCase()}function Nn(n,e,t){return Math.max(e,Math.min(t,n))}function oM(n,e){return(n%e+e)%e}function L4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function N4(n,e,t){return n!==e?(t-n)/(e-n):0}function Ad(n,e,t){return(1-t)*n+t*e}function F4(n,e,t,i){return Ad(n,e,1-Math.exp(-t*i))}function k4(n,e=1){return e-Math.abs(oM(n,e*2)-e)}function U4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function O4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function z4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function H4(n,e){return n+Math.random()*(e-n)}function G4(n){return n*(.5-Math.random())}function V4(n){n!==void 0&&(xb=n);let e=xb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function W4(n){return n*bl}function j4(n){return n*ih}function xw(n){return(n&n-1)===0&&n!==0}function qR(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function o0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function J4(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+i)/2),d=a((e+i)/2),h=s((e-i)/2),p=a((e-i)/2),v=s((i-e)/2),m=a((i-e)/2);switch(r){case"XYX":n.set(o*d,l*h,l*p,o*u);break;case"YZY":n.set(l*p,o*d,l*h,o*u);break;case"ZXZ":n.set(l*h,l*p,o*d,o*u);break;case"XZX":n.set(o*d,l*m,l*v,o*u);break;case"YXY":n.set(l*v,o*d,l*m,o*u);break;case"ZYZ":n.set(l*m,l*v,o*d,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ma(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var oo=Object.freeze({__proto__:null,DEG2RAD:bl,RAD2DEG:ih,generateUUID:dr,clamp:Nn,euclideanModulo:oM,mapLinear:L4,inverseLerp:N4,lerp:Ad,damp:F4,pingpong:k4,smoothstep:U4,smootherstep:O4,randInt:z4,randFloat:H4,randFloatSpread:G4,seededRandom:V4,degToRad:W4,radToDeg:j4,isPowerOfTwo:xw,ceilPowerOfTwo:qR,floorPowerOfTwo:o0,setQuaternionFromProperEuler:J4,normalize:nn,denormalize:ma});class se{constructor(e=0,t=0){se.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ci{constructor(){Ci.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,o,l,u){const d=this.elements;return d[0]=e,d[1]=r,d[2]=o,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],d=i[4],h=i[7],p=i[2],v=i[5],m=i[8],g=r[0],w=r[3],x=r[6],S=r[1],M=r[4],A=r[7],E=r[2],R=r[5],D=r[8];return s[0]=a*g+o*S+l*E,s[3]=a*w+o*M+l*R,s[6]=a*x+o*A+l*D,s[1]=u*g+d*S+h*E,s[4]=u*w+d*M+h*R,s[7]=u*x+d*A+h*D,s[2]=p*g+v*S+m*E,s[5]=p*w+v*M+m*R,s[8]=p*x+v*A+m*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],d=e[8];return t*a*d-t*o*u-i*s*d+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],d=e[8],h=d*a-o*u,p=o*l-d*s,v=u*s-a*l,m=t*h+i*p+r*v;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=h*g,e[1]=(r*u-d*i)*g,e[2]=(o*i-r*a)*g,e[3]=p*g,e[4]=(d*t-r*l)*g,e[5]=(r*s-o*t)*g,e[6]=v*g,e[7]=(i*l-u*t)*g,e[8]=(a*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Jy.makeScale(e,t)),this}rotate(e){return this.premultiply(Jy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Jy.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jy=new Ci;function $R(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const X4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qc(n,e){return new X4[n](e)}function rh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Cl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Tg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Xy={[is]:{[Ru]:Cl},[Ru]:{[is]:Tg}},Ai={legacyMode:!0,get workingColorSpace(){return Ru},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Xy[e]&&Xy[e][t]!==void 0){const i=Xy[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},eD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xn={r:0,g:0,b:0},Yr={h:0,s:0,l:0},um={h:0,s:0,l:0};function Ky(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function fm(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Ee{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ai.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ai.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ai.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ai.workingColorSpace){if(e=oM(e,1),t=Nn(t,0,1),i=Nn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=Ky(a,s,e+1/3),this.g=Ky(a,s,e),this.b=Ky(a,s,e-1/3)}return Ai.toWorkingColorSpace(this,r),this}setStyle(e,t=is){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Ai.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Ai.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,u,d,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Ai.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Ai.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=is){const i=eD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cl(e.r),this.g=Cl(e.g),this.b=Cl(e.b),this}copyLinearToSRGB(e){return this.r=Tg(e.r),this.g=Tg(e.g),this.b=Tg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return Ai.fromWorkingColorSpace(fm(this,Xn),e),Nn(Xn.r*255,0,255)<<16^Nn(Xn.g*255,0,255)<<8^Nn(Xn.b*255,0,255)<<0}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ai.workingColorSpace){Ai.fromWorkingColorSpace(fm(this,Xn),t);const i=Xn.r,r=Xn.g,s=Xn.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,u;const d=(o+a)/2;if(o===a)l=0,u=0;else{const h=a-o;switch(u=d<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,t=Ai.workingColorSpace){return Ai.fromWorkingColorSpace(fm(this,Xn),t),e.r=Xn.r,e.g=Xn.g,e.b=Xn.b,e}getStyle(e=is){return Ai.fromWorkingColorSpace(fm(this,Xn),e),e!==is?`color(${e} ${Xn.r} ${Xn.g} ${Xn.b})`:`rgb(${Xn.r*255|0},${Xn.g*255|0},${Xn.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Yr),Yr.h+=e,Yr.s+=t,Yr.l+=i,this.setHSL(Yr.h,Yr.s,Yr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Yr),e.getHSL(um);const i=Ad(Yr.h,um.h,t),r=Ad(Yr.s,um.s,t),s=Ad(Yr.l,um.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Ee.NAMES=eD;let hc;class lM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{hc===void 0&&(hc=rh("canvas")),hc.width=e.width,hc.height=e.height;const i=hc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=hc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Cl(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Cl(t[i]/255)*255):t[i]=Cl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class yl{constructor(e=null){this.isSource=!0,this.uuid=dr(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(Qy(r[a].image)):s.push(Qy(r[a]))}else s=Qy(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Qy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?lM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let K4=0;class $t extends Vr{constructor(e=$t.DEFAULT_IMAGE,t=$t.DEFAULT_MAPPING,i=Vn,r=Vn,s=qe,a=Fs,o=pn,l=cn,u=$t.DEFAULT_ANISOTROPY,d=ps){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:K4++}),this.uuid=dr(),this.name="",this.source=new yl(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new se(0,0),this.repeat=new se(1,1),this.center=new se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==k0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pi:e.x=e.x-Math.floor(e.x);break;case Vn:e.x=e.x<0?0:1;break;case Tu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pi:e.y=e.y-Math.floor(e.y);break;case Vn:e.y=e.y<0?0:1;break;case Tu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}$t.DEFAULT_IMAGE=null;$t.DEFAULT_MAPPING=k0;$t.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,t=0,i=0,r=1){Dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],d=l[4],h=l[8],p=l[1],v=l[5],m=l[9],g=l[2],w=l[6],x=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-g)<.01&&Math.abs(m-w)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+g)<.1&&Math.abs(m+w)<.1&&Math.abs(u+v+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,A=(v+1)/2,E=(x+1)/2,R=(d+p)/4,D=(h+g)/4,T=(m+w)/4;return M>A&&M>E?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=R/i,s=D/i):A>E?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=R/r,s=T/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=D/s,r=T/s),this.set(i,r,s,t),this}let S=Math.sqrt((w-m)*(w-m)+(h-g)*(h-g)+(p-d)*(p-d));return Math.abs(S)<.001&&(S=1),this.x=(w-m)/S,this.y=(h-g)/S,this.z=(p-d)/S,this.w=Math.acos((u+v+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ct extends Vr{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dt(0,0,e,t),this.scissorTest=!1,this.viewport=new Dt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new $t(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:qe,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new yl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ch extends $t{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=Vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Q4 extends Ct{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ch(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Mo extends $t{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ht,this.minFilter=ht,this.wrapR=Vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Y4 extends Ct{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Mo(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cM extends Ct{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Fn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],u=i[r+1],d=i[r+2],h=i[r+3];const p=s[a+0],v=s[a+1],m=s[a+2],g=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h;return}if(o===1){e[t+0]=p,e[t+1]=v,e[t+2]=m,e[t+3]=g;return}if(h!==g||l!==p||u!==v||d!==m){let w=1-o;const x=l*p+u*v+d*m+h*g,S=x>=0?1:-1,M=1-x*x;if(M>Number.EPSILON){const E=Math.sqrt(M),R=Math.atan2(E,x*S);w=Math.sin(w*R)/E,o=Math.sin(o*R)/E}const A=o*S;if(l=l*w+p*A,u=u*w+v*A,d=d*w+m*A,h=h*w+g*A,w===1-o){const E=1/Math.sqrt(l*l+u*u+d*d+h*h);l*=E,u*=E,d*=E,h*=E}}e[t]=l,e[t+1]=u,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],d=i[r+3],h=s[a],p=s[a+1],v=s[a+2],m=s[a+3];return e[t]=o*m+d*h+l*v-u*p,e[t+1]=l*m+d*p+u*h-o*v,e[t+2]=u*m+d*v+o*p-l*h,e[t+3]=d*m-o*h-l*p-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),d=o(r/2),h=o(s/2),p=l(i/2),v=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=p*d*h+u*v*m,this._y=u*v*h-p*d*m,this._z=u*d*m+p*v*h,this._w=u*d*h-p*v*m;break;case"YXZ":this._x=p*d*h+u*v*m,this._y=u*v*h-p*d*m,this._z=u*d*m-p*v*h,this._w=u*d*h+p*v*m;break;case"ZXY":this._x=p*d*h-u*v*m,this._y=u*v*h+p*d*m,this._z=u*d*m+p*v*h,this._w=u*d*h-p*v*m;break;case"ZYX":this._x=p*d*h-u*v*m,this._y=u*v*h+p*d*m,this._z=u*d*m-p*v*h,this._w=u*d*h+p*v*m;break;case"YZX":this._x=p*d*h+u*v*m,this._y=u*v*h+p*d*m,this._z=u*d*m-p*v*h,this._w=u*d*h-p*v*m;break;case"XZY":this._x=p*d*h-u*v*m,this._y=u*v*h-p*d*m,this._z=u*d*m+p*v*h,this._w=u*d*h+p*v*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],d=t[6],h=t[10],p=i+o+h;if(p>0){const v=.5/Math.sqrt(p+1);this._w=.25/v,this._x=(d-l)*v,this._y=(s-u)*v,this._z=(a-r)*v}else if(i>o&&i>h){const v=2*Math.sqrt(1+i-o-h);this._w=(d-l)/v,this._x=.25*v,this._y=(r+a)/v,this._z=(s+u)/v}else if(o>h){const v=2*Math.sqrt(1+o-i-h);this._w=(s-u)/v,this._x=(r+a)/v,this._y=.25*v,this._z=(l+d)/v}else{const v=2*Math.sqrt(1+h-i-o);this._w=(a-r)/v,this._x=(s+u)/v,this._y=(l+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,d=t._w;return this._x=i*d+a*o+r*u-s*l,this._y=r*d+a*l+s*o-i*u,this._z=s*d+a*u+i*l-r*o,this._w=a*d-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const v=1-t;return this._w=v*a+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),d=Math.atan2(u,o),h=Math.sin((1-t)*d)/u,p=Math.sin(t*d)/u;return this._w=a*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,i=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(wb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(wb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*t+a*r-o*i,d=l*i+o*t-s*r,h=l*r+s*i-a*t,p=-s*t-a*i-o*r;return this.x=u*l+p*-s+d*-o-h*-a,this.y=d*l+p*-a+h*-s-u*-o,this.z=h*l+p*-o+u*-a-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Yy.copy(this).projectOnVector(e),this.sub(Yy)}reflect(e){return this.sub(Yy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Nn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yy=new k,wb=new Fn;class Pa{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const d=e[l],h=e[l+1],p=e[l+2];d<t&&(t=d),h<i&&(i=h),p<r&&(r=p),d>s&&(s=d),h>a&&(a=h),p>o&&(o=p)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const d=e.getX(l),h=e.getY(l),p=e.getZ(l);d<t&&(t=d),h<i&&(i=h),p<r&&(r=p),d>s&&(s=d),h>a&&(a=h),p>o&&(o=p)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)Yo.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Yo)}else i.boundingBox===null&&i.computeBoundingBox(),Zy.copy(i.boundingBox),Zy.applyMatrix4(e.matrixWorld),this.union(Zy);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Yo),Yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lf),dm.subVectors(this.max,Lf),pc.subVectors(e.a,Lf),mc.subVectors(e.b,Lf),gc.subVectors(e.c,Lf),Ga.subVectors(mc,pc),Va.subVectors(gc,mc),Zo.subVectors(pc,gc);let t=[0,-Ga.z,Ga.y,0,-Va.z,Va.y,0,-Zo.z,Zo.y,Ga.z,0,-Ga.x,Va.z,0,-Va.x,Zo.z,0,-Zo.x,-Ga.y,Ga.x,0,-Va.y,Va.x,0,-Zo.y,Zo.x,0];return!qy(t,pc,mc,gc,dm)||(t=[1,0,0,0,1,0,0,0,1],!qy(t,pc,mc,gc,dm))?!1:(hm.crossVectors(Ga,Va),t=[hm.x,hm.y,hm.z],qy(t,pc,mc,gc,dm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Yo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Yo).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qs=[new k,new k,new k,new k,new k,new k,new k,new k],Yo=new k,Zy=new Pa,pc=new k,mc=new k,gc=new k,Ga=new k,Va=new k,Zo=new k,Lf=new k,dm=new k,hm=new k,qo=new k;function qy(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){qo.fromArray(n,s);const o=r.x*Math.abs(qo.x)+r.y*Math.abs(qo.y)+r.z*Math.abs(qo.z),l=e.dot(qo),u=t.dot(qo),d=i.dot(qo);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>o)return!1}return!0}const Z4=new Pa,Nf=new k,$y=new k;class Os{constructor(e=new k,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Z4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nf.subVectors(e,this.center);const t=Nf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Nf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($y.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nf.copy(e.center).add($y)),this.expandByPoint(Nf.copy(e.center).sub($y))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $s=new k,ex=new k,pm=new k,Wa=new k,tx=new k,mm=new k,nx=new k;class Eh{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$s)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$s.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($s.copy(this.direction).multiplyScalar(t).add(this.origin),$s.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ex.copy(e).add(t).multiplyScalar(.5),pm.copy(t).sub(e).normalize(),Wa.copy(this.origin).sub(ex);const s=e.distanceTo(t)*.5,a=-this.direction.dot(pm),o=Wa.dot(this.direction),l=-Wa.dot(pm),u=Wa.lengthSq(),d=Math.abs(1-a*a);let h,p,v,m;if(d>0)if(h=a*l-o,p=a*o-l,m=s*d,h>=0)if(p>=-m)if(p<=m){const g=1/d;h*=g,p*=g,v=h*(h+a*p+2*o)+p*(a*h+p+2*l)+u}else p=s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;else p<=-m?(h=Math.max(0,-(-a*s+o)),p=h>0?-s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u):p<=m?(h=0,p=Math.min(Math.max(-s,-l),s),v=p*(p+2*l)+u):(h=Math.max(0,-(a*s+o)),p=h>0?s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u);else p=a>0?-s:s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(pm).multiplyScalar(p).add(ex),v}intersectSphere(e,t){$s.subVectors(e.center,this.origin);const i=$s.dot(this.direction),r=$s.dot($s)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const u=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),d>=0?(s=(e.min.y-p.y)*d,a=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,a=(e.min.y-p.y)*d),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(o=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,$s)!==null}intersectTriangle(e,t,i,r,s){tx.subVectors(t,e),mm.subVectors(i,e),nx.crossVectors(tx,mm);let a=this.direction.dot(nx),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Wa.subVectors(this.origin,e);const l=o*this.direction.dot(mm.crossVectors(Wa,mm));if(l<0)return null;const u=o*this.direction.dot(tx.cross(Wa));if(u<0||l+u>a)return null;const d=-o*Wa.dot(nx);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class je{constructor(){je.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,o,l,u,d,h,p,v,m,g,w){const x=this.elements;return x[0]=e,x[4]=t,x[8]=i,x[12]=r,x[1]=s,x[5]=a,x[9]=o,x[13]=l,x[2]=u,x[6]=d,x[10]=h,x[14]=p,x[3]=v,x[7]=m,x[11]=g,x[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new je().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/vc.setFromMatrixColumn(e,0).length(),s=1/vc.setFromMatrixColumn(e,1).length(),a=1/vc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=a*d,v=a*h,m=o*d,g=o*h;t[0]=l*d,t[4]=-l*h,t[8]=u,t[1]=v+m*u,t[5]=p-g*u,t[9]=-o*l,t[2]=g-p*u,t[6]=m+v*u,t[10]=a*l}else if(e.order==="YXZ"){const p=l*d,v=l*h,m=u*d,g=u*h;t[0]=p+g*o,t[4]=m*o-v,t[8]=a*u,t[1]=a*h,t[5]=a*d,t[9]=-o,t[2]=v*o-m,t[6]=g+p*o,t[10]=a*l}else if(e.order==="ZXY"){const p=l*d,v=l*h,m=u*d,g=u*h;t[0]=p-g*o,t[4]=-a*h,t[8]=m+v*o,t[1]=v+m*o,t[5]=a*d,t[9]=g-p*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const p=a*d,v=a*h,m=o*d,g=o*h;t[0]=l*d,t[4]=m*u-v,t[8]=p*u+g,t[1]=l*h,t[5]=g*u+p,t[9]=v*u-m,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const p=a*l,v=a*u,m=o*l,g=o*u;t[0]=l*d,t[4]=g-p*h,t[8]=m*h+v,t[1]=h,t[5]=a*d,t[9]=-o*d,t[2]=-u*d,t[6]=v*h+m,t[10]=p-g*h}else if(e.order==="XZY"){const p=a*l,v=a*u,m=o*l,g=o*u;t[0]=l*d,t[4]=-h,t[8]=u*d,t[1]=p*h+g,t[5]=a*d,t[9]=v*h-m,t[2]=m*h-v,t[6]=o*d,t[10]=g*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(q4,e,$4)}lookAt(e,t,i){const r=this.elements;return sr.subVectors(e,t),sr.lengthSq()===0&&(sr.z=1),sr.normalize(),ja.crossVectors(i,sr),ja.lengthSq()===0&&(Math.abs(i.z)===1?sr.x+=1e-4:sr.z+=1e-4,sr.normalize(),ja.crossVectors(i,sr)),ja.normalize(),gm.crossVectors(sr,ja),r[0]=ja.x,r[4]=gm.x,r[8]=sr.x,r[1]=ja.y,r[5]=gm.y,r[9]=sr.y,r[2]=ja.z,r[6]=gm.z,r[10]=sr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],d=i[1],h=i[5],p=i[9],v=i[13],m=i[2],g=i[6],w=i[10],x=i[14],S=i[3],M=i[7],A=i[11],E=i[15],R=r[0],D=r[4],T=r[8],B=r[12],L=r[1],H=r[5],Z=r[9],W=r[13],K=r[2],ie=r[6],ue=r[10],pe=r[14],I=r[3],J=r[7],j=r[11],V=r[15];return s[0]=a*R+o*L+l*K+u*I,s[4]=a*D+o*H+l*ie+u*J,s[8]=a*T+o*Z+l*ue+u*j,s[12]=a*B+o*W+l*pe+u*V,s[1]=d*R+h*L+p*K+v*I,s[5]=d*D+h*H+p*ie+v*J,s[9]=d*T+h*Z+p*ue+v*j,s[13]=d*B+h*W+p*pe+v*V,s[2]=m*R+g*L+w*K+x*I,s[6]=m*D+g*H+w*ie+x*J,s[10]=m*T+g*Z+w*ue+x*j,s[14]=m*B+g*W+w*pe+x*V,s[3]=S*R+M*L+A*K+E*I,s[7]=S*D+M*H+A*ie+E*J,s[11]=S*T+M*Z+A*ue+E*j,s[15]=S*B+M*W+A*pe+E*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],d=e[2],h=e[6],p=e[10],v=e[14],m=e[3],g=e[7],w=e[11],x=e[15];return m*(+s*l*h-r*u*h-s*o*p+i*u*p+r*o*v-i*l*v)+g*(+t*l*v-t*u*p+s*a*p-r*a*v+r*u*d-s*l*d)+w*(+t*u*h-t*o*v-s*a*h+i*a*v+s*o*d-i*u*d)+x*(-r*o*d-t*l*h+t*o*p+r*a*h-i*a*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],v=e[11],m=e[12],g=e[13],w=e[14],x=e[15],S=h*w*u-g*p*u+g*l*v-o*w*v-h*l*x+o*p*x,M=m*p*u-d*w*u-m*l*v+a*w*v+d*l*x-a*p*x,A=d*g*u-m*h*u+m*o*v-a*g*v-d*o*x+a*h*x,E=m*h*l-d*g*l-m*o*p+a*g*p+d*o*w-a*h*w,R=t*S+i*M+r*A+s*E;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/R;return e[0]=S*D,e[1]=(g*p*s-h*w*s-g*r*v+i*w*v+h*r*x-i*p*x)*D,e[2]=(o*w*s-g*l*s+g*r*u-i*w*u-o*r*x+i*l*x)*D,e[3]=(h*l*s-o*p*s-h*r*u+i*p*u+o*r*v-i*l*v)*D,e[4]=M*D,e[5]=(d*w*s-m*p*s+m*r*v-t*w*v-d*r*x+t*p*x)*D,e[6]=(m*l*s-a*w*s-m*r*u+t*w*u+a*r*x-t*l*x)*D,e[7]=(a*p*s-d*l*s+d*r*u-t*p*u-a*r*v+t*l*v)*D,e[8]=A*D,e[9]=(m*h*s-d*g*s-m*i*v+t*g*v+d*i*x-t*h*x)*D,e[10]=(a*g*s-m*o*s+m*i*u-t*g*u-a*i*x+t*o*x)*D,e[11]=(d*o*s-a*h*s-d*i*u+t*h*u+a*i*v-t*o*v)*D,e[12]=E*D,e[13]=(d*g*r-m*h*r+m*i*p-t*g*p-d*i*w+t*h*w)*D,e[14]=(m*o*r-a*g*r-m*i*l+t*g*l+a*i*w-t*o*w)*D,e[15]=(a*h*r-d*o*r+d*i*l-t*h*l-a*i*p+t*o*p)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,d=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,d*o+i,d*l-r*a,0,u*l-r*o,d*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,d=a+a,h=o+o,p=s*u,v=s*d,m=s*h,g=a*d,w=a*h,x=o*h,S=l*u,M=l*d,A=l*h,E=i.x,R=i.y,D=i.z;return r[0]=(1-(g+x))*E,r[1]=(v+A)*E,r[2]=(m-M)*E,r[3]=0,r[4]=(v-A)*R,r[5]=(1-(p+x))*R,r[6]=(w+S)*R,r[7]=0,r[8]=(m+M)*D,r[9]=(w-S)*D,r[10]=(1-(p+g))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=vc.set(r[0],r[1],r[2]).length();const a=vc.set(r[4],r[5],r[6]).length(),o=vc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Zr.copy(this);const u=1/s,d=1/a,h=1/o;return Zr.elements[0]*=u,Zr.elements[1]*=u,Zr.elements[2]*=u,Zr.elements[4]*=d,Zr.elements[5]*=d,Zr.elements[6]*=d,Zr.elements[8]*=h,Zr.elements[9]*=h,Zr.elements[10]*=h,t.setFromRotationMatrix(Zr),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){const o=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),p=-(a+s)/(a-s),v=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=p,o[14]=v,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),u=1/(i-r),d=1/(a-s),h=(t+e)*l,p=(i+r)*u,v=(a+s)*d;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-p,o[2]=0,o[6]=0,o[10]=-2*d,o[14]=-v,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const vc=new k,Zr=new je,q4=new k(0,0,0),$4=new k(1,1,1),ja=new k,gm=new k,sr=new k,Sb=new je,Mb=new Fn;class Gl{constructor(e=0,t=0,i=0,r=Gl.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],d=r[9],h=r[2],p=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(Nn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Nn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Nn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Nn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Nn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-Nn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Sb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Sb,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Mb.setFromEuler(this),this.setFromQuaternion(Mb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Gl.DefaultOrder="XYZ";Gl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class El{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ek=0;const _b=new k,yc=new Fn,ea=new je,vm=new k,Ff=new k,tk=new k,nk=new Fn,Ab=new k(1,0,0),bb=new k(0,1,0),Cb=new k(0,0,1),ik={type:"added"},Eb={type:"removed"};class Ut extends Vr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ek++}),this.uuid=dr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ut.DefaultUp.clone();const e=new k,t=new Gl,i=new Fn,r=new k(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new je},normalMatrix:{value:new Ci}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=Ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ut.DefaultMatrixWorldAutoUpdate,this.layers=new El,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return yc.setFromAxisAngle(e,t),this.quaternion.multiply(yc),this}rotateOnWorldAxis(e,t){return yc.setFromAxisAngle(e,t),this.quaternion.premultiply(yc),this}rotateX(e){return this.rotateOnAxis(Ab,e)}rotateY(e){return this.rotateOnAxis(bb,e)}rotateZ(e){return this.rotateOnAxis(Cb,e)}translateOnAxis(e,t){return _b.copy(e).applyQuaternion(this.quaternion),this.position.add(_b.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ab,e)}translateY(e){return this.translateOnAxis(bb,e)}translateZ(e){return this.translateOnAxis(Cb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ea.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?vm.copy(e):vm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ff.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ea.lookAt(Ff,vm,this.up):ea.lookAt(vm,Ff,this.up),this.quaternion.setFromRotationMatrix(ea),r&&(ea.extractRotation(r.matrixWorld),yc.setFromRotationMatrix(ea),this.quaternion.premultiply(yc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ik)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Eb)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Eb)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ea.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ea.multiply(e.parent.matrixWorld)),e.applyMatrix4(ea),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(i=i.concat(a))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ff,e,tk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ff,nk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),d=a(e.images),h=a(e.shapes),p=a(e.skeletons),v=a(e.animations),m=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),v.length>0&&(i.animations=v),m.length>0&&(i.nodes=m)}return i.object=r,i;function a(o){const l=[];for(const u in o){const d=o[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ut.DefaultUp=new k(0,1,0);Ut.DefaultMatrixAutoUpdate=!0;Ut.DefaultMatrixWorldAutoUpdate=!0;const qr=new k,ta=new k,ix=new k,na=new k,xc=new k,wc=new k,Tb=new k,rx=new k,sx=new k,ax=new k;class Fr{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),qr.subVectors(e,t),r.cross(qr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){qr.subVectors(r,t),ta.subVectors(i,t),ix.subVectors(e,t);const a=qr.dot(qr),o=qr.dot(ta),l=qr.dot(ix),u=ta.dot(ta),d=ta.dot(ix),h=a*u-o*o;if(h===0)return s.set(-2,-1,-1);const p=1/h,v=(u*l-o*d)*p,m=(a*d-o*l)*p;return s.set(1-v-m,m,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,na),na.x>=0&&na.y>=0&&na.x+na.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,na),l.set(0,0),l.addScaledVector(s,na.x),l.addScaledVector(a,na.y),l.addScaledVector(o,na.z),l}static isFrontFacing(e,t,i,r){return qr.subVectors(i,t),ta.subVectors(e,t),qr.cross(ta).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qr.subVectors(this.c,this.b),ta.subVectors(this.a,this.b),qr.cross(ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Fr.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Fr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;xc.subVectors(r,i),wc.subVectors(s,i),rx.subVectors(e,i);const l=xc.dot(rx),u=wc.dot(rx);if(l<=0&&u<=0)return t.copy(i);sx.subVectors(e,r);const d=xc.dot(sx),h=wc.dot(sx);if(d>=0&&h<=d)return t.copy(r);const p=l*h-d*u;if(p<=0&&l>=0&&d<=0)return a=l/(l-d),t.copy(i).addScaledVector(xc,a);ax.subVectors(e,s);const v=xc.dot(ax),m=wc.dot(ax);if(m>=0&&v<=m)return t.copy(s);const g=v*u-l*m;if(g<=0&&u>=0&&m<=0)return o=u/(u-m),t.copy(i).addScaledVector(wc,o);const w=d*m-v*h;if(w<=0&&h-d>=0&&v-m>=0)return Tb.subVectors(s,r),o=(h-d)/(h-d+(v-m)),t.copy(r).addScaledVector(Tb,o);const x=1/(w+g+p);return a=g*x,o=p*x,t.copy(i).addScaledVector(xc,a).addScaledVector(wc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let rk=0;class Rn extends Vr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rk++}),this.uuid=dr(),this.name="",this.type="Material",this.blending=Al,this.side=Ns,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=YS,this.blendDst=ZS,this.blendEquation=cl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Yd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Eg,this.stencilZFail=Eg,this.stencilZPass=Eg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Al&&(i.blending=this.blending),this.side!==Ns&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ur extends Rn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const On=new k,ym=new se;class bt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=nh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ym.fromBufferAttribute(this,t),ym.applyMatrix3(e),this.setXY(t,ym.x,ym.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.applyMatrix3(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.applyMatrix4(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.applyNormalMatrix(e),this.setXYZ(t,On.x,On.y,On.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.transformDirection(e),this.setXYZ(t,On.x,On.y,On.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ma(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ma(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ma(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ma(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nh&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class sk extends bt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class ak extends bt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ok extends bt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class lk extends bt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class uM extends bt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ck extends bt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class fM extends bt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class uk extends bt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Ze extends bt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class fk extends bt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let dk=0;const Tr=new je,ox=new Ut,Sc=new k,ar=new Pa,kf=new Pa,ai=new k;class mt extends Vr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dk++}),this.uuid=dr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($R(e)?fM:uM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ci().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Tr.makeRotationFromQuaternion(e),this.applyMatrix4(Tr),this}rotateX(e){return Tr.makeRotationX(e),this.applyMatrix4(Tr),this}rotateY(e){return Tr.makeRotationY(e),this.applyMatrix4(Tr),this}rotateZ(e){return Tr.makeRotationZ(e),this.applyMatrix4(Tr),this}translate(e,t,i){return Tr.makeTranslation(e,t,i),this.applyMatrix4(Tr),this}scale(e,t,i){return Tr.makeScale(e,t,i),this.applyMatrix4(Tr),this}lookAt(e){return ox.lookAt(e),ox.updateMatrix(),this.applyMatrix4(ox.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sc).negate(),this.translate(Sc.x,Sc.y,Sc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ze(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ar.setFromBufferAttribute(s),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,ar.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,ar.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(ar.min),this.boundingBox.expandByPoint(ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){const i=this.boundingSphere.center;if(ar.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];kf.setFromBufferAttribute(o),this.morphTargetsRelative?(ai.addVectors(ar.min,kf.min),ar.expandByPoint(ai),ai.addVectors(ar.max,kf.max),ar.expandByPoint(ai)):(ar.expandByPoint(kf.min),ar.expandByPoint(kf.max))}ar.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ai));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,d=o.count;u<d;u++)ai.fromBufferAttribute(o,u),l&&(Sc.fromBufferAttribute(e,u),ai.add(Sc)),r=Math.max(r,i.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bt(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let L=0;L<o;L++)u[L]=new k,d[L]=new k;const h=new k,p=new k,v=new k,m=new se,g=new se,w=new se,x=new k,S=new k;function M(L,H,Z){h.fromArray(r,L*3),p.fromArray(r,H*3),v.fromArray(r,Z*3),m.fromArray(a,L*2),g.fromArray(a,H*2),w.fromArray(a,Z*2),p.sub(h),v.sub(h),g.sub(m),w.sub(m);const W=1/(g.x*w.y-w.x*g.y);isFinite(W)&&(x.copy(p).multiplyScalar(w.y).addScaledVector(v,-g.y).multiplyScalar(W),S.copy(v).multiplyScalar(g.x).addScaledVector(p,-w.x).multiplyScalar(W),u[L].add(x),u[H].add(x),u[Z].add(x),d[L].add(S),d[H].add(S),d[Z].add(S))}let A=this.groups;A.length===0&&(A=[{start:0,count:i.length}]);for(let L=0,H=A.length;L<H;++L){const Z=A[L],W=Z.start,K=Z.count;for(let ie=W,ue=W+K;ie<ue;ie+=3)M(i[ie+0],i[ie+1],i[ie+2])}const E=new k,R=new k,D=new k,T=new k;function B(L){D.fromArray(s,L*3),T.copy(D);const H=u[L];E.copy(H),E.sub(D.multiplyScalar(D.dot(H))).normalize(),R.crossVectors(T,H);const W=R.dot(d[L])<0?-1:1;l[L*4]=E.x,l[L*4+1]=E.y,l[L*4+2]=E.z,l[L*4+3]=W}for(let L=0,H=A.length;L<H;++L){const Z=A[L],W=Z.start,K=Z.count;for(let ie=W,ue=W+K;ie<ue;ie+=3)B(i[ie+0]),B(i[ie+1]),B(i[ie+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new bt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,v=i.count;p<v;p++)i.setXYZ(p,0,0,0);const r=new k,s=new k,a=new k,o=new k,l=new k,u=new k,d=new k,h=new k;if(e)for(let p=0,v=e.count;p<v;p+=3){const m=e.getX(p+0),g=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),a.fromBufferAttribute(t,w),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),o.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),u.fromBufferAttribute(i,w),o.add(d),l.add(d),u.add(d),i.setXYZ(m,o.x,o.y,o.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(w,u.x,u.y,u.z)}else for(let p=0,v=t.count;p<v;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),a.fromBufferAttribute(t,p+2),d.subVectors(a,s),h.subVectors(r,s),d.cross(h),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)}toNonIndexed(){function e(o,l){const u=o.array,d=o.itemSize,h=o.normalized,p=new u.constructor(l.length*d);let v=0,m=0;for(let g=0,w=l.length;g<w;g++){o.isInterleavedBufferAttribute?v=l[g]*o.data.stride+o.offset:v=l[g]*d;for(let x=0;x<d;x++)p[m++]=u[v++]}return new bt(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let d=0,h=u.length;d<h;d++){const p=u[d],v=e(p,i);l.push(v)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let h=0,p=u.length;h<p;h++){const v=u[h];d.push(v.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const d=r[u];this.setAttribute(u,d.clone(t))}const s=e.morphAttributes;for(const u in s){const d=[],h=s[u];for(let p=0,v=h.length;p<v;p++)d.push(h[p].clone(t));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const h=a[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pb=new je,Mc=new Eh,lx=new Os,Uf=new k,Of=new k,zf=new k,cx=new k,xm=new k,wm=new se,Sm=new se,Mm=new se,ux=new k,_m=new k;class Wn extends Ut{constructor(e=new mt,t=new ur){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){xm.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const d=o[l],h=s[l];d!==0&&(cx.fromBufferAttribute(h,e),a?xm.addScaledVector(cx,d):xm.addScaledVector(cx.sub(t),d))}t.add(xm)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),lx.copy(i.boundingSphere),lx.applyMatrix4(s),e.ray.intersectsSphere(lx)===!1)||(Pb.copy(s).invert(),Mc.copy(e.ray).applyMatrix4(Pb),i.boundingBox!==null&&Mc.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,u=i.attributes.uv,d=i.attributes.uv2,h=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(r))for(let v=0,m=h.length;v<m;v++){const g=h[v],w=r[g.materialIndex],x=Math.max(g.start,p.start),S=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let M=x,A=S;M<A;M+=3){const E=o.getX(M),R=o.getX(M+1),D=o.getX(M+2);a=Am(this,w,e,Mc,u,d,E,R,D),a&&(a.faceIndex=Math.floor(M/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const v=Math.max(0,p.start),m=Math.min(o.count,p.start+p.count);for(let g=v,w=m;g<w;g+=3){const x=o.getX(g),S=o.getX(g+1),M=o.getX(g+2);a=Am(this,r,e,Mc,u,d,x,S,M),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let v=0,m=h.length;v<m;v++){const g=h[v],w=r[g.materialIndex],x=Math.max(g.start,p.start),S=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let M=x,A=S;M<A;M+=3){const E=M,R=M+1,D=M+2;a=Am(this,w,e,Mc,u,d,E,R,D),a&&(a.faceIndex=Math.floor(M/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const v=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let g=v,w=m;g<w;g+=3){const x=g,S=g+1,M=g+2;a=Am(this,r,e,Mc,u,d,x,S,M),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}}}function hk(n,e,t,i,r,s,a,o){let l;if(e.side===pi?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Ns,o),l===null)return null;_m.copy(o),_m.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(_m);return u<t.near||u>t.far?null:{distance:u,point:_m.clone(),object:n}}function Am(n,e,t,i,r,s,a,o,l){n.getVertexPosition(a,Uf),n.getVertexPosition(o,Of),n.getVertexPosition(l,zf);const u=hk(n,e,t,i,Uf,Of,zf,ux);if(u){r&&(wm.fromBufferAttribute(r,a),Sm.fromBufferAttribute(r,o),Mm.fromBufferAttribute(r,l),u.uv=Fr.getUV(ux,Uf,Of,zf,wm,Sm,Mm,new se)),s&&(wm.fromBufferAttribute(s,a),Sm.fromBufferAttribute(s,o),Mm.fromBufferAttribute(s,l),u.uv2=Fr.getUV(ux,Uf,Of,zf,wm,Sm,Mm,new se));const d={a,b:o,c:l,normal:new k,materialIndex:0};Fr.getNormal(Uf,Of,zf,d.normal),u.face=d}return u}class Fo extends mt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],d=[],h=[];let p=0,v=0;m("z","y","x",-1,-1,i,t,e,a,s,0),m("z","y","x",1,-1,i,t,-e,a,s,1),m("x","z","y",1,1,e,i,t,r,a,2),m("x","z","y",1,-1,e,i,-t,r,a,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ze(u,3)),this.setAttribute("normal",new Ze(d,3)),this.setAttribute("uv",new Ze(h,2));function m(g,w,x,S,M,A,E,R,D,T,B){const L=A/D,H=E/T,Z=A/2,W=E/2,K=R/2,ie=D+1,ue=T+1;let pe=0,I=0;const J=new k;for(let j=0;j<ue;j++){const V=j*H-W;for(let Q=0;Q<ie;Q++){const ge=Q*L-Z;J[g]=ge*S,J[w]=V*M,J[x]=K,u.push(J.x,J.y,J.z),J[g]=0,J[w]=0,J[x]=R>0?1:-1,d.push(J.x,J.y,J.z),h.push(Q/D),h.push(1-j/T),pe+=1}}for(let j=0;j<T;j++)for(let V=0;V<D;V++){const Q=p+V+ie*j,ge=p+V+ie*(j+1),xe=p+(V+1)+ie*(j+1),be=p+(V+1)+ie*j;l.push(Q,ge,be),l.push(ge,xe,be),I+=6}o.addGroup(v,I,B),v+=I,p+=pe}}static fromJSON(e){return new Fo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Du(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Fi(n){const e={};for(let t=0;t<n.length;t++){const i=Du(n[t]);for(const r in i)e[r]=i[r]}return e}function pk(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function tD(n){return n.getRenderTarget()===null&&n.outputEncoding===Wt?is:Ru}const dM={clone:Du,merge:Fi};var mk=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gk=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Mt extends Rn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mk,this.fragmentShader=gk,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Du(e.uniforms),this.uniformsGroups=pk(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Ku extends Ut{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class hn extends Ku{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ih*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ih*2*Math.atan(Math.tan(bl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/u,r*=a.width/l,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _c=-90,Ac=1;class hM extends Ut{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new hn(_c,Ac,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new hn(_c,Ac,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const a=new hn(_c,Ac,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const o=new hn(_c,Ac,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);const l=new hn(_c,Ac,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new hn(_c,Ac,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,u]=this.children,d=e.getRenderTarget(),h=e.toneMapping,p=e.xr.enabled;e.toneMapping=fs,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class Th extends $t{constructor(e,t,i,r,s,a,o,l,u,d){e=e!==void 0?e:[],t=t!==void 0?t:To,super(e,t,i,r,s,a,o,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class G0 extends Ct{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Th(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qe}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Fo(5,5,5),s=new Mt({name:"CubemapFromEquirect",uniforms:Du(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:pi,blending:ln});s.uniforms.tEquirect.value=t;const a=new Wn(r,s),o=t.minFilter;return t.minFilter===Fs&&(t.minFilter=qe),new hM(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const fx=new k,vk=new k,yk=new Ci;class to{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=fx.subVectors(i,t).cross(vk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(fx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||yk.getNormalMatrix(e),r=this.coplanarPoint(fx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bc=new Os,bm=new k;class V0{constructor(e=new to,t=new to,i=new to,r=new to,s=new to,a=new to){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],u=i[5],d=i[6],h=i[7],p=i[8],v=i[9],m=i[10],g=i[11],w=i[12],x=i[13],S=i[14],M=i[15];return t[0].setComponents(o-r,h-l,g-p,M-w).normalize(),t[1].setComponents(o+r,h+l,g+p,M+w).normalize(),t[2].setComponents(o+s,h+u,g+v,M+x).normalize(),t[3].setComponents(o-s,h-u,g-v,M-x).normalize(),t[4].setComponents(o-a,h-d,g-m,M-S).normalize(),t[5].setComponents(o+a,h+d,g+m,M+S).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),bc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(bc)}intersectsSprite(e){return bc.center.set(0,0,0),bc.radius=.7071067811865476,bc.applyMatrix4(e.matrixWorld),this.intersectsSphere(bc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(bm.x=r.normal.x>0?e.max.x:e.min.x,bm.y=r.normal.y>0?e.max.y:e.min.y,bm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(bm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nD(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function xk(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,d){const h=u.array,p=u.usage,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,h,p),u.onUploadCallback();let m;if(h instanceof Float32Array)m=5126;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)m=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=5123;else if(h instanceof Int16Array)m=5122;else if(h instanceof Uint32Array)m=5125;else if(h instanceof Int32Array)m=5124;else if(h instanceof Int8Array)m=5120;else if(h instanceof Uint8Array)m=5121;else if(h instanceof Uint8ClampedArray)m=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:m,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,h){const p=d.array,v=d.updateRange;n.bindBuffer(h,u),v.count===-1?n.bufferSubData(h,0,p):(t?n.bufferSubData(h,v.offset*p.BYTES_PER_ELEMENT,p,v.offset,v.count):n.bufferSubData(h,v.offset*p.BYTES_PER_ELEMENT,p.subarray(v.offset,v.offset+v.count)),v.count=-1),d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d&&(n.deleteBuffer(d.buffer),i.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h===void 0?i.set(u,r(u,d)):h.version<u.version&&(s(h.buffer,u,d),h.version=u.version)}return{get:a,remove:o,update:l}}class Qu extends mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,d=l+1,h=e/o,p=t/l,v=[],m=[],g=[],w=[];for(let x=0;x<d;x++){const S=x*p-a;for(let M=0;M<u;M++){const A=M*h-s;m.push(A,-S,0),g.push(0,0,1),w.push(M/o),w.push(1-x/l)}}for(let x=0;x<l;x++)for(let S=0;S<o;S++){const M=S+u*x,A=S+u*(x+1),E=S+1+u*(x+1),R=S+1+u*x;v.push(M,A,R),v.push(A,E,R)}this.setIndex(v),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(w,2))}static fromJSON(e){return new Qu(e.width,e.height,e.widthSegments,e.heightSegments)}}var wk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Sk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mk=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,_k=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ak=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ck="vec3 transformed = vec3( position );",Ek=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Tk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Pk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Rk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Bk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ik=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Lk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Nk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Fk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,kk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Uk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Ok=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,zk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Hk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Wk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Jk="gl_FragColor = linearToOutputTexel( gl_FragColor );",Xk=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Kk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qk=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Yk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$k=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eU=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tU=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nU=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iU=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rU=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,sU=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,aU=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,oU=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cU=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,uU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fU=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hU=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,mU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,xU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,MU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_U=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,AU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,EU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,TU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,PU=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,DU=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,BU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,IU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,LU=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,UU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,OU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,zU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,HU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,GU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,VU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,jU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,XU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,KU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,QU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,YU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ZU=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,qU=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$U=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,eO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,iO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,aO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,oO=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lO=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cO=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,uO=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,fO=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,dO=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,hO=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,pO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,mO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gO=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,vO=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yO=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xO=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SO=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_O=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,AO=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bO=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,CO=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,EO=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,TO=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PO=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,RO=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DO=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BO=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,IO=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LO=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NO=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FO=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,kO=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UO=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,OO=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zO=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HO=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GO=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,VO=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WO=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jO=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JO=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,XO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KO=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QO=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,YO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ZO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,rt={alphamap_fragment:wk,alphamap_pars_fragment:Sk,alphatest_fragment:Mk,alphatest_pars_fragment:_k,aomap_fragment:Ak,aomap_pars_fragment:bk,begin_vertex:Ck,beginnormal_vertex:Ek,bsdfs:Tk,iridescence_fragment:Pk,bumpmap_pars_fragment:Rk,clipping_planes_fragment:Dk,clipping_planes_pars_fragment:Bk,clipping_planes_pars_vertex:Ik,clipping_planes_vertex:Lk,color_fragment:Nk,color_pars_fragment:Fk,color_pars_vertex:kk,color_vertex:Uk,common:Ok,cube_uv_reflection_fragment:zk,defaultnormal_vertex:Hk,displacementmap_pars_vertex:Gk,displacementmap_vertex:Vk,emissivemap_fragment:Wk,emissivemap_pars_fragment:jk,encodings_fragment:Jk,encodings_pars_fragment:Xk,envmap_fragment:Kk,envmap_common_pars_fragment:Qk,envmap_pars_fragment:Yk,envmap_pars_vertex:Zk,envmap_physical_pars_fragment:cU,envmap_vertex:qk,fog_vertex:$k,fog_pars_vertex:eU,fog_fragment:tU,fog_pars_fragment:nU,gradientmap_pars_fragment:iU,lightmap_fragment:rU,lightmap_pars_fragment:sU,lights_lambert_fragment:aU,lights_lambert_pars_fragment:oU,lights_pars_begin:lU,lights_toon_fragment:uU,lights_toon_pars_fragment:fU,lights_phong_fragment:dU,lights_phong_pars_fragment:hU,lights_physical_fragment:pU,lights_physical_pars_fragment:mU,lights_fragment_begin:gU,lights_fragment_maps:vU,lights_fragment_end:yU,logdepthbuf_fragment:xU,logdepthbuf_pars_fragment:wU,logdepthbuf_pars_vertex:SU,logdepthbuf_vertex:MU,map_fragment:_U,map_pars_fragment:AU,map_particle_fragment:bU,map_particle_pars_fragment:CU,metalnessmap_fragment:EU,metalnessmap_pars_fragment:TU,morphcolor_vertex:PU,morphnormal_vertex:RU,morphtarget_pars_vertex:DU,morphtarget_vertex:BU,normal_fragment_begin:IU,normal_fragment_maps:LU,normal_pars_fragment:NU,normal_pars_vertex:FU,normal_vertex:kU,normalmap_pars_fragment:UU,clearcoat_normal_fragment_begin:OU,clearcoat_normal_fragment_maps:zU,clearcoat_pars_fragment:HU,iridescence_pars_fragment:GU,output_fragment:VU,packing:WU,premultiplied_alpha_fragment:jU,project_vertex:JU,dithering_fragment:XU,dithering_pars_fragment:KU,roughnessmap_fragment:QU,roughnessmap_pars_fragment:YU,shadowmap_pars_fragment:ZU,shadowmap_pars_vertex:qU,shadowmap_vertex:$U,shadowmask_pars_fragment:eO,skinbase_vertex:tO,skinning_pars_vertex:nO,skinning_vertex:iO,skinnormal_vertex:rO,specularmap_fragment:sO,specularmap_pars_fragment:aO,tonemapping_fragment:oO,tonemapping_pars_fragment:lO,transmission_fragment:cO,transmission_pars_fragment:uO,uv_pars_fragment:fO,uv_pars_vertex:dO,uv_vertex:hO,uv2_pars_fragment:pO,uv2_pars_vertex:mO,uv2_vertex:gO,worldpos_vertex:vO,background_vert:yO,background_frag:xO,backgroundCube_vert:wO,backgroundCube_frag:SO,cube_vert:MO,cube_frag:_O,depth_vert:AO,depth_frag:bO,distanceRGBA_vert:CO,distanceRGBA_frag:EO,equirect_vert:TO,equirect_frag:PO,linedashed_vert:RO,linedashed_frag:DO,meshbasic_vert:BO,meshbasic_frag:IO,meshlambert_vert:LO,meshlambert_frag:NO,meshmatcap_vert:FO,meshmatcap_frag:kO,meshnormal_vert:UO,meshnormal_frag:OO,meshphong_vert:zO,meshphong_frag:HO,meshphysical_vert:GO,meshphysical_frag:VO,meshtoon_vert:WO,meshtoon_frag:jO,points_vert:JO,points_frag:XO,shadow_vert:KO,shadow_frag:QO,sprite_vert:YO,sprite_frag:ZO},Ne={common:{diffuse:{value:new Ee(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ci},uv2Transform:{value:new Ci},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ee(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ee(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ci}},sprite:{diffuse:{value:new Ee(16777215)},opacity:{value:1},center:{value:new se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ci}}},ss={basic:{uniforms:Fi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:rt.meshbasic_vert,fragmentShader:rt.meshbasic_frag},lambert:{uniforms:Fi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ee(0)}}]),vertexShader:rt.meshlambert_vert,fragmentShader:rt.meshlambert_frag},phong:{uniforms:Fi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new Ee(0)},specular:{value:new Ee(1118481)},shininess:{value:30}}]),vertexShader:rt.meshphong_vert,fragmentShader:rt.meshphong_frag},standard:{uniforms:Fi([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new Ee(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag},toon:{uniforms:Fi([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new Ee(0)}}]),vertexShader:rt.meshtoon_vert,fragmentShader:rt.meshtoon_frag},matcap:{uniforms:Fi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:rt.meshmatcap_vert,fragmentShader:rt.meshmatcap_frag},points:{uniforms:Fi([Ne.points,Ne.fog]),vertexShader:rt.points_vert,fragmentShader:rt.points_frag},dashed:{uniforms:Fi([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rt.linedashed_vert,fragmentShader:rt.linedashed_frag},depth:{uniforms:Fi([Ne.common,Ne.displacementmap]),vertexShader:rt.depth_vert,fragmentShader:rt.depth_frag},normal:{uniforms:Fi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:rt.meshnormal_vert,fragmentShader:rt.meshnormal_frag},sprite:{uniforms:Fi([Ne.sprite,Ne.fog]),vertexShader:rt.sprite_vert,fragmentShader:rt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ci},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rt.background_vert,fragmentShader:rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:rt.backgroundCube_vert,fragmentShader:rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rt.cube_vert,fragmentShader:rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rt.equirect_vert,fragmentShader:rt.equirect_frag},distanceRGBA:{uniforms:Fi([Ne.common,Ne.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rt.distanceRGBA_vert,fragmentShader:rt.distanceRGBA_frag},shadow:{uniforms:Fi([Ne.lights,Ne.fog,{color:{value:new Ee(0)},opacity:{value:1}}]),vertexShader:rt.shadow_vert,fragmentShader:rt.shadow_frag}};ss.physical={uniforms:Fi([ss.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new se(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Ee(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ee(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ee(1,1,1)},specularColorMap:{value:null}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag};const Cm={r:0,b:0,g:0};function qO(n,e,t,i,r,s,a){const o=new Ee(0);let l=s===!0?0:1,u,d,h=null,p=0,v=null;function m(w,x){let S=!1,M=x.isScene===!0?x.background:null;M&&M.isTexture&&(M=(x.backgroundBlurriness>0?t:e).get(M));const A=n.xr,E=A.getSession&&A.getSession();E&&E.environmentBlendMode==="additive"&&(M=null),M===null?g(o,l):M&&M.isColor&&(g(M,1),S=!0),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),M&&(M.isCubeTexture||M.mapping===Xu)?(d===void 0&&(d=new Wn(new Fo(1,1,1),new Mt({name:"BackgroundCubeMaterial",uniforms:Du(ss.backgroundCube.uniforms),vertexShader:ss.backgroundCube.vertexShader,fragmentShader:ss.backgroundCube.fragmentShader,side:pi,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(R,D,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=M,d.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.toneMapped=M.encoding!==Wt,(h!==M||p!==M.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,h=M,p=M.version,v=n.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null)):M&&M.isTexture&&(u===void 0&&(u=new Wn(new Qu(2,2),new Mt({name:"BackgroundMaterial",uniforms:Du(ss.background.uniforms),vertexShader:ss.background.vertexShader,fragmentShader:ss.background.fragmentShader,side:Ns,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=M,u.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,u.material.toneMapped=M.encoding!==Wt,M.matrixAutoUpdate===!0&&M.updateMatrix(),u.material.uniforms.uvTransform.value.copy(M.matrix),(h!==M||p!==M.version||v!==n.toneMapping)&&(u.material.needsUpdate=!0,h=M,p=M.version,v=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function g(w,x){w.getRGB(Cm,tD(n)),i.buffers.color.setClear(Cm.r,Cm.g,Cm.b,x,a)}return{getClearColor:function(){return o},setClearColor:function(w,x=1){o.set(w),l=x,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,g(o,l)},render:m}}function $O(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=w(null);let u=l,d=!1;function h(K,ie,ue,pe,I){let J=!1;if(a){const j=g(pe,ue,ie);u!==j&&(u=j,v(u.object)),J=x(K,pe,ue,I),J&&S(K,pe,ue,I)}else{const j=ie.wireframe===!0;(u.geometry!==pe.id||u.program!==ue.id||u.wireframe!==j)&&(u.geometry=pe.id,u.program=ue.id,u.wireframe=j,J=!0)}I!==null&&t.update(I,34963),(J||d)&&(d=!1,T(K,ie,ue,pe),I!==null&&n.bindBuffer(34963,t.get(I).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(K){return i.isWebGL2?n.bindVertexArray(K):s.bindVertexArrayOES(K)}function m(K){return i.isWebGL2?n.deleteVertexArray(K):s.deleteVertexArrayOES(K)}function g(K,ie,ue){const pe=ue.wireframe===!0;let I=o[K.id];I===void 0&&(I={},o[K.id]=I);let J=I[ie.id];J===void 0&&(J={},I[ie.id]=J);let j=J[pe];return j===void 0&&(j=w(p()),J[pe]=j),j}function w(K){const ie=[],ue=[],pe=[];for(let I=0;I<r;I++)ie[I]=0,ue[I]=0,pe[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ie,enabledAttributes:ue,attributeDivisors:pe,object:K,attributes:{},index:null}}function x(K,ie,ue,pe){const I=u.attributes,J=ie.attributes;let j=0;const V=ue.getAttributes();for(const Q in V)if(V[Q].location>=0){const xe=I[Q];let be=J[Q];if(be===void 0&&(Q==="instanceMatrix"&&K.instanceMatrix&&(be=K.instanceMatrix),Q==="instanceColor"&&K.instanceColor&&(be=K.instanceColor)),xe===void 0||xe.attribute!==be||be&&xe.data!==be.data)return!0;j++}return u.attributesNum!==j||u.index!==pe}function S(K,ie,ue,pe){const I={},J=ie.attributes;let j=0;const V=ue.getAttributes();for(const Q in V)if(V[Q].location>=0){let xe=J[Q];xe===void 0&&(Q==="instanceMatrix"&&K.instanceMatrix&&(xe=K.instanceMatrix),Q==="instanceColor"&&K.instanceColor&&(xe=K.instanceColor));const be={};be.attribute=xe,xe&&xe.data&&(be.data=xe.data),I[Q]=be,j++}u.attributes=I,u.attributesNum=j,u.index=pe}function M(){const K=u.newAttributes;for(let ie=0,ue=K.length;ie<ue;ie++)K[ie]=0}function A(K){E(K,0)}function E(K,ie){const ue=u.newAttributes,pe=u.enabledAttributes,I=u.attributeDivisors;ue[K]=1,pe[K]===0&&(n.enableVertexAttribArray(K),pe[K]=1),I[K]!==ie&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,ie),I[K]=ie)}function R(){const K=u.newAttributes,ie=u.enabledAttributes;for(let ue=0,pe=ie.length;ue<pe;ue++)ie[ue]!==K[ue]&&(n.disableVertexAttribArray(ue),ie[ue]=0)}function D(K,ie,ue,pe,I,J){i.isWebGL2===!0&&(ue===5124||ue===5125)?n.vertexAttribIPointer(K,ie,ue,I,J):n.vertexAttribPointer(K,ie,ue,pe,I,J)}function T(K,ie,ue,pe){if(i.isWebGL2===!1&&(K.isInstancedMesh||pe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;M();const I=pe.attributes,J=ue.getAttributes(),j=ie.defaultAttributeValues;for(const V in J){const Q=J[V];if(Q.location>=0){let ge=I[V];if(ge===void 0&&(V==="instanceMatrix"&&K.instanceMatrix&&(ge=K.instanceMatrix),V==="instanceColor"&&K.instanceColor&&(ge=K.instanceColor)),ge!==void 0){const xe=ge.normalized,be=ge.itemSize,ce=t.get(ge);if(ce===void 0)continue;const Ye=ce.buffer,Je=ce.type,st=ce.bytesPerElement;if(ge.isInterleavedBufferAttribute){const Fe=ge.data,at=Fe.stride,Se=ge.offset;if(Fe.isInstancedInterleavedBuffer){for(let me=0;me<Q.locationSize;me++)E(Q.location+me,Fe.meshPerAttribute);K.isInstancedMesh!==!0&&pe._maxInstanceCount===void 0&&(pe._maxInstanceCount=Fe.meshPerAttribute*Fe.count)}else for(let me=0;me<Q.locationSize;me++)A(Q.location+me);n.bindBuffer(34962,Ye);for(let me=0;me<Q.locationSize;me++)D(Q.location+me,be/Q.locationSize,Je,xe,at*st,(Se+be/Q.locationSize*me)*st)}else{if(ge.isInstancedBufferAttribute){for(let Fe=0;Fe<Q.locationSize;Fe++)E(Q.location+Fe,ge.meshPerAttribute);K.isInstancedMesh!==!0&&pe._maxInstanceCount===void 0&&(pe._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let Fe=0;Fe<Q.locationSize;Fe++)A(Q.location+Fe);n.bindBuffer(34962,Ye);for(let Fe=0;Fe<Q.locationSize;Fe++)D(Q.location+Fe,be/Q.locationSize,Je,xe,be*st,be/Q.locationSize*Fe*st)}}else if(j!==void 0){const xe=j[V];if(xe!==void 0)switch(xe.length){case 2:n.vertexAttrib2fv(Q.location,xe);break;case 3:n.vertexAttrib3fv(Q.location,xe);break;case 4:n.vertexAttrib4fv(Q.location,xe);break;default:n.vertexAttrib1fv(Q.location,xe)}}}}R()}function B(){Z();for(const K in o){const ie=o[K];for(const ue in ie){const pe=ie[ue];for(const I in pe)m(pe[I].object),delete pe[I];delete ie[ue]}delete o[K]}}function L(K){if(o[K.id]===void 0)return;const ie=o[K.id];for(const ue in ie){const pe=ie[ue];for(const I in pe)m(pe[I].object),delete pe[I];delete ie[ue]}delete o[K.id]}function H(K){for(const ie in o){const ue=o[ie];if(ue[K.id]===void 0)continue;const pe=ue[K.id];for(const I in pe)m(pe[I].object),delete pe[I];delete ue[K.id]}}function Z(){W(),d=!0,u!==l&&(u=l,v(u.object))}function W(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:Z,resetDefaultState:W,dispose:B,releaseStatesOfGeometry:L,releaseStatesOfProgram:H,initAttributes:M,enableAttribute:A,disableUnusedAttributes:R}}function ez(n,e,t,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,d){n.drawArrays(s,u,d),t.update(d,s,1)}function l(u,d,h){if(h===0)return;let p,v;if(r)p=n,v="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[v](s,u,d,h),t.update(d,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function tz(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(D){if(D==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),p=n.getParameter(35660),v=n.getParameter(3379),m=n.getParameter(34076),g=n.getParameter(34921),w=n.getParameter(36347),x=n.getParameter(36348),S=n.getParameter(36349),M=p>0,A=a||e.has("OES_texture_float"),E=M&&A,R=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:w,maxVaryings:x,maxFragmentUniforms:S,vertexTextures:M,floatFragmentTextures:A,floatVertexTextures:E,maxSamples:R}}function nz(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new to,o=new Ci,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p,v){const m=h.length!==0||p||i!==0||r;return r=p,t=d(h,v,0),i=h.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,u()},this.setState=function(h,p,v){const m=h.clippingPlanes,g=h.clipIntersection,w=h.clipShadows,x=n.get(h);if(!r||m===null||m.length===0||s&&!w)s?d(null):u();else{const S=s?0:i,M=S*4;let A=x.clippingState||null;l.value=A,A=d(m,p,M,v);for(let E=0;E!==M;++E)A[E]=t[E];x.clippingState=A,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,p,v,m){const g=h!==null?h.length:0;let w=null;if(g!==0){if(w=l.value,m!==!0||w===null){const x=v+g*4,S=p.matrixWorldInverse;o.getNormalMatrix(S),(w===null||w.length<x)&&(w=new Float32Array(x));for(let M=0,A=v;M!==g;++M,A+=4)a.copy(h[M]).applyMatrix4(S,o),a.normal.toArray(w,A),w[A+3]=a.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,w}}function iz(n){let e=new WeakMap;function t(a,o){return o===qd?a.mapping=To:o===$d&&(a.mapping=Po),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===qd||o===$d)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new G0(l.height/2);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Vl extends Ku{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=d*this.view.offsetY,l=o-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const $c=4,Rb=[.125,.215,.35,.446,.526,.582],ul=20,dx=new Vl,Db=new Ee;let hx=null;const ll=(1+Math.sqrt(5))/2,Cc=1/ll,Bb=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,ll,Cc),new k(0,ll,-Cc),new k(Cc,0,ll),new k(-Cc,0,ll),new k(ll,Cc,0),new k(-ll,Cc,0)];class l0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){hx=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Nb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Lb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(hx),e.scissorTest=!1,Em(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===To||e.mapping===Po?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),hx=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qe,minFilter:qe,generateMipmaps:!1,type:er,format:pn,encoding:ps,depthBuffer:!1},r=Ib(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ib(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rz(s)),this._blurMaterial=sz(s,e,t)}return r}_compileMaterial(e){const t=new Wn(this._lodPlanes[0],e);this._renderer.compile(t,dx)}_sceneToCubeUV(e,t,i,r){const o=new hn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(Db),d.toneMapping=fs,d.autoClear=!1;const v=new ur({name:"PMREM.Background",side:pi,depthWrite:!1,depthTest:!1}),m=new Wn(new Fo,v);let g=!1;const w=e.background;w?w.isColor&&(v.color.copy(w),e.background=null,g=!0):(v.color.copy(Db),g=!0);for(let x=0;x<6;x++){const S=x%3;S===0?(o.up.set(0,l[x],0),o.lookAt(u[x],0,0)):S===1?(o.up.set(0,0,l[x]),o.lookAt(0,u[x],0)):(o.up.set(0,l[x],0),o.lookAt(0,0,u[x]));const M=this._cubeSize;Em(r,S*M,x>2?M:0,M,M),d.setRenderTarget(r),g&&d.render(m,o),d.render(e,o)}m.geometry.dispose(),m.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===To||e.mapping===Po;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Nb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Lb());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Wn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Em(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,dx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Bb[(r-1)%Bb.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Wn(this._lodPlanes[r],u),p=u.uniforms,v=this._sizeLods[i]-1,m=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*ul-1),g=s/m,w=isFinite(s)?1+Math.floor(d*g):ul;w>ul&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${ul}`);const x=[];let S=0;for(let D=0;D<ul;++D){const T=D/g,B=Math.exp(-T*T/2);x.push(B),D===0?S+=B:D<w&&(S+=2*B)}for(let D=0;D<x.length;D++)x[D]=x[D]/S;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=x,p.latitudinal.value=a==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:M}=this;p.dTheta.value=m,p.mipInt.value=M-i;const A=this._sizeLods[r],E=3*A*(r>M-$c?r-M+$c:0),R=4*(this._cubeSize-A);Em(t,E,R,3*A,2*A),l.setRenderTarget(t),l.render(h,dx)}}function rz(n){const e=[],t=[],i=[];let r=n;const s=n-$c+1+Rb.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-$c?l=Rb[a-n+$c-1]:a===0&&(l=0),i.push(l);const u=1/(o-2),d=-u,h=1+u,p=[d,d,h,d,h,h,d,d,h,h,d,h],v=6,m=6,g=3,w=2,x=1,S=new Float32Array(g*m*v),M=new Float32Array(w*m*v),A=new Float32Array(x*m*v);for(let R=0;R<v;R++){const D=R%3*2/3-1,T=R>2?0:-1,B=[D,T,0,D+2/3,T,0,D+2/3,T+1,0,D,T,0,D+2/3,T+1,0,D,T+1,0];S.set(B,g*m*R),M.set(p,w*m*R);const L=[R,R,R,R,R,R];A.set(L,x*m*R)}const E=new mt;E.setAttribute("position",new bt(S,g)),E.setAttribute("uv",new bt(M,w)),E.setAttribute("faceIndex",new bt(A,x)),e.push(E),r>$c&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Ib(n,e,t){const i=new Ct(n,e,t);return i.texture.mapping=Xu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Em(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function sz(n,e,t){const i=new Float32Array(ul),r=new k(0,1,0);return new Mt({name:"SphericalGaussianBlur",defines:{n:ul,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function Lb(){return new Mt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function Nb(){return new Mt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function pM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function az(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===qd||l===$d,d=l===To||l===Po;if(u||d)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return t===null&&(t=new l0(n)),h=u?t.fromEquirectangular(o,h):t.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(u&&h&&h.height>0||d&&h&&r(h)){t===null&&(t=new l0(n));const p=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,p),o.addEventListener("dispose",s),p.texture}else return null}}}return o}function r(o){let l=0;const u=6;for(let d=0;d<u;d++)o[d]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function oz(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function lz(n,e,t,i){const r={},s=new WeakMap;function a(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const m in p.attributes)e.remove(p.attributes[m]);p.removeEventListener("dispose",a),delete r[p.id];const v=s.get(p);v&&(e.remove(v),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function o(h,p){return r[p.id]===!0||(p.addEventListener("dispose",a),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const m in p)e.update(p[m],34962);const v=h.morphAttributes;for(const m in v){const g=v[m];for(let w=0,x=g.length;w<x;w++)e.update(g[w],34962)}}function u(h){const p=[],v=h.index,m=h.attributes.position;let g=0;if(v!==null){const S=v.array;g=v.version;for(let M=0,A=S.length;M<A;M+=3){const E=S[M+0],R=S[M+1],D=S[M+2];p.push(E,R,R,D,D,E)}}else{const S=m.array;g=m.version;for(let M=0,A=S.length/3-1;M<A;M+=3){const E=M+0,R=M+1,D=M+2;p.push(E,R,R,D,D,E)}}const w=new($R(p)?fM:uM)(p,1);w.version=g;const x=s.get(h);x&&e.remove(x),s.set(h,w)}function d(h){const p=s.get(h);if(p){const v=h.index;v!==null&&p.version<v.version&&u(h)}else u(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:d}}function cz(n,e,t,i){const r=i.isWebGL2;let s;function a(p){s=p}let o,l;function u(p){o=p.type,l=p.bytesPerElement}function d(p,v){n.drawElements(s,v,o,p*l),t.update(v,s,1)}function h(p,v,m){if(m===0)return;let g,w;if(r)g=n,w="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[w](s,v,o,p*l,m),t.update(v,s,m)}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=h}function uz(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function fz(n,e){return n[0]-e[0]}function dz(n,e){return Math.abs(e[1])-Math.abs(n[1])}function hz(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new Dt,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,d,h,p){const v=u.morphTargetInfluences;if(e.isWebGL2===!0){const g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,w=g!==void 0?g.length:0;let x=s.get(d);if(x===void 0||x.count!==w){let ue=function(){K.dispose(),s.delete(d),d.removeEventListener("dispose",ue)};var m=ue;x!==void 0&&x.texture.dispose();const A=d.morphAttributes.position!==void 0,E=d.morphAttributes.normal!==void 0,R=d.morphAttributes.color!==void 0,D=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],B=d.morphAttributes.color||[];let L=0;A===!0&&(L=1),E===!0&&(L=2),R===!0&&(L=3);let H=d.attributes.position.count*L,Z=1;H>e.maxTextureSize&&(Z=Math.ceil(H/e.maxTextureSize),H=e.maxTextureSize);const W=new Float32Array(H*Z*4*w),K=new Ch(W,H,Z,w);K.type=Pn,K.needsUpdate=!0;const ie=L*4;for(let pe=0;pe<w;pe++){const I=D[pe],J=T[pe],j=B[pe],V=H*Z*4*pe;for(let Q=0;Q<I.count;Q++){const ge=Q*ie;A===!0&&(a.fromBufferAttribute(I,Q),W[V+ge+0]=a.x,W[V+ge+1]=a.y,W[V+ge+2]=a.z,W[V+ge+3]=0),E===!0&&(a.fromBufferAttribute(J,Q),W[V+ge+4]=a.x,W[V+ge+5]=a.y,W[V+ge+6]=a.z,W[V+ge+7]=0),R===!0&&(a.fromBufferAttribute(j,Q),W[V+ge+8]=a.x,W[V+ge+9]=a.y,W[V+ge+10]=a.z,W[V+ge+11]=j.itemSize===4?a.w:1)}}x={count:w,texture:K,size:new se(H,Z)},s.set(d,x),d.addEventListener("dispose",ue)}let S=0;for(let A=0;A<v.length;A++)S+=v[A];const M=d.morphTargetsRelative?1:1-S;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",v),p.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const g=v===void 0?0:v.length;let w=i[d.id];if(w===void 0||w.length!==g){w=[];for(let E=0;E<g;E++)w[E]=[E,0];i[d.id]=w}for(let E=0;E<g;E++){const R=w[E];R[0]=E,R[1]=v[E]}w.sort(dz);for(let E=0;E<8;E++)E<g&&w[E][1]?(o[E][0]=w[E][0],o[E][1]=w[E][1]):(o[E][0]=Number.MAX_SAFE_INTEGER,o[E][1]=0);o.sort(fz);const x=d.morphAttributes.position,S=d.morphAttributes.normal;let M=0;for(let E=0;E<8;E++){const R=o[E],D=R[0],T=R[1];D!==Number.MAX_SAFE_INTEGER&&T?(x&&d.getAttribute("morphTarget"+E)!==x[D]&&d.setAttribute("morphTarget"+E,x[D]),S&&d.getAttribute("morphNormal"+E)!==S[D]&&d.setAttribute("morphNormal"+E,S[D]),r[E]=T,M+=T):(x&&d.hasAttribute("morphTarget"+E)===!0&&d.deleteAttribute("morphTarget"+E),S&&d.hasAttribute("morphNormal"+E)===!0&&d.deleteAttribute("morphNormal"+E),r[E]=0)}const A=d.morphTargetsRelative?1:1-M;p.getUniforms().setValue(n,"morphTargetBaseInfluence",A),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function pz(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,d=l.geometry,h=e.get(l,d);return r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const iD=new $t,rD=new Ch,sD=new Mo,aD=new Th,Fb=[],kb=[],Ub=new Float32Array(16),Ob=new Float32Array(9),zb=new Float32Array(4);function Yu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Fb[r];if(s===void 0&&(s=new Float32Array(r),Fb[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function $n(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ei(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function W0(n,e){let t=kb[e];t===void 0&&(t=new Int32Array(e),kb[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function mz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function gz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($n(t,e))return;n.uniform2fv(this.addr,e),ei(t,e)}}function vz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if($n(t,e))return;n.uniform3fv(this.addr,e),ei(t,e)}}function yz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($n(t,e))return;n.uniform4fv(this.addr,e),ei(t,e)}}function xz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($n(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ei(t,e)}else{if($n(t,i))return;zb.set(i),n.uniformMatrix2fv(this.addr,!1,zb),ei(t,i)}}function wz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($n(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ei(t,e)}else{if($n(t,i))return;Ob.set(i),n.uniformMatrix3fv(this.addr,!1,Ob),ei(t,i)}}function Sz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($n(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ei(t,e)}else{if($n(t,i))return;Ub.set(i),n.uniformMatrix4fv(this.addr,!1,Ub),ei(t,i)}}function Mz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _z(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($n(t,e))return;n.uniform2iv(this.addr,e),ei(t,e)}}function Az(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($n(t,e))return;n.uniform3iv(this.addr,e),ei(t,e)}}function bz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($n(t,e))return;n.uniform4iv(this.addr,e),ei(t,e)}}function Cz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Ez(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($n(t,e))return;n.uniform2uiv(this.addr,e),ei(t,e)}}function Tz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($n(t,e))return;n.uniform3uiv(this.addr,e),ei(t,e)}}function Pz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($n(t,e))return;n.uniform4uiv(this.addr,e),ei(t,e)}}function Rz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||iD,r)}function Dz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||sD,r)}function Bz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||aD,r)}function Iz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||rD,r)}function Lz(n){switch(n){case 5126:return mz;case 35664:return gz;case 35665:return vz;case 35666:return yz;case 35674:return xz;case 35675:return wz;case 35676:return Sz;case 5124:case 35670:return Mz;case 35667:case 35671:return _z;case 35668:case 35672:return Az;case 35669:case 35673:return bz;case 5125:return Cz;case 36294:return Ez;case 36295:return Tz;case 36296:return Pz;case 35678:case 36198:case 36298:case 36306:case 35682:return Rz;case 35679:case 36299:case 36307:return Dz;case 35680:case 36300:case 36308:case 36293:return Bz;case 36289:case 36303:case 36311:case 36292:return Iz}}function Nz(n,e){n.uniform1fv(this.addr,e)}function Fz(n,e){const t=Yu(e,this.size,2);n.uniform2fv(this.addr,t)}function kz(n,e){const t=Yu(e,this.size,3);n.uniform3fv(this.addr,t)}function Uz(n,e){const t=Yu(e,this.size,4);n.uniform4fv(this.addr,t)}function Oz(n,e){const t=Yu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zz(n,e){const t=Yu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Hz(n,e){const t=Yu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Gz(n,e){n.uniform1iv(this.addr,e)}function Vz(n,e){n.uniform2iv(this.addr,e)}function Wz(n,e){n.uniform3iv(this.addr,e)}function jz(n,e){n.uniform4iv(this.addr,e)}function Jz(n,e){n.uniform1uiv(this.addr,e)}function Xz(n,e){n.uniform2uiv(this.addr,e)}function Kz(n,e){n.uniform3uiv(this.addr,e)}function Qz(n,e){n.uniform4uiv(this.addr,e)}function Yz(n,e,t){const i=this.cache,r=e.length,s=W0(t,r);$n(i,s)||(n.uniform1iv(this.addr,s),ei(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||iD,s[a])}function Zz(n,e,t){const i=this.cache,r=e.length,s=W0(t,r);$n(i,s)||(n.uniform1iv(this.addr,s),ei(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||sD,s[a])}function qz(n,e,t){const i=this.cache,r=e.length,s=W0(t,r);$n(i,s)||(n.uniform1iv(this.addr,s),ei(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||aD,s[a])}function $z(n,e,t){const i=this.cache,r=e.length,s=W0(t,r);$n(i,s)||(n.uniform1iv(this.addr,s),ei(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||rD,s[a])}function e5(n){switch(n){case 5126:return Nz;case 35664:return Fz;case 35665:return kz;case 35666:return Uz;case 35674:return Oz;case 35675:return zz;case 35676:return Hz;case 5124:case 35670:return Gz;case 35667:case 35671:return Vz;case 35668:case 35672:return Wz;case 35669:case 35673:return jz;case 5125:return Jz;case 36294:return Xz;case 36295:return Kz;case 36296:return Qz;case 35678:case 36198:case 36298:case 36306:case 35682:return Yz;case 35679:case 36299:case 36307:return Zz;case 35680:case 36300:case 36308:case 36293:return qz;case 36289:case 36303:case 36311:case 36292:return $z}}class t5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=Lz(t.type)}}class n5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=e5(t.type)}}class i5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const px=/(\w+)(\])?(\[|\.)?/g;function Hb(n,e){n.seq.push(e),n.map[e.id]=e}function r5(n,e,t){const i=n.name,r=i.length;for(px.lastIndex=0;;){const s=px.exec(i),a=px.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){Hb(t,u===void 0?new t5(o,n,e):new n5(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new i5(o),Hb(t,h)),t=h}}}class Pg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);r5(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function Gb(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let s5=0;function a5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function o5(n){switch(n){case ps:return["Linear","( value )"];case Wt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function Vb(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+a5(n.getShaderSource(e),a)}else return r}function l5(n,e){const t=o5(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function c5(n,e){let t;switch(e){case PR:t="Linear";break;case RR:t="Reinhard";break;case DR:t="OptimizedCineon";break;case nM:t="ACESFilmic";break;case BR:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function u5(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(dd).join(`
`)}function f5(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function d5(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function dd(n){return n!==""}function Wb(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const h5=/^[ \t]*#include +<([\w\d./]+)>/gm;function ww(n){return n.replace(h5,p5)}function p5(n,e){const t=rt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ww(t)}const m5=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Jb(n){return n.replace(m5,g5)}function g5(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Xb(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function v5(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===KS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===QS?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Zc&&(e="SHADOWMAP_TYPE_VSM"),e}function y5(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case To:case Po:e="ENVMAP_TYPE_CUBE";break;case Xu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function x5(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Po:e="ENVMAP_MODE_REFRACTION";break}return e}function w5(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bh:e="ENVMAP_BLENDING_MULTIPLY";break;case ER:e="ENVMAP_BLENDING_MIX";break;case TR:e="ENVMAP_BLENDING_ADD";break}return e}function S5(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function M5(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=v5(t),u=y5(t),d=x5(t),h=w5(t),p=S5(t),v=t.isWebGL2?"":u5(t),m=f5(s),g=r.createProgram();let w,x,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[m].filter(dd).join(`
`),w.length>0&&(w+=`
`),x=[v,m].filter(dd).join(`
`),x.length>0&&(x+=`
`)):(w=[Xb(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(dd).join(`
`),x=[v,Xb(t),"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fs?"#define TONE_MAPPING":"",t.toneMapping!==fs?rt.tonemapping_pars_fragment:"",t.toneMapping!==fs?c5("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rt.encodings_pars_fragment,l5("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(dd).join(`
`)),a=ww(a),a=Wb(a,t),a=jb(a,t),o=ww(o),o=Wb(o,t),o=jb(o,t),a=Jb(a),o=Jb(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,x=["#define varying in",t.glslVersion===s0?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===s0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const M=S+w+a,A=S+x+o,E=Gb(r,35633,M),R=Gb(r,35632,A);if(r.attachShader(g,E),r.attachShader(g,R),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),n.debug.checkShaderErrors){const B=r.getProgramInfoLog(g).trim(),L=r.getShaderInfoLog(E).trim(),H=r.getShaderInfoLog(R).trim();let Z=!0,W=!0;if(r.getProgramParameter(g,35714)===!1){Z=!1;const K=Vb(r,E,"vertex"),ie=Vb(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,35715)+`

Program Info Log: `+B+`
`+K+`
`+ie)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(L===""||H==="")&&(W=!1);W&&(this.diagnostics={runnable:Z,programLog:B,vertexShader:{log:L,prefix:w},fragmentShader:{log:H,prefix:x}})}r.deleteShader(E),r.deleteShader(R);let D;this.getUniforms=function(){return D===void 0&&(D=new Pg(r,g)),D};let T;return this.getAttributes=function(){return T===void 0&&(T=d5(r,g)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=s5++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=E,this.fragmentShader=R,this}let _5=0;class A5{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new b5(e),t.set(e,i)),i}}class b5{constructor(e){this.id=_5++,this.code=e,this.usedTimes=0}}function C5(n,e,t,i,r,s,a){const o=new El,l=new A5,u=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let v=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(T,B,L,H,Z){const W=H.fog,K=Z.geometry,ie=T.isMeshStandardMaterial?H.environment:null,ue=(T.isMeshStandardMaterial?t:e).get(T.envMap||ie),pe=ue&&ue.mapping===Xu?ue.image.height:null,I=m[T.type];T.precision!==null&&(v=r.getMaxPrecision(T.precision),v!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",v,"instead."));const J=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,j=J!==void 0?J.length:0;let V=0;K.morphAttributes.position!==void 0&&(V=1),K.morphAttributes.normal!==void 0&&(V=2),K.morphAttributes.color!==void 0&&(V=3);let Q,ge,xe,be;if(I){const at=ss[I];Q=at.vertexShader,ge=at.fragmentShader}else Q=T.vertexShader,ge=T.fragmentShader,l.update(T),xe=l.getVertexShaderID(T),be=l.getFragmentShaderID(T);const ce=n.getRenderTarget(),Ye=T.alphaTest>0,Je=T.clearcoat>0,st=T.iridescence>0;return{isWebGL2:d,shaderID:I,shaderName:T.type,vertexShader:Q,fragmentShader:ge,defines:T.defines,customVertexShaderID:xe,customFragmentShaderID:be,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:v,instancing:Z.isInstancedMesh===!0,instancingColor:Z.isInstancedMesh===!0&&Z.instanceColor!==null,supportsVertexTextures:p,outputEncoding:ce===null?n.outputEncoding:ce.isXRRenderTarget===!0?ce.texture.encoding:ps,map:!!T.map,matcap:!!T.matcap,envMap:!!ue,envMapMode:ue&&ue.mapping,envMapCubeUVHeight:pe,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===QR,tangentSpaceNormalMap:T.normalMapType===Ta,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===Wt,clearcoat:Je,clearcoatMap:Je&&!!T.clearcoatMap,clearcoatRoughnessMap:Je&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:Je&&!!T.clearcoatNormalMap,iridescence:st,iridescenceMap:st&&!!T.iridescenceMap,iridescenceThicknessMap:st&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===Al,alphaMap:!!T.alphaMap,alphaTest:Ye,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!K.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!W,useFog:T.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:Z.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:V,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&L.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:fs,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===ha,flipSided:T.side===pi,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function w(T){const B=[];if(T.shaderID?B.push(T.shaderID):(B.push(T.customVertexShaderID),B.push(T.customFragmentShaderID)),T.defines!==void 0)for(const L in T.defines)B.push(L),B.push(T.defines[L]);return T.isRawShaderMaterial===!1&&(x(B,T),S(B,T),B.push(n.outputEncoding)),B.push(T.customProgramCacheKey),B.join()}function x(T,B){T.push(B.precision),T.push(B.outputEncoding),T.push(B.envMapMode),T.push(B.envMapCubeUVHeight),T.push(B.combine),T.push(B.vertexUvs),T.push(B.fogExp2),T.push(B.sizeAttenuation),T.push(B.morphTargetsCount),T.push(B.morphAttributeCount),T.push(B.numDirLights),T.push(B.numPointLights),T.push(B.numSpotLights),T.push(B.numSpotLightMaps),T.push(B.numHemiLights),T.push(B.numRectAreaLights),T.push(B.numDirLightShadows),T.push(B.numPointLightShadows),T.push(B.numSpotLightShadows),T.push(B.numSpotLightShadowsWithMaps),T.push(B.shadowMapType),T.push(B.toneMapping),T.push(B.numClippingPlanes),T.push(B.numClipIntersection),T.push(B.depthPacking)}function S(T,B){o.disableAll(),B.isWebGL2&&o.enable(0),B.supportsVertexTextures&&o.enable(1),B.instancing&&o.enable(2),B.instancingColor&&o.enable(3),B.map&&o.enable(4),B.matcap&&o.enable(5),B.envMap&&o.enable(6),B.lightMap&&o.enable(7),B.aoMap&&o.enable(8),B.emissiveMap&&o.enable(9),B.bumpMap&&o.enable(10),B.normalMap&&o.enable(11),B.objectSpaceNormalMap&&o.enable(12),B.tangentSpaceNormalMap&&o.enable(13),B.clearcoat&&o.enable(14),B.clearcoatMap&&o.enable(15),B.clearcoatRoughnessMap&&o.enable(16),B.clearcoatNormalMap&&o.enable(17),B.iridescence&&o.enable(18),B.iridescenceMap&&o.enable(19),B.iridescenceThicknessMap&&o.enable(20),B.displacementMap&&o.enable(21),B.specularMap&&o.enable(22),B.roughnessMap&&o.enable(23),B.metalnessMap&&o.enable(24),B.gradientMap&&o.enable(25),B.alphaMap&&o.enable(26),B.alphaTest&&o.enable(27),B.vertexColors&&o.enable(28),B.vertexAlphas&&o.enable(29),B.vertexUvs&&o.enable(30),B.vertexTangents&&o.enable(31),B.uvsVertexOnly&&o.enable(32),T.push(o.mask),o.disableAll(),B.fog&&o.enable(0),B.useFog&&o.enable(1),B.flatShading&&o.enable(2),B.logarithmicDepthBuffer&&o.enable(3),B.skinning&&o.enable(4),B.morphTargets&&o.enable(5),B.morphNormals&&o.enable(6),B.morphColors&&o.enable(7),B.premultipliedAlpha&&o.enable(8),B.shadowMapEnabled&&o.enable(9),B.physicallyCorrectLights&&o.enable(10),B.doubleSided&&o.enable(11),B.flipSided&&o.enable(12),B.useDepthPacking&&o.enable(13),B.dithering&&o.enable(14),B.specularIntensityMap&&o.enable(15),B.specularColorMap&&o.enable(16),B.transmission&&o.enable(17),B.transmissionMap&&o.enable(18),B.thicknessMap&&o.enable(19),B.sheen&&o.enable(20),B.sheenColorMap&&o.enable(21),B.sheenRoughnessMap&&o.enable(22),B.decodeVideoTexture&&o.enable(23),B.opaque&&o.enable(24),T.push(o.mask)}function M(T){const B=m[T.type];let L;if(B){const H=ss[B];L=dM.clone(H.uniforms)}else L=T.uniforms;return L}function A(T,B){let L;for(let H=0,Z=u.length;H<Z;H++){const W=u[H];if(W.cacheKey===B){L=W,++L.usedTimes;break}}return L===void 0&&(L=new M5(n,B,T,s),u.push(L)),L}function E(T){if(--T.usedTimes===0){const B=u.indexOf(T);u[B]=u[u.length-1],u.pop(),T.destroy()}}function R(T){l.remove(T)}function D(){l.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:M,acquireProgram:A,releaseProgram:E,releaseShaderCache:R,programs:u,dispose:D}}function E5(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function T5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Kb(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Qb(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(h,p,v,m,g,w){let x=n[e];return x===void 0?(x={id:h.id,object:h,geometry:p,material:v,groupOrder:m,renderOrder:h.renderOrder,z:g,group:w},n[e]=x):(x.id=h.id,x.object=h,x.geometry=p,x.material=v,x.groupOrder=m,x.renderOrder=h.renderOrder,x.z=g,x.group=w),e++,x}function o(h,p,v,m,g,w){const x=a(h,p,v,m,g,w);v.transmission>0?i.push(x):v.transparent===!0?r.push(x):t.push(x)}function l(h,p,v,m,g,w){const x=a(h,p,v,m,g,w);v.transmission>0?i.unshift(x):v.transparent===!0?r.unshift(x):t.unshift(x)}function u(h,p){t.length>1&&t.sort(h||T5),i.length>1&&i.sort(p||Kb),r.length>1&&r.sort(p||Kb)}function d(){for(let h=e,p=n.length;h<p;h++){const v=n[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:d,sort:u}}function P5(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new Qb,n.set(i,[a])):r>=s.length?(a=new Qb,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function R5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new Ee};break;case"SpotLight":t={position:new k,direction:new k,color:new Ee,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new Ee,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new Ee,groundColor:new Ee};break;case"RectAreaLight":t={color:new Ee,position:new k,halfWidth:new k,halfHeight:new k};break}return n[e.id]=t,t}}}function D5(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new se,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let B5=0;function I5(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function L5(n,e){const t=new R5,i=D5(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new k);const s=new k,a=new je,o=new je;function l(d,h){let p=0,v=0,m=0;for(let H=0;H<9;H++)r.probe[H].set(0,0,0);let g=0,w=0,x=0,S=0,M=0,A=0,E=0,R=0,D=0,T=0;d.sort(I5);const B=h!==!0?Math.PI:1;for(let H=0,Z=d.length;H<Z;H++){const W=d[H],K=W.color,ie=W.intensity,ue=W.distance,pe=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=K.r*ie*B,v+=K.g*ie*B,m+=K.b*ie*B;else if(W.isLightProbe)for(let I=0;I<9;I++)r.probe[I].addScaledVector(W.sh.coefficients[I],ie);else if(W.isDirectionalLight){const I=t.get(W);if(I.color.copy(W.color).multiplyScalar(W.intensity*B),W.castShadow){const J=W.shadow,j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,r.directionalShadow[g]=j,r.directionalShadowMap[g]=pe,r.directionalShadowMatrix[g]=W.shadow.matrix,A++}r.directional[g]=I,g++}else if(W.isSpotLight){const I=t.get(W);I.position.setFromMatrixPosition(W.matrixWorld),I.color.copy(K).multiplyScalar(ie*B),I.distance=ue,I.coneCos=Math.cos(W.angle),I.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),I.decay=W.decay,r.spot[x]=I;const J=W.shadow;if(W.map&&(r.spotLightMap[D]=W.map,D++,J.updateMatrices(W),W.castShadow&&T++),r.spotLightMatrix[x]=J.matrix,W.castShadow){const j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,r.spotShadow[x]=j,r.spotShadowMap[x]=pe,R++}x++}else if(W.isRectAreaLight){const I=t.get(W);I.color.copy(K).multiplyScalar(ie),I.halfWidth.set(W.width*.5,0,0),I.halfHeight.set(0,W.height*.5,0),r.rectArea[S]=I,S++}else if(W.isPointLight){const I=t.get(W);if(I.color.copy(W.color).multiplyScalar(W.intensity*B),I.distance=W.distance,I.decay=W.decay,W.castShadow){const J=W.shadow,j=i.get(W);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,j.shadowCameraNear=J.camera.near,j.shadowCameraFar=J.camera.far,r.pointShadow[w]=j,r.pointShadowMap[w]=pe,r.pointShadowMatrix[w]=W.shadow.matrix,E++}r.point[w]=I,w++}else if(W.isHemisphereLight){const I=t.get(W);I.skyColor.copy(W.color).multiplyScalar(ie*B),I.groundColor.copy(W.groundColor).multiplyScalar(ie*B),r.hemi[M]=I,M++}}S>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=v,r.ambient[2]=m;const L=r.hash;(L.directionalLength!==g||L.pointLength!==w||L.spotLength!==x||L.rectAreaLength!==S||L.hemiLength!==M||L.numDirectionalShadows!==A||L.numPointShadows!==E||L.numSpotShadows!==R||L.numSpotMaps!==D)&&(r.directional.length=g,r.spot.length=x,r.rectArea.length=S,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=R,r.spotShadowMap.length=R,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=R+D-T,r.spotLightMap.length=D,r.numSpotLightShadowsWithMaps=T,L.directionalLength=g,L.pointLength=w,L.spotLength=x,L.rectAreaLength=S,L.hemiLength=M,L.numDirectionalShadows=A,L.numPointShadows=E,L.numSpotShadows=R,L.numSpotMaps=D,r.version=B5++)}function u(d,h){let p=0,v=0,m=0,g=0,w=0;const x=h.matrixWorldInverse;for(let S=0,M=d.length;S<M;S++){const A=d[S];if(A.isDirectionalLight){const E=r.directional[p];E.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(x),p++}else if(A.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(x),m++}else if(A.isRectAreaLight){const E=r.rectArea[g];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(x),o.identity(),a.copy(A.matrixWorld),a.premultiply(x),o.extractRotation(a),E.halfWidth.set(A.width*.5,0,0),E.halfHeight.set(0,A.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),g++}else if(A.isPointLight){const E=r.point[v];E.position.setFromMatrixPosition(A.matrixWorld),E.position.applyMatrix4(x),v++}else if(A.isHemisphereLight){const E=r.hemi[w];E.direction.setFromMatrixPosition(A.matrixWorld),E.direction.transformDirection(x),w++}}}return{setup:l,setupView:u,state:r}}function Yb(n,e){const t=new L5(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(h){i.push(h)}function o(h){r.push(h)}function l(h){t.setup(i,h)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function N5(n,e){let t=new WeakMap;function i(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new Yb(n,e),t.set(s,[l])):a>=o.length?(l=new Yb(n,e),o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class j0 extends Rn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ui,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mM extends Rn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const F5=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,k5=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function U5(n,e,t){let i=new V0;const r=new se,s=new se,a=new Dt,o=new j0({depthPacking:ks}),l=new mM,u={},d=t.maxTextureSize,h={0:pi,1:Ns,2:ha},p=new Mt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new se},radius:{value:4}},vertexShader:F5,fragmentShader:k5}),v=p.clone();v.defines.HORIZONTAL_PASS=1;const m=new mt;m.setAttribute("position",new bt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Wn(m,p),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=KS,this.render=function(A,E,R){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||A.length===0)return;const D=n.getRenderTarget(),T=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),L=n.state;L.setBlending(ln),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let H=0,Z=A.length;H<Z;H++){const W=A[H],K=W.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const ie=K.getFrameExtents();if(r.multiply(ie),s.copy(K.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/ie.x),r.x=s.x*ie.x,K.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/ie.y),r.y=s.y*ie.y,K.mapSize.y=s.y)),K.map===null){const pe=this.type!==Zc?{minFilter:ht,magFilter:ht}:{};K.map=new Ct(r.x,r.y,pe),K.map.texture.name=W.name+".shadowMap",K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();const ue=K.getViewportCount();for(let pe=0;pe<ue;pe++){const I=K.getViewport(pe);a.set(s.x*I.x,s.y*I.y,s.x*I.z,s.y*I.w),L.viewport(a),K.updateMatrices(W,pe),i=K.getFrustum(),M(E,R,K.camera,W,this.type)}K.isPointLightShadow!==!0&&this.type===Zc&&x(K,R),K.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(D,T,B)};function x(A,E){const R=e.update(g);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,v.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,v.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new Ct(r.x,r.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(E,null,R,p,g,null),v.uniforms.shadow_pass.value=A.mapPass.texture,v.uniforms.resolution.value=A.mapSize,v.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(E,null,R,v,g,null)}function S(A,E,R,D,T,B){let L=null;const H=R.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(H!==void 0)L=H;else if(L=R.isPointLight===!0?l:o,n.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const Z=L.uuid,W=E.uuid;let K=u[Z];K===void 0&&(K={},u[Z]=K);let ie=K[W];ie===void 0&&(ie=L.clone(),K[W]=ie),L=ie}return L.visible=E.visible,L.wireframe=E.wireframe,B===Zc?L.side=E.shadowSide!==null?E.shadowSide:E.side:L.side=E.shadowSide!==null?E.shadowSide:h[E.side],L.alphaMap=E.alphaMap,L.alphaTest=E.alphaTest,L.map=E.map,L.clipShadows=E.clipShadows,L.clippingPlanes=E.clippingPlanes,L.clipIntersection=E.clipIntersection,L.displacementMap=E.displacementMap,L.displacementScale=E.displacementScale,L.displacementBias=E.displacementBias,L.wireframeLinewidth=E.wireframeLinewidth,L.linewidth=E.linewidth,R.isPointLight===!0&&L.isMeshDistanceMaterial===!0&&(L.referencePosition.setFromMatrixPosition(R.matrixWorld),L.nearDistance=D,L.farDistance=T),L}function M(A,E,R,D,T){if(A.visible===!1)return;if(A.layers.test(E.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&T===Zc)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,A.matrixWorld);const H=e.update(A),Z=A.material;if(Array.isArray(Z)){const W=H.groups;for(let K=0,ie=W.length;K<ie;K++){const ue=W[K],pe=Z[ue.materialIndex];if(pe&&pe.visible){const I=S(A,pe,D,R.near,R.far,T);n.renderBufferDirect(R,null,H,I,A,ue)}}}else if(Z.visible){const W=S(A,Z,D,R.near,R.far,T);n.renderBufferDirect(R,null,H,W,A,null)}}const L=A.children;for(let H=0,Z=L.length;H<Z;H++)M(L[H],E,R,D,T)}}function O5(n,e,t){const i=t.isWebGL2;function r(){let X=!1;const ae=new Dt;let _e=null;const Re=new Dt(0,0,0,0);return{setMask:function(ze){_e!==ze&&!X&&(n.colorMask(ze,ze,ze,ze),_e=ze)},setLocked:function(ze){X=ze},setClear:function(ze,ft,en,Mn,Di){Di===!0&&(ze*=Mn,ft*=Mn,en*=Mn),ae.set(ze,ft,en,Mn),Re.equals(ae)===!1&&(n.clearColor(ze,ft,en,Mn),Re.copy(ae))},reset:function(){X=!1,_e=null,Re.set(-1,0,0,0)}}}function s(){let X=!1,ae=null,_e=null,Re=null;return{setTest:function(ze){ze?Ye(2929):Je(2929)},setMask:function(ze){ae!==ze&&!X&&(n.depthMask(ze),ae=ze)},setFunc:function(ze){if(_e!==ze){switch(ze){case qS:n.depthFunc(512);break;case $S:n.depthFunc(519);break;case i0:n.depthFunc(513);break;case Yd:n.depthFunc(515);break;case Zd:n.depthFunc(514);break;case eM:n.depthFunc(518);break;case tM:n.depthFunc(516);break;case F0:n.depthFunc(517);break;default:n.depthFunc(515)}_e=ze}},setLocked:function(ze){X=ze},setClear:function(ze){Re!==ze&&(n.clearDepth(ze),Re=ze)},reset:function(){X=!1,ae=null,_e=null,Re=null}}}function a(){let X=!1,ae=null,_e=null,Re=null,ze=null,ft=null,en=null,Mn=null,Di=null;return{setTest:function(Et){X||(Et?Ye(2960):Je(2960))},setMask:function(Et){ae!==Et&&!X&&(n.stencilMask(Et),ae=Et)},setFunc:function(Et,fi,ti){(_e!==Et||Re!==fi||ze!==ti)&&(n.stencilFunc(Et,fi,ti),_e=Et,Re=fi,ze=ti)},setOp:function(Et,fi,ti){(ft!==Et||en!==fi||Mn!==ti)&&(n.stencilOp(Et,fi,ti),ft=Et,en=fi,Mn=ti)},setLocked:function(Et){X=Et},setClear:function(Et){Di!==Et&&(n.clearStencil(Et),Di=Et)},reset:function(){X=!1,ae=null,_e=null,Re=null,ze=null,ft=null,en=null,Mn=null,Di=null}}}const o=new r,l=new s,u=new a,d=new WeakMap,h=new WeakMap;let p={},v={},m=new WeakMap,g=[],w=null,x=!1,S=null,M=null,A=null,E=null,R=null,D=null,T=null,B=!1,L=null,H=null,Z=null,W=null,K=null;const ie=n.getParameter(35661);let ue=!1,pe=0;const I=n.getParameter(7938);I.indexOf("WebGL")!==-1?(pe=parseFloat(/^WebGL (\d)/.exec(I)[1]),ue=pe>=1):I.indexOf("OpenGL ES")!==-1&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),ue=pe>=2);let J=null,j={};const V=n.getParameter(3088),Q=n.getParameter(2978),ge=new Dt().fromArray(V),xe=new Dt().fromArray(Q);function be(X,ae,_e){const Re=new Uint8Array(4),ze=n.createTexture();n.bindTexture(X,ze),n.texParameteri(X,10241,9728),n.texParameteri(X,10240,9728);for(let ft=0;ft<_e;ft++)n.texImage2D(ae+ft,0,6408,1,1,0,6408,5121,Re);return ze}const ce={};ce[3553]=be(3553,3553,1),ce[34067]=be(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ye(2929),l.setFunc(Yd),Le(!1),ot(J1),Ye(2884),Be(ln);function Ye(X){p[X]!==!0&&(n.enable(X),p[X]=!0)}function Je(X){p[X]!==!1&&(n.disable(X),p[X]=!1)}function st(X,ae){return v[X]!==ae?(n.bindFramebuffer(X,ae),v[X]=ae,i&&(X===36009&&(v[36160]=ae),X===36160&&(v[36009]=ae)),!0):!1}function Fe(X,ae){let _e=g,Re=!1;if(X)if(_e=m.get(ae),_e===void 0&&(_e=[],m.set(ae,_e)),X.isWebGLMultipleRenderTargets){const ze=X.texture;if(_e.length!==ze.length||_e[0]!==36064){for(let ft=0,en=ze.length;ft<en;ft++)_e[ft]=36064+ft;_e.length=ze.length,Re=!0}}else _e[0]!==36064&&(_e[0]=36064,Re=!0);else _e[0]!==1029&&(_e[0]=1029,Re=!0);Re&&(t.isWebGL2?n.drawBuffers(_e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_e))}function at(X){return w!==X?(n.useProgram(X),w=X,!0):!1}const Se={[cl]:32774,[gR]:32778,[vR]:32779};if(i)Se[Y1]=32775,Se[Z1]=32776;else{const X=e.get("EXT_blend_minmax");X!==null&&(Se[Y1]=X.MIN_EXT,Se[Z1]=X.MAX_EXT)}const me={[yR]:0,[xR]:1,[wR]:768,[YS]:770,[CR]:776,[AR]:774,[MR]:772,[SR]:769,[ZS]:771,[bR]:775,[_R]:773};function Be(X,ae,_e,Re,ze,ft,en,Mn){if(X===ln){x===!0&&(Je(3042),x=!1);return}if(x===!1&&(Ye(3042),x=!0),X!==mR){if(X!==S||Mn!==B){if((M!==cl||R!==cl)&&(n.blendEquation(32774),M=cl,R=cl),Mn)switch(X){case Al:n.blendFuncSeparate(1,771,1,771);break;case X1:n.blendFunc(1,1);break;case K1:n.blendFuncSeparate(0,769,0,1);break;case Q1:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case Al:n.blendFuncSeparate(770,771,1,771);break;case X1:n.blendFunc(770,1);break;case K1:n.blendFuncSeparate(0,769,0,1);break;case Q1:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}A=null,E=null,D=null,T=null,S=X,B=Mn}return}ze=ze||ae,ft=ft||_e,en=en||Re,(ae!==M||ze!==R)&&(n.blendEquationSeparate(Se[ae],Se[ze]),M=ae,R=ze),(_e!==A||Re!==E||ft!==D||en!==T)&&(n.blendFuncSeparate(me[_e],me[Re],me[ft],me[en]),A=_e,E=Re,D=ft,T=en),S=X,B=!1}function Xe(X,ae){X.side===ha?Je(2884):Ye(2884);let _e=X.side===pi;ae&&(_e=!_e),Le(_e),X.blending===Al&&X.transparent===!1?Be(ln):Be(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),o.setMask(X.colorWrite);const Re=X.stencilWrite;u.setTest(Re),Re&&(u.setMask(X.stencilWriteMask),u.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),u.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),nt(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?Ye(32926):Je(32926)}function Le(X){L!==X&&(X?n.frontFace(2304):n.frontFace(2305),L=X)}function ot(X){X!==hR?(Ye(2884),X!==H&&(X===J1?n.cullFace(1029):X===pR?n.cullFace(1028):n.cullFace(1032))):Je(2884),H=X}function it(X){X!==Z&&(ue&&n.lineWidth(X),Z=X)}function nt(X,ae,_e){X?(Ye(32823),(W!==ae||K!==_e)&&(n.polygonOffset(ae,_e),W=ae,K=_e)):Je(32823)}function Nt(X){X?Ye(3089):Je(3089)}function Ot(X){X===void 0&&(X=33984+ie-1),J!==X&&(n.activeTexture(X),J=X)}function z(X,ae,_e){_e===void 0&&(J===null?_e=33984+ie-1:_e=J);let Re=j[_e];Re===void 0&&(Re={type:void 0,texture:void 0},j[_e]=Re),(Re.type!==X||Re.texture!==ae)&&(J!==_e&&(n.activeTexture(_e),J=_e),n.bindTexture(X,ae||ce[X]),Re.type=X,Re.texture=ae)}function F(){const X=j[J];X!==void 0&&X.type!==void 0&&(n.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ce(){try{n.compressedTexImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function De(){try{n.texSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ct(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function G(){try{n.texStorage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function $(){try{n.texStorage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function le(){try{n.texImage2D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ye(){try{n.texImage3D.apply(n,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Me(X){ge.equals(X)===!1&&(n.scissor(X.x,X.y,X.z,X.w),ge.copy(X))}function Ae(X){xe.equals(X)===!1&&(n.viewport(X.x,X.y,X.z,X.w),xe.copy(X))}function ke(X,ae){let _e=h.get(ae);_e===void 0&&(_e=new WeakMap,h.set(ae,_e));let Re=_e.get(X);Re===void 0&&(Re=n.getUniformBlockIndex(ae,X.name),_e.set(X,Re))}function Ue(X,ae){const Re=h.get(ae).get(X);d.get(ae)!==Re&&(n.uniformBlockBinding(ae,Re,X.__bindingPointIndex),d.set(ae,Re))}function Oe(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},J=null,j={},v={},m=new WeakMap,g=[],w=null,x=!1,S=null,M=null,A=null,E=null,R=null,D=null,T=null,B=!1,L=null,H=null,Z=null,W=null,K=null,ge.set(0,0,n.canvas.width,n.canvas.height),xe.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:Ye,disable:Je,bindFramebuffer:st,drawBuffers:Fe,useProgram:at,setBlending:Be,setMaterial:Xe,setFlipSided:Le,setCullFace:ot,setLineWidth:it,setPolygonOffset:nt,setScissorTest:Nt,activeTexture:Ot,bindTexture:z,unbindTexture:F,compressedTexImage2D:fe,compressedTexImage3D:Ce,texImage2D:le,texImage3D:ye,updateUBOMapping:ke,uniformBlockBinding:Ue,texStorage2D:G,texStorage3D:$,texSubImage2D:De,texSubImage3D:He,compressedTexSubImage2D:ct,compressedTexSubImage3D:Ve,scissor:Me,viewport:Ae,reset:Oe}}function z5(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const w=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(z,F){return x?new OffscreenCanvas(z,F):rh("canvas")}function M(z,F,fe,Ce){let De=1;if((z.width>Ce||z.height>Ce)&&(De=Ce/Math.max(z.width,z.height)),De<1||F===!0)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap){const He=F?o0:Math.floor,ct=He(De*z.width),Ve=He(De*z.height);g===void 0&&(g=S(ct,Ve));const G=fe?S(ct,Ve):g;return G.width=ct,G.height=Ve,G.getContext("2d").drawImage(z,0,0,ct,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+z.width+"x"+z.height+") to ("+ct+"x"+Ve+")."),G}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+")."),z;return z}function A(z){return xw(z.width)&&xw(z.height)}function E(z){return o?!1:z.wrapS!==Vn||z.wrapT!==Vn||z.minFilter!==ht&&z.minFilter!==qe}function R(z,F){return z.generateMipmaps&&F&&z.minFilter!==ht&&z.minFilter!==qe}function D(z){n.generateMipmap(z)}function T(z,F,fe,Ce,De=!1){if(o===!1)return F;if(z!==null){if(n[z]!==void 0)return n[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let He=F;return F===6403&&(fe===5126&&(He=33326),fe===5131&&(He=33325),fe===5121&&(He=33321)),F===33319&&(fe===5126&&(He=33328),fe===5131&&(He=33327),fe===5121&&(He=33323)),F===6408&&(fe===5126&&(He=34836),fe===5131&&(He=34842),fe===5121&&(He=Ce===Wt&&De===!1?35907:32856),fe===32819&&(He=32854),fe===32820&&(He=32855)),(He===33325||He===33326||He===33327||He===33328||He===34842||He===34836)&&e.get("EXT_color_buffer_float"),He}function B(z,F,fe){return R(z,fe)===!0||z.isFramebufferTexture&&z.minFilter!==ht&&z.minFilter!==qe?Math.log2(Math.max(F.width,F.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?F.mipmaps.length:1}function L(z){return z===ht||z===eh||z===pu?9728:9729}function H(z){const F=z.target;F.removeEventListener("dispose",H),W(F),F.isVideoTexture&&m.delete(F)}function Z(z){const F=z.target;F.removeEventListener("dispose",Z),ie(F)}function W(z){const F=i.get(z);if(F.__webglInit===void 0)return;const fe=z.source,Ce=w.get(fe);if(Ce){const De=Ce[F.__cacheKey];De.usedTimes--,De.usedTimes===0&&K(z),Object.keys(Ce).length===0&&w.delete(fe)}i.remove(z)}function K(z){const F=i.get(z);n.deleteTexture(F.__webglTexture);const fe=z.source,Ce=w.get(fe);delete Ce[F.__cacheKey],a.memory.textures--}function ie(z){const F=z.texture,fe=i.get(z),Ce=i.get(F);if(Ce.__webglTexture!==void 0&&(n.deleteTexture(Ce.__webglTexture),a.memory.textures--),z.depthTexture&&z.depthTexture.dispose(),z.isWebGLCubeRenderTarget)for(let De=0;De<6;De++)n.deleteFramebuffer(fe.__webglFramebuffer[De]),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[De]);else{if(n.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let De=0;De<fe.__webglColorRenderbuffer.length;De++)fe.__webglColorRenderbuffer[De]&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer[De]);fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(z.isWebGLMultipleRenderTargets)for(let De=0,He=F.length;De<He;De++){const ct=i.get(F[De]);ct.__webglTexture&&(n.deleteTexture(ct.__webglTexture),a.memory.textures--),i.remove(F[De])}i.remove(F),i.remove(z)}let ue=0;function pe(){ue=0}function I(){const z=ue;return z>=l&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+l),ue+=1,z}function J(z){const F=[];return F.push(z.wrapS),F.push(z.wrapT),F.push(z.wrapR||0),F.push(z.magFilter),F.push(z.minFilter),F.push(z.anisotropy),F.push(z.internalFormat),F.push(z.format),F.push(z.type),F.push(z.generateMipmaps),F.push(z.premultiplyAlpha),F.push(z.flipY),F.push(z.unpackAlignment),F.push(z.encoding),F.join()}function j(z,F){const fe=i.get(z);if(z.isVideoTexture&&Nt(z),z.isRenderTargetTexture===!1&&z.version>0&&fe.__version!==z.version){const Ce=z.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Je(fe,z,F);return}}t.bindTexture(3553,fe.__webglTexture,33984+F)}function V(z,F){const fe=i.get(z);if(z.version>0&&fe.__version!==z.version){Je(fe,z,F);return}t.bindTexture(35866,fe.__webglTexture,33984+F)}function Q(z,F){const fe=i.get(z);if(z.version>0&&fe.__version!==z.version){Je(fe,z,F);return}t.bindTexture(32879,fe.__webglTexture,33984+F)}function ge(z,F){const fe=i.get(z);if(z.version>0&&fe.__version!==z.version){st(fe,z,F);return}t.bindTexture(34067,fe.__webglTexture,33984+F)}const xe={[Pi]:10497,[Vn]:33071,[Tu]:33648},be={[ht]:9728,[eh]:9984,[pu]:9986,[qe]:9729,[U0]:9985,[Fs]:9987};function ce(z,F,fe){if(fe?(n.texParameteri(z,10242,xe[F.wrapS]),n.texParameteri(z,10243,xe[F.wrapT]),(z===32879||z===35866)&&n.texParameteri(z,32882,xe[F.wrapR]),n.texParameteri(z,10240,be[F.magFilter]),n.texParameteri(z,10241,be[F.minFilter])):(n.texParameteri(z,10242,33071),n.texParameteri(z,10243,33071),(z===32879||z===35866)&&n.texParameteri(z,32882,33071),(F.wrapS!==Vn||F.wrapT!==Vn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(z,10240,L(F.magFilter)),n.texParameteri(z,10241,L(F.minFilter)),F.minFilter!==ht&&F.minFilter!==qe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ce=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===ht||F.minFilter!==pu&&F.minFilter!==Fs||F.type===Pn&&e.has("OES_texture_float_linear")===!1||o===!1&&F.type===er&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||i.get(F).__currentAnisotropy)&&(n.texParameterf(z,Ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,r.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy)}}function Ye(z,F){let fe=!1;z.__webglInit===void 0&&(z.__webglInit=!0,F.addEventListener("dispose",H));const Ce=F.source;let De=w.get(Ce);De===void 0&&(De={},w.set(Ce,De));const He=J(F);if(He!==z.__cacheKey){De[He]===void 0&&(De[He]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,fe=!0),De[He].usedTimes++;const ct=De[z.__cacheKey];ct!==void 0&&(De[z.__cacheKey].usedTimes--,ct.usedTimes===0&&K(F)),z.__cacheKey=He,z.__webglTexture=De[He].texture}return fe}function Je(z,F,fe){let Ce=3553;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Ce=35866),F.isData3DTexture&&(Ce=32879);const De=Ye(z,F),He=F.source;t.bindTexture(Ce,z.__webglTexture,33984+fe);const ct=i.get(He);if(He.version!==ct.__version||De===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,F.flipY),n.pixelStorei(37441,F.premultiplyAlpha),n.pixelStorei(3317,F.unpackAlignment),n.pixelStorei(37443,0);const Ve=E(F)&&A(F.image)===!1;let G=M(F.image,Ve,!1,d);G=Ot(F,G);const $=A(G)||o,le=s.convert(F.format,F.encoding);let ye=s.convert(F.type),Me=T(F.internalFormat,le,ye,F.encoding,F.isVideoTexture);ce(Ce,F,$);let Ae;const ke=F.mipmaps,Ue=o&&F.isVideoTexture!==!0,Oe=ct.__version===void 0||De===!0,X=B(F,G,$);if(F.isDepthTexture)Me=6402,o?F.type===Pn?Me=36012:F.type===pa?Me=33190:F.type===wo?Me=35056:Me=33189:F.type===Pn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===So&&Me===6402&&F.type!==iM&&F.type!==pa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=pa,ye=s.convert(F.type)),F.format===Ro&&Me===6402&&(Me=34041,F.type!==wo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=wo,ye=s.convert(F.type))),Oe&&(Ue?t.texStorage2D(3553,1,Me,G.width,G.height):t.texImage2D(3553,0,Me,G.width,G.height,0,le,ye,null));else if(F.isDataTexture)if(ke.length>0&&$){Ue&&Oe&&t.texStorage2D(3553,X,Me,ke[0].width,ke[0].height);for(let ae=0,_e=ke.length;ae<_e;ae++)Ae=ke[ae],Ue?t.texSubImage2D(3553,ae,0,0,Ae.width,Ae.height,le,ye,Ae.data):t.texImage2D(3553,ae,Me,Ae.width,Ae.height,0,le,ye,Ae.data);F.generateMipmaps=!1}else Ue?(Oe&&t.texStorage2D(3553,X,Me,G.width,G.height),t.texSubImage2D(3553,0,0,0,G.width,G.height,le,ye,G.data)):t.texImage2D(3553,0,Me,G.width,G.height,0,le,ye,G.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Ue&&Oe&&t.texStorage3D(35866,X,Me,ke[0].width,ke[0].height,G.depth);for(let ae=0,_e=ke.length;ae<_e;ae++)Ae=ke[ae],F.format!==pn?le!==null?Ue?t.compressedTexSubImage3D(35866,ae,0,0,0,Ae.width,Ae.height,G.depth,le,Ae.data,0,0):t.compressedTexImage3D(35866,ae,Me,Ae.width,Ae.height,G.depth,0,Ae.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?t.texSubImage3D(35866,ae,0,0,0,Ae.width,Ae.height,G.depth,le,ye,Ae.data):t.texImage3D(35866,ae,Me,Ae.width,Ae.height,G.depth,0,le,ye,Ae.data)}else{Ue&&Oe&&t.texStorage2D(3553,X,Me,ke[0].width,ke[0].height);for(let ae=0,_e=ke.length;ae<_e;ae++)Ae=ke[ae],F.format!==pn?le!==null?Ue?t.compressedTexSubImage2D(3553,ae,0,0,Ae.width,Ae.height,le,Ae.data):t.compressedTexImage2D(3553,ae,Me,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ue?t.texSubImage2D(3553,ae,0,0,Ae.width,Ae.height,le,ye,Ae.data):t.texImage2D(3553,ae,Me,Ae.width,Ae.height,0,le,ye,Ae.data)}else if(F.isDataArrayTexture)Ue?(Oe&&t.texStorage3D(35866,X,Me,G.width,G.height,G.depth),t.texSubImage3D(35866,0,0,0,0,G.width,G.height,G.depth,le,ye,G.data)):t.texImage3D(35866,0,Me,G.width,G.height,G.depth,0,le,ye,G.data);else if(F.isData3DTexture)Ue?(Oe&&t.texStorage3D(32879,X,Me,G.width,G.height,G.depth),t.texSubImage3D(32879,0,0,0,0,G.width,G.height,G.depth,le,ye,G.data)):t.texImage3D(32879,0,Me,G.width,G.height,G.depth,0,le,ye,G.data);else if(F.isFramebufferTexture){if(Oe)if(Ue)t.texStorage2D(3553,X,Me,G.width,G.height);else{let ae=G.width,_e=G.height;for(let Re=0;Re<X;Re++)t.texImage2D(3553,Re,Me,ae,_e,0,le,ye,null),ae>>=1,_e>>=1}}else if(ke.length>0&&$){Ue&&Oe&&t.texStorage2D(3553,X,Me,ke[0].width,ke[0].height);for(let ae=0,_e=ke.length;ae<_e;ae++)Ae=ke[ae],Ue?t.texSubImage2D(3553,ae,0,0,le,ye,Ae):t.texImage2D(3553,ae,Me,le,ye,Ae);F.generateMipmaps=!1}else Ue?(Oe&&t.texStorage2D(3553,X,Me,G.width,G.height),t.texSubImage2D(3553,0,0,0,le,ye,G)):t.texImage2D(3553,0,Me,le,ye,G);R(F,$)&&D(Ce),ct.__version=He.version,F.onUpdate&&F.onUpdate(F)}z.__version=F.version}function st(z,F,fe){if(F.image.length!==6)return;const Ce=Ye(z,F),De=F.source;t.bindTexture(34067,z.__webglTexture,33984+fe);const He=i.get(De);if(De.version!==He.__version||Ce===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,F.flipY),n.pixelStorei(37441,F.premultiplyAlpha),n.pixelStorei(3317,F.unpackAlignment),n.pixelStorei(37443,0);const ct=F.isCompressedTexture||F.image[0].isCompressedTexture,Ve=F.image[0]&&F.image[0].isDataTexture,G=[];for(let ae=0;ae<6;ae++)!ct&&!Ve?G[ae]=M(F.image[ae],!1,!0,u):G[ae]=Ve?F.image[ae].image:F.image[ae],G[ae]=Ot(F,G[ae]);const $=G[0],le=A($)||o,ye=s.convert(F.format,F.encoding),Me=s.convert(F.type),Ae=T(F.internalFormat,ye,Me,F.encoding),ke=o&&F.isVideoTexture!==!0,Ue=He.__version===void 0||Ce===!0;let Oe=B(F,$,le);ce(34067,F,le);let X;if(ct){ke&&Ue&&t.texStorage2D(34067,Oe,Ae,$.width,$.height);for(let ae=0;ae<6;ae++){X=G[ae].mipmaps;for(let _e=0;_e<X.length;_e++){const Re=X[_e];F.format!==pn?ye!==null?ke?t.compressedTexSubImage2D(34069+ae,_e,0,0,Re.width,Re.height,ye,Re.data):t.compressedTexImage2D(34069+ae,_e,Ae,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ke?t.texSubImage2D(34069+ae,_e,0,0,Re.width,Re.height,ye,Me,Re.data):t.texImage2D(34069+ae,_e,Ae,Re.width,Re.height,0,ye,Me,Re.data)}}}else{X=F.mipmaps,ke&&Ue&&(X.length>0&&Oe++,t.texStorage2D(34067,Oe,Ae,G[0].width,G[0].height));for(let ae=0;ae<6;ae++)if(Ve){ke?t.texSubImage2D(34069+ae,0,0,0,G[ae].width,G[ae].height,ye,Me,G[ae].data):t.texImage2D(34069+ae,0,Ae,G[ae].width,G[ae].height,0,ye,Me,G[ae].data);for(let _e=0;_e<X.length;_e++){const ze=X[_e].image[ae].image;ke?t.texSubImage2D(34069+ae,_e+1,0,0,ze.width,ze.height,ye,Me,ze.data):t.texImage2D(34069+ae,_e+1,Ae,ze.width,ze.height,0,ye,Me,ze.data)}}else{ke?t.texSubImage2D(34069+ae,0,0,0,ye,Me,G[ae]):t.texImage2D(34069+ae,0,Ae,ye,Me,G[ae]);for(let _e=0;_e<X.length;_e++){const Re=X[_e];ke?t.texSubImage2D(34069+ae,_e+1,0,0,ye,Me,Re.image[ae]):t.texImage2D(34069+ae,_e+1,Ae,ye,Me,Re.image[ae])}}}R(F,le)&&D(34067),He.__version=De.version,F.onUpdate&&F.onUpdate(F)}z.__version=F.version}function Fe(z,F,fe,Ce,De){const He=s.convert(fe.format,fe.encoding),ct=s.convert(fe.type),Ve=T(fe.internalFormat,He,ct,fe.encoding);i.get(F).__hasExternalTextures||(De===32879||De===35866?t.texImage3D(De,0,Ve,F.width,F.height,F.depth,0,He,ct,null):t.texImage2D(De,0,Ve,F.width,F.height,0,He,ct,null)),t.bindFramebuffer(36160,z),nt(F)?p.framebufferTexture2DMultisampleEXT(36160,Ce,De,i.get(fe).__webglTexture,0,it(F)):(De===3553||De>=34069&&De<=34074)&&n.framebufferTexture2D(36160,Ce,De,i.get(fe).__webglTexture,0),t.bindFramebuffer(36160,null)}function at(z,F,fe){if(n.bindRenderbuffer(36161,z),F.depthBuffer&&!F.stencilBuffer){let Ce=33189;if(fe||nt(F)){const De=F.depthTexture;De&&De.isDepthTexture&&(De.type===Pn?Ce=36012:De.type===pa&&(Ce=33190));const He=it(F);nt(F)?p.renderbufferStorageMultisampleEXT(36161,He,Ce,F.width,F.height):n.renderbufferStorageMultisample(36161,He,Ce,F.width,F.height)}else n.renderbufferStorage(36161,Ce,F.width,F.height);n.framebufferRenderbuffer(36160,36096,36161,z)}else if(F.depthBuffer&&F.stencilBuffer){const Ce=it(F);fe&&nt(F)===!1?n.renderbufferStorageMultisample(36161,Ce,35056,F.width,F.height):nt(F)?p.renderbufferStorageMultisampleEXT(36161,Ce,35056,F.width,F.height):n.renderbufferStorage(36161,34041,F.width,F.height),n.framebufferRenderbuffer(36160,33306,36161,z)}else{const Ce=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let De=0;De<Ce.length;De++){const He=Ce[De],ct=s.convert(He.format,He.encoding),Ve=s.convert(He.type),G=T(He.internalFormat,ct,Ve,He.encoding),$=it(F);fe&&nt(F)===!1?n.renderbufferStorageMultisample(36161,$,G,F.width,F.height):nt(F)?p.renderbufferStorageMultisampleEXT(36161,$,G,F.width,F.height):n.renderbufferStorage(36161,G,F.width,F.height)}}n.bindRenderbuffer(36161,null)}function Se(z,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,z),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),j(F.depthTexture,0);const Ce=i.get(F.depthTexture).__webglTexture,De=it(F);if(F.depthTexture.format===So)nt(F)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ce,0,De):n.framebufferTexture2D(36160,36096,3553,Ce,0);else if(F.depthTexture.format===Ro)nt(F)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ce,0,De):n.framebufferTexture2D(36160,33306,3553,Ce,0);else throw new Error("Unknown depthTexture format")}function me(z){const F=i.get(z),fe=z.isWebGLCubeRenderTarget===!0;if(z.depthTexture&&!F.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");Se(F.__webglFramebuffer,z)}else if(fe){F.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)t.bindFramebuffer(36160,F.__webglFramebuffer[Ce]),F.__webglDepthbuffer[Ce]=n.createRenderbuffer(),at(F.__webglDepthbuffer[Ce],z,!1)}else t.bindFramebuffer(36160,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),at(F.__webglDepthbuffer,z,!1);t.bindFramebuffer(36160,null)}function Be(z,F,fe){const Ce=i.get(z);F!==void 0&&Fe(Ce.__webglFramebuffer,z,z.texture,36064,3553),fe!==void 0&&me(z)}function Xe(z){const F=z.texture,fe=i.get(z),Ce=i.get(F);z.addEventListener("dispose",Z),z.isWebGLMultipleRenderTargets!==!0&&(Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture()),Ce.__version=F.version,a.memory.textures++);const De=z.isWebGLCubeRenderTarget===!0,He=z.isWebGLMultipleRenderTargets===!0,ct=A(z)||o;if(De){fe.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)fe.__webglFramebuffer[Ve]=n.createFramebuffer()}else{if(fe.__webglFramebuffer=n.createFramebuffer(),He)if(r.drawBuffers){const Ve=z.texture;for(let G=0,$=Ve.length;G<$;G++){const le=i.get(Ve[G]);le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&z.samples>0&&nt(z)===!1){const Ve=He?F:[F];fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let G=0;G<Ve.length;G++){const $=Ve[G];fe.__webglColorRenderbuffer[G]=n.createRenderbuffer(),n.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[G]);const le=s.convert($.format,$.encoding),ye=s.convert($.type),Me=T($.internalFormat,le,ye,$.encoding,z.isXRRenderTarget===!0),Ae=it(z);n.renderbufferStorageMultisample(36161,Ae,Me,z.width,z.height),n.framebufferRenderbuffer(36160,36064+G,36161,fe.__webglColorRenderbuffer[G])}n.bindRenderbuffer(36161,null),z.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),at(fe.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(36160,null)}}if(De){t.bindTexture(34067,Ce.__webglTexture),ce(34067,F,ct);for(let Ve=0;Ve<6;Ve++)Fe(fe.__webglFramebuffer[Ve],z,F,36064,34069+Ve);R(F,ct)&&D(34067),t.unbindTexture()}else if(He){const Ve=z.texture;for(let G=0,$=Ve.length;G<$;G++){const le=Ve[G],ye=i.get(le);t.bindTexture(3553,ye.__webglTexture),ce(3553,le,ct),Fe(fe.__webglFramebuffer,z,le,36064+G,3553),R(le,ct)&&D(3553)}t.unbindTexture()}else{let Ve=3553;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(o?Ve=z.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ve,Ce.__webglTexture),ce(Ve,F,ct),Fe(fe.__webglFramebuffer,z,F,36064,Ve),R(F,ct)&&D(Ve),t.unbindTexture()}z.depthBuffer&&me(z)}function Le(z){const F=A(z)||o,fe=z.isWebGLMultipleRenderTargets===!0?z.texture:[z.texture];for(let Ce=0,De=fe.length;Ce<De;Ce++){const He=fe[Ce];if(R(He,F)){const ct=z.isWebGLCubeRenderTarget?34067:3553,Ve=i.get(He).__webglTexture;t.bindTexture(ct,Ve),D(ct),t.unbindTexture()}}}function ot(z){if(o&&z.samples>0&&nt(z)===!1){const F=z.isWebGLMultipleRenderTargets?z.texture:[z.texture],fe=z.width,Ce=z.height;let De=16384;const He=[],ct=z.stencilBuffer?33306:36096,Ve=i.get(z),G=z.isWebGLMultipleRenderTargets===!0;if(G)for(let $=0;$<F.length;$++)t.bindFramebuffer(36160,Ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$,36161,null),t.bindFramebuffer(36160,Ve.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$,3553,null,0);t.bindFramebuffer(36008,Ve.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ve.__webglFramebuffer);for(let $=0;$<F.length;$++){He.push(36064+$),z.depthBuffer&&He.push(ct);const le=Ve.__ignoreDepthValues!==void 0?Ve.__ignoreDepthValues:!1;if(le===!1&&(z.depthBuffer&&(De|=256),z.stencilBuffer&&(De|=1024)),G&&n.framebufferRenderbuffer(36008,36064,36161,Ve.__webglColorRenderbuffer[$]),le===!0&&(n.invalidateFramebuffer(36008,[ct]),n.invalidateFramebuffer(36009,[ct])),G){const ye=i.get(F[$]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ye,0)}n.blitFramebuffer(0,0,fe,Ce,0,0,fe,Ce,De,9728),v&&n.invalidateFramebuffer(36008,He)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),G)for(let $=0;$<F.length;$++){t.bindFramebuffer(36160,Ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$,36161,Ve.__webglColorRenderbuffer[$]);const le=i.get(F[$]).__webglTexture;t.bindFramebuffer(36160,Ve.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$,3553,le,0)}t.bindFramebuffer(36009,Ve.__webglMultisampledFramebuffer)}}function it(z){return Math.min(h,z.samples)}function nt(z){const F=i.get(z);return o&&z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Nt(z){const F=a.render.frame;m.get(z)!==F&&(m.set(z,F),z.update())}function Ot(z,F){const fe=z.encoding,Ce=z.format,De=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||z.format===a0||fe!==ps&&(fe===Wt?o===!1?e.has("EXT_sRGB")===!0&&Ce===pn?(z.format=a0,z.minFilter=qe,z.generateMipmaps=!1):F=lM.sRGBToLinear(F):(Ce!==pn||De!==cn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),F}this.allocateTextureUnit=I,this.resetTextureUnits=pe,this.setTexture2D=j,this.setTexture2DArray=V,this.setTexture3D=Q,this.setTextureCube=ge,this.rebindTextures=Be,this.setupRenderTarget=Xe,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=nt}function oD(n,e,t){const i=t.isWebGL2;function r(s,a=null){let o;if(s===cn)return 5121;if(s===FR)return 32819;if(s===kR)return 32820;if(s===IR)return 5120;if(s===LR)return 5122;if(s===iM)return 5123;if(s===NR)return 5124;if(s===pa)return 5125;if(s===Pn)return 5126;if(s===er)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===UR)return 6406;if(s===pn)return 6408;if(s===O0)return 6409;if(s===zR)return 6410;if(s===So)return 6402;if(s===Ro)return 34041;if(s===OR)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===a0)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===z0)return 6403;if(s===HR)return 36244;if(s===rM)return 33319;if(s===GR)return 33320;if(s===VR)return 36249;if(s===Mg||s===_g||s===Ag||s===bg)if(a===Wt)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===Mg)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===_g)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ag)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===bg)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Mg)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===_g)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ag)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===bg)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===q1||s===$1||s===ew||s===tw)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===q1)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===$1)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===ew)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===tw)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===WR)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===nw||s===iw)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===nw)return a===Wt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===iw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===rw||s===sw||s===aw||s===ow||s===lw||s===cw||s===uw||s===fw||s===dw||s===hw||s===pw||s===mw||s===gw||s===vw)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===rw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===sw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===aw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ow)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===lw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===cw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===uw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===fw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===dw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===hw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===pw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===mw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===gw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===vw)return a===Wt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===yw)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===yw)return a===Wt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===wo?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class lD extends hn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ga extends Ut{constructor(){super(),this.isGroup=!0,this.type="Group"}}const H5={type:"move"};class mx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ga,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ga,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ga,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const g of e.hand.values()){const w=t.getJointPose(g,i),x=this._getHandJoint(u,g);w!==null&&(x.matrix.fromArray(w.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=w.radius),x.visible=w!==null}const d=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=d.position.distanceTo(h.position),v=.02,m=.005;u.inputState.pinching&&p>v+m?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=v-m&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(H5)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ga;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class J0 extends $t{constructor(e,t,i,r,s,a,o,l,u,d){if(d=d!==void 0?d:So,d!==So&&d!==Ro)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===So&&(i=pa),i===void 0&&d===Ro&&(i=wo),super(null,r,s,a,o,l,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ht,this.minFilter=l!==void 0?l:ht,this.flipY=!1,this.generateMipmaps=!1}}class G5 extends Vr{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=null,u=null,d=null,h=null,p=null,v=null;const m=t.getContextAttributes();let g=null,w=null;const x=[],S=[],M=new Set,A=new Map,E=new hn;E.layers.enable(1),E.viewport=new Dt;const R=new hn;R.layers.enable(2),R.viewport=new Dt;const D=[E,R],T=new lD;T.layers.enable(1),T.layers.enable(2);let B=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let Q=x[V];return Q===void 0&&(Q=new mx,x[V]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(V){let Q=x[V];return Q===void 0&&(Q=new mx,x[V]=Q),Q.getGripSpace()},this.getHand=function(V){let Q=x[V];return Q===void 0&&(Q=new mx,x[V]=Q),Q.getHandSpace()};function H(V){const Q=S.indexOf(V.inputSource);if(Q===-1)return;const ge=x[Q];ge!==void 0&&ge.dispatchEvent({type:V.type,data:V.inputSource})}function Z(){r.removeEventListener("select",H),r.removeEventListener("selectstart",H),r.removeEventListener("selectend",H),r.removeEventListener("squeeze",H),r.removeEventListener("squeezestart",H),r.removeEventListener("squeezeend",H),r.removeEventListener("end",Z),r.removeEventListener("inputsourceschange",W);for(let V=0;V<x.length;V++){const Q=S[V];Q!==null&&(S[V]=null,x[V].disconnect(Q))}B=null,L=null,e.setRenderTarget(g),p=null,h=null,d=null,r=null,w=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){o=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(V){if(r=V,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",H),r.addEventListener("selectstart",H),r.addEventListener("selectend",H),r.addEventListener("squeeze",H),r.addEventListener("squeezestart",H),r.addEventListener("squeezeend",H),r.addEventListener("end",Z),r.addEventListener("inputsourceschange",W),m.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:r.renderState.layers===void 0?m.antialias:!0,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,Q),r.updateRenderState({baseLayer:p}),w=new Ct(p.framebufferWidth,p.framebufferHeight,{format:pn,type:cn,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let Q=null,ge=null,xe=null;m.depth&&(xe=m.stencil?35056:33190,Q=m.stencil?Ro:So,ge=m.stencil?wo:pa);const be={colorFormat:32856,depthFormat:xe,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(be),r.updateRenderState({layers:[h]}),w=new Ct(h.textureWidth,h.textureHeight,{format:pn,type:cn,depthTexture:new J0(h.textureWidth,h.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});const ce=e.properties.get(w);ce.__ignoreDepthValues=h.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await r.requestReferenceSpace(o),j.setContext(r),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function W(V){for(let Q=0;Q<V.removed.length;Q++){const ge=V.removed[Q],xe=S.indexOf(ge);xe>=0&&(S[xe]=null,x[xe].disconnect(ge))}for(let Q=0;Q<V.added.length;Q++){const ge=V.added[Q];let xe=S.indexOf(ge);if(xe===-1){for(let ce=0;ce<x.length;ce++)if(ce>=S.length){S.push(ge),xe=ce;break}else if(S[ce]===null){S[ce]=ge,xe=ce;break}if(xe===-1)break}const be=x[xe];be&&be.connect(ge)}}const K=new k,ie=new k;function ue(V,Q,ge){K.setFromMatrixPosition(Q.matrixWorld),ie.setFromMatrixPosition(ge.matrixWorld);const xe=K.distanceTo(ie),be=Q.projectionMatrix.elements,ce=ge.projectionMatrix.elements,Ye=be[14]/(be[10]-1),Je=be[14]/(be[10]+1),st=(be[9]+1)/be[5],Fe=(be[9]-1)/be[5],at=(be[8]-1)/be[0],Se=(ce[8]+1)/ce[0],me=Ye*at,Be=Ye*Se,Xe=xe/(-at+Se),Le=Xe*-at;Q.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Le),V.translateZ(Xe),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const ot=Ye+Xe,it=Je+Xe,nt=me-Le,Nt=Be+(xe-Le),Ot=st*Je/it*ot,z=Fe*Je/it*ot;V.projectionMatrix.makePerspective(nt,Nt,Ot,z,ot,it)}function pe(V,Q){Q===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(Q.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(r===null)return;T.near=R.near=E.near=V.near,T.far=R.far=E.far=V.far,(B!==T.near||L!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),B=T.near,L=T.far);const Q=V.parent,ge=T.cameras;pe(T,Q);for(let be=0;be<ge.length;be++)pe(ge[be],Q);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),V.matrix.copy(T.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const xe=V.children;for(let be=0,ce=xe.length;be<ce;be++)xe[be].updateMatrixWorld(!0);ge.length===2?ue(T,E,R):T.projectionMatrix.copy(E.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(V){h!==null&&(h.fixedFoveation=V),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=V)},this.getPlanes=function(){return M};let I=null;function J(V,Q){if(u=Q.getViewerPose(l||a),v=Q,u!==null){const ge=u.views;p!==null&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let xe=!1;ge.length!==T.cameras.length&&(T.cameras.length=0,xe=!0);for(let be=0;be<ge.length;be++){const ce=ge[be];let Ye=null;if(p!==null)Ye=p.getViewport(ce);else{const st=d.getViewSubImage(h,ce);Ye=st.viewport,be===0&&(e.setRenderTargetTextures(w,st.colorTexture,h.ignoreDepthValues?void 0:st.depthStencilTexture),e.setRenderTarget(w))}let Je=D[be];Je===void 0&&(Je=new hn,Je.layers.enable(be),Je.viewport=new Dt,D[be]=Je),Je.matrix.fromArray(ce.transform.matrix),Je.projectionMatrix.fromArray(ce.projectionMatrix),Je.viewport.set(Ye.x,Ye.y,Ye.width,Ye.height),be===0&&T.matrix.copy(Je.matrix),xe===!0&&T.cameras.push(Je)}}for(let ge=0;ge<x.length;ge++){const xe=S[ge],be=x[ge];xe!==null&&be!==void 0&&be.update(xe,Q,l||a)}if(I&&I(V,Q),Q.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Q.detectedPlanes});let ge=null;for(const xe of M)Q.detectedPlanes.has(xe)||(ge===null&&(ge=[]),ge.push(xe));if(ge!==null)for(const xe of ge)M.delete(xe),A.delete(xe),i.dispatchEvent({type:"planeremoved",data:xe});for(const xe of Q.detectedPlanes)if(!M.has(xe))M.add(xe),A.set(xe,Q.lastChangedTime),i.dispatchEvent({type:"planeadded",data:xe});else{const be=A.get(xe);xe.lastChangedTime>be&&(A.set(xe,xe.lastChangedTime),i.dispatchEvent({type:"planechanged",data:xe}))}}v=null}const j=new nD;j.setAnimationLoop(J),this.setAnimationLoop=function(V){I=V},this.dispose=function(){}}}function V5(n,e){function t(g,w){w.color.getRGB(g.fogColor.value,tD(n)),w.isFog?(g.fogNear.value=w.near,g.fogFar.value=w.far):w.isFogExp2&&(g.fogDensity.value=w.density)}function i(g,w,x,S,M){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(g,w):w.isMeshToonMaterial?(r(g,w),d(g,w)):w.isMeshPhongMaterial?(r(g,w),u(g,w)):w.isMeshStandardMaterial?(r(g,w),h(g,w),w.isMeshPhysicalMaterial&&p(g,w,M)):w.isMeshMatcapMaterial?(r(g,w),v(g,w)):w.isMeshDepthMaterial?r(g,w):w.isMeshDistanceMaterial?(r(g,w),m(g,w)):w.isMeshNormalMaterial?r(g,w):w.isLineBasicMaterial?(s(g,w),w.isLineDashedMaterial&&a(g,w)):w.isPointsMaterial?o(g,w,x,S):w.isSpriteMaterial?l(g,w):w.isShadowMaterial?(g.color.value.copy(w.color),g.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function r(g,w){g.opacity.value=w.opacity,w.color&&g.diffuse.value.copy(w.color),w.emissive&&g.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.bumpMap&&(g.bumpMap.value=w.bumpMap,g.bumpScale.value=w.bumpScale,w.side===pi&&(g.bumpScale.value*=-1)),w.displacementMap&&(g.displacementMap.value=w.displacementMap,g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap),w.normalMap&&(g.normalMap.value=w.normalMap,g.normalScale.value.copy(w.normalScale),w.side===pi&&g.normalScale.value.negate()),w.specularMap&&(g.specularMap.value=w.specularMap),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);const x=e.get(w).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=w.reflectivity,g.ior.value=w.ior,g.refractionRatio.value=w.refractionRatio),w.lightMap){g.lightMap.value=w.lightMap;const A=n.physicallyCorrectLights!==!0?Math.PI:1;g.lightMapIntensity.value=w.lightMapIntensity*A}w.aoMap&&(g.aoMap.value=w.aoMap,g.aoMapIntensity.value=w.aoMapIntensity);let S;w.map?S=w.map:w.specularMap?S=w.specularMap:w.displacementMap?S=w.displacementMap:w.normalMap?S=w.normalMap:w.bumpMap?S=w.bumpMap:w.roughnessMap?S=w.roughnessMap:w.metalnessMap?S=w.metalnessMap:w.alphaMap?S=w.alphaMap:w.emissiveMap?S=w.emissiveMap:w.clearcoatMap?S=w.clearcoatMap:w.clearcoatNormalMap?S=w.clearcoatNormalMap:w.clearcoatRoughnessMap?S=w.clearcoatRoughnessMap:w.iridescenceMap?S=w.iridescenceMap:w.iridescenceThicknessMap?S=w.iridescenceThicknessMap:w.specularIntensityMap?S=w.specularIntensityMap:w.specularColorMap?S=w.specularColorMap:w.transmissionMap?S=w.transmissionMap:w.thicknessMap?S=w.thicknessMap:w.sheenColorMap?S=w.sheenColorMap:w.sheenRoughnessMap&&(S=w.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),g.uvTransform.value.copy(S.matrix));let M;w.aoMap?M=w.aoMap:w.lightMap&&(M=w.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uv2Transform.value.copy(M.matrix))}function s(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity}function a(g,w){g.dashSize.value=w.dashSize,g.totalSize.value=w.dashSize+w.gapSize,g.scale.value=w.scale}function o(g,w,x,S){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.size.value=w.size*x,g.scale.value=S*.5,w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);let M;w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),g.uvTransform.value.copy(M.matrix))}function l(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.rotation.value=w.rotation,w.map&&(g.map.value=w.map),w.alphaMap&&(g.alphaMap.value=w.alphaMap),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);let x;w.map?x=w.map:w.alphaMap&&(x=w.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function u(g,w){g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4)}function d(g,w){w.gradientMap&&(g.gradientMap.value=w.gradientMap)}function h(g,w){g.roughness.value=w.roughness,g.metalness.value=w.metalness,w.roughnessMap&&(g.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(g.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(g.envMapIntensity.value=w.envMapIntensity)}function p(g,w,x){g.ior.value=w.ior,w.sheen>0&&(g.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),g.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(g.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(g.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(g.clearcoat.value=w.clearcoat,g.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(g.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),g.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===pi&&g.clearcoatNormalScale.value.negate())),w.iridescence>0&&(g.iridescence.value=w.iridescence,g.iridescenceIOR.value=w.iridescenceIOR,g.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(g.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(g.transmission.value=w.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),w.transmissionMap&&(g.transmissionMap.value=w.transmissionMap),g.thickness.value=w.thickness,w.thicknessMap&&(g.thicknessMap.value=w.thicknessMap),g.attenuationDistance.value=w.attenuationDistance,g.attenuationColor.value.copy(w.attenuationColor)),g.specularIntensity.value=w.specularIntensity,g.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(g.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(g.specularColorMap.value=w.specularColorMap)}function v(g,w){w.matcap&&(g.matcap.value=w.matcap)}function m(g,w){g.referencePosition.value.copy(w.referencePosition),g.nearDistance.value=w.nearDistance,g.farDistance.value=w.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function W5(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(S,M){const A=M.program;i.uniformBlockBinding(S,A)}function u(S,M){let A=r[S.id];A===void 0&&(m(S),A=d(S),r[S.id]=A,S.addEventListener("dispose",w));const E=M.program;i.updateUBOMapping(S,E);const R=e.render.frame;s[S.id]!==R&&(p(S),s[S.id]=R)}function d(S){const M=h();S.__bindingPointIndex=M;const A=n.createBuffer(),E=S.__size,R=S.usage;return n.bindBuffer(35345,A),n.bufferData(35345,E,R),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,A),A}function h(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const M=r[S.id],A=S.uniforms,E=S.__cache;n.bindBuffer(35345,M);for(let R=0,D=A.length;R<D;R++){const T=A[R];if(v(T,R,E)===!0){const B=T.__offset,L=Array.isArray(T.value)?T.value:[T.value];let H=0;for(let Z=0;Z<L.length;Z++){const W=L[Z],K=g(W);typeof W=="number"?(T.__data[0]=W,n.bufferSubData(35345,B+H,T.__data)):W.isMatrix3?(T.__data[0]=W.elements[0],T.__data[1]=W.elements[1],T.__data[2]=W.elements[2],T.__data[3]=W.elements[0],T.__data[4]=W.elements[3],T.__data[5]=W.elements[4],T.__data[6]=W.elements[5],T.__data[7]=W.elements[0],T.__data[8]=W.elements[6],T.__data[9]=W.elements[7],T.__data[10]=W.elements[8],T.__data[11]=W.elements[0]):(W.toArray(T.__data,H),H+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,B,T.__data)}}n.bindBuffer(35345,null)}function v(S,M,A){const E=S.value;if(A[M]===void 0){if(typeof E=="number")A[M]=E;else{const R=Array.isArray(E)?E:[E],D=[];for(let T=0;T<R.length;T++)D.push(R[T].clone());A[M]=D}return!0}else if(typeof E=="number"){if(A[M]!==E)return A[M]=E,!0}else{const R=Array.isArray(A[M])?A[M]:[A[M]],D=Array.isArray(E)?E:[E];for(let T=0;T<R.length;T++){const B=R[T];if(B.equals(D[T])===!1)return B.copy(D[T]),!0}}return!1}function m(S){const M=S.uniforms;let A=0;const E=16;let R=0;for(let D=0,T=M.length;D<T;D++){const B=M[D],L={boundary:0,storage:0},H=Array.isArray(B.value)?B.value:[B.value];for(let Z=0,W=H.length;Z<W;Z++){const K=H[Z],ie=g(K);L.boundary+=ie.boundary,L.storage+=ie.storage}if(B.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=A,D>0){R=A%E;const Z=E-R;R!==0&&Z-L.boundary<0&&(A+=E-R,B.__offset=A)}A+=L.storage}return R=A%E,R>0&&(A+=E-R),S.__size=A,S.__cache={},this}function g(S){const M={boundary:0,storage:0};return typeof S=="number"?(M.boundary=4,M.storage=4):S.isVector2?(M.boundary=8,M.storage=8):S.isVector3||S.isColor?(M.boundary=16,M.storage=12):S.isVector4?(M.boundary=16,M.storage=16):S.isMatrix3?(M.boundary=48,M.storage=48):S.isMatrix4?(M.boundary=64,M.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),M}function w(S){const M=S.target;M.removeEventListener("dispose",w);const A=a.indexOf(M.__bindingPointIndex);a.splice(A,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function x(){for(const S in r)n.deleteBuffer(r[S]);a=[],r={},s={}}return{bind:l,update:u,dispose:x}}function j5(){const n=rh("canvas");return n.style.display="block",n}function gM(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:j5(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;t!==null?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let h=null,p=null;const v=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ps,this.physicallyCorrectLights=!1,this.toneMapping=fs,this.toneMappingExposure=1;const g=this;let w=!1,x=0,S=0,M=null,A=-1,E=null;const R=new Dt,D=new Dt;let T=null,B=e.width,L=e.height,H=1,Z=null,W=null;const K=new Dt(0,0,B,L),ie=new Dt(0,0,B,L);let ue=!1;const pe=new V0;let I=!1,J=!1,j=null;const V=new je,Q=new se,ge=new k,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function be(){return M===null?H:1}let ce=t;function Ye(U,re){for(let ve=0;ve<U.length;ve++){const ee=U[ve],we=e.getContext(ee,re);if(we!==null)return we}return null}try{const U={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ea}`),e.addEventListener("webglcontextlost",Me,!1),e.addEventListener("webglcontextrestored",Ae,!1),e.addEventListener("webglcontextcreationerror",ke,!1),ce===null){const re=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&re.shift(),ce=Ye(re,U),ce===null)throw Ye(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ce.getShaderPrecisionFormat===void 0&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Je,st,Fe,at,Se,me,Be,Xe,Le,ot,it,nt,Nt,Ot,z,F,fe,Ce,De,He,ct,Ve,G,$;function le(){Je=new oz(ce),st=new tz(ce,Je,n),Je.init(st),Ve=new oD(ce,Je,st),Fe=new O5(ce,Je,st),at=new uz,Se=new E5,me=new z5(ce,Je,Fe,Se,st,Ve,at),Be=new iz(g),Xe=new az(g),Le=new xk(ce,st),G=new $O(ce,Je,Le,st),ot=new lz(ce,Le,at,G),it=new pz(ce,ot,Le,at),De=new hz(ce,st,me),F=new nz(Se),nt=new C5(g,Be,Xe,Je,st,G,F),Nt=new V5(g,Se),Ot=new P5,z=new N5(Je,st),Ce=new qO(g,Be,Xe,Fe,it,d,a),fe=new U5(g,it,st),$=new W5(ce,at,st,Fe),He=new ez(ce,Je,at,st),ct=new cz(ce,Je,at,st),at.programs=nt.programs,g.capabilities=st,g.extensions=Je,g.properties=Se,g.renderLists=Ot,g.shadowMap=fe,g.state=Fe,g.info=at}le();const ye=new G5(g,ce);this.xr=ye,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const U=Je.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Je.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(U){U!==void 0&&(H=U,this.setSize(B,L,!1))},this.getSize=function(U){return U.set(B,L)},this.setSize=function(U,re,ve){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}B=U,L=re,e.width=Math.floor(U*H),e.height=Math.floor(re*H),ve!==!1&&(e.style.width=U+"px",e.style.height=re+"px"),this.setViewport(0,0,U,re)},this.getDrawingBufferSize=function(U){return U.set(B*H,L*H).floor()},this.setDrawingBufferSize=function(U,re,ve){B=U,L=re,H=ve,e.width=Math.floor(U*ve),e.height=Math.floor(re*ve),this.setViewport(0,0,U,re)},this.getCurrentViewport=function(U){return U.copy(R)},this.getViewport=function(U){return U.copy(K)},this.setViewport=function(U,re,ve,ee){U.isVector4?K.set(U.x,U.y,U.z,U.w):K.set(U,re,ve,ee),Fe.viewport(R.copy(K).multiplyScalar(H).floor())},this.getScissor=function(U){return U.copy(ie)},this.setScissor=function(U,re,ve,ee){U.isVector4?ie.set(U.x,U.y,U.z,U.w):ie.set(U,re,ve,ee),Fe.scissor(D.copy(ie).multiplyScalar(H).floor())},this.getScissorTest=function(){return ue},this.setScissorTest=function(U){Fe.setScissorTest(ue=U)},this.setOpaqueSort=function(U){Z=U},this.setTransparentSort=function(U){W=U},this.getClearColor=function(U){return U.copy(Ce.getClearColor())},this.setClearColor=function(){Ce.setClearColor.apply(Ce,arguments)},this.getClearAlpha=function(){return Ce.getClearAlpha()},this.setClearAlpha=function(){Ce.setClearAlpha.apply(Ce,arguments)},this.clear=function(U=!0,re=!0,ve=!0){let ee=0;U&&(ee|=16384),re&&(ee|=256),ve&&(ee|=1024),ce.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Me,!1),e.removeEventListener("webglcontextrestored",Ae,!1),e.removeEventListener("webglcontextcreationerror",ke,!1),Ot.dispose(),z.dispose(),Se.dispose(),Be.dispose(),Xe.dispose(),it.dispose(),G.dispose(),$.dispose(),nt.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Re),ye.removeEventListener("sessionend",ze),j&&(j.dispose(),j=null),ft.stop()};function Me(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=at.autoReset,re=fe.enabled,ve=fe.autoUpdate,ee=fe.needsUpdate,we=fe.type;le(),at.autoReset=U,fe.enabled=re,fe.autoUpdate=ve,fe.needsUpdate=ee,fe.type=we}function ke(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Ue(U){const re=U.target;re.removeEventListener("dispose",Ue),Oe(re)}function Oe(U){X(U),Se.remove(U)}function X(U){const re=Se.get(U).programs;re!==void 0&&(re.forEach(function(ve){nt.releaseProgram(ve)}),U.isShaderMaterial&&nt.releaseShaderCache(U))}this.renderBufferDirect=function(U,re,ve,ee,we,tt){re===null&&(re=xe);const ut=we.isMesh&&we.matrixWorld.determinant()<0,xt=Oo(U,re,ve,ee,we);Fe.setMaterial(ee,ut);let _t=ve.index,It=1;ee.wireframe===!0&&(_t=ot.getWireframeAttribute(ve),It=2);const Tt=ve.drawRange,Pt=ve.attributes.position;let _n=Tt.start*It,Bi=(Tt.start+Tt.count)*It;tt!==null&&(_n=Math.max(_n,tt.start*It),Bi=Math.min(Bi,(tt.start+tt.count)*It)),_t!==null?(_n=Math.max(_n,0),Bi=Math.min(Bi,_t.count)):Pt!=null&&(_n=Math.max(_n,0),Bi=Math.min(Bi,Pt.count));const jr=Bi-_n;if(jr<0||jr===1/0)return;G.setup(we,ee,xt,ve,_t);let Gs,un=He;if(_t!==null&&(Gs=Le.get(_t),un=ct,un.setIndex(Gs)),we.isMesh)ee.wireframe===!0?(Fe.setLineWidth(ee.wireframeLinewidth*be()),un.setMode(1)):un.setMode(4);else if(we.isLine){let wt=ee.linewidth;wt===void 0&&(wt=1),Fe.setLineWidth(wt*be()),we.isLineSegments?un.setMode(1):we.isLineLoop?un.setMode(2):un.setMode(3)}else we.isPoints?un.setMode(0):we.isSprite&&un.setMode(4);if(we.isInstancedMesh)un.renderInstances(_n,jr,we.count);else if(ve.isInstancedBufferGeometry){const wt=ve._maxInstanceCount!==void 0?ve._maxInstanceCount:1/0,zo=Math.min(ve.instanceCount,wt);un.renderInstances(_n,jr,zo)}else un.render(_n,jr)},this.compile=function(U,re){function ve(ee,we,tt){ee.transparent===!0&&ee.side===fd?(ee.side=pi,ee.needsUpdate=!0,ti(ee,we,tt),ee.side=Ns,ee.needsUpdate=!0,ti(ee,we,tt),ee.side=fd):ti(ee,we,tt)}p=z.get(U),p.init(),m.push(p),U.traverseVisible(function(ee){ee.isLight&&ee.layers.test(re.layers)&&(p.pushLight(ee),ee.castShadow&&p.pushShadow(ee))}),p.setupLights(g.physicallyCorrectLights),U.traverse(function(ee){const we=ee.material;if(we)if(Array.isArray(we))for(let tt=0;tt<we.length;tt++){const ut=we[tt];ve(ut,U,ee)}else ve(we,U,ee)}),m.pop(),p=null};let ae=null;function _e(U){ae&&ae(U)}function Re(){ft.stop()}function ze(){ft.start()}const ft=new nD;ft.setAnimationLoop(_e),typeof self<"u"&&ft.setContext(self),this.setAnimationLoop=function(U){ae=U,ye.setAnimationLoop(U),U===null?ft.stop():ft.start()},ye.addEventListener("sessionstart",Re),ye.addEventListener("sessionend",ze),this.render=function(U,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(re),re=ye.getCamera()),U.isScene===!0&&U.onBeforeRender(g,U,re,M),p=z.get(U,m.length),p.init(),m.push(p),V.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),pe.setFromProjectionMatrix(V),J=this.localClippingEnabled,I=F.init(this.clippingPlanes,J,re),h=Ot.get(U,v.length),h.init(),v.push(h),en(U,re,0,g.sortObjects),h.finish(),g.sortObjects===!0&&h.sort(Z,W),I===!0&&F.beginShadows();const ve=p.state.shadowsArray;if(fe.render(ve,U,re),I===!0&&F.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ce.render(h,U),p.setupLights(g.physicallyCorrectLights),re.isArrayCamera){const ee=re.cameras;for(let we=0,tt=ee.length;we<tt;we++){const ut=ee[we];Mn(h,U,ut,ut.viewport)}}else Mn(h,U,re);M!==null&&(me.updateMultisampleRenderTarget(M),me.updateRenderTargetMipmap(M)),U.isScene===!0&&U.onAfterRender(g,U,re),G.resetDefaultState(),A=-1,E=null,m.pop(),m.length>0?p=m[m.length-1]:p=null,v.pop(),v.length>0?h=v[v.length-1]:h=null};function en(U,re,ve,ee){if(U.visible===!1)return;if(U.layers.test(re.layers)){if(U.isGroup)ve=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(re);else if(U.isLight)p.pushLight(U),U.castShadow&&p.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||pe.intersectsSprite(U)){ee&&ge.setFromMatrixPosition(U.matrixWorld).applyMatrix4(V);const ut=it.update(U),xt=U.material;xt.visible&&h.push(U,ut,xt,ve,ge.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==at.render.frame&&(U.skeleton.update(),U.skeleton.frame=at.render.frame),!U.frustumCulled||pe.intersectsObject(U))){ee&&ge.setFromMatrixPosition(U.matrixWorld).applyMatrix4(V);const ut=it.update(U),xt=U.material;if(Array.isArray(xt)){const _t=ut.groups;for(let It=0,Tt=_t.length;It<Tt;It++){const Pt=_t[It],_n=xt[Pt.materialIndex];_n&&_n.visible&&h.push(U,ut,_n,ve,ge.z,Pt)}}else xt.visible&&h.push(U,ut,xt,ve,ge.z,null)}}const tt=U.children;for(let ut=0,xt=tt.length;ut<xt;ut++)en(tt[ut],re,ve,ee)}function Mn(U,re,ve,ee){const we=U.opaque,tt=U.transmissive,ut=U.transparent;p.setupLightsView(ve),tt.length>0&&Di(we,re,ve),ee&&Fe.viewport(R.copy(ee)),we.length>0&&Et(we,re,ve),tt.length>0&&Et(tt,re,ve),ut.length>0&&Et(ut,re,ve),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function Di(U,re,ve){const ee=st.isWebGL2;j===null&&(j=new Ct(1,1,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")?er:cn,minFilter:Fs,samples:ee&&s===!0?4:0})),g.getDrawingBufferSize(Q),ee?j.setSize(Q.x,Q.y):j.setSize(o0(Q.x),o0(Q.y));const we=g.getRenderTarget();g.setRenderTarget(j),g.clear();const tt=g.toneMapping;g.toneMapping=fs,Et(U,re,ve),g.toneMapping=tt,me.updateMultisampleRenderTarget(j),me.updateRenderTargetMipmap(j),g.setRenderTarget(we)}function Et(U,re,ve){const ee=re.isScene===!0?re.overrideMaterial:null;for(let we=0,tt=U.length;we<tt;we++){const ut=U[we],xt=ut.object,_t=ut.geometry,It=ee===null?ut.material:ee,Tt=ut.group;xt.layers.test(ve.layers)&&fi(xt,re,ve,_t,It,Tt)}}function fi(U,re,ve,ee,we,tt){U.onBeforeRender(g,re,ve,ee,we,tt),U.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),we.onBeforeRender(g,re,ve,ee,U,tt),we.transparent===!0&&we.side===fd?(we.side=pi,we.needsUpdate=!0,g.renderBufferDirect(ve,re,ee,we,U,tt),we.side=Ns,we.needsUpdate=!0,g.renderBufferDirect(ve,re,ee,we,U,tt),we.side=fd):g.renderBufferDirect(ve,re,ee,we,U,tt),U.onAfterRender(g,re,ve,ee,we,tt)}function ti(U,re,ve){re.isScene!==!0&&(re=xe);const ee=Se.get(U),we=p.state.lights,tt=p.state.shadowsArray,ut=we.state.version,xt=nt.getParameters(U,we.state,tt,re,ve),_t=nt.getProgramCacheKey(xt);let It=ee.programs;ee.environment=U.isMeshStandardMaterial?re.environment:null,ee.fog=re.fog,ee.envMap=(U.isMeshStandardMaterial?Xe:Be).get(U.envMap||ee.environment),It===void 0&&(U.addEventListener("dispose",Ue),It=new Map,ee.programs=It);let Tt=It.get(_t);if(Tt!==void 0){if(ee.currentProgram===Tt&&ee.lightsStateVersion===ut)return Ba(U,xt),Tt}else xt.uniforms=nt.getUniforms(U),U.onBuild(ve,xt,g),U.onBeforeCompile(xt,g),Tt=nt.acquireProgram(xt,_t),It.set(_t,Tt),ee.uniforms=xt.uniforms;const Pt=ee.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Pt.clippingPlanes=F.uniform),Ba(U,xt),ee.needsLights=Zt(U),ee.lightsStateVersion=ut,ee.needsLights&&(Pt.ambientLightColor.value=we.state.ambient,Pt.lightProbe.value=we.state.probe,Pt.directionalLights.value=we.state.directional,Pt.directionalLightShadows.value=we.state.directionalShadow,Pt.spotLights.value=we.state.spot,Pt.spotLightShadows.value=we.state.spotShadow,Pt.rectAreaLights.value=we.state.rectArea,Pt.ltc_1.value=we.state.rectAreaLTC1,Pt.ltc_2.value=we.state.rectAreaLTC2,Pt.pointLights.value=we.state.point,Pt.pointLightShadows.value=we.state.pointShadow,Pt.hemisphereLights.value=we.state.hemi,Pt.directionalShadowMap.value=we.state.directionalShadowMap,Pt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Pt.spotShadowMap.value=we.state.spotShadowMap,Pt.spotLightMatrix.value=we.state.spotLightMatrix,Pt.spotLightMap.value=we.state.spotLightMap,Pt.pointShadowMap.value=we.state.pointShadowMap,Pt.pointShadowMatrix.value=we.state.pointShadowMatrix);const _n=Tt.getUniforms(),Bi=Pg.seqWithValue(_n.seq,Pt);return ee.currentProgram=Tt,ee.uniformsList=Bi,Tt}function Ba(U,re){const ve=Se.get(U);ve.outputEncoding=re.outputEncoding,ve.instancing=re.instancing,ve.skinning=re.skinning,ve.morphTargets=re.morphTargets,ve.morphNormals=re.morphNormals,ve.morphColors=re.morphColors,ve.morphTargetsCount=re.morphTargetsCount,ve.numClippingPlanes=re.numClippingPlanes,ve.numIntersection=re.numClipIntersection,ve.vertexAlphas=re.vertexAlphas,ve.vertexTangents=re.vertexTangents,ve.toneMapping=re.toneMapping}function Oo(U,re,ve,ee,we){re.isScene!==!0&&(re=xe),me.resetTextureUnits();const tt=re.fog,ut=ee.isMeshStandardMaterial?re.environment:null,xt=M===null?g.outputEncoding:M.isXRRenderTarget===!0?M.texture.encoding:ps,_t=(ee.isMeshStandardMaterial?Xe:Be).get(ee.envMap||ut),It=ee.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,Tt=!!ee.normalMap&&!!ve.attributes.tangent,Pt=!!ve.morphAttributes.position,_n=!!ve.morphAttributes.normal,Bi=!!ve.morphAttributes.color,jr=ee.toneMapped?g.toneMapping:fs,Gs=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,un=Gs!==void 0?Gs.length:0,wt=Se.get(ee),zo=p.state.lights;if(I===!0&&(J===!0||U!==E)){const Xt=U===E&&ee.id===A;F.setState(ee,U,Xt)}let An=!1;ee.version===wt.__version?(wt.needsLights&&wt.lightsStateVersion!==zo.state.version||wt.outputEncoding!==xt||we.isInstancedMesh&&wt.instancing===!1||!we.isInstancedMesh&&wt.instancing===!0||we.isSkinnedMesh&&wt.skinning===!1||!we.isSkinnedMesh&&wt.skinning===!0||wt.envMap!==_t||ee.fog===!0&&wt.fog!==tt||wt.numClippingPlanes!==void 0&&(wt.numClippingPlanes!==F.numPlanes||wt.numIntersection!==F.numIntersection)||wt.vertexAlphas!==It||wt.vertexTangents!==Tt||wt.morphTargets!==Pt||wt.morphNormals!==_n||wt.morphColors!==Bi||wt.toneMapping!==jr||st.isWebGL2===!0&&wt.morphTargetsCount!==un)&&(An=!0):(An=!0,wt.__version=ee.version);let Vs=wt.currentProgram;An===!0&&(Vs=ti(ee,re,we));let $l=!1,vr=!1,yr=!1;const yt=Vs.getUniforms(),Ft=wt.uniforms;if(Fe.useProgram(Vs.program)&&($l=!0,vr=!0,yr=!0),ee.id!==A&&(A=ee.id,vr=!0),$l||E!==U){if(yt.setValue(ce,"projectionMatrix",U.projectionMatrix),st.logarithmicDepthBuffer&&yt.setValue(ce,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),E!==U&&(E=U,vr=!0,yr=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){const Xt=yt.map.cameraPosition;Xt!==void 0&&Xt.setValue(ce,ge.setFromMatrixPosition(U.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&yt.setValue(ce,"isOrthographic",U.isOrthographicCamera===!0),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||we.isSkinnedMesh)&&yt.setValue(ce,"viewMatrix",U.matrixWorldInverse)}if(we.isSkinnedMesh){yt.setOptional(ce,we,"bindMatrix"),yt.setOptional(ce,we,"bindMatrixInverse");const Xt=we.skeleton;Xt&&(st.floatVertexTextures?(Xt.boneTexture===null&&Xt.computeBoneTexture(),yt.setValue(ce,"boneTexture",Xt.boneTexture,me),yt.setValue(ce,"boneTextureSize",Xt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xr=ve.morphAttributes;if((xr.position!==void 0||xr.normal!==void 0||xr.color!==void 0&&st.isWebGL2===!0)&&De.update(we,ve,ee,Vs),(vr||wt.receiveShadow!==we.receiveShadow)&&(wt.receiveShadow=we.receiveShadow,yt.setValue(ce,"receiveShadow",we.receiveShadow)),ee.isMeshGouraudMaterial&&ee.envMap!==null&&(Ft.envMap.value=_t,Ft.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),vr&&(yt.setValue(ce,"toneMappingExposure",g.toneMappingExposure),wt.needsLights&&Hs(Ft,yr),tt&&ee.fog===!0&&Nt.refreshFogUniforms(Ft,tt),Nt.refreshMaterialUniforms(Ft,ee,H,L,j),Pg.upload(ce,wt.uniformsList,Ft,me)),ee.isShaderMaterial&&ee.uniformsNeedUpdate===!0&&(Pg.upload(ce,wt.uniformsList,Ft,me),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&yt.setValue(ce,"center",we.center),yt.setValue(ce,"modelViewMatrix",we.modelViewMatrix),yt.setValue(ce,"normalMatrix",we.normalMatrix),yt.setValue(ce,"modelMatrix",we.matrixWorld),ee.isShaderMaterial||ee.isRawShaderMaterial){const Xt=ee.uniformsGroups;for(let ni=0,Ws=Xt.length;ni<Ws;ni++)if(st.isWebGL2){const js=Xt[ni];$.update(js,Vs),$.bind(js,Vs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vs}function Hs(U,re){U.ambientLightColor.needsUpdate=re,U.lightProbe.needsUpdate=re,U.directionalLights.needsUpdate=re,U.directionalLightShadows.needsUpdate=re,U.pointLights.needsUpdate=re,U.pointLightShadows.needsUpdate=re,U.spotLights.needsUpdate=re,U.spotLightShadows.needsUpdate=re,U.rectAreaLights.needsUpdate=re,U.hemisphereLights.needsUpdate=re}function Zt(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(U,re,ve){Se.get(U.texture).__webglTexture=re,Se.get(U.depthTexture).__webglTexture=ve;const ee=Se.get(U);ee.__hasExternalTextures=!0,ee.__hasExternalTextures&&(ee.__autoAllocateDepthBuffer=ve===void 0,ee.__autoAllocateDepthBuffer||Je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ee.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,re){const ve=Se.get(U);ve.__webglFramebuffer=re,ve.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(U,re=0,ve=0){M=U,x=re,S=ve;let ee=!0,we=null,tt=!1,ut=!1;if(U){const _t=Se.get(U);_t.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(36160,null),ee=!1):_t.__webglFramebuffer===void 0?me.setupRenderTarget(U):_t.__hasExternalTextures&&me.rebindTextures(U,Se.get(U.texture).__webglTexture,Se.get(U.depthTexture).__webglTexture);const It=U.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(ut=!0);const Tt=Se.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(we=Tt[re],tt=!0):st.isWebGL2&&U.samples>0&&me.useMultisampledRTT(U)===!1?we=Se.get(U).__webglMultisampledFramebuffer:we=Tt,R.copy(U.viewport),D.copy(U.scissor),T=U.scissorTest}else R.copy(K).multiplyScalar(H).floor(),D.copy(ie).multiplyScalar(H).floor(),T=ue;if(Fe.bindFramebuffer(36160,we)&&st.drawBuffers&&ee&&Fe.drawBuffers(U,we),Fe.viewport(R),Fe.scissor(D),Fe.setScissorTest(T),tt){const _t=Se.get(U.texture);ce.framebufferTexture2D(36160,36064,34069+re,_t.__webglTexture,ve)}else if(ut){const _t=Se.get(U.texture),It=re||0;ce.framebufferTextureLayer(36160,36064,_t.__webglTexture,ve||0,It)}A=-1},this.readRenderTargetPixels=function(U,re,ve,ee,we,tt,ut){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xt=Se.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&ut!==void 0&&(xt=xt[ut]),xt){Fe.bindFramebuffer(36160,xt);try{const _t=U.texture,It=_t.format,Tt=_t.type;if(It!==pn&&Ve.convert(It)!==ce.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Pt=Tt===er&&(Je.has("EXT_color_buffer_half_float")||st.isWebGL2&&Je.has("EXT_color_buffer_float"));if(Tt!==cn&&Ve.convert(Tt)!==ce.getParameter(35738)&&!(Tt===Pn&&(st.isWebGL2||Je.has("OES_texture_float")||Je.has("WEBGL_color_buffer_float")))&&!Pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=U.width-ee&&ve>=0&&ve<=U.height-we&&ce.readPixels(re,ve,ee,we,Ve.convert(It),Ve.convert(Tt),tt)}finally{const _t=M!==null?Se.get(M).__webglFramebuffer:null;Fe.bindFramebuffer(36160,_t)}}},this.copyFramebufferToTexture=function(U,re,ve=0){const ee=Math.pow(2,-ve),we=Math.floor(re.image.width*ee),tt=Math.floor(re.image.height*ee);me.setTexture2D(re,0),ce.copyTexSubImage2D(3553,ve,0,0,U.x,U.y,we,tt),Fe.unbindTexture()},this.copyTextureToTexture=function(U,re,ve,ee=0){const we=re.image.width,tt=re.image.height,ut=Ve.convert(ve.format),xt=Ve.convert(ve.type);me.setTexture2D(ve,0),ce.pixelStorei(37440,ve.flipY),ce.pixelStorei(37441,ve.premultiplyAlpha),ce.pixelStorei(3317,ve.unpackAlignment),re.isDataTexture?ce.texSubImage2D(3553,ee,U.x,U.y,we,tt,ut,xt,re.image.data):re.isCompressedTexture?ce.compressedTexSubImage2D(3553,ee,U.x,U.y,re.mipmaps[0].width,re.mipmaps[0].height,ut,re.mipmaps[0].data):ce.texSubImage2D(3553,ee,U.x,U.y,ut,xt,re.image),ee===0&&ve.generateMipmaps&&ce.generateMipmap(3553),Fe.unbindTexture()},this.copyTextureToTexture3D=function(U,re,ve,ee,we=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const tt=U.max.x-U.min.x+1,ut=U.max.y-U.min.y+1,xt=U.max.z-U.min.z+1,_t=Ve.convert(ee.format),It=Ve.convert(ee.type);let Tt;if(ee.isData3DTexture)me.setTexture3D(ee,0),Tt=32879;else if(ee.isDataArrayTexture)me.setTexture2DArray(ee,0),Tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ce.pixelStorei(37440,ee.flipY),ce.pixelStorei(37441,ee.premultiplyAlpha),ce.pixelStorei(3317,ee.unpackAlignment);const Pt=ce.getParameter(3314),_n=ce.getParameter(32878),Bi=ce.getParameter(3316),jr=ce.getParameter(3315),Gs=ce.getParameter(32877),un=ve.isCompressedTexture?ve.mipmaps[0]:ve.image;ce.pixelStorei(3314,un.width),ce.pixelStorei(32878,un.height),ce.pixelStorei(3316,U.min.x),ce.pixelStorei(3315,U.min.y),ce.pixelStorei(32877,U.min.z),ve.isDataTexture||ve.isData3DTexture?ce.texSubImage3D(Tt,we,re.x,re.y,re.z,tt,ut,xt,_t,It,un.data):ve.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(Tt,we,re.x,re.y,re.z,tt,ut,xt,_t,un.data)):ce.texSubImage3D(Tt,we,re.x,re.y,re.z,tt,ut,xt,_t,It,un),ce.pixelStorei(3314,Pt),ce.pixelStorei(32878,_n),ce.pixelStorei(3316,Bi),ce.pixelStorei(3315,jr),ce.pixelStorei(32877,Gs),we===0&&ee.generateMipmaps&&ce.generateMipmap(Tt),Fe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?me.setTextureCube(U,0):U.isData3DTexture?me.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?me.setTexture2DArray(U,0):me.setTexture2D(U,0),Fe.unbindTexture()},this.resetState=function(){x=0,S=0,M=null,Fe.reset(),G.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class cD extends gM{}cD.prototype.isWebGL1Renderer=!0;class X0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ee(e),this.density=t}clone(){return new X0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class K0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ee(e),this.near=t,this.far=i}clone(){return new K0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Bu extends Ut{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Ph{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=dr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ni=new k;class Do{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.applyMatrix4(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.applyNormalMatrix(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.transformDirection(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ma(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ma(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ma(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ma(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new bt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Do(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vM extends Rn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ec;const Hf=new k,Tc=new k,Pc=new k,Rc=new se,Gf=new se,uD=new je,Tm=new k,Vf=new k,Pm=new k,Zb=new se,gx=new se,qb=new se;class fD extends Ut{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Ec===void 0){Ec=new mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ph(t,5);Ec.setIndex([0,1,2,0,2,3]),Ec.setAttribute("position",new Do(i,3,0,!1)),Ec.setAttribute("uv",new Do(i,2,3,!1))}this.geometry=Ec,this.material=e!==void 0?e:new vM,this.center=new se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tc.setFromMatrixScale(this.matrixWorld),uD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Pc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tc.multiplyScalar(-Pc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Rm(Tm.set(-.5,-.5,0),Pc,a,Tc,r,s),Rm(Vf.set(.5,-.5,0),Pc,a,Tc,r,s),Rm(Pm.set(.5,.5,0),Pc,a,Tc,r,s),Zb.set(0,0),gx.set(1,0),qb.set(1,1);let o=e.ray.intersectTriangle(Tm,Vf,Pm,!1,Hf);if(o===null&&(Rm(Vf.set(-.5,.5,0),Pc,a,Tc,r,s),gx.set(0,1),o=e.ray.intersectTriangle(Tm,Pm,Vf,!1,Hf),o===null))return;const l=e.ray.origin.distanceTo(Hf);l<e.near||l>e.far||t.push({distance:l,point:Hf.clone(),uv:Fr.getUV(Hf,Tm,Vf,Pm,Zb,gx,qb,new se),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Rm(n,e,t,i,r,s){Rc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Gf.x=s*Rc.x-r*Rc.y,Gf.y=r*Rc.x+s*Rc.y):Gf.copy(Rc),n.copy(e),n.x+=Gf.x,n.y+=Gf.y,n.applyMatrix4(uD)}const Dm=new k,$b=new k;class dD extends Ut{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Dm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Dm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Dm.setFromMatrixPosition(e.matrixWorld),$b.setFromMatrixPosition(this.matrixWorld);const i=Dm.distanceTo($b)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const eC=new k,tC=new Dt,nC=new Dt,J5=new k,iC=new je;class yM extends Wn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new je,this.bindMatrixInverse=new je}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;tC.fromBufferAttribute(r.attributes.skinIndex,e),nC.fromBufferAttribute(r.attributes.skinWeight,e),eC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=nC.getComponent(s);if(a!==0){const o=tC.getComponent(s);iC.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(J5.copy(eC).applyMatrix4(iC),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Q0 extends Ut{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Bs extends $t{constructor(e=null,t=1,i=1,r,s,a,o,l,u=ht,d=ht,h,p){super(null,a,o,l,u,d,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const rC=new je,X5=new je;let xM=class hD{constructor(e=[],t=[]){this.uuid=dr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new je;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:X5;rC.multiplyMatrices(o,t[s]),rC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new hD(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=qR(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Bs(t,e,e,pn,Pn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Q0),this.bones.push(a),this.boneInverses.push(new je().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}};class Iu extends bt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sC=new je,aC=new je,Bm=[],K5=new je,Wf=new Wn;class wM extends Wn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Iu(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,K5)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Wf.geometry=this.geometry,Wf.material=this.material,Wf.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,sC),aC.multiplyMatrices(i,sC),Wf.matrixWorld=aC,Wf.raycast(e,Bm);for(let a=0,o=Bm.length;a<o;a++){const l=Bm[a];l.instanceId=s,l.object=this,t.push(l)}Bm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Iu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ri extends Rn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ee(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const oC=new k,lC=new k,cC=new je,vx=new Eh,Im=new Os;class _a extends Ut{constructor(e=new mt,t=new Ri){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)oC.fromBufferAttribute(t,r-1),lC.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=oC.distanceTo(lC);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Im.copy(i.boundingSphere),Im.applyMatrix4(r),Im.radius+=s,e.ray.intersectsSphere(Im)===!1)return;cC.copy(r).invert(),vx.copy(e.ray).applyMatrix4(cC);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new k,d=new k,h=new k,p=new k,v=this.isLineSegments?2:1,m=i.index,w=i.attributes.position;if(m!==null){const x=Math.max(0,a.start),S=Math.min(m.count,a.start+a.count);for(let M=x,A=S-1;M<A;M+=v){const E=m.getX(M),R=m.getX(M+1);if(u.fromBufferAttribute(w,E),d.fromBufferAttribute(w,R),vx.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(p);T<e.near||T>e.far||t.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,a.start),S=Math.min(w.count,a.start+a.count);for(let M=x,A=S-1;M<A;M+=v){if(u.fromBufferAttribute(w,M),d.fromBufferAttribute(w,M+1),vx.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:h.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const uC=new k,fC=new k;class ms extends _a{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)uC.fromBufferAttribute(t,r),fC.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+uC.distanceTo(fC);e.setAttribute("lineDistance",new Ze(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class SM extends _a{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Y0 extends Rn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ee(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dC=new je,Sw=new Eh,Lm=new Os,Nm=new k;class MM extends Ut{constructor(e=new mt,t=new Y0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lm.copy(i.boundingSphere),Lm.applyMatrix4(r),Lm.radius+=s,e.ray.intersectsSphere(Lm)===!1)return;dC.copy(r).invert(),Sw.copy(e.ray).applyMatrix4(dC);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,h=i.attributes.position;if(u!==null){const p=Math.max(0,a.start),v=Math.min(u.count,a.start+a.count);for(let m=p,g=v;m<g;m++){const w=u.getX(m);Nm.fromBufferAttribute(h,w),hC(Nm,w,l,r,e,t,this)}}else{const p=Math.max(0,a.start),v=Math.min(h.count,a.start+a.count);for(let m=p,g=v;m<g;m++)Nm.fromBufferAttribute(h,m),hC(Nm,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function hC(n,e,t,i,r,s,a){const o=Sw.distanceSqToPoint(n);if(o<t){const l=new k;Sw.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class pD extends $t{constructor(e,t,i,r,s,a,o,l,u){super(e,t,i,r,s,a,o,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:qe,this.magFilter=s!==void 0?s:qe,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Mw extends $t{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=ht,this.minFilter=ht,this.generateMipmaps=!1,this.needsUpdate=!0}}class _M extends $t{constructor(e,t,i,r,s,a,o,l,u,d,h,p){super(null,a,o,l,u,d,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Q5 extends _M{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Vn}}class mD extends $t{constructor(e,t,i,r,s,a,o,l,u){super(e,t,i,r,s,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class gs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-a,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const d=i[r],p=i[r+1]-d,v=(a-d)/p;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new se:new k);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new k,r=[],s=[],a=[],o=new k,l=new je;for(let v=0;v<=e;v++){const m=v/e;r[v]=this.getTangentAt(m,new k)}s[0]=new k,a[0]=new k;let u=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=u&&(u=d,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),a[v]=a[v-1].clone(),o.crossVectors(r[v-1],r[v]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Nn(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(l.makeRotationAxis(o,m))}a[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(Nn(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(v=-v);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],v*m)),a[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Z0 extends gs{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new se,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,v=u-this.aY;l=p*d-v*h+this.aX,u=p*h+v*d+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class gD extends Z0{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function AM(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,d,h){let p=(a-s)/u-(o-s)/(u+d)+(o-a)/d,v=(o-a)/d-(l-a)/(d+h)+(l-o)/h;p*=d,v*=d,r(a,o,p,v)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const Fm=new k,yx=new AM,xx=new AM,wx=new AM;class vD extends gs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new k){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,d;this.closed||o>0?u=r[(o-1)%s]:(Fm.subVectors(r[0],r[1]).add(r[0]),u=Fm);const h=r[o%s],p=r[(o+1)%s];if(this.closed||o+2<s?d=r[(o+2)%s]:(Fm.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Fm),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let m=Math.pow(u.distanceToSquared(h),v),g=Math.pow(h.distanceToSquared(p),v),w=Math.pow(p.distanceToSquared(d),v);g<1e-4&&(g=1),m<1e-4&&(m=g),w<1e-4&&(w=g),yx.initNonuniformCatmullRom(u.x,h.x,p.x,d.x,m,g,w),xx.initNonuniformCatmullRom(u.y,h.y,p.y,d.y,m,g,w),wx.initNonuniformCatmullRom(u.z,h.z,p.z,d.z,m,g,w)}else this.curveType==="catmullrom"&&(yx.initCatmullRom(u.x,h.x,p.x,d.x,this.tension),xx.initCatmullRom(u.y,h.y,p.y,d.y,this.tension),wx.initCatmullRom(u.z,h.z,p.z,d.z,this.tension));return i.set(yx.calc(l),xx.calc(l),wx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new k().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function pC(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function Y5(n,e){const t=1-n;return t*t*e}function Z5(n,e){return 2*(1-n)*n*e}function q5(n,e){return n*n*e}function bd(n,e,t,i){return Y5(n,e)+Z5(n,t)+q5(n,i)}function $5(n,e){const t=1-n;return t*t*t*e}function eH(n,e){const t=1-n;return 3*t*t*n*e}function tH(n,e){return 3*(1-n)*n*n*e}function nH(n,e){return n*n*n*e}function Cd(n,e,t,i,r){return $5(n,e)+eH(n,t)+tH(n,i)+nH(n,r)}class bM extends gs{constructor(e=new se,t=new se,i=new se,r=new se){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Cd(e,r.x,s.x,a.x,o.x),Cd(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yD extends gs{constructor(e=new k,t=new k,i=new k,r=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Cd(e,r.x,s.x,a.x,o.x),Cd(e,r.y,s.y,a.y,o.y),Cd(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q0 extends gs{constructor(e=new se,t=new se){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new se){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new se;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xD extends gs{constructor(e=new k,t=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new k){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CM extends gs{constructor(e=new se,t=new se,i=new se){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new se){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(bd(e,r.x,s.x,a.x),bd(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EM extends gs{constructor(e=new k,t=new k,i=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new k){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(bd(e,r.x,s.x,a.x),bd(e,r.y,s.y,a.y),bd(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TM extends gs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new se){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],u=r[a],d=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return i.set(pC(o,l.x,u.x,d.x,h.x),pC(o,l.y,u.y,d.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new se().fromArray(r))}return this}}var PM=Object.freeze({__proto__:null,ArcCurve:gD,CatmullRomCurve3:vD,CubicBezierCurve:bM,CubicBezierCurve3:yD,EllipseCurve:Z0,LineCurve:q0,LineCurve3:xD,QuadraticBezierCurve:CM,QuadraticBezierCurve3:EM,SplineCurve:TM});class wD extends gs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new q0(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const d=l[u];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new PM[r.type]().fromJSON(r))}return this}}class sh extends wD{constructor(e){super(),this.type="Path",this.currentPoint=new se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new q0(this.currentPoint.clone(),new se(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new CM(this.currentPoint.clone(),new se(e,t),new se(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new bM(this.currentPoint.clone(),new se(e,t),new se(i,r),new se(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new TM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,t+d,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const u=new Z0(e,t,i,r,s,a,o,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zu extends mt{constructor(e=[new se(0,-.5),new se(.5,0),new se(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Nn(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],d=1/t,h=new k,p=new se,v=new k,m=new k,g=new k;let w=0,x=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,x=e[S+1].y-e[S].y,v.x=x*1,v.y=-w,v.z=x*0,g.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:w=e[S+1].x-e[S].x,x=e[S+1].y-e[S].y,v.x=x*1,v.y=-w,v.z=x*0,m.copy(v),v.x+=g.x,v.y+=g.y,v.z+=g.z,v.normalize(),l.push(v.x,v.y,v.z),g.copy(m)}for(let S=0;S<=t;S++){const M=i+S*d*r,A=Math.sin(M),E=Math.cos(M);for(let R=0;R<=e.length-1;R++){h.x=e[R].x*A,h.y=e[R].y,h.z=e[R].x*E,a.push(h.x,h.y,h.z),p.x=S/t,p.y=R/(e.length-1),o.push(p.x,p.y);const D=l[3*R+0]*A,T=l[3*R+1],B=l[3*R+0]*E;u.push(D,T,B)}}for(let S=0;S<t;S++)for(let M=0;M<e.length-1;M++){const A=M+S*e.length,E=A,R=A+e.length,D=A+e.length+1,T=A+1;s.push(E,R,T),s.push(D,T,R)}this.setIndex(s),this.setAttribute("position",new Ze(a,3)),this.setAttribute("uv",new Ze(o,2)),this.setAttribute("normal",new Ze(u,3))}static fromJSON(e){return new Zu(e.points,e.segments,e.phiStart,e.phiLength)}}class Rh extends Zu{constructor(e=1,t=1,i=4,r=8){const s=new sh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Rh(e.radius,e.length,e.capSegments,e.radialSegments)}}class Dh extends mt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],u=new k,d=new se;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const v=i+h/t*r;u.x=e*Math.cos(v),u.y=e*Math.sin(v),a.push(u.x,u.y,u.z),o.push(0,0,1),d.x=(a[p]/e+1)/2,d.y=(a[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Ze(a,3)),this.setAttribute("normal",new Ze(o,3)),this.setAttribute("uv",new Ze(l,2))}static fromJSON(e){return new Dh(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Wl extends mt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],p=[],v=[];let m=0;const g=[],w=i/2;let x=0;S(),a===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(d),this.setAttribute("position",new Ze(h,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(v,2));function S(){const A=new k,E=new k;let R=0;const D=(t-e)/i;for(let T=0;T<=s;T++){const B=[],L=T/s,H=L*(t-e)+e;for(let Z=0;Z<=r;Z++){const W=Z/r,K=W*l+o,ie=Math.sin(K),ue=Math.cos(K);E.x=H*ie,E.y=-L*i+w,E.z=H*ue,h.push(E.x,E.y,E.z),A.set(ie,D,ue).normalize(),p.push(A.x,A.y,A.z),v.push(W,1-L),B.push(m++)}g.push(B)}for(let T=0;T<r;T++)for(let B=0;B<s;B++){const L=g[B][T],H=g[B+1][T],Z=g[B+1][T+1],W=g[B][T+1];d.push(L,H,W),d.push(H,Z,W),R+=6}u.addGroup(x,R,0),x+=R}function M(A){const E=m,R=new se,D=new k;let T=0;const B=A===!0?e:t,L=A===!0?1:-1;for(let Z=1;Z<=r;Z++)h.push(0,w*L,0),p.push(0,L,0),v.push(.5,.5),m++;const H=m;for(let Z=0;Z<=r;Z++){const K=Z/r*l+o,ie=Math.cos(K),ue=Math.sin(K);D.x=B*ue,D.y=w*L,D.z=B*ie,h.push(D.x,D.y,D.z),p.push(0,L,0),R.x=ie*.5+.5,R.y=ue*.5*L+.5,v.push(R.x,R.y),m++}for(let Z=0;Z<r;Z++){const W=E+Z,K=H+Z;A===!0?d.push(K,K+1,W):d.push(K+1,K,W),T+=3}u.addGroup(x,T,A===!0?1:2),x+=T}}static fromJSON(e){return new Wl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bh extends Wl{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Bh(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ra extends mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),u(i),d(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const M=new k,A=new k,E=new k;for(let R=0;R<t.length;R+=3)v(t[R+0],M),v(t[R+1],A),v(t[R+2],E),l(M,A,E,S)}function l(S,M,A,E){const R=E+1,D=[];for(let T=0;T<=R;T++){D[T]=[];const B=S.clone().lerp(A,T/R),L=M.clone().lerp(A,T/R),H=R-T;for(let Z=0;Z<=H;Z++)Z===0&&T===R?D[T][Z]=B:D[T][Z]=B.clone().lerp(L,Z/H)}for(let T=0;T<R;T++)for(let B=0;B<2*(R-T)-1;B++){const L=Math.floor(B/2);B%2===0?(p(D[T][L+1]),p(D[T+1][L]),p(D[T][L])):(p(D[T][L+1]),p(D[T+1][L+1]),p(D[T+1][L]))}}function u(S){const M=new k;for(let A=0;A<s.length;A+=3)M.x=s[A+0],M.y=s[A+1],M.z=s[A+2],M.normalize().multiplyScalar(S),s[A+0]=M.x,s[A+1]=M.y,s[A+2]=M.z}function d(){const S=new k;for(let M=0;M<s.length;M+=3){S.x=s[M+0],S.y=s[M+1],S.z=s[M+2];const A=w(S)/2/Math.PI+.5,E=x(S)/Math.PI+.5;a.push(A,1-E)}m(),h()}function h(){for(let S=0;S<a.length;S+=6){const M=a[S+0],A=a[S+2],E=a[S+4],R=Math.max(M,A,E),D=Math.min(M,A,E);R>.9&&D<.1&&(M<.2&&(a[S+0]+=1),A<.2&&(a[S+2]+=1),E<.2&&(a[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function v(S,M){const A=S*3;M.x=e[A+0],M.y=e[A+1],M.z=e[A+2]}function m(){const S=new k,M=new k,A=new k,E=new k,R=new se,D=new se,T=new se;for(let B=0,L=0;B<s.length;B+=9,L+=6){S.set(s[B+0],s[B+1],s[B+2]),M.set(s[B+3],s[B+4],s[B+5]),A.set(s[B+6],s[B+7],s[B+8]),R.set(a[L+0],a[L+1]),D.set(a[L+2],a[L+3]),T.set(a[L+4],a[L+5]),E.copy(S).add(M).add(A).divideScalar(3);const H=w(E);g(R,L+0,S,H),g(D,L+2,M,H),g(T,L+4,A,H)}}function g(S,M,A,E){E<0&&S.x===1&&(a[M]=S.x-1),A.x===0&&A.z===0&&(a[M]=E/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function x(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}static fromJSON(e){return new Ra(e.vertices,e.indices,e.radius,e.details)}}class Ih extends Ra{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ih(e.radius,e.detail)}}const km=new k,Um=new k,Sx=new k,Om=new Fr;class SD extends mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bl*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),p={},v=[];for(let m=0;m<l;m+=3){a?(u[0]=a.getX(m),u[1]=a.getX(m+1),u[2]=a.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);const{a:g,b:w,c:x}=Om;if(g.fromBufferAttribute(o,u[0]),w.fromBufferAttribute(o,u[1]),x.fromBufferAttribute(o,u[2]),Om.getNormal(Sx),h[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,h[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,h[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const M=(S+1)%3,A=h[S],E=h[M],R=Om[d[S]],D=Om[d[M]],T=`${A}_${E}`,B=`${E}_${A}`;B in p&&p[B]?(Sx.dot(p[B].normal)<=s&&(v.push(R.x,R.y,R.z),v.push(D.x,D.y,D.z)),p[B]=null):T in p||(p[T]={index0:u[S],index1:u[M],normal:Sx.clone()})}}for(const m in p)if(p[m]){const{index0:g,index1:w}=p[m];km.fromBufferAttribute(o,g),Um.fromBufferAttribute(o,w),v.push(km.x,km.y,km.z),v.push(Um.x,Um.y,Um.z)}this.setAttribute("position",new Ze(v,3))}}}class Tl extends sh{constructor(e){super(e),this.uuid=dr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new sh().fromJSON(r))}return this}}const iH={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=MD(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,d,h,p,v;if(i&&(s=lH(n,e,s,t)),n.length>80*t){o=u=n[0],l=d=n[1];for(let m=t;m<r;m+=t)h=n[m],p=n[m+1],h<o&&(o=h),p<l&&(l=p),h>u&&(u=h),p>d&&(d=p);v=Math.max(u-o,d-l),v=v!==0?32767/v:0}return ah(s,a,t,o,l,v,0),a}};function MD(n,e,t,i,r){let s,a;if(r===xH(n,e,t,i)>0)for(s=e;s<t;s+=i)a=mC(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=mC(s,n[s],n[s+1],a);return a&&$0(a,a.next)&&(lh(a),a=a.next),a}function Nl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&($0(t,t.next)||yn(t.prev,t,t.next)===0)){if(lh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ah(n,e,t,i,r,s,a){if(!n)return;!a&&s&&hH(n,i,r,s);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?sH(n,i,r,s):rH(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),lh(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=aH(Nl(n),e,t),ah(n,e,t,i,r,s,2)):a===2&&oH(n,e,t,i,r,s):ah(Nl(n),e,t,i,r,s,1);break}}}function rH(n){const e=n.prev,t=n,i=n.next;if(yn(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,l=t.y,u=i.y,d=r<s?r<a?r:a:s<a?s:a,h=o<l?o<u?o:u:l<u?l:u,p=r>s?r>a?r:a:s>a?s:a,v=o>l?o>u?o:u:l>u?l:u;let m=i.next;for(;m!==e;){if(m.x>=d&&m.x<=p&&m.y>=h&&m.y<=v&&eu(r,o,s,l,a,u,m.x,m.y)&&yn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function sH(n,e,t,i){const r=n.prev,s=n,a=n.next;if(yn(r,s,a)>=0)return!1;const o=r.x,l=s.x,u=a.x,d=r.y,h=s.y,p=a.y,v=o<l?o<u?o:u:l<u?l:u,m=d<h?d<p?d:p:h<p?h:p,g=o>l?o>u?o:u:l>u?l:u,w=d>h?d>p?d:p:h>p?h:p,x=_w(v,m,e,t,i),S=_w(g,w,e,t,i);let M=n.prevZ,A=n.nextZ;for(;M&&M.z>=x&&A&&A.z<=S;){if(M.x>=v&&M.x<=g&&M.y>=m&&M.y<=w&&M!==r&&M!==a&&eu(o,d,l,h,u,p,M.x,M.y)&&yn(M.prev,M,M.next)>=0||(M=M.prevZ,A.x>=v&&A.x<=g&&A.y>=m&&A.y<=w&&A!==r&&A!==a&&eu(o,d,l,h,u,p,A.x,A.y)&&yn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;M&&M.z>=x;){if(M.x>=v&&M.x<=g&&M.y>=m&&M.y<=w&&M!==r&&M!==a&&eu(o,d,l,h,u,p,M.x,M.y)&&yn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;A&&A.z<=S;){if(A.x>=v&&A.x<=g&&A.y>=m&&A.y<=w&&A!==r&&A!==a&&eu(o,d,l,h,u,p,A.x,A.y)&&yn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function aH(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!$0(r,s)&&_D(r,i,i.next,s)&&oh(r,s)&&oh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),lh(i),lh(i.next),i=n=s),i=i.next}while(i!==n);return Nl(i)}function oH(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&gH(a,o)){let l=AD(a,o);a=Nl(a,a.next),l=Nl(l,l.next),ah(a,e,t,i,r,s,0),ah(l,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function lH(n,e,t,i){const r=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,u=MD(n,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(mH(u));for(r.sort(cH),s=0;s<r.length;s++)t=uH(r[s],t);return t}function cH(n,e){return n.x-e.x}function uH(n,e){const t=fH(n,e);if(!t)return e;const i=AD(t,n);return Nl(i,i.next),Nl(t,t.next)}function fH(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const p=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,u=r.y;let d=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&eu(a<u?s:i,a,l,u,a<u?i:s,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(s-t.x),oh(t,n)&&(h<d||h===d&&(t.x>r.x||t.x===r.x&&dH(r,t)))&&(r=t,d=h)),t=t.next;while(t!==o);return r}function dH(n,e){return yn(n.prev,n,e.prev)<0&&yn(e.next,n,n.next)<0}function hH(n,e,t,i){let r=n;do r.z===0&&(r.z=_w(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,pH(r)}function pH(n){let e,t,i,r,s,a,o,l,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return n}function _w(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function mH(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function eu(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function gH(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!vH(n,e)&&(oh(n,e)&&oh(e,n)&&yH(n,e)&&(yn(n.prev,n,e.prev)||yn(n,e.prev,e))||$0(n,e)&&yn(n.prev,n,n.next)>0&&yn(e.prev,e,e.next)>0)}function yn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function $0(n,e){return n.x===e.x&&n.y===e.y}function _D(n,e,t,i){const r=Hm(yn(n,e,t)),s=Hm(yn(n,e,i)),a=Hm(yn(t,i,n)),o=Hm(yn(t,i,e));return!!(r!==s&&a!==o||r===0&&zm(n,t,e)||s===0&&zm(n,i,e)||a===0&&zm(t,n,i)||o===0&&zm(t,e,i))}function zm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Hm(n){return n>0?1:n<0?-1:0}function vH(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&_D(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function oh(n,e){return yn(n.prev,n,n.next)<0?yn(n,e,n.next)>=0&&yn(n,n.prev,e)>=0:yn(n,e,n.prev)<0||yn(n,n.next,e)<0}function yH(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function AD(n,e){const t=new Aw(n.i,n.x,n.y),i=new Aw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function mC(n,e,t,i){const r=new Aw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function lh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Aw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xH(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Is{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Is.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];gC(e),vC(i,e);let a=e.length;t.forEach(gC);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,vC(i,t[l]);const o=iH.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function gC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function vC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Lh extends mt{constructor(e=new Tl([new se(.5,.5),new se(-.5,.5),new se(-.5,-.5),new se(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new Ze(r,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:v-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:wH;let M,A=!1,E,R,D,T;x&&(M=x.getSpacedPoints(d),A=!0,p=!1,E=x.computeFrenetFrames(d,!1),R=new k,D=new k,T=new k),p||(w=0,v=0,m=0,g=0);const B=o.extractPoints(u);let L=B.shape;const H=B.holes;if(!Is.isClockWise(L)){L=L.reverse();for(let Se=0,me=H.length;Se<me;Se++){const Be=H[Se];Is.isClockWise(Be)&&(H[Se]=Be.reverse())}}const W=Is.triangulateShape(L,H),K=L;for(let Se=0,me=H.length;Se<me;Se++){const Be=H[Se];L=L.concat(Be)}function ie(Se,me,Be){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().multiplyScalar(Be).add(Se)}const ue=L.length,pe=W.length;function I(Se,me,Be){let Xe,Le,ot;const it=Se.x-me.x,nt=Se.y-me.y,Nt=Be.x-Se.x,Ot=Be.y-Se.y,z=it*it+nt*nt,F=it*Ot-nt*Nt;if(Math.abs(F)>Number.EPSILON){const fe=Math.sqrt(z),Ce=Math.sqrt(Nt*Nt+Ot*Ot),De=me.x-nt/fe,He=me.y+it/fe,ct=Be.x-Ot/Ce,Ve=Be.y+Nt/Ce,G=((ct-De)*Ot-(Ve-He)*Nt)/(it*Ot-nt*Nt);Xe=De+it*G-Se.x,Le=He+nt*G-Se.y;const $=Xe*Xe+Le*Le;if($<=2)return new se(Xe,Le);ot=Math.sqrt($/2)}else{let fe=!1;it>Number.EPSILON?Nt>Number.EPSILON&&(fe=!0):it<-Number.EPSILON?Nt<-Number.EPSILON&&(fe=!0):Math.sign(nt)===Math.sign(Ot)&&(fe=!0),fe?(Xe=-nt,Le=it,ot=Math.sqrt(z)):(Xe=it,Le=nt,ot=Math.sqrt(z/2))}return new se(Xe/ot,Le/ot)}const J=[];for(let Se=0,me=K.length,Be=me-1,Xe=Se+1;Se<me;Se++,Be++,Xe++)Be===me&&(Be=0),Xe===me&&(Xe=0),J[Se]=I(K[Se],K[Be],K[Xe]);const j=[];let V,Q=J.concat();for(let Se=0,me=H.length;Se<me;Se++){const Be=H[Se];V=[];for(let Xe=0,Le=Be.length,ot=Le-1,it=Xe+1;Xe<Le;Xe++,ot++,it++)ot===Le&&(ot=0),it===Le&&(it=0),V[Xe]=I(Be[Xe],Be[ot],Be[it]);j.push(V),Q=Q.concat(V)}for(let Se=0;Se<w;Se++){const me=Se/w,Be=v*Math.cos(me*Math.PI/2),Xe=m*Math.sin(me*Math.PI/2)+g;for(let Le=0,ot=K.length;Le<ot;Le++){const it=ie(K[Le],J[Le],Xe);Ye(it.x,it.y,-Be)}for(let Le=0,ot=H.length;Le<ot;Le++){const it=H[Le];V=j[Le];for(let nt=0,Nt=it.length;nt<Nt;nt++){const Ot=ie(it[nt],V[nt],Xe);Ye(Ot.x,Ot.y,-Be)}}}const ge=m+g;for(let Se=0;Se<ue;Se++){const me=p?ie(L[Se],Q[Se],ge):L[Se];A?(D.copy(E.normals[0]).multiplyScalar(me.x),R.copy(E.binormals[0]).multiplyScalar(me.y),T.copy(M[0]).add(D).add(R),Ye(T.x,T.y,T.z)):Ye(me.x,me.y,0)}for(let Se=1;Se<=d;Se++)for(let me=0;me<ue;me++){const Be=p?ie(L[me],Q[me],ge):L[me];A?(D.copy(E.normals[Se]).multiplyScalar(Be.x),R.copy(E.binormals[Se]).multiplyScalar(Be.y),T.copy(M[Se]).add(D).add(R),Ye(T.x,T.y,T.z)):Ye(Be.x,Be.y,h/d*Se)}for(let Se=w-1;Se>=0;Se--){const me=Se/w,Be=v*Math.cos(me*Math.PI/2),Xe=m*Math.sin(me*Math.PI/2)+g;for(let Le=0,ot=K.length;Le<ot;Le++){const it=ie(K[Le],J[Le],Xe);Ye(it.x,it.y,h+Be)}for(let Le=0,ot=H.length;Le<ot;Le++){const it=H[Le];V=j[Le];for(let nt=0,Nt=it.length;nt<Nt;nt++){const Ot=ie(it[nt],V[nt],Xe);A?Ye(Ot.x,Ot.y+M[d-1].y,M[d-1].x+Be):Ye(Ot.x,Ot.y,h+Be)}}}xe(),be();function xe(){const Se=r.length/3;if(p){let me=0,Be=ue*me;for(let Xe=0;Xe<pe;Xe++){const Le=W[Xe];Je(Le[2]+Be,Le[1]+Be,Le[0]+Be)}me=d+w*2,Be=ue*me;for(let Xe=0;Xe<pe;Xe++){const Le=W[Xe];Je(Le[0]+Be,Le[1]+Be,Le[2]+Be)}}else{for(let me=0;me<pe;me++){const Be=W[me];Je(Be[2],Be[1],Be[0])}for(let me=0;me<pe;me++){const Be=W[me];Je(Be[0]+ue*d,Be[1]+ue*d,Be[2]+ue*d)}}i.addGroup(Se,r.length/3-Se,0)}function be(){const Se=r.length/3;let me=0;ce(K,me),me+=K.length;for(let Be=0,Xe=H.length;Be<Xe;Be++){const Le=H[Be];ce(Le,me),me+=Le.length}i.addGroup(Se,r.length/3-Se,1)}function ce(Se,me){let Be=Se.length;for(;--Be>=0;){const Xe=Be;let Le=Be-1;Le<0&&(Le=Se.length-1);for(let ot=0,it=d+w*2;ot<it;ot++){const nt=ue*ot,Nt=ue*(ot+1),Ot=me+Xe+nt,z=me+Le+nt,F=me+Le+Nt,fe=me+Xe+Nt;st(Ot,z,F,fe)}}}function Ye(Se,me,Be){l.push(Se),l.push(me),l.push(Be)}function Je(Se,me,Be){Fe(Se),Fe(me),Fe(Be);const Xe=r.length/3,Le=S.generateTopUV(i,r,Xe-3,Xe-2,Xe-1);at(Le[0]),at(Le[1]),at(Le[2])}function st(Se,me,Be,Xe){Fe(Se),Fe(me),Fe(Xe),Fe(me),Fe(Be),Fe(Xe);const Le=r.length/3,ot=S.generateSideWallUV(i,r,Le-6,Le-3,Le-2,Le-1);at(ot[0]),at(ot[1]),at(ot[3]),at(ot[1]),at(ot[2]),at(ot[3])}function Fe(Se){r.push(l[Se*3+0]),r.push(l[Se*3+1]),r.push(l[Se*3+2])}function at(Se){s.push(Se.x),s.push(Se.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return SH(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new PM[r.type]().fromJSON(r)),new Lh(i,e.options)}}const wH={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],d=e[r*3+1];return[new se(s,a),new se(o,l),new se(u,d)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[i*3],d=e[i*3+1],h=e[i*3+2],p=e[r*3],v=e[r*3+1],m=e[r*3+2],g=e[s*3],w=e[s*3+1],x=e[s*3+2];return Math.abs(o-d)<Math.abs(a-u)?[new se(a,1-l),new se(u,1-h),new se(p,1-m),new se(g,1-x)]:[new se(o,1-l),new se(d,1-h),new se(v,1-m),new se(w,1-x)]}};function SH(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Nh extends Ra{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nh(e.radius,e.detail)}}class qu extends Ra{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qu(e.radius,e.detail)}}class Fh extends mt{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],d=[];let h=e;const p=(t-e)/r,v=new k,m=new se;for(let g=0;g<=r;g++){for(let w=0;w<=i;w++){const x=s+w/i*a;v.x=h*Math.cos(x),v.y=h*Math.sin(x),l.push(v.x,v.y,v.z),u.push(0,0,1),m.x=(v.x/t+1)/2,m.y=(v.y/t+1)/2,d.push(m.x,m.y)}h+=p}for(let g=0;g<r;g++){const w=g*(i+1);for(let x=0;x<i;x++){const S=x+w,M=S,A=S+i+1,E=S+i+2,R=S+1;o.push(M,A,R),o.push(A,E,R)}}this.setIndex(o),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(u,3)),this.setAttribute("uv",new Ze(d,2))}static fromJSON(e){return new Fh(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class kh extends mt{constructor(e=new Tl([new se(0,.5),new se(-.5,-.5),new se(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(o,l,d),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ze(r,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(a,2));function u(d){const h=r.length/3,p=d.extractPoints(t);let v=p.shape;const m=p.holes;Is.isClockWise(v)===!1&&(v=v.reverse());for(let w=0,x=m.length;w<x;w++){const S=m[w];Is.isClockWise(S)===!0&&(m[w]=S.reverse())}const g=Is.triangulateShape(v,m);for(let w=0,x=m.length;w<x;w++){const S=m[w];v=v.concat(S)}for(let w=0,x=v.length;w<x;w++){const S=v[w];r.push(S.x,S.y,0),s.push(0,0,1),a.push(S.x,S.y)}for(let w=0,x=g.length;w<x;w++){const S=g[w],M=S[0]+h,A=S[1]+h,E=S[2]+h;i.push(M,A,E),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return MH(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new kh(i,e.curveSegments)}}function MH(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class $u extends mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const d=[],h=new k,p=new k,v=[],m=[],g=[],w=[];for(let x=0;x<=i;x++){const S=[],M=x/i;let A=0;x==0&&a==0?A=.5/t:x==i&&l==Math.PI&&(A=-.5/t);for(let E=0;E<=t;E++){const R=E/t;h.x=-e*Math.cos(r+R*s)*Math.sin(a+M*o),h.y=e*Math.cos(a+M*o),h.z=e*Math.sin(r+R*s)*Math.sin(a+M*o),m.push(h.x,h.y,h.z),p.copy(h).normalize(),g.push(p.x,p.y,p.z),w.push(R+A,1-M),S.push(u++)}d.push(S)}for(let x=0;x<i;x++)for(let S=0;S<t;S++){const M=d[x][S+1],A=d[x][S],E=d[x+1][S],R=d[x+1][S+1];(x!==0||a>0)&&v.push(M,A,R),(x!==i-1||l<Math.PI)&&v.push(A,E,R)}this.setIndex(v),this.setAttribute("position",new Ze(m,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(w,2))}static fromJSON(e){return new $u(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uh extends Ra{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uh(e.radius,e.detail)}}class Oh extends mt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],u=[],d=new k,h=new k,p=new k;for(let v=0;v<=i;v++)for(let m=0;m<=r;m++){const g=m/r*s,w=v/i*Math.PI*2;h.x=(e+t*Math.cos(w))*Math.cos(g),h.y=(e+t*Math.cos(w))*Math.sin(g),h.z=t*Math.sin(w),o.push(h.x,h.y,h.z),d.x=e*Math.cos(g),d.y=e*Math.sin(g),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),u.push(m/r),u.push(v/i)}for(let v=1;v<=i;v++)for(let m=1;m<=r;m++){const g=(r+1)*v+m-1,w=(r+1)*(v-1)+m-1,x=(r+1)*(v-1)+m,S=(r+1)*v+m;a.push(g,w,S),a.push(w,x,S)}this.setIndex(a),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(l,3)),this.setAttribute("uv",new Ze(u,2))}static fromJSON(e){return new Oh(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zh extends mt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],d=[],h=new k,p=new k,v=new k,m=new k,g=new k,w=new k,x=new k;for(let M=0;M<=i;++M){const A=M/i*s*Math.PI*2;S(A,s,a,e,v),S(A+.01,s,a,e,m),w.subVectors(m,v),x.addVectors(m,v),g.crossVectors(w,x),x.crossVectors(g,w),g.normalize(),x.normalize();for(let E=0;E<=r;++E){const R=E/r*Math.PI*2,D=-t*Math.cos(R),T=t*Math.sin(R);h.x=v.x+(D*x.x+T*g.x),h.y=v.y+(D*x.y+T*g.y),h.z=v.z+(D*x.z+T*g.z),l.push(h.x,h.y,h.z),p.subVectors(h,v).normalize(),u.push(p.x,p.y,p.z),d.push(M/i),d.push(E/r)}}for(let M=1;M<=i;M++)for(let A=1;A<=r;A++){const E=(r+1)*(M-1)+(A-1),R=(r+1)*M+(A-1),D=(r+1)*M+A,T=(r+1)*(M-1)+A;o.push(E,R,T),o.push(R,D,T)}this.setIndex(o),this.setAttribute("position",new Ze(l,3)),this.setAttribute("normal",new Ze(u,3)),this.setAttribute("uv",new Ze(d,2));function S(M,A,E,R,D){const T=Math.cos(M),B=Math.sin(M),L=E/A*M,H=Math.cos(L);D.x=R*(2+H)*.5*T,D.y=R*(2+H)*B*.5,D.z=R*Math.sin(L)*.5}}static fromJSON(e){return new zh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hh extends mt{constructor(e=new EM(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new k,l=new k,u=new se;let d=new k;const h=[],p=[],v=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new Ze(h,3)),this.setAttribute("normal",new Ze(p,3)),this.setAttribute("uv",new Ze(v,2));function g(){for(let M=0;M<t;M++)w(M);w(s===!1?t:0),S(),x()}function w(M){d=e.getPointAt(M/t,d);const A=a.normals[M],E=a.binormals[M];for(let R=0;R<=r;R++){const D=R/r*Math.PI*2,T=Math.sin(D),B=-Math.cos(D);l.x=B*A.x+T*E.x,l.y=B*A.y+T*E.y,l.z=B*A.z+T*E.z,l.normalize(),p.push(l.x,l.y,l.z),o.x=d.x+i*l.x,o.y=d.y+i*l.y,o.z=d.z+i*l.z,h.push(o.x,o.y,o.z)}}function x(){for(let M=1;M<=t;M++)for(let A=1;A<=r;A++){const E=(r+1)*(M-1)+(A-1),R=(r+1)*M+(A-1),D=(r+1)*M+A,T=(r+1)*(M-1)+A;m.push(E,R,T),m.push(R,D,T)}}function S(){for(let M=0;M<=t;M++)for(let A=0;A<=r;A++)u.x=M/t,u.y=A/r,v.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hh(new PM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class bD extends mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new k,s=new k;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const h=l[u],p=h.start,v=h.count;for(let m=p,g=p+v;m<g;m+=3)for(let w=0;w<3;w++){const x=o.getX(m+w),S=o.getX(m+(w+1)%3);r.fromBufferAttribute(a,x),s.fromBufferAttribute(a,S),yC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const d=3*o+u,h=3*o+(u+1)%3;r.fromBufferAttribute(a,d),s.fromBufferAttribute(a,h),yC(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(t,3))}}}function yC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var xC=Object.freeze({__proto__:null,BoxGeometry:Fo,CapsuleGeometry:Rh,CircleGeometry:Dh,ConeGeometry:Bh,CylinderGeometry:Wl,DodecahedronGeometry:Ih,EdgesGeometry:SD,ExtrudeGeometry:Lh,IcosahedronGeometry:Nh,LatheGeometry:Zu,OctahedronGeometry:qu,PlaneGeometry:Qu,PolyhedronGeometry:Ra,RingGeometry:Fh,ShapeGeometry:kh,SphereGeometry:$u,TetrahedronGeometry:Uh,TorusGeometry:Oh,TorusKnotGeometry:zh,TubeGeometry:Hh,WireframeGeometry:bD});class CD extends Rn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ee(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ED extends Mt{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Gh extends Rn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ee(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zs extends Gh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ee(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ee(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ee(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class TD extends Rn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ee(16777215),this.specular=new Ee(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class PD extends Rn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ee(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class RM extends Rn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class RD extends Rn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ee(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ee(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=bh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DD extends Rn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ee(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ta,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BD extends Ri{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Dr(n,e,t){return DM(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function xl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function DM(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ID(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function bw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function BM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function _H(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],d=u.getValueSize(),h=[],p=[];for(let v=0;v<u.times.length;++v){const m=u.times[v]*r;if(!(m<t||m>=i)){h.push(u.times[v]);for(let g=0;g<d;++g)p.push(u.values[v*d+g])}}h.length!==0&&(u.times=xl(h,u.times.constructor),u.values=xl(p,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function AH(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===l});if(u===void 0)continue;let d=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const v=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=v/3);const m=o.times.length-1;let g;if(s<=o.times[0]){const x=d,S=h-d;g=Dr(o.values,x,S)}else if(s>=o.times[m]){const x=m*h+d,S=x+h-d;g=Dr(o.values,x,S)}else{const x=o.createInterpolant(),S=d,M=h-d;x.evaluate(s),g=Dr(x.resultBuffer,S,M)}l==="quaternion"&&new Fn().fromArray(g).normalize().conjugate().toArray(g);const w=u.times.length;for(let x=0;x<w;++x){const S=x*v+p;if(l==="quaternion")Fn.multiplyQuaternionsFlat(u.values,S,g,0,u.values,S);else{const M=v-p*2;for(let A=0;A<M;++A)u.values[S+A]-=g[A]}}}return n.blendMode=sM,n}var bH=Object.freeze({__proto__:null,arraySlice:Dr,convertArray:xl,isTypedArray:DM,getKeyframeOrder:ID,sortedArray:bw,flattenJSON:BM,subclip:_H,makeClipAdditive:AH});class ef{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class LD extends ef{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gl,endingEnd:gl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case vl:s=e,o=2*t-i;break;case th:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case vl:a=e,l=2*i-t;break;case th:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const u=(i-t)*.5,d=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-i),this._offsetPrev=s*d,this._offsetNext=a*d}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,v=this._weightNext,m=(i-t)/(r-t),g=m*m,w=g*m,x=-p*w+2*p*g-p*m,S=(1+p)*w+(-1.5-2*p)*g+(-.5+p)*m+1,M=(-1-v)*w+(1.5+v)*g+.5*m,A=v*w-v*g;for(let E=0;E!==o;++E)s[E]=x*a[d+E]+S*a[u+E]+M*a[l+E]+A*a[h+E];return s}}class IM extends ef{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,d=(i-t)/(r-t),h=1-d;for(let p=0;p!==o;++p)s[p]=a[u+p]*h+a[l+p]*d;return s}}class ND extends ef{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class vs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xl(t,this.TimeBufferType),this.values=xl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:xl(e.times,Array),values:xl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new ND(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new IM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new LD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pu:t=this.InterpolantFactoryMethodDiscrete;break;case Ll:t=this.InterpolantFactoryMethodLinear;break;case Cg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pu;case this.InterpolantFactoryMethodLinear:return Ll;case this.InterpolantFactoryMethodSmooth:return Cg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=Dr(i,s,a),this.values=Dr(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&DM(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=Dr(this.times),t=Dr(this.values),i=this.getValueSize(),r=this.getInterpolation()===Cg,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],d=e[o+1];if(u!==d&&(o!==1||u!==e[0]))if(r)l=!0;else{const h=o*i,p=h-i,v=h+i;for(let m=0;m!==i;++m){const g=t[h+m];if(g!==t[p+m]||g!==t[v+m]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*i,p=a*i;for(let v=0;v!==i;++v)t[p+v]=t[h+v]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,u=0;u!==i;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=Dr(e,0,a),this.values=Dr(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=Dr(this.times,0),t=Dr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}vs.prototype.TimeBufferType=Float32Array;vs.prototype.ValueBufferType=Float32Array;vs.prototype.DefaultInterpolation=Ll;class jl extends vs{}jl.prototype.ValueTypeName="bool";jl.prototype.ValueBufferType=Array;jl.prototype.DefaultInterpolation=Pu;jl.prototype.InterpolantFactoryMethodLinear=void 0;jl.prototype.InterpolantFactoryMethodSmooth=void 0;class LM extends vs{}LM.prototype.ValueTypeName="color";class Lu extends vs{}Lu.prototype.ValueTypeName="number";class FD extends ef{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let u=e*o;for(let d=u+o;u!==d;u+=4)Fn.slerpFlat(s,0,a,u-o,a,u,l);return s}}class Bo extends vs{InterpolantFactoryMethodLinear(e){return new FD(this.times,this.values,this.getValueSize(),e)}}Bo.prototype.ValueTypeName="quaternion";Bo.prototype.DefaultInterpolation=Ll;Bo.prototype.InterpolantFactoryMethodSmooth=void 0;class Jl extends vs{}Jl.prototype.ValueTypeName="string";Jl.prototype.ValueBufferType=Array;Jl.prototype.DefaultInterpolation=Pu;Jl.prototype.InterpolantFactoryMethodLinear=void 0;Jl.prototype.InterpolantFactoryMethodSmooth=void 0;class Nu extends vs{}Nu.prototype.ValueTypeName="vector";class Fu{constructor(e,t=-1,i,r=H0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=dr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(EH(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(vs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const d=ID(l);l=bw(l,1,d),u=bw(u,1,d),!r&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new Lu(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],d=u.name.match(s);if(d&&d.length>1){const h=d[1];let p=r[h];p||(r[h]=p=[]),p.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,v,m,g){if(v.length!==0){const w=[],x=[];BM(v,w,x,m),w.length!==0&&g.push(new h(p,w,x))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const v={};let m;for(m=0;m<p.length;m++)if(p[m].morphTargets)for(let g=0;g<p[m].morphTargets.length;g++)v[p[m].morphTargets[g]]=-1;for(const g in v){const w=[],x=[];for(let S=0;S!==p[m].morphTargets.length;++S){const M=p[m];w.push(M.time),x.push(M.morphTarget===g?1:0)}r.push(new Lu(".morphTargetInfluence["+g+"]",w,x))}l=v.length*a}else{const v=".bones["+t[h].name+"]";i(Nu,v+".position",p,"pos",r),i(Bo,v+".quaternion",p,"rot",r),i(Nu,v+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function CH(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lu;case"vector":case"vector2":case"vector3":case"vector4":return Nu;case"color":return LM;case"quaternion":return Bo;case"bool":case"boolean":return jl;case"string":return Jl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function EH(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=CH(n.type);if(n.times===void 0){const t=[],i=[];BM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Fl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class NM{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){o++,s===!1&&r.onStart!==void 0&&r.onStart(d,a,o),s=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return u.push(d,h),this},this.removeHandler=function(d){const h=u.indexOf(d);return h!==-1&&u.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=u.length;h<p;h+=2){const v=u[h],m=u[h+1];if(v.global&&(v.lastIndex=0),v.test(d))return m}return null}}}const tu=new NM;let Vi=class{constructor(e){this.manager=e!==void 0?e:tu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const ia={};class TH extends Error{constructor(e,t){super(e),this.response=t}}class pr extends Vi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Fl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ia[e]!==void 0){ia[e].push({onLoad:t,onProgress:i,onError:r});return}ia[e]=[],ia[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=ia[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),v=p?parseInt(p):0,m=v!==0;let g=0;const w=new ReadableStream({start(x){S();function S(){h.read().then(({done:M,value:A})=>{if(M)x.close();else{g+=A.byteLength;const E=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:v});for(let R=0,D=d.length;R<D;R++){const T=d[R];T.onProgress&&T.onProgress(E)}x.enqueue(A),S()}})}}});return new Response(w)}else throw new TH(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return u.json();default:if(o===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),p=h&&h[1]?h[1].toLowerCase():void 0,v=new TextDecoder(p);return u.arrayBuffer().then(m=>v.decode(m))}}}).then(u=>{Fl.add(e,u);const d=ia[e];delete ia[e];for(let h=0,p=d.length;h<p;h++){const v=d[h];v.onLoad&&v.onLoad(u)}}).catch(u=>{const d=ia[e];if(d===void 0)throw this.manager.itemError(e),u;delete ia[e];for(let h=0,p=d.length;h<p;h++){const v=d[h];v.onError&&v.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class PH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new pr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Fu.parse(e[i]);t.push(r)}return t}}class RH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new _M,l=new pr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function d(h){l.load(e[h],function(p){const v=s.parse(p,!0);a[h]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},u+=1,u===6&&(v.mipmapCount===1&&(o.minFilter=qe),o.image=a,o.format=v.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const v=p.mipmaps.length/p.mipmapCount;for(let m=0;m<v;m++){a[m]={mipmaps:[]};for(let g=0;g<p.mipmapCount;g++)a[m].mipmaps.push(p.mipmaps[m*p.mipmapCount+g]),a[m].format=p.format,a[m].width=p.width,a[m].height=p.height}o.image=a}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=qe),o.format=p.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class ch extends Vi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Fl.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=rh("img");function l(){d(),Fl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class DH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=new Th,a=new ch(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(d){s.images[u]=d,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class BH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Bs,o=new pr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Vn,a.wrapT=u.wrapT!==void 0?u.wrapT:Vn,a.magFilter=u.magFilter!==void 0?u.magFilter:qe,a.minFilter=u.minFilter!==void 0?u.minFilter:qe,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Fs),u.mipmapCount===1&&(a.minFilter=qe),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u))},i,r),a}}class ev extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=new $t,a=new ch(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ko extends Ut{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ee(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kD extends ko{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.groundColor=new Ee(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Mx=new je,wC=new k,SC=new k;class FM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new se(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new V0,this._frameExtents=new se(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;wC.setFromMatrixPosition(e.matrixWorld),t.position.copy(wC),SC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(SC),t.updateMatrixWorld(),Mx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Mx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class IH extends FM{constructor(){super(new hn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=ih*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class kM extends ko{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new IH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const MC=new je,jf=new k,_x=new k;class LH extends FM{constructor(){super(new hn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new se(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jf.setFromMatrixPosition(e.matrixWorld),i.position.copy(jf),_x.copy(i.position),_x.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(_x),i.updateMatrixWorld(),r.makeTranslation(-jf.x,-jf.y,-jf.z),MC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MC)}}class UM extends ko{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new LH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class NH extends FM{constructor(){super(new Vl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class OM extends ko{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.shadow=new NH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class UD extends ko{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OD extends ko{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class zD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class tv extends ko{constructor(e=new zD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class nv extends Vi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new pr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=nv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ee().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Ee().setHex(a.value);break;case"v2":r.uniforms[s].value=new se().fromArray(a.value);break;case"v3":r.uniforms[s].value=new k().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Dt().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Ci().fromArray(a.value);break;case"m4":r.uniforms[s].value=new je().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new se().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new se().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:CD,SpriteMaterial:vM,RawShaderMaterial:ED,ShaderMaterial:Mt,PointsMaterial:Y0,MeshPhysicalMaterial:zs,MeshStandardMaterial:Gh,MeshPhongMaterial:TD,MeshToonMaterial:PD,MeshNormalMaterial:RM,MeshLambertMaterial:RD,MeshDepthMaterial:j0,MeshDistanceMaterial:mM,MeshBasicMaterial:ur,MeshMatcapMaterial:DD,LineDashedMaterial:BD,LineBasicMaterial:Ri,Material:Rn};return new t[e]}}class Ls{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HD extends mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GD extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new pr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,m){if(t[m]!==void 0)return t[m];const w=v.interleavedBuffers[m],x=s(v,w.buffer),S=qc(w.type,x),M=new Ph(S,w.stride);return M.uuid=w.uuid,t[m]=M,M}function s(v,m){if(i[m]!==void 0)return i[m];const w=v.arrayBuffers[m],x=new Uint32Array(w).buffer;return i[m]=x,x}const a=e.isInstancedBufferGeometry?new HD:new mt,o=e.data.index;if(o!==void 0){const v=qc(o.type,o.array);a.setIndex(new bt(v,1))}const l=e.data.attributes;for(const v in l){const m=l[v];let g;if(m.isInterleavedBufferAttribute){const w=r(e.data,m.data);g=new Do(w,m.itemSize,m.offset,m.normalized)}else{const w=qc(m.type,m.array),x=m.isInstancedBufferAttribute?Iu:bt;g=new x(w,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),m.usage!==void 0&&g.setUsage(m.usage),m.updateRange!==void 0&&(g.updateRange.offset=m.updateRange.offset,g.updateRange.count=m.updateRange.count),a.setAttribute(v,g)}const u=e.data.morphAttributes;if(u)for(const v in u){const m=u[v],g=[];for(let w=0,x=m.length;w<x;w++){const S=m[w];let M;if(S.isInterleavedBufferAttribute){const A=r(e.data,S.data);M=new Do(A,S.itemSize,S.offset,S.normalized)}else{const A=qc(S.type,S.array);M=new bt(A,S.itemSize,S.normalized)}S.name!==void 0&&(M.name=S.name),g.push(M)}a.morphAttributes[v]=g}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let v=0,m=h.length;v!==m;++v){const g=h[v];a.addGroup(g.start,g.count,g.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const v=new k;p.center!==void 0&&v.fromArray(p.center),a.boundingSphere=new Os(v,p.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class FH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Ls.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new pr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ls.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new pr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,i),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),t!==void 0){let h=!1;for(const p in a)if(a[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Tl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new xM().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new GD;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in xC?o=xC[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new nv;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Fu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return a(d)}else return l.data?{data:qc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new NM(t);s=new ch(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const v=[];for(let m=0,g=p.length;m<g;m++){const w=p[m],x=o(w);x!==null&&(x instanceof HTMLImageElement?v.push(x):v.push(new Bs(x.data,x.width,x.height)))}r[h.uuid]=new yl(v)}else{const v=o(h.url);r[h.uuid]=new yl(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:qc(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new ch(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const d=[];for(let h=0,p=u.length;h<p;h++){const v=u[h],m=await s(v);m!==null&&(m instanceof HTMLImageElement?d.push(m):d.push(new Bs(m.data,m.width,m.height)))}i[l.uuid]=new yl(d)}else{const d=await s(l.url);i[l.uuid]=new yl(d)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let d;Array.isArray(u)?(d=new Th,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Bs:d=new $t,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=i(o.mapping,kH)),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=i(o.wrap[0],_C),d.wrapT=i(o.wrap[1],_C)),o.format!==void 0&&(d.format=o.format),o.type!==void 0&&(d.type=o.type),o.encoding!==void 0&&(d.encoding=o.encoding),o.minFilter!==void 0&&(d.minFilter=i(o.minFilter,AC)),o.magFilter!==void 0&&(d.magFilter=i(o.magFilter,AC)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(d.userData=o.userData),r[o.uuid]=d}return r}parseObject(e,t,i,r,s){let a;function o(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const v=[];for(let m=0,g=p.length;m<g;m++){const w=p[m];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),v.push(i[w])}return v}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,h;switch(e.type){case"Scene":a=new Bu,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Ee(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new K0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new X0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":a=new hn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Vl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new UD(e.color,e.intensity);break;case"DirectionalLight":a=new OM(e.color,e.intensity);break;case"PointLight":a=new UM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new OD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new kM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new kD(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new tv().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),h=l(e.material),a=new yM(d,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),h=l(e.material),a=new Wn(d,h);break;case"InstancedMesh":d=o(e.geometry),h=l(e.material);const p=e.count,v=e.instanceMatrix,m=e.instanceColor;a=new wM(d,h,p),a.instanceMatrix=new Iu(new Float32Array(v.array),16),m!==void 0&&(a.instanceColor=new Iu(new Float32Array(m.array),m.itemSize));break;case"LOD":a=new dD;break;case"Line":a=new _a(o(e.geometry),l(e.material));break;case"LineLoop":a=new SM(o(e.geometry),l(e.material));break;case"LineSegments":a=new ms(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new MM(o(e.geometry),l(e.material));break;case"Sprite":a=new fD(l(e.material));break;case"Group":a=new ga;break;case"Bone":a=new Q0;break;default:a=new Ut}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let v=0;v<p.length;v++){const m=p[v];a.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const p=e.levels;for(let v=0;v<p.length;v++){const m=p[v],g=a.getObjectByProperty("uuid",m.object);g!==void 0&&a.addLevel(g,m.distance,m.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const kH={UVMapping:k0,CubeReflectionMapping:To,CubeRefractionMapping:Po,EquirectangularReflectionMapping:qd,EquirectangularRefractionMapping:$d,CubeUVReflectionMapping:Xu},_C={RepeatWrapping:Pi,ClampToEdgeWrapping:Vn,MirroredRepeatWrapping:Tu},AC={NearestFilter:ht,NearestMipmapNearestFilter:eh,NearestMipmapLinearFilter:pu,LinearFilter:qe,LinearMipmapNearestFilter:U0,LinearMipmapLinearFilter:Fs};class VD extends Vi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Fl.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Fl.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Gm;class zM{static getContext(){return Gm===void 0&&(Gm=new(window.AudioContext||window.webkitAudioContext)),Gm}static setContext(e){Gm=e}}class UH extends Vi{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new pr(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{const l=o.slice(0);zM.getContext().decodeAudioData(l,function(d){t(d)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class OH extends tv{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ee().set(e),s=new Ee().set(t),a=new k(r.r,r.g,r.b),o=new k(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}}class zH extends tv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Ee().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const bC=new je,CC=new je,$o=new je;class HH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,$o.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(bl*t.fov*.5)/t.zoom;let o,l;CC.elements[12]=-r,bC.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,$o.elements[0]=2*t.near/(l-o),$o.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy($o),o=-a*t.aspect-s,l=a*t.aspect-s,$o.elements[0]=2*t.near/(l-o),$o.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy($o)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(CC),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bC)}}class HM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=EC();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function EC(){return(typeof performance>"u"?Date:performance).now()}const el=new k,TC=new Fn,GH=new k,tl=new k;class VH extends Ut{constructor(){super(),this.type="AudioListener",this.context=zM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(el,TC,GH),tl.set(0,0,-1).applyQuaternion(TC),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(el.x,r),t.positionY.linearRampToValueAtTime(el.y,r),t.positionZ.linearRampToValueAtTime(el.z,r),t.forwardX.linearRampToValueAtTime(tl.x,r),t.forwardY.linearRampToValueAtTime(tl.y,r),t.forwardZ.linearRampToValueAtTime(tl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(el.x,el.y,el.z),t.setOrientation(tl.x,tl.y,tl.z,i.x,i.y,i.z)}}class WD extends Ut{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const nl=new k,PC=new Fn,WH=new k,il=new k;class jH extends WD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(nl,PC,WH),il.set(0,0,1).applyQuaternion(PC);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(nl.x,i),t.positionY.linearRampToValueAtTime(nl.y,i),t.positionZ.linearRampToValueAtTime(nl.z,i),t.orientationX.linearRampToValueAtTime(il.x,i),t.orientationY.linearRampToValueAtTime(il.y,i),t.orientationZ.linearRampToValueAtTime(il.z,i)}else t.setPosition(nl.x,nl.y,nl.z),t.setOrientation(il.x,il.y,il.z)}}class JH{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class jD{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Fn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Fn.multiplyQuaternionsFlat(e,a,e,t,e,i),Fn.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const GM="\\[\\]\\.:\\/",XH=new RegExp("["+GM+"]","g"),VM="[^"+GM+"]",KH="[^"+GM.replace("\\.","")+"]",QH=/((?:WC+[\/:])*)/.source.replace("WC",VM),YH=/(WCOD+)?/.source.replace("WCOD",KH),ZH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VM),qH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VM),$H=new RegExp("^"+QH+YH+ZH+qH+"$"),eG=["material","materials","bones","map"];class tG{constructor(e,t,i){const r=i||kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class kt{constructor(e,t,i){this.path=t,this.parsedPath=i||kt.parseTrackName(t),this.node=kt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new kt.Composite(e,t,i):new kt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(XH,"")}static parseTrackName(e){const t=$H.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);eG.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=kt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=tG;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=dr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,u=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],v=p.uuid;let m=t[v];if(m===void 0){m=l++,t[v]=m,e.push(p);for(let g=0,w=a;g!==w;++g)s[g].push(new kt(p,i[g],r[g]))}else if(m<u){o=e[m];const g=--u,w=e[g];t[w.uuid]=m,e[m]=w,t[v]=g,e[g]=p;for(let x=0,S=a;x!==S;++x){const M=s[x],A=M[g];let E=M[m];M[m]=A,E===void 0&&(E=new kt(p,i[x],r[x])),M[g]=E}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,d=t[u];if(d!==void 0&&d>=s){const h=s++,p=e[h];t[p.uuid]=d,e[d]=p,t[u]=h,e[h]=l;for(let v=0,m=r;v!==m;++v){const g=i[v],w=g[h],x=g[d];g[d]=w,g[h]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],d=u.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const p=--s,v=e[p],m=--a,g=e[m];t[v.uuid]=h,e[h]=v,t[g.uuid]=p,e[p]=g,e.pop();for(let w=0,x=r;w!==x;++w){const S=i[w],M=S[p],A=S[m];S[h]=M,S[p]=A,S.pop()}}else{const p=--a,v=e[p];p>0&&(t[v.uuid]=h),e[h]=v,e.pop();for(let m=0,g=r;m!==g;++m){const w=i[m];w[h]=w[p],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,h=new Array(u);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(h);for(let p=d,v=l.length;p!==v;++p){const m=l[p];h[p]=new kt(m,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];t[u]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class iG{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:gl,endingEnd:gl};for(let u=0;u!==a;++u){const d=s[u].createInterpolant(null);o[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case sM:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(a),u[d].accumulateAdditive(o);break;case H0:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(a),u[d].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===XR;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===jR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=vl,r.endingEnd=vl):(e?r.endingStart=this.zeroSlopeAtStart?vl:gl:r.endingStart=th,t?r.endingEnd=this.zeroSlopeAtEnd?vl:gl:r.endingEnd=th)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const rG=new Float32Array(1);class sG extends Vr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let h=0;h!==s;++h){const p=r[h],v=p.name;let m=d[v];if(m!==void 0)++m.referenceCount,a[h]=m;else{if(m=a[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,v));continue}const g=t&&t._propertyBindings[h].binding.parsedPath;m=new jD(kt.create(i,v,g),p.ValueTypeName,p.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,v),a[h]=m}o[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new IM(new Float32Array(2),new Float32Array(2),1,rG),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Fu.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(a!==null?i=a.blendMode:i=H0),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const d=new iG(this,a,t,i);return this._bindAction(d,u),this._addInactiveAction(d,o,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Fu.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const d=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class ne{constructor(e){this.value=e}clone(){return new ne(this.value.clone===void 0?this.value:this.value.clone())}}let aG=0;class oG extends Vr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aG++}),this.name="",this.usage=nh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class lG extends Ph{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class cG{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class WM{constructor(e,t,i=0,r=1/0){this.ray=new Eh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new El,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Cw(e,this,i,t),i.sort(RC),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Cw(e[r],this,i,t);return i.sort(RC),i}}function RC(n,e){return n.distance-e.distance}function Cw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)Cw(r[s],e,t,!0)}}class JD{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Nn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uG{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const DC=new se;class fG{constructor(e=new se(1/0,1/0),t=new se(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=DC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return DC.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const BC=new k,Vm=new k;class dG{constructor(e=new k,t=new k){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){BC.subVectors(e,this.start),Vm.subVectors(this.end,this.start);const i=Vm.dot(Vm);let s=Vm.dot(BC)/i;return t&&(s=Nn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const IC=new k;class hG extends Ut{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,d=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Ze(r,3));const s=new Ri({fog:!1,toneMapped:!1});this.cone=new ms(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),IC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(IC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ja=new k,Wm=new je,Ax=new je;class pG extends ms{constructor(e){const t=XD(e),i=new mt,r=[],s=[],a=new Ee(0,0,1),o=new Ee(0,1,0);for(let u=0;u<t.length;u++){const d=t[u];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new Ze(r,3)),i.setAttribute("color",new Ze(s,3));const l=new Ri({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Ax.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Wm.multiplyMatrices(Ax,o.matrixWorld),Ja.setFromMatrixPosition(Wm),r.setXYZ(a,Ja.x,Ja.y,Ja.z),Wm.multiplyMatrices(Ax,o.parent.matrixWorld),Ja.setFromMatrixPosition(Wm),r.setXYZ(a+1,Ja.x,Ja.y,Ja.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function XD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,XD(n.children[t]));return e}class mG extends Wn{constructor(e,t,i){const r=new $u(t,4,2),s=new ur({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gG=new k,LC=new Ee,NC=new Ee;class vG extends Ut{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new qu(t);r.rotateY(Math.PI*.5),this.material=new ur({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new bt(a,3)),this.add(new Wn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");LC.copy(this.light.color),NC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?LC:NC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yG extends ms{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ee(i),r=new Ee(r);const s=t/2,a=e/t,o=e/2,l=[],u=[];for(let p=0,v=0,m=-o;p<=t;p++,m+=a){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const g=p===s?i:r;g.toArray(u,v),v+=3,g.toArray(u,v),v+=3,g.toArray(u,v),v+=3,g.toArray(u,v),v+=3}const d=new mt;d.setAttribute("position",new Ze(l,3)),d.setAttribute("color",new Ze(u,3));const h=new Ri({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xG extends ms{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Ee(s),a=new Ee(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),v=Math.sin(p)*e,m=Math.cos(p)*e;o.push(0,0,0),o.push(v,0,m);const g=h&1?s:a;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let h=0;h<i;h++){const p=h&1?s:a,v=e-e/i*h;for(let m=0;m<r;m++){let g=m/r*(Math.PI*2),w=Math.sin(g)*v,x=Math.cos(g)*v;o.push(w,0,x),l.push(p.r,p.g,p.b),g=(m+1)/r*(Math.PI*2),w=Math.sin(g)*v,x=Math.cos(g)*v,o.push(w,0,x),l.push(p.r,p.g,p.b)}}const u=new mt;u.setAttribute("position",new Ze(o,3)),u.setAttribute("color",new Ze(l,3));const d=new Ri({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const FC=new k,jm=new k,kC=new k;class wG extends Ut{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new mt;r.setAttribute("position",new Ze([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ri({fog:!1,toneMapped:!1});this.lightPlane=new _a(r,s),this.add(this.lightPlane),r=new mt,r.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new _a(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),FC.setFromMatrixPosition(this.light.matrixWorld),jm.setFromMatrixPosition(this.light.target.matrixWorld),kC.subVectors(jm,FC),this.lightPlane.lookAt(jm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jm),this.targetLine.scale.z=kC.length()}}const Jm=new k,Cn=new Ku;class SG extends ms{constructor(e){const t=new mt,i=new Ri({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,g){l(m),l(g)}function l(m){r.push(0,0,0),s.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(r.length/3-1)}t.setAttribute("position",new Ze(r,3)),t.setAttribute("color",new Ze(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Ee(16755200),d=new Ee(16711680),h=new Ee(43775),p=new Ee(16777215),v=new Ee(3355443);this.setColors(u,d,h,p,v)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Cn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Bn("c",t,e,Cn,0,0,-1),Bn("t",t,e,Cn,0,0,1),Bn("n1",t,e,Cn,-i,-r,-1),Bn("n2",t,e,Cn,i,-r,-1),Bn("n3",t,e,Cn,-i,r,-1),Bn("n4",t,e,Cn,i,r,-1),Bn("f1",t,e,Cn,-i,-r,1),Bn("f2",t,e,Cn,i,-r,1),Bn("f3",t,e,Cn,-i,r,1),Bn("f4",t,e,Cn,i,r,1),Bn("u1",t,e,Cn,i*.7,r*1.1,-1),Bn("u2",t,e,Cn,-i*.7,r*1.1,-1),Bn("u3",t,e,Cn,0,r*2,-1),Bn("cf1",t,e,Cn,-i,0,1),Bn("cf2",t,e,Cn,i,0,1),Bn("cf3",t,e,Cn,0,-r,1),Bn("cf4",t,e,Cn,0,r,1),Bn("cn1",t,e,Cn,-i,0,-1),Bn("cn2",t,e,Cn,i,0,-1),Bn("cn3",t,e,Cn,0,-r,-1),Bn("cn4",t,e,Cn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Bn(n,e,t,i,r,s,a){Jm.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,d=o.length;u<d;u++)l.setXYZ(o[u],Jm.x,Jm.y,Jm.z)}}const Xm=new Pa;class MG extends ms{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new mt;s.setIndex(new bt(i,1)),s.setAttribute("position",new bt(r,3)),super(s,new Ri({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Xm.setFromObject(this.object),Xm.isEmpty())return;const t=Xm.min,i=Xm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _G extends ms{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new mt;s.setIndex(new bt(i,1)),s.setAttribute("position",new Ze(r,3)),super(s,new Ri({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class AG extends _a{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new mt;a.setAttribute("position",new Ze(s,3)),a.computeBoundingSphere(),super(a,new Ri({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new mt;l.setAttribute("position",new Ze(o,3)),l.computeBoundingSphere(),this.add(new Wn(l,new ur({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const UC=new k;let Km,bx;class bG extends Ut{constructor(e=new k(0,0,1),t=new k(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",Km===void 0&&(Km=new mt,Km.setAttribute("position",new Ze([0,0,0,0,1,0],3)),bx=new Wl(0,.5,1,5,1),bx.translate(0,-.5,0)),this.position.copy(t),this.line=new _a(Km,new Ri({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wn(bx,new ur({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{UC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(UC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class CG extends ms{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new mt;r.setAttribute("position",new Ze(t,3)),r.setAttribute("color",new Ze(i,3));const s=new Ri({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ee,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class EG{constructor(){this.type="ShapePath",this.color=new Ee,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const S=[];for(let M=0,A=x.length;M<A;M++){const E=x[M],R=new Tl;R.curves=E.curves,S.push(R)}return S}function i(x,S){const M=S.length;let A=!1;for(let E=M-1,R=0;R<M;E=R++){let D=S[E],T=S[R],B=T.x-D.x,L=T.y-D.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(D=S[R],B=-B,T=S[E],L=-L),x.y<D.y||x.y>T.y)continue;if(x.y===D.y){if(x.x===D.x)return!0}else{const H=L*(x.x-D.x)-B*(x.y-D.y);if(H===0)return!0;if(H<0)continue;A=!A}}else{if(x.y!==D.y)continue;if(T.x<=x.x&&x.x<=D.x||D.x<=x.x&&x.x<=T.x)return!0}}return A}const r=Is.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new Tl,l.curves=o.curves,u.push(l),u;let d=!r(s[0].getPoints());d=e?!d:d;const h=[],p=[];let v=[],m=0,g;p[m]=void 0,v[m]=[];for(let x=0,S=s.length;x<S;x++)o=s[x],g=o.getPoints(),a=r(g),a=e?!a:a,a?(!d&&p[m]&&m++,p[m]={s:new Tl,p:g},p[m].s.curves=o.curves,d&&m++,v[m]=[]):v[m].push({h:o,p:g[0]});if(!p[0])return t(s);if(p.length>1){let x=!1,S=0;for(let M=0,A=p.length;M<A;M++)h[M]=[];for(let M=0,A=p.length;M<A;M++){const E=v[M];for(let R=0;R<E.length;R++){const D=E[R];let T=!0;for(let B=0;B<p.length;B++)i(D.p,p[B].p)&&(M!==B&&S++,T?(T=!1,h[B].push(D)):x=!0);T&&h[M].push(D)}}S>0&&x===!1&&(v=h)}let w;for(let x=0,S=p.length;x<S;x++){l=p[x].s,u.push(l),w=v[x];for(let M=0,A=w.length;M<A;M++)l.holes.push(w[M].h)}return u}}const ca=TG();function TG(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function PG(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Nn(n,-65504,65504),ca.floatView[0]=n;const e=ca.uint32View[0],t=e>>23&511;return ca.baseTable[t]+((e&8388607)>>ca.shiftTable[t])}function RG(n){const e=n>>10;return ca.uint32View[0]=ca.mantissaTable[ca.offsetTable[e]+(n&1023)]+ca.exponentTable[e],ca.floatView[0]}var DG=Object.freeze({__proto__:null,toHalfFloat:PG,fromHalfFloat:RG});function BG(){console.error("THREE.ImmediateRenderObject has been removed.")}class IG extends Ct{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class LG extends Ch{constructor(e,t,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,r)}}class NG extends Mo{constructor(e,t,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,r)}}class FG extends Fo{constructor(e,t,i,r,s,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,a)}}class kG extends Rh{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class UG extends Dh{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class OG extends Bh{constructor(e,t,i,r,s,a,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,a,o)}}class zG extends Wl{constructor(e,t,i,r,s,a,o,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,a,o,l)}}class HG extends Ih{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class GG extends Lh{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class VG extends Nh{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class WG extends Zu{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class jG extends qu{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class JG extends Qu{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class XG extends Ra{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class KG extends Fh{constructor(e,t,i,r,s,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,a)}}class QG extends kh{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class YG extends $u{constructor(e,t,i,r,s,a,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,a,o)}}class ZG extends Uh{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class qG extends Oh{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class $G extends zh{constructor(e,t,i,r,s,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,a)}}class e6 extends Hh{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ea}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ea);const uh=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:nM,AddEquation:cl,AddOperation:TR,AdditiveAnimationBlendMode:sM,AdditiveBlending:X1,AlphaFormat:UR,AlwaysDepth:$S,AlwaysStencilFunc:ZR,AmbientLight:UD,AmbientLightProbe:zH,AnimationClip:Fu,AnimationLoader:PH,AnimationMixer:sG,AnimationObjectGroup:nG,AnimationUtils:bH,ArcCurve:gD,ArrayCamera:lD,ArrowHelper:bG,Audio:WD,AudioAnalyser:JH,AudioContext:zM,AudioListener:VH,AudioLoader:UH,AxesHelper:CG,BackSide:pi,BasicDepthPacking:ui,BasicShadowMap:a4,Bone:Q0,BooleanKeyframeTrack:jl,Box2:fG,Box3:Pa,Box3Helper:_G,BoxBufferGeometry:FG,BoxGeometry:Fo,BoxHelper:MG,BufferAttribute:bt,BufferGeometry:mt,BufferGeometryLoader:GD,ByteType:IR,Cache:Fl,Camera:Ku,CameraHelper:SG,CanvasTexture:mD,CapsuleBufferGeometry:kG,CapsuleGeometry:Rh,CatmullRomCurve3:vD,CineonToneMapping:DR,CircleBufferGeometry:UG,CircleGeometry:Dh,ClampToEdgeWrapping:Vn,Clock:HM,Color:Ee,ColorKeyframeTrack:LM,ColorManagement:Ai,CompressedArrayTexture:Q5,CompressedTexture:_M,CompressedTextureLoader:RH,ConeBufferGeometry:OG,ConeGeometry:Bh,CubeCamera:hM,CubeReflectionMapping:To,CubeRefractionMapping:Po,CubeTexture:Th,CubeTextureLoader:DH,CubeUVReflectionMapping:Xu,CubicBezierCurve:bM,CubicBezierCurve3:yD,CubicInterpolant:LD,CullFaceBack:J1,CullFaceFront:pR,CullFaceFrontBack:s4,CullFaceNone:hR,Curve:gs,CurvePath:wD,CustomBlending:mR,CustomToneMapping:BR,CylinderBufferGeometry:zG,CylinderGeometry:Wl,Cylindrical:uG,Data3DTexture:Mo,DataArrayTexture:Ch,DataTexture:Bs,DataTexture2DArray:LG,DataTexture3D:NG,DataTextureLoader:BH,DataUtils:DG,DecrementStencilOp:p4,DecrementWrapStencilOp:g4,DefaultLoadingManager:tu,DepthFormat:So,DepthStencilFormat:Ro,DepthTexture:J0,DirectionalLight:OM,DirectionalLightHelper:wG,DiscreteInterpolant:ND,DodecahedronBufferGeometry:HG,DodecahedronGeometry:Ih,DoubleSide:ha,DstAlphaFactor:MR,DstColorFactor:AR,DynamicCopyUsage:D4,DynamicDrawUsage:b4,DynamicReadUsage:T4,EdgesGeometry:SD,EllipseCurve:Z0,EqualDepth:Zd,EqualStencilFunc:w4,EquirectangularReflectionMapping:qd,EquirectangularRefractionMapping:$d,Euler:Gl,EventDispatcher:Vr,ExtrudeBufferGeometry:GG,ExtrudeGeometry:Lh,FileLoader:pr,Float16BufferAttribute:uk,Float32BufferAttribute:Ze,Float64BufferAttribute:fk,FloatType:Pn,Fog:K0,FogExp2:X0,FramebufferTexture:Mw,FrontSide:Ns,Frustum:V0,GLBufferAttribute:cG,GLSL1:I4,GLSL3:s0,GreaterDepth:tM,GreaterEqualDepth:eM,GreaterEqualStencilFunc:A4,GreaterStencilFunc:M4,GridHelper:yG,Group:ga,HalfFloatType:er,HemisphereLight:kD,HemisphereLightHelper:vG,HemisphereLightProbe:OH,IcosahedronBufferGeometry:VG,IcosahedronGeometry:Nh,ImageBitmapLoader:VD,ImageLoader:ch,ImageUtils:lM,ImmediateRenderObject:BG,IncrementStencilOp:h4,IncrementWrapStencilOp:m4,InstancedBufferAttribute:Iu,InstancedBufferGeometry:HD,InstancedInterleavedBuffer:lG,InstancedMesh:wM,Int16BufferAttribute:lk,Int32BufferAttribute:ck,Int8BufferAttribute:sk,IntType:NR,InterleavedBuffer:Ph,InterleavedBufferAttribute:Do,Interpolant:ef,InterpolateDiscrete:Pu,InterpolateLinear:Ll,InterpolateSmooth:Cg,InvertStencilOp:v4,KeepStencilOp:Eg,KeyframeTrack:vs,LOD:dD,LatheBufferGeometry:WG,LatheGeometry:Zu,Layers:El,LessDepth:i0,LessEqualDepth:Yd,LessEqualStencilFunc:S4,LessStencilFunc:x4,Light:ko,LightProbe:tv,Line:_a,Line3:dG,LineBasicMaterial:Ri,LineCurve:q0,LineCurve3:xD,LineDashedMaterial:BD,LineLoop:SM,LineSegments:ms,LinearEncoding:ps,LinearFilter:qe,LinearInterpolant:IM,LinearMipMapLinearFilter:u4,LinearMipMapNearestFilter:c4,LinearMipmapLinearFilter:Fs,LinearMipmapNearestFilter:U0,LinearSRGBColorSpace:Ru,LinearToneMapping:PR,Loader:Vi,LoaderUtils:Ls,LoadingManager:NM,LoopOnce:jR,LoopPingPong:XR,LoopRepeat:JR,LuminanceAlphaFormat:zR,LuminanceFormat:O0,MOUSE:i4,Material:Rn,MaterialLoader:nv,MathUtils:oo,Matrix3:Ci,Matrix4:je,MaxEquation:Z1,Mesh:Wn,MeshBasicMaterial:ur,MeshDepthMaterial:j0,MeshDistanceMaterial:mM,MeshLambertMaterial:RD,MeshMatcapMaterial:DD,MeshNormalMaterial:RM,MeshPhongMaterial:TD,MeshPhysicalMaterial:zs,MeshStandardMaterial:Gh,MeshToonMaterial:PD,MinEquation:Y1,MirroredRepeatWrapping:Tu,MixOperation:ER,MultiplyBlending:Q1,MultiplyOperation:bh,NearestFilter:ht,NearestMipMapLinearFilter:l4,NearestMipMapNearestFilter:o4,NearestMipmapLinearFilter:pu,NearestMipmapNearestFilter:eh,NeverDepth:qS,NeverStencilFunc:y4,NoBlending:ln,NoColorSpace:YR,NoToneMapping:fs,NormalAnimationBlendMode:H0,NormalBlending:Al,NotEqualDepth:F0,NotEqualStencilFunc:_4,NumberKeyframeTrack:Lu,Object3D:Ut,ObjectLoader:FH,ObjectSpaceNormalMap:QR,OctahedronBufferGeometry:jG,OctahedronGeometry:qu,OneFactor:xR,OneMinusDstAlphaFactor:_R,OneMinusDstColorFactor:bR,OneMinusSrcAlphaFactor:ZS,OneMinusSrcColorFactor:SR,OrthographicCamera:Vl,PCFShadowMap:KS,PCFSoftShadowMap:QS,PMREMGenerator:l0,Path:sh,PerspectiveCamera:hn,Plane:to,PlaneBufferGeometry:JG,PlaneGeometry:Qu,PlaneHelper:AG,PointLight:UM,PointLightHelper:mG,Points:MM,PointsMaterial:Y0,PolarGridHelper:xG,PolyhedronBufferGeometry:XG,PolyhedronGeometry:Ra,PositionalAudio:jH,PropertyBinding:kt,PropertyMixer:jD,QuadraticBezierCurve:CM,QuadraticBezierCurve3:EM,Quaternion:Fn,QuaternionKeyframeTrack:Bo,QuaternionLinearInterpolant:FD,REVISION:Ea,RGBADepthPacking:ks,RGBAFormat:pn,RGBAIntegerFormat:VR,RGBA_ASTC_10x10_Format:mw,RGBA_ASTC_10x5_Format:dw,RGBA_ASTC_10x6_Format:hw,RGBA_ASTC_10x8_Format:pw,RGBA_ASTC_12x10_Format:gw,RGBA_ASTC_12x12_Format:vw,RGBA_ASTC_4x4_Format:rw,RGBA_ASTC_5x4_Format:sw,RGBA_ASTC_5x5_Format:aw,RGBA_ASTC_6x5_Format:ow,RGBA_ASTC_6x6_Format:lw,RGBA_ASTC_8x5_Format:cw,RGBA_ASTC_8x6_Format:uw,RGBA_ASTC_8x8_Format:fw,RGBA_BPTC_Format:yw,RGBA_ETC2_EAC_Format:iw,RGBA_PVRTC_2BPPV1_Format:tw,RGBA_PVRTC_4BPPV1_Format:ew,RGBA_S3TC_DXT1_Format:_g,RGBA_S3TC_DXT3_Format:Ag,RGBA_S3TC_DXT5_Format:bg,RGBFormat:OR,RGB_ETC1_Format:WR,RGB_ETC2_Format:nw,RGB_PVRTC_2BPPV1_Format:$1,RGB_PVRTC_4BPPV1_Format:q1,RGB_S3TC_DXT1_Format:Mg,RGFormat:rM,RGIntegerFormat:GR,RawShaderMaterial:ED,Ray:Eh,Raycaster:WM,RectAreaLight:OD,RedFormat:z0,RedIntegerFormat:HR,ReinhardToneMapping:RR,RepeatWrapping:Pi,ReplaceStencilOp:d4,ReverseSubtractEquation:vR,RingBufferGeometry:KG,RingGeometry:Fh,SRGBColorSpace:is,Scene:Bu,ShaderChunk:rt,ShaderLib:ss,ShaderMaterial:Mt,ShadowMaterial:CD,Shape:Tl,ShapeBufferGeometry:QG,ShapeGeometry:kh,ShapePath:EG,ShapeUtils:Is,ShortType:LR,Skeleton:xM,SkeletonHelper:pG,SkinnedMesh:yM,Source:yl,Sphere:Os,SphereBufferGeometry:YG,SphereGeometry:$u,Spherical:JD,SphericalHarmonics3:zD,SplineCurve:TM,SpotLight:kM,SpotLightHelper:hG,Sprite:fD,SpriteMaterial:vM,SrcAlphaFactor:YS,SrcAlphaSaturateFactor:CR,SrcColorFactor:wR,StaticCopyUsage:R4,StaticDrawUsage:nh,StaticReadUsage:E4,StereoCamera:HH,StreamCopyUsage:B4,StreamDrawUsage:C4,StreamReadUsage:P4,StringKeyframeTrack:Jl,SubtractEquation:gR,SubtractiveBlending:K1,TOUCH:r4,TangentSpaceNormalMap:Ta,TetrahedronBufferGeometry:ZG,TetrahedronGeometry:Uh,Texture:$t,TextureLoader:ev,TorusBufferGeometry:qG,TorusGeometry:Oh,TorusKnotBufferGeometry:$G,TorusKnotGeometry:zh,Triangle:Fr,TriangleFanDrawMode:r0,TriangleStripDrawMode:aM,TrianglesDrawMode:KR,TubeBufferGeometry:e6,TubeGeometry:Hh,TwoPassDoubleSide:fd,UVMapping:k0,Uint16BufferAttribute:uM,Uint32BufferAttribute:fM,Uint8BufferAttribute:ak,Uint8ClampedBufferAttribute:ok,Uniform:ne,UniformsGroup:oG,UniformsLib:Ne,UniformsUtils:dM,UnsignedByteType:cn,UnsignedInt248Type:wo,UnsignedIntType:pa,UnsignedShort4444Type:FR,UnsignedShort5551Type:kR,UnsignedShortType:iM,VSMShadowMap:Zc,Vector2:se,Vector3:k,Vector4:Dt,VectorKeyframeTrack:Nu,VideoTexture:pD,WebGL1Renderer:cD,WebGL3DRenderTarget:Y4,WebGLArrayRenderTarget:Q4,WebGLCubeRenderTarget:G0,WebGLMultipleRenderTargets:cM,WebGLMultisampleRenderTarget:IG,WebGLRenderTarget:Ct,WebGLRenderer:gM,WebGLUtils:oD,WireframeGeometry:bD,WrapAroundEnding:th,ZeroCurvatureEnding:gl,ZeroFactor:yR,ZeroSlopeEnding:vl,ZeroStencilOp:f4,_SRGBAFormat:a0,sRGBEncoding:Wt},Symbol.toStringTag,{value:"Module"}));var KD={exports:{}},Xl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Xl.ConcurrentRoot=1;Xl.ContinuousEventPriority=4;Xl.DefaultEventPriority=16;Xl.DiscreteEventPriority=1;Xl.IdleEventPriority=536870912;Xl.LegacyRoot=0;KD.exports=Xl;var nu=KD.exports;function t6(n){let e;const t=new Set,i=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(v=>v(e,p))}},r=()=>e,s=(u,d=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function v(){const m=d(e);if(!h(p,m)){const g=p;u(p=m,g)}}return t.add(v),()=>t.delete(v)},l={setState:i,getState:r,subscribe:(u,d,h)=>d||h?s(u,d,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const n6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),OC=n6?N.useEffect:N.useLayoutEffect;function jM(n){const e=typeof n=="function"?t6(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=N.useReducer(w=>w+1,0),a=e.getState(),o=N.useRef(a),l=N.useRef(i),u=N.useRef(r),d=N.useRef(!1),h=N.useRef();h.current===void 0&&(h.current=i(a));let p,v=!1;(o.current!==a||l.current!==i||u.current!==r||d.current)&&(p=i(a),v=!r(h.current,p)),OC(()=>{v&&(h.current=p),o.current=a,l.current=i,u.current=r,d.current=!1});const m=N.useRef(a);OC(()=>{const w=()=>{try{const S=e.getState(),M=l.current(S);u.current(h.current,M)||(o.current=S,h.current=M,s())}catch{d.current=!0,s()}},x=e.subscribe(w);return e.getState()!==m.current&&w(),x},[]);const g=v?p:h.current;return N.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var QD={exports:{}},Cx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function i6(){return zC||(zC=1,function(n){function e(I,J){var j=I.length;I.push(J);e:for(;0<j;){var V=j-1>>>1,Q=I[V];if(0<r(Q,J))I[V]=J,I[j]=Q,j=V;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var J=I[0],j=I.pop();if(j!==J){I[0]=j;e:for(var V=0,Q=I.length,ge=Q>>>1;V<ge;){var xe=2*(V+1)-1,be=I[xe],ce=xe+1,Ye=I[ce];if(0>r(be,j))ce<Q&&0>r(Ye,be)?(I[V]=Ye,I[ce]=j,V=ce):(I[V]=be,I[xe]=j,V=xe);else if(ce<Q&&0>r(Ye,j))I[V]=Ye,I[ce]=j,V=ce;else break e}}return J}function r(I,J){var j=I.sortIndex-J.sortIndex;return j!==0?j:I.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,p=3,v=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(I){for(var J=t(u);J!==null;){if(J.callback===null)i(u);else if(J.startTime<=I)i(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(I){if(g=!1,M(I),!m)if(t(l)!==null)m=!0,ue(E);else{var J=t(u);J!==null&&pe(A,J.startTime-I)}}function E(I,J){m=!1,g&&(g=!1,x(T),T=-1),v=!0;var j=p;try{for(M(J),h=t(l);h!==null&&(!(h.expirationTime>J)||I&&!H());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var Q=V(h.expirationTime<=J);J=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&i(l),M(J)}else i(l);h=t(l)}if(h!==null)var ge=!0;else{var xe=t(u);xe!==null&&pe(A,xe.startTime-J),ge=!1}return ge}finally{h=null,p=j,v=!1}}var R=!1,D=null,T=-1,B=5,L=-1;function H(){return!(n.unstable_now()-L<B)}function Z(){if(D!==null){var I=n.unstable_now();L=I;var J=!0;try{J=D(!0,I)}finally{J?W():(R=!1,D=null)}}else R=!1}var W;if(typeof S=="function")W=function(){S(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=Z,W=function(){ie.postMessage(null)}}else W=function(){w(Z,0)};function ue(I){D=I,R||(R=!0,W())}function pe(I,J){T=w(function(){I(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){m||v||(m=!0,ue(E))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(I){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var j=p;p=J;try{return I()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var j=p;p=I;try{return J()}finally{p=j}},n.unstable_scheduleCallback=function(I,J,j){var V=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=j+Q,I={id:d++,callback:J,priorityLevel:I,startTime:j,expirationTime:Q,sortIndex:-1},j>V?(I.sortIndex=j,e(u,I),t(l)===null&&I===t(u)&&(g?(x(T),T=-1):g=!0,pe(A,j-V))):(I.sortIndex=Q,e(l,I),m||v||(m=!0,ue(E))),I},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(I){var J=p;return function(){var j=p;p=J;try{return I.apply(this,arguments)}finally{p=j}}}}(Ex)),Ex}var HC;function r6(){return HC||(HC=1,Cx.exports=i6()),Cx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6=function(e){var t={},i=N,r=r6(),s=Object.assign;function a(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),E=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=E&&c[E]||c["@@iterator"],typeof c=="function"?c:null)}function D(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case x:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case m:return(c.displayName||"Context")+".Consumer";case v:return(c._context.displayName||"Context")+".Provider";case g:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return f=c.displayName||null,f!==null?f:D(c.type)||"Memo";case M:f=c._payload,c=c._init;try{return D(c(f))}catch{}}return null}function T(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function B(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function L(c){if(B(c)!==c)throw Error(a(188))}function H(c){var f=c.alternate;if(!f){if(f=B(c),f===null)throw Error(a(188));return f!==c?null:c}for(var y=c,_=f;;){var b=y.return;if(b===null)break;var P=b.alternate;if(P===null){if(_=b.return,_!==null){y=_;continue}break}if(b.child===P.child){for(P=b.child;P;){if(P===y)return L(b),c;if(P===_)return L(b),f;P=P.sibling}throw Error(a(188))}if(y.return!==_.return)y=b,_=P;else{for(var O=!1,Y=b.child;Y;){if(Y===y){O=!0,y=b,_=P;break}if(Y===_){O=!0,_=b,y=P;break}Y=Y.sibling}if(!O){for(Y=P.child;Y;){if(Y===y){O=!0,y=P,_=b;break}if(Y===_){O=!0,_=P,y=b;break}Y=Y.sibling}if(!O)throw Error(a(189))}}if(y.alternate!==_)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?c:f}function Z(c){return c=H(c),c!==null?W(c):null}function W(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=W(c);if(f!==null)return f;c=c.sibling}return null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=K(c);if(f!==null)return f}c=c.sibling}return null}var ie=Array.isArray,ue=e.getPublicInstance,pe=e.getRootHostContext,I=e.getChildHostContext,J=e.prepareForCommit,j=e.resetAfterCommit,V=e.createInstance,Q=e.appendInitialChild,ge=e.finalizeInitialChildren,xe=e.prepareUpdate,be=e.shouldSetTextContent,ce=e.createTextInstance,Ye=e.scheduleTimeout,Je=e.cancelTimeout,st=e.noTimeout,Fe=e.isPrimaryRenderer,at=e.supportsMutation,Se=e.supportsPersistence,me=e.supportsHydration,Be=e.getInstanceFromNode,Xe=e.preparePortalMount,Le=e.getCurrentEventPriority,ot=e.detachDeletedInstance,it=e.supportsMicrotasks,nt=e.scheduleMicrotask,Nt=e.supportsTestSelectors,Ot=e.findFiberRoot,z=e.getBoundingRect,F=e.getTextContent,fe=e.isHiddenSubtree,Ce=e.matchAccessibilityRole,De=e.setFocusIfFocusable,He=e.setupIntersectionObserver,ct=e.appendChild,Ve=e.appendChildToContainer,G=e.commitTextUpdate,$=e.commitMount,le=e.commitUpdate,ye=e.insertBefore,Me=e.insertInContainerBefore,Ae=e.removeChild,ke=e.removeChildFromContainer,Ue=e.resetTextContent,Oe=e.hideInstance,X=e.hideTextInstance,ae=e.unhideInstance,_e=e.unhideTextInstance,Re=e.clearContainer,ze=e.cloneInstance,ft=e.createContainerChildSet,en=e.appendChildToContainerChildSet,Mn=e.finalizeContainerChildren,Di=e.replaceContainerChildren,Et=e.cloneHiddenInstance,fi=e.cloneHiddenTextInstance,ti=e.canHydrateInstance,Ba=e.canHydrateTextInstance,Oo=e.canHydrateSuspenseInstance,Hs=e.isSuspenseInstancePending,Zt=e.isSuspenseInstanceFallback,U=e.registerSuspenseInstanceRetry,re=e.getNextHydratableSibling,ve=e.getFirstHydratableChild,ee=e.getFirstHydratableChildWithinContainer,we=e.getFirstHydratableChildWithinSuspenseInstance,tt=e.hydrateInstance,ut=e.hydrateTextInstance,xt=e.hydrateSuspenseInstance,_t=e.getNextHydratableInstanceAfterSuspenseInstance,It=e.commitHydratedContainer,Tt=e.commitHydratedSuspenseInstance,Pt=e.clearSuspenseBoundary,_n=e.clearSuspenseBoundaryFromContainer,Bi=e.shouldDeleteUnhydratedTailInstances,jr=e.didNotMatchHydratedContainerTextInstance,Gs=e.didNotMatchHydratedTextInstance,un;function wt(c){if(un===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);un=f&&f[1]||""}return`
`+un+c}var zo=!1;function An(c,f){if(!c||zo)return"";zo=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Pe){var _=Pe}Reflect.construct(c,[],f)}else{try{f.call()}catch(Pe){_=Pe}c.call(f.prototype)}else{try{throw Error()}catch(Pe){_=Pe}c()}}catch(Pe){if(Pe&&_&&typeof Pe.stack=="string"){for(var b=Pe.stack.split(`
`),P=_.stack.split(`
`),O=b.length-1,Y=P.length-1;1<=O&&0<=Y&&b[O]!==P[Y];)Y--;for(;1<=O&&0<=Y;O--,Y--)if(b[O]!==P[Y]){if(O!==1||Y!==1)do if(O--,Y--,0>Y||b[O]!==P[Y]){var he=`
`+b[O].replace(" at new "," at ");return c.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",c.displayName)),he}while(1<=O&&0<=Y);break}}}finally{zo=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?wt(c):""}var Vs=Object.prototype.hasOwnProperty,$l=[],vr=-1;function yr(c){return{current:c}}function yt(c){0>vr||(c.current=$l[vr],$l[vr]=null,vr--)}function Ft(c,f){vr++,$l[vr]=c.current,c.current=f}var xr={},Xt=yr(xr),ni=yr(!1),Ws=xr;function js(c,f){var y=c.type.contextTypes;if(!y)return xr;var _=c.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===f)return _.__reactInternalMemoizedMaskedChildContext;var b={},P;for(P in y)b[P]=f[P];return _&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=b),b}function Wi(c){return c=c.childContextTypes,c!=null}function $h(){yt(ni),yt(Xt)}function R_(c,f,y){if(Xt.current!==xr)throw Error(a(168));Ft(Xt,f),Ft(ni,y)}function D_(c,f,y){var _=c.stateNode;if(f=f.childContextTypes,typeof _.getChildContext!="function")return y;_=_.getChildContext();for(var b in _)if(!(b in f))throw Error(a(108,T(c)||"Unknown",b));return s({},y,_)}function ep(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||xr,Ws=Xt.current,Ft(Xt,c),Ft(ni,ni.current),!0}function B_(c,f,y){var _=c.stateNode;if(!_)throw Error(a(169));y?(c=D_(c,f,Ws),_.__reactInternalMemoizedMergedChildContext=c,yt(ni),yt(Xt),Ft(Xt,c)):yt(ni),Ft(ni,y)}var Jr=Math.clz32?Math.clz32:VI,HI=Math.log,GI=Math.LN2;function VI(c){return c>>>=0,c===0?32:31-(HI(c)/GI|0)|0}var tp=64,np=4194304;function of(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function ip(c,f){var y=c.pendingLanes;if(y===0)return 0;var _=0,b=c.suspendedLanes,P=c.pingedLanes,O=y&268435455;if(O!==0){var Y=O&~b;Y!==0?_=of(Y):(P&=O,P!==0&&(_=of(P)))}else O=y&~b,O!==0?_=of(O):P!==0&&(_=of(P));if(_===0)return 0;if(f!==0&&f!==_&&!(f&b)&&(b=_&-_,P=f&-f,b>=P||b===16&&(P&4194240)!==0))return f;if(_&4&&(_|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=_;0<f;)y=31-Jr(f),b=1<<y,_|=c[y],f&=~b;return _}function WI(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jI(c,f){for(var y=c.suspendedLanes,_=c.pingedLanes,b=c.expirationTimes,P=c.pendingLanes;0<P;){var O=31-Jr(P),Y=1<<O,he=b[O];he===-1?(!(Y&y)||Y&_)&&(b[O]=WI(Y,f)):he<=f&&(c.expiredLanes|=Y),P&=~Y}}function gv(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function vv(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function lf(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Jr(f),c[f]=y}function JI(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var _=c.eventTimes;for(c=c.expirationTimes;0<y;){var b=31-Jr(y),P=1<<b;f[b]=0,_[b]=-1,c[b]=-1,y&=~P}}function yv(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var _=31-Jr(y),b=1<<_;b&f|c[_]&f&&(c[_]|=f),y&=~b}}var Ht=0;function I_(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var xv=r.unstable_scheduleCallback,L_=r.unstable_cancelCallback,XI=r.unstable_shouldYield,KI=r.unstable_requestPaint,ii=r.unstable_now,wv=r.unstable_ImmediatePriority,QI=r.unstable_UserBlockingPriority,Sv=r.unstable_NormalPriority,YI=r.unstable_IdlePriority,rp=null,ys=null;function ZI(c){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(rp,c,void 0,(c.current.flags&128)===128)}catch{}}function qI(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var xs=typeof Object.is=="function"?Object.is:qI,Js=null,sp=!1,Mv=!1;function N_(c){Js===null?Js=[c]:Js.push(c)}function $I(c){sp=!0,N_(c)}function ws(){if(!Mv&&Js!==null){Mv=!0;var c=0,f=Ht;try{var y=Js;for(Ht=1;c<y.length;c++){var _=y[c];do _=_(!0);while(_!==null)}Js=null,sp=!1}catch(b){throw Js!==null&&(Js=Js.slice(c+1)),xv(wv,ws),b}finally{Ht=f,Mv=!1}}return null}var eL=o.ReactCurrentBatchConfig;function ap(c,f){if(xs(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),_=Object.keys(f);if(y.length!==_.length)return!1;for(_=0;_<y.length;_++){var b=y[_];if(!Vs.call(f,b)||!xs(c[b],f[b]))return!1}return!0}function tL(c){switch(c.tag){case 5:return wt(c.type);case 16:return wt("Lazy");case 13:return wt("Suspense");case 19:return wt("SuspenseList");case 0:case 2:case 15:return c=An(c.type,!1),c;case 11:return c=An(c.type.render,!1),c;case 1:return c=An(c.type,!0),c;default:return""}}function Xr(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}var op=yr(null),lp=null,ec=null,_v=null;function Av(){_v=ec=lp=null}function F_(c,f,y){Fe?(Ft(op,f._currentValue),f._currentValue=y):(Ft(op,f._currentValue2),f._currentValue2=y)}function bv(c){var f=op.current;yt(op),Fe?c._currentValue=f:c._currentValue2=f}function Cv(c,f,y){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===y)break;c=c.return}}function tc(c,f){lp=c,_v=ec=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(ir=!0),c.firstContext=null)}function wr(c){var f=Fe?c._currentValue:c._currentValue2;if(_v!==c)if(c={context:c,memoizedValue:f,next:null},ec===null){if(lp===null)throw Error(a(308));ec=c,lp.dependencies={lanes:0,firstContext:c}}else ec=ec.next=c;return f}var Ss=null,Ia=!1;function Ev(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k_(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Xs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function La(c,f){var y=c.updateQueue;y!==null&&(y=y.shared,kn!==null&&c.mode&1&&!(At&2)?(c=y.interleaved,c===null?(f.next=f,Ss===null?Ss=[y]:Ss.push(y)):(f.next=c.next,c.next=f),y.interleaved=f):(c=y.pending,c===null?f.next=f:(f.next=c.next,c.next=f),y.pending=f))}function cp(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var _=f.lanes;_&=c.pendingLanes,y|=_,f.lanes=y,yv(c,y)}}function U_(c,f){var y=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,y===_)){var b=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var O={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};P===null?b=P=O:P=P.next=O,y=y.next}while(y!==null);P===null?b=P=f:P=P.next=f}else b=P=f;y={baseState:_.baseState,firstBaseUpdate:b,lastBaseUpdate:P,shared:_.shared,effects:_.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function up(c,f,y,_){var b=c.updateQueue;Ia=!1;var P=b.firstBaseUpdate,O=b.lastBaseUpdate,Y=b.shared.pending;if(Y!==null){b.shared.pending=null;var he=Y,Pe=he.next;he.next=null,O===null?P=Pe:O.next=Pe,O=he;var Qe=c.alternate;Qe!==null&&(Qe=Qe.updateQueue,Y=Qe.lastBaseUpdate,Y!==O&&(Y===null?Qe.firstBaseUpdate=Pe:Y.next=Pe,Qe.lastBaseUpdate=he))}if(P!==null){var gt=b.baseState;O=0,Qe=Pe=he=null,Y=P;do{var lt=Y.lane,tn=Y.eventTime;if((_&lt)===lt){Qe!==null&&(Qe=Qe.next={eventTime:tn,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var et=c,wi=Y;switch(lt=f,tn=y,wi.tag){case 1:if(et=wi.payload,typeof et=="function"){gt=et.call(tn,gt,lt);break e}gt=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=wi.payload,lt=typeof et=="function"?et.call(tn,gt,lt):et,lt==null)break e;gt=s({},gt,lt);break e;case 2:Ia=!0}}Y.callback!==null&&Y.lane!==0&&(c.flags|=64,lt=b.effects,lt===null?b.effects=[Y]:lt.push(Y))}else tn={eventTime:tn,lane:lt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Qe===null?(Pe=Qe=tn,he=gt):Qe=Qe.next=tn,O|=lt;if(Y=Y.next,Y===null){if(Y=b.shared.pending,Y===null)break;lt=Y,Y=lt.next,lt.next=null,b.lastBaseUpdate=lt,b.shared.pending=null}}while(1);if(Qe===null&&(he=gt),b.baseState=he,b.firstBaseUpdate=Pe,b.lastBaseUpdate=Qe,f=b.shared.interleaved,f!==null){b=f;do O|=b.lane,b=b.next;while(b!==f)}else P===null&&(b.shared.lanes=0);uc|=O,c.lanes=O,c.memoizedState=gt}}function O_(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var _=c[f],b=_.callback;if(b!==null){if(_.callback=null,_=y,typeof b!="function")throw Error(a(191,b));b.call(_)}}}var z_=new i.Component().refs;function Tv(c,f,y,_){f=c.memoizedState,y=y(_,f),y=y==null?f:s({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var fp={isMounted:function(c){return(c=c._reactInternals)?B(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var _=Li(),b=ka(c),P=Xs(_,b);P.payload=f,y!=null&&(P.callback=y),La(c,P),f=br(c,b,_),f!==null&&cp(f,c,b)},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var _=Li(),b=ka(c),P=Xs(_,b);P.tag=1,P.payload=f,y!=null&&(P.callback=y),La(c,P),f=br(c,b,_),f!==null&&cp(f,c,b)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=Li(),_=ka(c),b=Xs(y,_);b.tag=2,f!=null&&(b.callback=f),La(c,b),f=br(c,_,y),f!==null&&cp(f,c,_)}};function H_(c,f,y,_,b,P,O){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,P,O):f.prototype&&f.prototype.isPureReactComponent?!ap(y,_)||!ap(b,P):!0}function G_(c,f,y){var _=!1,b=xr,P=f.contextType;return typeof P=="object"&&P!==null?P=wr(P):(b=Wi(f)?Ws:Xt.current,_=f.contextTypes,P=(_=_!=null)?js(c,b):xr),f=new f(y,P),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=fp,c.stateNode=f,f._reactInternals=c,_&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=b,c.__reactInternalMemoizedMaskedChildContext=P),f}function V_(c,f,y,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,_),f.state!==c&&fp.enqueueReplaceState(f,f.state,null)}function Pv(c,f,y,_){var b=c.stateNode;b.props=y,b.state=c.memoizedState,b.refs=z_,Ev(c);var P=f.contextType;typeof P=="object"&&P!==null?b.context=wr(P):(P=Wi(f)?Ws:Xt.current,b.context=js(c,P)),b.state=c.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(Tv(c,f,P,y),b.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(f=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),f!==b.state&&fp.enqueueReplaceState(b,b.state,null),up(c,y,b,_),b.state=c.memoizedState),typeof b.componentDidMount=="function"&&(c.flags|=4194308)}var nc=[],ic=0,dp=null,hp=0,Sr=[],Mr=0,Ho=null,Ks=1,Qs="";function Go(c,f){nc[ic++]=hp,nc[ic++]=dp,dp=c,hp=f}function W_(c,f,y){Sr[Mr++]=Ks,Sr[Mr++]=Qs,Sr[Mr++]=Ho,Ho=c;var _=Ks;c=Qs;var b=32-Jr(_)-1;_&=~(1<<b),y+=1;var P=32-Jr(f)+b;if(30<P){var O=b-b%5;P=(_&(1<<O)-1).toString(32),_>>=O,b-=O,Ks=1<<32-Jr(f)+b|y<<b|_,Qs=P+c}else Ks=1<<P|y<<b|_,Qs=c}function Rv(c){c.return!==null&&(Go(c,1),W_(c,1,0))}function Dv(c){for(;c===dp;)dp=nc[--ic],nc[ic]=null,hp=nc[--ic],nc[ic]=null;for(;c===Ho;)Ho=Sr[--Mr],Sr[Mr]=null,Qs=Sr[--Mr],Sr[Mr]=null,Ks=Sr[--Mr],Sr[Mr]=null}var tr=null,nr=null,fn=!1,cf=!1,Kr=null;function j_(c,f){var y=Cr(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function J_(c,f){switch(c.tag){case 5:return f=ti(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,tr=c,nr=ve(f),!0):!1;case 6:return f=Ba(f,c.pendingProps),f!==null?(c.stateNode=f,tr=c,nr=null,!0):!1;case 13:if(f=Oo(f),f!==null){var y=Ho!==null?{id:Ks,overflow:Qs}:null;return c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=Cr(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,tr=c,nr=null,!0}return!1;default:return!1}}function Bv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Iv(c){if(fn){var f=nr;if(f){var y=f;if(!J_(c,f)){if(Bv(c))throw Error(a(418));f=re(y);var _=tr;f&&J_(c,f)?j_(_,y):(c.flags=c.flags&-4097|2,fn=!1,tr=c)}}else{if(Bv(c))throw Error(a(418));c.flags=c.flags&-4097|2,fn=!1,tr=c}}}function X_(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;tr=c}function uf(c){if(!me||c!==tr)return!1;if(!fn)return X_(c),fn=!0,!1;if(c.tag!==3&&(c.tag!==5||Bi(c.type)&&!be(c.type,c.memoizedProps))){var f=nr;if(f){if(Bv(c)){for(c=nr;c;)c=re(c);throw Error(a(418))}for(;f;)j_(c,f),f=re(f)}}if(X_(c),c.tag===13){if(!me)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));nr=_t(c)}else nr=tr?re(c.stateNode):null;return!0}function rc(){me&&(nr=tr=null,cf=fn=!1)}function Lv(c){Kr===null?Kr=[c]:Kr.push(c)}function ff(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(a(309));var _=y.stateNode}if(!_)throw Error(a(147,c));var b=_,P=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===P?f.ref:(f=function(O){var Y=b.refs;Y===z_&&(Y=b.refs={}),O===null?delete Y[P]:Y[P]=O},f._stringRef=P,f)}if(typeof c!="string")throw Error(a(284));if(!y._owner)throw Error(a(290,c))}return c}function pp(c,f){throw c=Object.prototype.toString.call(f),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function K_(c){var f=c._init;return f(c._payload)}function Q_(c){function f(oe,q){if(c){var de=oe.deletions;de===null?(oe.deletions=[q],oe.flags|=16):de.push(q)}}function y(oe,q){if(!c)return null;for(;q!==null;)f(oe,q),q=q.sibling;return null}function _(oe,q){for(oe=new Map;q!==null;)q.key!==null?oe.set(q.key,q):oe.set(q.index,q),q=q.sibling;return oe}function b(oe,q){return oe=Oa(oe,q),oe.index=0,oe.sibling=null,oe}function P(oe,q,de){return oe.index=de,c?(de=oe.alternate,de!==null?(de=de.index,de<q?(oe.flags|=2,q):de):(oe.flags|=2,q)):(oe.flags|=1048576,q)}function O(oe){return c&&oe.alternate===null&&(oe.flags|=2),oe}function Y(oe,q,de,We){return q===null||q.tag!==6?(q=vy(de,oe.mode,We),q.return=oe,q):(q=b(q,de),q.return=oe,q)}function he(oe,q,de,We){var $e=de.type;return $e===d?Qe(oe,q,de.props.children,We,de.key):q!==null&&(q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&K_($e)===q.type)?(We=b(q,de.props),We.ref=ff(oe,q,de),We.return=oe,We):(We=jp(de.type,de.key,de.props,null,oe.mode,We),We.ref=ff(oe,q,de),We.return=oe,We)}function Pe(oe,q,de,We){return q===null||q.tag!==4||q.stateNode.containerInfo!==de.containerInfo||q.stateNode.implementation!==de.implementation?(q=yy(de,oe.mode,We),q.return=oe,q):(q=b(q,de.children||[]),q.return=oe,q)}function Qe(oe,q,de,We,$e){return q===null||q.tag!==7?(q=Qo(de,oe.mode,We,$e),q.return=oe,q):(q=b(q,de),q.return=oe,q)}function gt(oe,q,de){if(typeof q=="string"&&q!==""||typeof q=="number")return q=vy(""+q,oe.mode,de),q.return=oe,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case l:return de=jp(q.type,q.key,q.props,null,oe.mode,de),de.ref=ff(oe,null,q),de.return=oe,de;case u:return q=yy(q,oe.mode,de),q.return=oe,q;case M:var We=q._init;return gt(oe,We(q._payload),de)}if(ie(q)||R(q))return q=Qo(q,oe.mode,de,null),q.return=oe,q;pp(oe,q)}return null}function lt(oe,q,de,We){var $e=q!==null?q.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return $e!==null?null:Y(oe,q,""+de,We);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return de.key===$e?he(oe,q,de,We):null;case u:return de.key===$e?Pe(oe,q,de,We):null;case M:return $e=de._init,lt(oe,q,$e(de._payload),We)}if(ie(de)||R(de))return $e!==null?null:Qe(oe,q,de,We,null);pp(oe,de)}return null}function tn(oe,q,de,We,$e){if(typeof We=="string"&&We!==""||typeof We=="number")return oe=oe.get(de)||null,Y(q,oe,""+We,$e);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return oe=oe.get(We.key===null?de:We.key)||null,he(q,oe,We,$e);case u:return oe=oe.get(We.key===null?de:We.key)||null,Pe(q,oe,We,$e);case M:var St=We._init;return tn(oe,q,de,St(We._payload),$e)}if(ie(We)||R(We))return oe=oe.get(de)||null,Qe(q,oe,We,$e,null);pp(q,We)}return null}function et(oe,q,de,We){for(var $e=null,St=null,vt=q,Gt=q=0,si=null;vt!==null&&Gt<de.length;Gt++){vt.index>Gt?(si=vt,vt=null):si=vt.sibling;var Vt=lt(oe,vt,de[Gt],We);if(Vt===null){vt===null&&(vt=si);break}c&&vt&&Vt.alternate===null&&f(oe,vt),q=P(Vt,q,Gt),St===null?$e=Vt:St.sibling=Vt,St=Vt,vt=si}if(Gt===de.length)return y(oe,vt),fn&&Go(oe,Gt),$e;if(vt===null){for(;Gt<de.length;Gt++)vt=gt(oe,de[Gt],We),vt!==null&&(q=P(vt,q,Gt),St===null?$e=vt:St.sibling=vt,St=vt);return fn&&Go(oe,Gt),$e}for(vt=_(oe,vt);Gt<de.length;Gt++)si=tn(vt,oe,Gt,de[Gt],We),si!==null&&(c&&si.alternate!==null&&vt.delete(si.key===null?Gt:si.key),q=P(si,q,Gt),St===null?$e=si:St.sibling=si,St=si);return c&&vt.forEach(function(za){return f(oe,za)}),fn&&Go(oe,Gt),$e}function wi(oe,q,de,We){var $e=R(de);if(typeof $e!="function")throw Error(a(150));if(de=$e.call(de),de==null)throw Error(a(151));for(var St=$e=null,vt=q,Gt=q=0,si=null,Vt=de.next();vt!==null&&!Vt.done;Gt++,Vt=de.next()){vt.index>Gt?(si=vt,vt=null):si=vt.sibling;var za=lt(oe,vt,Vt.value,We);if(za===null){vt===null&&(vt=si);break}c&&vt&&za.alternate===null&&f(oe,vt),q=P(za,q,Gt),St===null?$e=za:St.sibling=za,St=za,vt=si}if(Vt.done)return y(oe,vt),fn&&Go(oe,Gt),$e;if(vt===null){for(;!Vt.done;Gt++,Vt=de.next())Vt=gt(oe,Vt.value,We),Vt!==null&&(q=P(Vt,q,Gt),St===null?$e=Vt:St.sibling=Vt,St=Vt);return fn&&Go(oe,Gt),$e}for(vt=_(oe,vt);!Vt.done;Gt++,Vt=de.next())Vt=tn(vt,oe,Gt,Vt.value,We),Vt!==null&&(c&&Vt.alternate!==null&&vt.delete(Vt.key===null?Gt:Vt.key),q=P(Vt,q,Gt),St===null?$e=Vt:St.sibling=Vt,St=Vt);return c&&vt.forEach(function(DL){return f(oe,DL)}),fn&&Go(oe,Gt),$e}function Er(oe,q,de,We){if(typeof de=="object"&&de!==null&&de.type===d&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case l:e:{for(var $e=de.key,St=q;St!==null;){if(St.key===$e){if($e=de.type,$e===d){if(St.tag===7){y(oe,St.sibling),q=b(St,de.props.children),q.return=oe,oe=q;break e}}else if(St.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&K_($e)===St.type){y(oe,St.sibling),q=b(St,de.props),q.ref=ff(oe,St,de),q.return=oe,oe=q;break e}y(oe,St);break}else f(oe,St);St=St.sibling}de.type===d?(q=Qo(de.props.children,oe.mode,We,de.key),q.return=oe,oe=q):(We=jp(de.type,de.key,de.props,null,oe.mode,We),We.ref=ff(oe,q,de),We.return=oe,oe=We)}return O(oe);case u:e:{for(St=de.key;q!==null;){if(q.key===St)if(q.tag===4&&q.stateNode.containerInfo===de.containerInfo&&q.stateNode.implementation===de.implementation){y(oe,q.sibling),q=b(q,de.children||[]),q.return=oe,oe=q;break e}else{y(oe,q);break}else f(oe,q);q=q.sibling}q=yy(de,oe.mode,We),q.return=oe,oe=q}return O(oe);case M:return St=de._init,Er(oe,q,St(de._payload),We)}if(ie(de))return et(oe,q,de,We);if(R(de))return wi(oe,q,de,We);pp(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,q!==null&&q.tag===6?(y(oe,q.sibling),q=b(q,de),q.return=oe,oe=q):(y(oe,q),q=vy(de,oe.mode,We),q.return=oe,oe=q),O(oe)):y(oe,q)}return Er}var sc=Q_(!0),Y_=Q_(!1),df={},_r=yr(df),hf=yr(df),ac=yr(df);function Ms(c){if(c===df)throw Error(a(174));return c}function Nv(c,f){Ft(ac,f),Ft(hf,c),Ft(_r,df),c=pe(f),yt(_r),Ft(_r,c)}function oc(){yt(_r),yt(hf),yt(ac)}function Z_(c){var f=Ms(ac.current),y=Ms(_r.current);f=I(y,c.type,f),y!==f&&(Ft(hf,c),Ft(_r,f))}function Fv(c){hf.current===c&&(yt(_r),yt(hf))}var mn=yr(0);function mp(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Hs(y)||Zt(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var kv=[];function Uv(){for(var c=0;c<kv.length;c++){var f=kv[c];Fe?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}kv.length=0}var gp=o.ReactCurrentDispatcher,Ar=o.ReactCurrentBatchConfig,lc=0,bn=null,vi=null,ri=null,vp=!1,pf=!1,mf=0,nL=0;function yi(){throw Error(a(321))}function Ov(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!xs(c[y],f[y]))return!1;return!0}function zv(c,f,y,_,b,P){if(lc=P,bn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,gp.current=c===null||c.memoizedState===null?aL:oL,c=y(_,b),pf){P=0;do{if(pf=!1,mf=0,25<=P)throw Error(a(301));P+=1,ri=vi=null,f.updateQueue=null,gp.current=lL,c=y(_,b)}while(pf)}if(gp.current=Mp,f=vi!==null&&vi.next!==null,lc=0,ri=vi=bn=null,vp=!1,f)throw Error(a(300));return c}function Hv(){var c=mf!==0;return mf=0,c}function Ys(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?bn.memoizedState=ri=c:ri=ri.next=c,ri}function _s(){if(vi===null){var c=bn.alternate;c=c!==null?c.memoizedState:null}else c=vi.next;var f=ri===null?bn.memoizedState:ri.next;if(f!==null)ri=f,vi=c;else{if(c===null)throw Error(a(310));vi=c,c={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},ri===null?bn.memoizedState=ri=c:ri=ri.next=c}return ri}function Vo(c,f){return typeof f=="function"?f(c):f}function yp(c){var f=_s(),y=f.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var _=vi,b=_.baseQueue,P=y.pending;if(P!==null){if(b!==null){var O=b.next;b.next=P.next,P.next=O}_.baseQueue=b=P,y.pending=null}if(b!==null){P=b.next,_=_.baseState;var Y=O=null,he=null,Pe=P;do{var Qe=Pe.lane;if((lc&Qe)===Qe)he!==null&&(he=he.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),_=Pe.hasEagerState?Pe.eagerState:c(_,Pe.action);else{var gt={lane:Qe,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};he===null?(Y=he=gt,O=_):he=he.next=gt,bn.lanes|=Qe,uc|=Qe}Pe=Pe.next}while(Pe!==null&&Pe!==P);he===null?O=_:he.next=Y,xs(_,f.memoizedState)||(ir=!0),f.memoizedState=_,f.baseState=O,f.baseQueue=he,y.lastRenderedState=_}if(c=y.interleaved,c!==null){b=c;do P=b.lane,bn.lanes|=P,uc|=P,b=b.next;while(b!==c)}else b===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function xp(c){var f=_s(),y=f.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=c;var _=y.dispatch,b=y.pending,P=f.memoizedState;if(b!==null){y.pending=null;var O=b=b.next;do P=c(P,O.action),O=O.next;while(O!==b);xs(P,f.memoizedState)||(ir=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),y.lastRenderedState=P}return[P,_]}function q_(){}function $_(c,f){var y=bn,_=_s(),b=f(),P=!xs(_.memoizedState,b);if(P&&(_.memoizedState=b,ir=!0),_=_.queue,vf(nA.bind(null,y,_,c),[c]),_.getSnapshot!==f||P||ri!==null&&ri.memoizedState.tag&1){if(y.flags|=2048,gf(9,tA.bind(null,y,_,b,f),void 0,null),kn===null)throw Error(a(349));lc&30||eA(y,f,b)}return b}function eA(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=bn.updateQueue,f===null?(f={lastEffect:null,stores:null},bn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function tA(c,f,y,_){f.value=y,f.getSnapshot=_,iA(f)&&br(c,1,-1)}function nA(c,f,y){return y(function(){iA(f)&&br(c,1,-1)})}function iA(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!xs(c,y)}catch{return!0}}function Gv(c){var f=Ys();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:c},f.queue=c,c=c.dispatch=sL.bind(null,bn,c),[f.memoizedState,c]}function gf(c,f,y,_){return c={tag:c,create:f,destroy:y,deps:_,next:null},f=bn.updateQueue,f===null?(f={lastEffect:null,stores:null},bn.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(_=y.next,y.next=c,c.next=_,f.lastEffect=c)),c}function rA(){return _s().memoizedState}function wp(c,f,y,_){var b=Ys();bn.flags|=c,b.memoizedState=gf(1|f,y,void 0,_===void 0?null:_)}function Sp(c,f,y,_){var b=_s();_=_===void 0?null:_;var P=void 0;if(vi!==null){var O=vi.memoizedState;if(P=O.destroy,_!==null&&Ov(_,O.deps)){b.memoizedState=gf(f,y,P,_);return}}bn.flags|=c,b.memoizedState=gf(1|f,y,P,_)}function Vv(c,f){return wp(8390656,8,c,f)}function vf(c,f){return Sp(2048,8,c,f)}function sA(c,f){return Sp(4,2,c,f)}function aA(c,f){return Sp(4,4,c,f)}function oA(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function lA(c,f,y){return y=y!=null?y.concat([c]):null,Sp(4,4,oA.bind(null,f,c),y)}function Wv(){}function cA(c,f){var y=_s();f=f===void 0?null:f;var _=y.memoizedState;return _!==null&&f!==null&&Ov(f,_[1])?_[0]:(y.memoizedState=[c,f],c)}function uA(c,f){var y=_s();f=f===void 0?null:f;var _=y.memoizedState;return _!==null&&f!==null&&Ov(f,_[1])?_[0]:(c=c(),y.memoizedState=[c,f],c)}function iL(c,f){var y=Ht;Ht=y!==0&&4>y?y:4,c(!0);var _=Ar.transition;Ar.transition={};try{c(!1),f()}finally{Ht=y,Ar.transition=_}}function fA(){return _s().memoizedState}function rL(c,f,y){var _=ka(c);y={lane:_,action:y,hasEagerState:!1,eagerState:null,next:null},dA(c)?hA(f,y):(pA(c,f,y),y=Li(),c=br(c,_,y),c!==null&&mA(c,f,_))}function sL(c,f,y){var _=ka(c),b={lane:_,action:y,hasEagerState:!1,eagerState:null,next:null};if(dA(c))hA(f,b);else{pA(c,f,b);var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var O=f.lastRenderedState,Y=P(O,y);if(b.hasEagerState=!0,b.eagerState=Y,xs(Y,O))return}catch{}finally{}y=Li(),c=br(c,_,y),c!==null&&mA(c,f,_)}}function dA(c){var f=c.alternate;return c===bn||f!==null&&f===bn}function hA(c,f){pf=vp=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function pA(c,f,y){kn!==null&&c.mode&1&&!(At&2)?(c=f.interleaved,c===null?(y.next=y,Ss===null?Ss=[f]:Ss.push(f)):(y.next=c.next,c.next=y),f.interleaved=y):(c=f.pending,c===null?y.next=y:(y.next=c.next,c.next=y),f.pending=y)}function mA(c,f,y){if(y&4194240){var _=f.lanes;_&=c.pendingLanes,y|=_,f.lanes=y,yv(c,y)}}var Mp={readContext:wr,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},aL={readContext:wr,useCallback:function(c,f){return Ys().memoizedState=[c,f===void 0?null:f],c},useContext:wr,useEffect:Vv,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,wp(4194308,4,oA.bind(null,f,c),y)},useLayoutEffect:function(c,f){return wp(4194308,4,c,f)},useInsertionEffect:function(c,f){return wp(4,2,c,f)},useMemo:function(c,f){var y=Ys();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var _=Ys();return f=y!==void 0?y(f):f,_.memoizedState=_.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},_.queue=c,c=c.dispatch=rL.bind(null,bn,c),[_.memoizedState,c]},useRef:function(c){var f=Ys();return c={current:c},f.memoizedState=c},useState:Gv,useDebugValue:Wv,useDeferredValue:function(c){var f=Gv(c),y=f[0],_=f[1];return Vv(function(){var b=Ar.transition;Ar.transition={};try{_(c)}finally{Ar.transition=b}},[c]),y},useTransition:function(){var c=Gv(!1),f=c[0];return c=iL.bind(null,c[1]),Ys().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var _=bn,b=Ys();if(fn){if(y===void 0)throw Error(a(407));y=y()}else{if(y=f(),kn===null)throw Error(a(349));lc&30||eA(_,f,y)}b.memoizedState=y;var P={value:y,getSnapshot:f};return b.queue=P,Vv(nA.bind(null,_,P,c),[c]),_.flags|=2048,gf(9,tA.bind(null,_,P,y,f),void 0,null),y},useId:function(){var c=Ys(),f=kn.identifierPrefix;if(fn){var y=Qs,_=Ks;y=(_&~(1<<32-Jr(_)-1)).toString(32)+y,f=":"+f+"R"+y,y=mf++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=nL++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},oL={readContext:wr,useCallback:cA,useContext:wr,useEffect:vf,useImperativeHandle:lA,useInsertionEffect:sA,useLayoutEffect:aA,useMemo:uA,useReducer:yp,useRef:rA,useState:function(){return yp(Vo)},useDebugValue:Wv,useDeferredValue:function(c){var f=yp(Vo),y=f[0],_=f[1];return vf(function(){var b=Ar.transition;Ar.transition={};try{_(c)}finally{Ar.transition=b}},[c]),y},useTransition:function(){var c=yp(Vo)[0],f=_s().memoizedState;return[c,f]},useMutableSource:q_,useSyncExternalStore:$_,useId:fA,unstable_isNewReconciler:!1},lL={readContext:wr,useCallback:cA,useContext:wr,useEffect:vf,useImperativeHandle:lA,useInsertionEffect:sA,useLayoutEffect:aA,useMemo:uA,useReducer:xp,useRef:rA,useState:function(){return xp(Vo)},useDebugValue:Wv,useDeferredValue:function(c){var f=xp(Vo),y=f[0],_=f[1];return vf(function(){var b=Ar.transition;Ar.transition={};try{_(c)}finally{Ar.transition=b}},[c]),y},useTransition:function(){var c=xp(Vo)[0],f=_s().memoizedState;return[c,f]},useMutableSource:q_,useSyncExternalStore:$_,useId:fA,unstable_isNewReconciler:!1};function jv(c,f){try{var y="",_=f;do y+=tL(_),_=_.return;while(_);var b=y}catch(P){b=`
Error generating stack: `+P.message+`
`+P.stack}return{value:c,source:f,stack:b}}function Jv(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var cL=typeof WeakMap=="function"?WeakMap:Map;function gA(c,f,y){y=Xs(-1,y),y.tag=3,y.payload={element:null};var _=f.value;return y.callback=function(){Up||(Up=!0,uy=_),Jv(c,f)},y}function vA(c,f,y){y=Xs(-1,y),y.tag=3;var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var b=f.value;y.payload=function(){return _(b)},y.callback=function(){Jv(c,f)}}var P=c.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(y.callback=function(){Jv(c,f),typeof _!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var O=f.stack;this.componentDidCatch(f.value,{componentStack:O!==null?O:""})}),y}function yA(c,f,y){var _=c.pingCache;if(_===null){_=c.pingCache=new cL;var b=new Set;_.set(f,b)}else b=_.get(f),b===void 0&&(b=new Set,_.set(f,b));b.has(y)||(b.add(y),c=_L.bind(null,c,f,y),f.then(c,c))}function xA(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function wA(c,f,y,_,b){return c.mode&1?(c.flags|=65536,c.lanes=b,c):(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Xs(-1,1),f.tag=2,La(y,f))),y.lanes|=1),c)}function As(c){c.flags|=4}function SA(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var yf,xf,_p,Ap;if(at)yf=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)Q(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},xf=function(){},_p=function(c,f,y,_,b){if(c=c.memoizedProps,c!==_){var P=f.stateNode,O=Ms(_r.current);y=xe(P,y,c,_,b,O),(f.updateQueue=y)&&As(f)}},Ap=function(c,f,y,_){y!==_&&As(f)};else if(Se){yf=function(c,f,y,_){for(var b=f.child;b!==null;){if(b.tag===5){var P=b.stateNode;y&&_&&(P=Et(P,b.type,b.memoizedProps,b)),Q(c,P)}else if(b.tag===6)P=b.stateNode,y&&_&&(P=fi(P,b.memoizedProps,b)),Q(c,P);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)P=b.child,P!==null&&(P.return=b),yf(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var MA=function(c,f,y,_){for(var b=f.child;b!==null;){if(b.tag===5){var P=b.stateNode;y&&_&&(P=Et(P,b.type,b.memoizedProps,b)),en(c,P)}else if(b.tag===6)P=b.stateNode,y&&_&&(P=fi(P,b.memoizedProps,b)),en(c,P);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)P=b.child,P!==null&&(P.return=b),MA(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};xf=function(c,f){var y=f.stateNode;if(!SA(c,f)){c=y.containerInfo;var _=ft(c);MA(_,f,!1,!1),y.pendingChildren=_,As(f),Mn(c,_)}},_p=function(c,f,y,_,b){var P=c.stateNode,O=c.memoizedProps;if((c=SA(c,f))&&O===_)f.stateNode=P;else{var Y=f.stateNode,he=Ms(_r.current),Pe=null;O!==_&&(Pe=xe(Y,y,O,_,b,he)),c&&Pe===null?f.stateNode=P:(P=ze(P,Pe,y,O,_,f,c,Y),ge(P,y,_,b,he)&&As(f),f.stateNode=P,c?As(f):yf(P,f,!1,!1))}},Ap=function(c,f,y,_){y!==_?(c=Ms(ac.current),y=Ms(_r.current),f.stateNode=ce(_,c,y,f),As(f)):f.stateNode=c.stateNode}}else xf=function(){},_p=function(){},Ap=function(){};function wf(c,f){if(!fn)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function xi(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,_=0;if(f)for(var b=c.child;b!==null;)y|=b.lanes|b.childLanes,_|=b.subtreeFlags&14680064,_|=b.flags&14680064,b.return=c,b=b.sibling;else for(b=c.child;b!==null;)y|=b.lanes|b.childLanes,_|=b.subtreeFlags,_|=b.flags,b.return=c,b=b.sibling;return c.subtreeFlags|=_,c.childLanes=y,f}function uL(c,f,y){var _=f.pendingProps;switch(Dv(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(f),null;case 1:return Wi(f.type)&&$h(),xi(f),null;case 3:return _=f.stateNode,oc(),yt(ni),yt(Xt),Uv(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(c===null||c.child===null)&&(uf(f)?As(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Kr!==null&&(hy(Kr),Kr=null))),xf(c,f),xi(f),null;case 5:Fv(f),y=Ms(ac.current);var b=f.type;if(c!==null&&f.stateNode!=null)_p(c,f,b,_,y),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!_){if(f.stateNode===null)throw Error(a(166));return xi(f),null}if(c=Ms(_r.current),uf(f)){if(!me)throw Error(a(175));c=tt(f.stateNode,f.type,f.memoizedProps,y,c,f,!cf),f.updateQueue=c,c!==null&&As(f)}else{var P=V(b,_,y,c,f);yf(P,f,!1,!1),f.stateNode=P,ge(P,b,_,y,c)&&As(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return xi(f),null;case 6:if(c&&f.stateNode!=null)Ap(c,f,c.memoizedProps,_);else{if(typeof _!="string"&&f.stateNode===null)throw Error(a(166));if(c=Ms(ac.current),y=Ms(_r.current),uf(f)){if(!me)throw Error(a(176));if(c=f.stateNode,_=f.memoizedProps,(y=ut(c,_,f,!cf))&&(b=tr,b!==null))switch(P=(b.mode&1)!==0,b.tag){case 3:jr(b.stateNode.containerInfo,c,_,P);break;case 5:Gs(b.type,b.memoizedProps,b.stateNode,c,_,P)}y&&As(f)}else f.stateNode=ce(_,c,y,f)}return xi(f),null;case 13:if(yt(mn),_=f.memoizedState,fn&&nr!==null&&f.mode&1&&!(f.flags&128)){for(c=nr;c;)c=re(c);return rc(),f.flags|=98560,f}if(_!==null&&_.dehydrated!==null){if(_=uf(f),c===null){if(!_)throw Error(a(318));if(!me)throw Error(a(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));xt(c,f)}else rc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return xi(f),null}return Kr!==null&&(hy(Kr),Kr=null),f.flags&128?(f.lanes=y,f):(_=_!==null,y=!1,c===null?uf(f):y=c.memoizedState!==null,_&&!y&&(f.child.flags|=8192,f.mode&1&&(c===null||mn.current&1?Jn===0&&(Jn=3):my())),f.updateQueue!==null&&(f.flags|=4),xi(f),null);case 4:return oc(),xf(c,f),c===null&&Xe(f.stateNode.containerInfo),xi(f),null;case 10:return bv(f.type._context),xi(f),null;case 17:return Wi(f.type)&&$h(),xi(f),null;case 19:if(yt(mn),b=f.memoizedState,b===null)return xi(f),null;if(_=(f.flags&128)!==0,P=b.rendering,P===null)if(_)wf(b,!1);else{if(Jn!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(P=mp(c),P!==null){for(f.flags|=128,wf(b,!1),c=P.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=y,_=f.child;_!==null;)y=_,b=c,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=b,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,b=P.dependencies,y.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),_=_.sibling;return Ft(mn,mn.current&1|2),f.child}c=c.sibling}b.tail!==null&&ii()>cy&&(f.flags|=128,_=!0,wf(b,!1),f.lanes=4194304)}else{if(!_)if(c=mp(P),c!==null){if(f.flags|=128,_=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),wf(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!fn)return xi(f),null}else 2*ii()-b.renderingStartTime>cy&&y!==1073741824&&(f.flags|=128,_=!0,wf(b,!1),f.lanes=4194304);b.isBackwards?(P.sibling=f.child,f.child=P):(c=b.last,c!==null?c.sibling=P:f.child=P,b.last=P)}return b.tail!==null?(f=b.tail,b.rendering=f,b.tail=f.sibling,b.renderingStartTime=ii(),f.sibling=null,c=mn.current,Ft(mn,_?c&1|2:c&1),f):(xi(f),null);case 22:case 23:return py(),_=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==_&&(f.flags|=8192),_&&f.mode&1?rr&1073741824&&(xi(f),at&&f.subtreeFlags&6&&(f.flags|=8192)):xi(f),null;case 24:return null;case 25:return null}throw Error(a(156,f.tag))}var fL=o.ReactCurrentOwner,ir=!1;function Ii(c,f,y,_){f.child=c===null?Y_(f,null,y,_):sc(f,c.child,y,_)}function _A(c,f,y,_,b){y=y.render;var P=f.ref;return tc(f,b),_=zv(c,f,y,_,P,b),y=Hv(),c!==null&&!ir?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~b,Zs(c,f,b)):(fn&&y&&Rv(f),f.flags|=1,Ii(c,f,_,b),f.child)}function AA(c,f,y,_,b){if(c===null){var P=y.type;return typeof P=="function"&&!gy(P)&&P.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=P,bA(c,f,P,_,b)):(c=jp(y.type,null,_,f,f.mode,b),c.ref=f.ref,c.return=f,f.child=c)}if(P=c.child,!(c.lanes&b)){var O=P.memoizedProps;if(y=y.compare,y=y!==null?y:ap,y(O,_)&&c.ref===f.ref)return Zs(c,f,b)}return f.flags|=1,c=Oa(P,_),c.ref=f.ref,c.return=f,f.child=c}function bA(c,f,y,_,b){if(c!==null&&ap(c.memoizedProps,_)&&c.ref===f.ref)if(ir=!1,(c.lanes&b)!==0)c.flags&131072&&(ir=!0);else return f.lanes=c.lanes,Zs(c,f,b);return Xv(c,f,y,_,b)}function CA(c,f,y){var _=f.pendingProps,b=_.children,P=c!==null?c.memoizedState:null;if(_.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Ft(cc,rr),rr|=y;else if(y&1073741824)f.memoizedState={baseLanes:0,cachePool:null},_=P!==null?P.baseLanes:y,Ft(cc,rr),rr|=_;else return c=P!==null?P.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,Ft(cc,rr),rr|=c,null;else P!==null?(_=P.baseLanes|y,f.memoizedState=null):_=y,Ft(cc,rr),rr|=_;return Ii(c,f,b,y),f.child}function EA(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function Xv(c,f,y,_,b){var P=Wi(y)?Ws:Xt.current;return P=js(f,P),tc(f,b),y=zv(c,f,y,_,P,b),_=Hv(),c!==null&&!ir?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~b,Zs(c,f,b)):(fn&&_&&Rv(f),f.flags|=1,Ii(c,f,y,b),f.child)}function TA(c,f,y,_,b){if(Wi(y)){var P=!0;ep(f)}else P=!1;if(tc(f,b),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),G_(f,y,_),Pv(f,y,_,b),_=!0;else if(c===null){var O=f.stateNode,Y=f.memoizedProps;O.props=Y;var he=O.context,Pe=y.contextType;typeof Pe=="object"&&Pe!==null?Pe=wr(Pe):(Pe=Wi(y)?Ws:Xt.current,Pe=js(f,Pe));var Qe=y.getDerivedStateFromProps,gt=typeof Qe=="function"||typeof O.getSnapshotBeforeUpdate=="function";gt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==_||he!==Pe)&&V_(f,O,_,Pe),Ia=!1;var lt=f.memoizedState;O.state=lt,up(f,_,O,b),he=f.memoizedState,Y!==_||lt!==he||ni.current||Ia?(typeof Qe=="function"&&(Tv(f,y,Qe,_),he=f.memoizedState),(Y=Ia||H_(f,y,Y,_,lt,he,Pe))?(gt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=he),O.props=_,O.state=he,O.context=Pe,_=Y):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{O=f.stateNode,k_(c,f),Y=f.memoizedProps,Pe=f.type===f.elementType?Y:Xr(f.type,Y),O.props=Pe,gt=f.pendingProps,lt=O.context,he=y.contextType,typeof he=="object"&&he!==null?he=wr(he):(he=Wi(y)?Ws:Xt.current,he=js(f,he));var tn=y.getDerivedStateFromProps;(Qe=typeof tn=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==gt||lt!==he)&&V_(f,O,_,he),Ia=!1,lt=f.memoizedState,O.state=lt,up(f,_,O,b);var et=f.memoizedState;Y!==gt||lt!==et||ni.current||Ia?(typeof tn=="function"&&(Tv(f,y,tn,_),et=f.memoizedState),(Pe=Ia||H_(f,y,Pe,_,lt,et,he)||!1)?(Qe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(_,et,he),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(_,et,he)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===c.memoizedProps&&lt===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&lt===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=et),O.props=_,O.state=et,O.context=he,_=Pe):(typeof O.componentDidUpdate!="function"||Y===c.memoizedProps&&lt===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&lt===c.memoizedState||(f.flags|=1024),_=!1)}return Kv(c,f,y,_,P,b)}function Kv(c,f,y,_,b,P){EA(c,f);var O=(f.flags&128)!==0;if(!_&&!O)return b&&B_(f,y,!1),Zs(c,f,P);_=f.stateNode,fL.current=f;var Y=O&&typeof y.getDerivedStateFromError!="function"?null:_.render();return f.flags|=1,c!==null&&O?(f.child=sc(f,c.child,null,P),f.child=sc(f,null,Y,P)):Ii(c,f,Y,P),f.memoizedState=_.state,b&&B_(f,y,!0),f.child}function PA(c){var f=c.stateNode;f.pendingContext?R_(c,f.pendingContext,f.pendingContext!==f.context):f.context&&R_(c,f.context,!1),Nv(c,f.containerInfo)}function RA(c,f,y,_,b){return rc(),Lv(b),f.flags|=256,Ii(c,f,y,_),f.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function Cp(c){return{baseLanes:c,cachePool:null}}function DA(c,f,y){var _=f.pendingProps,b=mn.current,P=!1,O=(f.flags&128)!==0,Y;if((Y=O)||(Y=c!==null&&c.memoizedState===null?!1:(b&2)!==0),Y?(P=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(b|=1),Ft(mn,b&1),c===null)return Iv(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?Zt(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(b=_.children,c=_.fallback,P?(_=f.mode,P=f.child,b={mode:"hidden",children:b},!(_&1)&&P!==null?(P.childLanes=0,P.pendingProps=b):P=Jp(b,_,0,null),c=Qo(c,_,y,null),P.return=f,c.return=f,P.sibling=c,f.child=P,f.child.memoizedState=Cp(y),f.memoizedState=bp,c):Qv(f,b));if(b=c.memoizedState,b!==null){if(Y=b.dehydrated,Y!==null){if(O)return f.flags&256?(f.flags&=-257,Ep(c,f,y,Error(a(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(P=_.fallback,b=f.mode,_=Jp({mode:"visible",children:_.children},b,0,null),P=Qo(P,b,y,null),P.flags|=2,_.return=f,P.return=f,_.sibling=P,f.child=_,f.mode&1&&sc(f,c.child,null,y),f.child.memoizedState=Cp(y),f.memoizedState=bp,P);if(!(f.mode&1))f=Ep(c,f,y,null);else if(Zt(Y))f=Ep(c,f,y,Error(a(419)));else if(_=(y&c.childLanes)!==0,ir||_){if(_=kn,_!==null){switch(y&-y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}_=P&(_.suspendedLanes|y)?0:P,_!==0&&_!==b.retryLane&&(b.retryLane=_,br(c,_,-1))}my(),f=Ep(c,f,y,Error(a(421)))}else Hs(Y)?(f.flags|=128,f.child=c.child,f=AL.bind(null,c),U(Y,f),f=null):(y=b.treeContext,me&&(nr=we(Y),tr=f,fn=!0,Kr=null,cf=!1,y!==null&&(Sr[Mr++]=Ks,Sr[Mr++]=Qs,Sr[Mr++]=Ho,Ks=y.id,Qs=y.overflow,Ho=f)),f=Qv(f,f.pendingProps.children),f.flags|=4096);return f}return P?(_=IA(c,f,_.children,_.fallback,y),P=f.child,b=c.child.memoizedState,P.memoizedState=b===null?Cp(y):{baseLanes:b.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,f.memoizedState=bp,_):(y=BA(c,f,_.children,y),f.memoizedState=null,y)}return P?(_=IA(c,f,_.children,_.fallback,y),P=f.child,b=c.child.memoizedState,P.memoizedState=b===null?Cp(y):{baseLanes:b.baseLanes|y,cachePool:null},P.childLanes=c.childLanes&~y,f.memoizedState=bp,_):(y=BA(c,f,_.children,y),f.memoizedState=null,y)}function Qv(c,f){return f=Jp({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function BA(c,f,y,_){var b=c.child;return c=b.sibling,y=Oa(b,{mode:"visible",children:y}),!(f.mode&1)&&(y.lanes=_),y.return=f,y.sibling=null,c!==null&&(_=f.deletions,_===null?(f.deletions=[c],f.flags|=16):_.push(c)),f.child=y}function IA(c,f,y,_,b){var P=f.mode;c=c.child;var O=c.sibling,Y={mode:"hidden",children:y};return!(P&1)&&f.child!==c?(y=f.child,y.childLanes=0,y.pendingProps=Y,f.deletions=null):(y=Oa(c,Y),y.subtreeFlags=c.subtreeFlags&14680064),O!==null?_=Oa(O,_):(_=Qo(_,P,b,null),_.flags|=2),_.return=f,y.return=f,y.sibling=_,f.child=y,_}function Ep(c,f,y,_){return _!==null&&Lv(_),sc(f,c.child,null,y),c=Qv(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function LA(c,f,y){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),Cv(c.return,f,y)}function Yv(c,f,y,_,b){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:y,tailMode:b}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=y,P.tailMode=b)}function NA(c,f,y){var _=f.pendingProps,b=_.revealOrder,P=_.tail;if(Ii(c,f,_.children,y),_=mn.current,_&2)_=_&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&LA(c,y,f);else if(c.tag===19)LA(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}if(Ft(mn,_),!(f.mode&1))f.memoizedState=null;else switch(b){case"forwards":for(y=f.child,b=null;y!==null;)c=y.alternate,c!==null&&mp(c)===null&&(b=y),y=y.sibling;y=b,y===null?(b=f.child,f.child=null):(b=y.sibling,y.sibling=null),Yv(f,!1,b,y,P);break;case"backwards":for(y=null,b=f.child,f.child=null;b!==null;){if(c=b.alternate,c!==null&&mp(c)===null){f.child=b;break}c=b.sibling,b.sibling=y,y=b,b=c}Yv(f,!0,y,null,P);break;case"together":Yv(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Zs(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),uc|=f.lanes,!(y&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(a(153));if(f.child!==null){for(c=f.child,y=Oa(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Oa(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function dL(c,f,y){switch(f.tag){case 3:PA(f),rc();break;case 5:Z_(f);break;case 1:Wi(f.type)&&ep(f);break;case 4:Nv(f,f.stateNode.containerInfo);break;case 10:F_(f,f.type._context,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Ft(mn,mn.current&1),f.flags|=128,null):y&f.child.childLanes?DA(c,f,y):(Ft(mn,mn.current&1),c=Zs(c,f,y),c!==null?c.sibling:null);Ft(mn,mn.current&1);break;case 19:if(_=(y&f.childLanes)!==0,c.flags&128){if(_)return NA(c,f,y);f.flags|=128}var b=f.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ft(mn,mn.current),_)break;return null;case 22:case 23:return f.lanes=0,CA(c,f,y)}return Zs(c,f,y)}function hL(c,f){switch(Dv(f),f.tag){case 1:return Wi(f.type)&&$h(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return oc(),yt(ni),yt(Xt),Uv(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Fv(f),null;case 13:if(yt(mn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(a(340));rc()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return yt(mn),null;case 4:return oc(),null;case 10:return bv(f.type._context),null;case 22:case 23:return py(),null;case 24:return null;default:return null}}var Tp=!1,Wo=!1,pL=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Pp(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(_){Xi(c,f,_)}else y.current=null}function Zv(c,f,y){try{y()}catch(_){Xi(c,f,_)}}var FA=!1;function mL(c,f){for(J(c.containerInfo),Ge=f;Ge!==null;)if(c=Ge,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Ge=f;else for(;Ge!==null;){c=Ge;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,b=y.memoizedState,P=c.stateNode,O=P.getSnapshotBeforeUpdate(c.elementType===c.type?_:Xr(c.type,_),b);P.__reactInternalSnapshotBeforeUpdate=O}break;case 3:at&&Re(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Y){Xi(c,c.return,Y)}if(f=c.sibling,f!==null){f.return=c.return,Ge=f;break}Ge=c.return}return y=FA,FA=!1,y}function jo(c,f,y){var _=f.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var b=_=_.next;do{if((b.tag&c)===c){var P=b.destroy;b.destroy=void 0,P!==void 0&&Zv(f,y,P)}b=b.next}while(b!==_)}}function Sf(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var _=y.create;y.destroy=_()}y=y.next}while(y!==f)}}function qv(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=ue(y);break;default:c=y}typeof f=="function"?f(c):f.current=c}}function kA(c,f,y){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(rp,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var _=c=c.next;do{var b=_,P=b.destroy;b=b.tag,P!==void 0&&(b&2||b&4)&&Zv(f,y,P),_=_.next}while(_!==c)}break;case 1:if(Pp(f,y),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(O){Xi(f,y,O)}break;case 5:Pp(f,y);break;case 4:at?VA(c,f,y):Se&&Se&&(f=f.stateNode.containerInfo,y=ft(f),Di(f,y))}}function UA(c,f,y){for(var _=f;;)if(kA(c,_,y),_.child===null||at&&_.tag===4){if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function OA(c){var f=c.alternate;f!==null&&(c.alternate=null,OA(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&ot(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function zA(c){return c.tag===5||c.tag===3||c.tag===4}function HA(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||zA(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function GA(c){if(at){e:{for(var f=c.return;f!==null;){if(zA(f))break e;f=f.return}throw Error(a(160))}var y=f;switch(y.tag){case 5:f=y.stateNode,y.flags&32&&(Ue(f),y.flags&=-33),y=HA(c),ey(c,y,f);break;case 3:case 4:f=y.stateNode.containerInfo,y=HA(c),$v(c,y,f);break;default:throw Error(a(161))}}}function $v(c,f,y){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?Me(y,c,f):Ve(y,c);else if(_!==4&&(c=c.child,c!==null))for($v(c,f,y),c=c.sibling;c!==null;)$v(c,f,y),c=c.sibling}function ey(c,f,y){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?ye(y,c,f):ct(y,c);else if(_!==4&&(c=c.child,c!==null))for(ey(c,f,y),c=c.sibling;c!==null;)ey(c,f,y),c=c.sibling}function VA(c,f,y){for(var _=f,b=!1,P,O;;){if(!b){b=_.return;e:for(;;){if(b===null)throw Error(a(160));switch(P=b.stateNode,b.tag){case 5:O=!1;break e;case 3:P=P.containerInfo,O=!0;break e;case 4:P=P.containerInfo,O=!0;break e}b=b.return}b=!0}if(_.tag===5||_.tag===6)UA(c,_,y),O?ke(P,_.stateNode):Ae(P,_.stateNode);else if(_.tag===18)O?_n(P,_.stateNode):Pt(P,_.stateNode);else if(_.tag===4){if(_.child!==null){P=_.stateNode.containerInfo,O=!0,_.child.return=_,_=_.child;continue}}else if(kA(c,_,y),_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return,_.tag===4&&(b=!1)}_.sibling.return=_.return,_=_.sibling}}function ty(c,f){if(at){switch(f.tag){case 0:case 11:case 14:case 15:jo(3,f,f.return),Sf(3,f),jo(5,f,f.return);return;case 1:return;case 5:var y=f.stateNode;if(y!=null){var _=f.memoizedProps;c=c!==null?c.memoizedProps:_;var b=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&le(y,P,b,c,_,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));y=f.memoizedProps,G(f.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:me&&c!==null&&c.memoizedState.isDehydrated&&It(f.stateNode.containerInfo);return;case 12:return;case 13:Rp(f);return;case 19:Rp(f);return;case 17:return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:jo(3,f,f.return),Sf(3,f),jo(5,f,f.return);return;case 12:return;case 13:Rp(f);return;case 19:Rp(f);return;case 3:me&&c!==null&&c.memoizedState.isDehydrated&&It(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Se){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Di(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function Rp(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new pL),f.forEach(function(_){var b=bL.bind(null,c,_);y.has(_)||(y.add(_),_.then(b,b))})}}function gL(c,f){for(Ge=f;Ge!==null;){f=Ge;var y=f.deletions;if(y!==null)for(var _=0;_<y.length;_++){var b=y[_];try{var P=c;at?VA(P,b,f):UA(P,b,f);var O=b.alternate;O!==null&&(O.return=null),b.return=null}catch($e){Xi(b,f,$e)}}if(y=f.child,f.subtreeFlags&12854&&y!==null)y.return=f,Ge=y;else for(;Ge!==null;){f=Ge;try{var Y=f.flags;if(Y&32&&at&&Ue(f.stateNode),Y&512){var he=f.alternate;if(he!==null){var Pe=he.ref;Pe!==null&&(typeof Pe=="function"?Pe(null):Pe.current=null)}}if(Y&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Qe=f.alternate;(Qe===null||Qe.memoizedState===null)&&(ly=ii())}break;case 22:var gt=f.memoizedState!==null,lt=f.alternate,tn=lt!==null&&lt.memoizedState!==null;if(y=f,at){e:if(_=y,b=gt,P=null,at)for(var et=_;;){if(et.tag===5){if(P===null){P=et;var wi=et.stateNode;b?Oe(wi):ae(et.stateNode,et.memoizedProps)}}else if(et.tag===6){if(P===null){var Er=et.stateNode;b?X(Er):_e(Er,et.memoizedProps)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===_)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)break e;P===et&&(P=null),et=et.return}P===et&&(P=null),et.sibling.return=et.return,et=et.sibling}}if(gt&&!tn&&y.mode&1){Ge=y;for(var oe=y.child;oe!==null;){for(y=Ge=oe;Ge!==null;){_=Ge;var q=_.child;switch(_.tag){case 0:case 11:case 14:case 15:jo(4,_,_.return);break;case 1:Pp(_,_.return);var de=_.stateNode;if(typeof de.componentWillUnmount=="function"){var We=_.return;try{de.props=_.memoizedProps,de.state=_.memoizedState,de.componentWillUnmount()}catch($e){Xi(_,We,$e)}}break;case 5:Pp(_,_.return);break;case 22:if(_.memoizedState!==null){JA(y);continue}}q!==null?(q.return=_,Ge=q):JA(y)}oe=oe.sibling}}}switch(Y&4102){case 2:GA(f),f.flags&=-3;break;case 6:GA(f),f.flags&=-3,ty(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,ty(f.alternate,f);break;case 4:ty(f.alternate,f)}}catch($e){Xi(f,f.return,$e)}if(y=f.sibling,y!==null){y.return=f.return,Ge=y;break}Ge=f.return}}}function vL(c,f,y){Ge=c,WA(c)}function WA(c,f,y){for(var _=(c.mode&1)!==0;Ge!==null;){var b=Ge,P=b.child;if(b.tag===22&&_){var O=b.memoizedState!==null||Tp;if(!O){var Y=b.alternate,he=Y!==null&&Y.memoizedState!==null||Wo;Y=Tp;var Pe=Wo;if(Tp=O,(Wo=he)&&!Pe)for(Ge=b;Ge!==null;)O=Ge,he=O.child,O.tag===22&&O.memoizedState!==null?XA(b):he!==null?(he.return=O,Ge=he):XA(b);for(;P!==null;)Ge=P,WA(P),P=P.sibling;Ge=b,Tp=Y,Wo=Pe}jA(c)}else b.subtreeFlags&8772&&P!==null?(P.return=b,Ge=P):jA(c)}}function jA(c){for(;Ge!==null;){var f=Ge;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Wo||Sf(5,f);break;case 1:var _=f.stateNode;if(f.flags&4&&!Wo)if(y===null)_.componentDidMount();else{var b=f.elementType===f.type?y.memoizedProps:Xr(f.type,y.memoizedProps);_.componentDidUpdate(b,y.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=f.updateQueue;P!==null&&O_(f,P,_);break;case 3:var O=f.updateQueue;if(O!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=ue(f.child.stateNode);break;case 1:y=f.child.stateNode}O_(f,O,y)}break;case 5:var Y=f.stateNode;y===null&&f.flags&4&&$(Y,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(me&&f.memoizedState===null){var he=f.alternate;if(he!==null){var Pe=he.memoizedState;if(Pe!==null){var Qe=Pe.dehydrated;Qe!==null&&Tt(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Wo||f.flags&512&&qv(f)}catch(gt){Xi(f,f.return,gt)}}if(f===c){Ge=null;break}if(y=f.sibling,y!==null){y.return=f.return,Ge=y;break}Ge=f.return}}function JA(c){for(;Ge!==null;){var f=Ge;if(f===c){Ge=null;break}var y=f.sibling;if(y!==null){y.return=f.return,Ge=y;break}Ge=f.return}}function XA(c){for(;Ge!==null;){var f=Ge;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{Sf(4,f)}catch(he){Xi(f,y,he)}break;case 1:var _=f.stateNode;if(typeof _.componentDidMount=="function"){var b=f.return;try{_.componentDidMount()}catch(he){Xi(f,b,he)}}var P=f.return;try{qv(f)}catch(he){Xi(f,P,he)}break;case 5:var O=f.return;try{qv(f)}catch(he){Xi(f,O,he)}}}catch(he){Xi(f,f.return,he)}if(f===c){Ge=null;break}var Y=f.sibling;if(Y!==null){Y.return=f.return,Ge=Y;break}Ge=f.return}}var Dp=0,Bp=1,Ip=2,Lp=3,Np=4;if(typeof Symbol=="function"&&Symbol.for){var Mf=Symbol.for;Dp=Mf("selector.component"),Bp=Mf("selector.has_pseudo_class"),Ip=Mf("selector.role"),Lp=Mf("selector.test_id"),Np=Mf("selector.text")}function ny(c){var f=Be(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(c=Ot(c),c===null)throw Error(a(362));return c.stateNode.current}function iy(c,f){switch(f.$$typeof){case Dp:if(c.type===f.value)return!0;break;case Bp:e:{f=f.value,c=[c,0];for(var y=0;y<c.length;){var _=c[y++],b=c[y++],P=f[b];if(_.tag!==5||!fe(_)){for(;P!=null&&iy(_,P);)b++,P=f[b];if(b===f.length){f=!0;break e}else for(_=_.child;_!==null;)c.push(_,b),_=_.sibling}}f=!1}return f;case Ip:if(c.tag===5&&Ce(c.stateNode,f.value))return!0;break;case Np:if((c.tag===5||c.tag===6)&&(c=F(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Lp:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ry(c){switch(c.$$typeof){case Dp:return"<"+(D(c.value)||"Unknown")+">";case Bp:return":has("+(ry(c)||"")+")";case Ip:return'[role="'+c.value+'"]';case Np:return'"'+c.value+'"';case Lp:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function KA(c,f){var y=[];c=[c,0];for(var _=0;_<c.length;){var b=c[_++],P=c[_++],O=f[P];if(b.tag!==5||!fe(b)){for(;O!=null&&iy(b,O);)P++,O=f[P];if(P===f.length)y.push(b);else for(b=b.child;b!==null;)c.push(b,P),b=b.sibling}}return y}function sy(c,f){if(!Nt)throw Error(a(363));c=ny(c),c=KA(c,f),f=[],c=Array.from(c);for(var y=0;y<c.length;){var _=c[y++];if(_.tag===5)fe(_)||f.push(_.stateNode);else for(_=_.child;_!==null;)c.push(_),_=_.sibling}return f}var yL=Math.ceil,Fp=o.ReactCurrentDispatcher,ay=o.ReactCurrentOwner,Dn=o.ReactCurrentBatchConfig,At=0,kn=null,Un=null,di=0,rr=0,cc=yr(0),Jn=0,_f=null,uc=0,kp=0,oy=0,Af=null,ji=null,ly=0,cy=1/0;function fc(){cy=ii()+500}var Up=!1,uy=null,Na=null,Op=!1,Fa=null,zp=0,bf=0,fy=null,Hp=-1,Gp=0;function Li(){return At&6?ii():Hp!==-1?Hp:Hp=ii()}function ka(c){return c.mode&1?At&2&&di!==0?di&-di:eL.transition!==null?(Gp===0&&(c=tp,tp<<=1,!(tp&4194240)&&(tp=64),Gp=c),Gp):(c=Ht,c!==0?c:Le()):1}function br(c,f,y){if(50<bf)throw bf=0,fy=null,Error(a(185));var _=Vp(c,f);return _===null?null:(lf(_,f,y),(!(At&2)||_!==kn)&&(_===kn&&(!(At&2)&&(kp|=f),Jn===4&&Ua(_,di)),Ji(_,y),f===1&&At===0&&!(c.mode&1)&&(fc(),sp&&ws())),_)}function Vp(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}function Ji(c,f){var y=c.callbackNode;jI(c,f);var _=ip(c,c===kn?di:0);if(_===0)y!==null&&L_(y),c.callbackNode=null,c.callbackPriority=0;else if(f=_&-_,c.callbackPriority!==f){if(y!=null&&L_(y),f===1)c.tag===0?$I(YA.bind(null,c)):N_(YA.bind(null,c)),it?nt(function(){At===0&&ws()}):xv(wv,ws),y=null;else{switch(I_(_)){case 1:y=wv;break;case 4:y=QI;break;case 16:y=Sv;break;case 536870912:y=YI;break;default:y=Sv}y=s2(y,QA.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function QA(c,f){if(Hp=-1,Gp=0,At&6)throw Error(a(327));var y=c.callbackNode;if(Ko()&&c.callbackNode!==y)return null;var _=ip(c,c===kn?di:0);if(_===0)return null;if(_&30||_&c.expiredLanes||f)f=Wp(c,_);else{f=_;var b=At;At|=2;var P=$A();(kn!==c||di!==f)&&(fc(),Jo(c,f));do try{SL();break}catch(Y){qA(c,Y)}while(1);Av(),Fp.current=P,At=b,Un!==null?f=0:(kn=null,di=0,f=Jn)}if(f!==0){if(f===2&&(b=gv(c),b!==0&&(_=b,f=dy(c,b))),f===1)throw y=_f,Jo(c,0),Ua(c,_),Ji(c,ii()),y;if(f===6)Ua(c,_);else{if(b=c.current.alternate,!(_&30)&&!xL(b)&&(f=Wp(c,_),f===2&&(P=gv(c),P!==0&&(_=P,f=dy(c,P))),f===1))throw y=_f,Jo(c,0),Ua(c,_),Ji(c,ii()),y;switch(c.finishedWork=b,c.finishedLanes=_,f){case 0:case 1:throw Error(a(345));case 2:Xo(c,ji);break;case 3:if(Ua(c,_),(_&130023424)===_&&(f=ly+500-ii(),10<f)){if(ip(c,0)!==0)break;if(b=c.suspendedLanes,(b&_)!==_){Li(),c.pingedLanes|=c.suspendedLanes&b;break}c.timeoutHandle=Ye(Xo.bind(null,c,ji),f);break}Xo(c,ji);break;case 4:if(Ua(c,_),(_&4194240)===_)break;for(f=c.eventTimes,b=-1;0<_;){var O=31-Jr(_);P=1<<O,O=f[O],O>b&&(b=O),_&=~P}if(_=b,_=ii()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*yL(_/1960))-_,10<_){c.timeoutHandle=Ye(Xo.bind(null,c,ji),_);break}Xo(c,ji);break;case 5:Xo(c,ji);break;default:throw Error(a(329))}}}return Ji(c,ii()),c.callbackNode===y?QA.bind(null,c):null}function dy(c,f){var y=Af;return c.current.memoizedState.isDehydrated&&(Jo(c,f).flags|=256),c=Wp(c,f),c!==2&&(f=ji,ji=y,f!==null&&hy(f)),c}function hy(c){ji===null?ji=c:ji.push.apply(ji,c)}function xL(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var _=0;_<y.length;_++){var b=y[_],P=b.getSnapshot;b=b.value;try{if(!xs(P(),b))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ua(c,f){for(f&=~oy,f&=~kp,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-Jr(f),_=1<<y;c[y]=-1,f&=~_}}function YA(c){if(At&6)throw Error(a(327));Ko();var f=ip(c,0);if(!(f&1))return Ji(c,ii()),null;var y=Wp(c,f);if(c.tag!==0&&y===2){var _=gv(c);_!==0&&(f=_,y=dy(c,_))}if(y===1)throw y=_f,Jo(c,0),Ua(c,f),Ji(c,ii()),y;if(y===6)throw Error(a(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Xo(c,ji),Ji(c,ii()),null}function ZA(c){Fa!==null&&Fa.tag===0&&!(At&6)&&Ko();var f=At;At|=1;var y=Dn.transition,_=Ht;try{if(Dn.transition=null,Ht=1,c)return c()}finally{Ht=_,Dn.transition=y,At=f,!(At&6)&&ws()}}function py(){rr=cc.current,yt(cc)}function Jo(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==st&&(c.timeoutHandle=st,Je(y)),Un!==null)for(y=Un.return;y!==null;){var _=y;switch(Dv(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$h();break;case 3:oc(),yt(ni),yt(Xt),Uv();break;case 5:Fv(_);break;case 4:oc();break;case 13:yt(mn);break;case 19:yt(mn);break;case 10:bv(_.type._context);break;case 22:case 23:py()}y=y.return}if(kn=c,Un=c=Oa(c.current,null),di=rr=f,Jn=0,_f=null,oy=kp=uc=0,ji=Af=null,Ss!==null){for(f=0;f<Ss.length;f++)if(y=Ss[f],_=y.interleaved,_!==null){y.interleaved=null;var b=_.next,P=y.pending;if(P!==null){var O=P.next;P.next=b,_.next=O}y.pending=_}Ss=null}return c}function qA(c,f){do{var y=Un;try{if(Av(),gp.current=Mp,vp){for(var _=bn.memoizedState;_!==null;){var b=_.queue;b!==null&&(b.pending=null),_=_.next}vp=!1}if(lc=0,ri=vi=bn=null,pf=!1,mf=0,ay.current=null,y===null||y.return===null){Jn=1,_f=f,Un=null;break}e:{var P=c,O=y.return,Y=y,he=f;if(f=di,Y.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Pe=he,Qe=Y,gt=Qe.tag;if(!(Qe.mode&1)&&(gt===0||gt===11||gt===15)){var lt=Qe.alternate;lt?(Qe.updateQueue=lt.updateQueue,Qe.memoizedState=lt.memoizedState,Qe.lanes=lt.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var tn=xA(O);if(tn!==null){tn.flags&=-257,wA(tn,O,Y,P,f),tn.mode&1&&yA(P,Pe,f),f=tn,he=Pe;var et=f.updateQueue;if(et===null){var wi=new Set;wi.add(he),f.updateQueue=wi}else et.add(he);break e}else{if(!(f&1)){yA(P,Pe,f),my();break e}he=Error(a(426))}}else if(fn&&Y.mode&1){var Er=xA(O);if(Er!==null){!(Er.flags&65536)&&(Er.flags|=256),wA(Er,O,Y,P,f),Lv(he);break e}}P=he,Jn!==4&&(Jn=2),Af===null?Af=[P]:Af.push(P),he=jv(he,Y),Y=O;do{switch(Y.tag){case 3:Y.flags|=65536,f&=-f,Y.lanes|=f;var oe=gA(Y,he,f);U_(Y,oe);break e;case 1:P=he;var q=Y.type,de=Y.stateNode;if(!(Y.flags&128)&&(typeof q.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(Na===null||!Na.has(de)))){Y.flags|=65536,f&=-f,Y.lanes|=f;var We=vA(Y,P,f);U_(Y,We);break e}}Y=Y.return}while(Y!==null)}t2(y)}catch($e){f=$e,Un===y&&y!==null&&(Un=y=y.return);continue}break}while(1)}function $A(){var c=Fp.current;return Fp.current=Mp,c===null?Mp:c}function my(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),kn===null||!(uc&268435455)&&!(kp&268435455)||Ua(kn,di)}function Wp(c,f){var y=At;At|=2;var _=$A();kn===c&&di===f||Jo(c,f);do try{wL();break}catch(b){qA(c,b)}while(1);if(Av(),At=y,Fp.current=_,Un!==null)throw Error(a(261));return kn=null,di=0,Jn}function wL(){for(;Un!==null;)e2(Un)}function SL(){for(;Un!==null&&!XI();)e2(Un)}function e2(c){var f=r2(c.alternate,c,rr);c.memoizedProps=c.pendingProps,f===null?t2(c):Un=f,ay.current=null}function t2(c){var f=c;do{var y=f.alternate;if(c=f.return,f.flags&32768){if(y=hL(y,f),y!==null){y.flags&=32767,Un=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Jn=6,Un=null;return}}else if(y=uL(y,f,rr),y!==null){Un=y;return}if(f=f.sibling,f!==null){Un=f;return}Un=f=c}while(f!==null);Jn===0&&(Jn=5)}function Xo(c,f){var y=Ht,_=Dn.transition;try{Dn.transition=null,Ht=1,ML(c,f,y)}finally{Dn.transition=_,Ht=y}return null}function ML(c,f,y){do Ko();while(Fa!==null);if(At&6)throw Error(a(327));var _=c.finishedWork,b=c.finishedLanes;if(_===null)return null;if(c.finishedWork=null,c.finishedLanes=0,_===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0;var P=_.lanes|_.childLanes;if(JI(c,P),c===kn&&(Un=kn=null,di=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||Op||(Op=!0,s2(Sv,function(){return Ko(),null})),P=(_.flags&15990)!==0,_.subtreeFlags&15990||P){P=Dn.transition,Dn.transition=null;var O=Ht;Ht=1;var Y=At;At|=4,ay.current=null,mL(c,_),gL(c,_),j(c.containerInfo),c.current=_,vL(_),KI(),At=Y,Ht=O,Dn.transition=P}else c.current=_;if(Op&&(Op=!1,Fa=c,zp=b),P=c.pendingLanes,P===0&&(Na=null),ZI(_.stateNode),Ji(c,ii()),f!==null)for(y=c.onRecoverableError,_=0;_<f.length;_++)y(f[_]);if(Up)throw Up=!1,c=uy,uy=null,c;return zp&1&&c.tag!==0&&Ko(),P=c.pendingLanes,P&1?c===fy?bf++:(bf=0,fy=c):bf=0,ws(),null}function Ko(){if(Fa!==null){var c=I_(zp),f=Dn.transition,y=Ht;try{if(Dn.transition=null,Ht=16>c?16:c,Fa===null)var _=!1;else{if(c=Fa,Fa=null,zp=0,At&6)throw Error(a(331));var b=At;for(At|=4,Ge=c.current;Ge!==null;){var P=Ge,O=P.child;if(Ge.flags&16){var Y=P.deletions;if(Y!==null){for(var he=0;he<Y.length;he++){var Pe=Y[he];for(Ge=Pe;Ge!==null;){var Qe=Ge;switch(Qe.tag){case 0:case 11:case 15:jo(8,Qe,P)}var gt=Qe.child;if(gt!==null)gt.return=Qe,Ge=gt;else for(;Ge!==null;){Qe=Ge;var lt=Qe.sibling,tn=Qe.return;if(OA(Qe),Qe===Pe){Ge=null;break}if(lt!==null){lt.return=tn,Ge=lt;break}Ge=tn}}}var et=P.alternate;if(et!==null){var wi=et.child;if(wi!==null){et.child=null;do{var Er=wi.sibling;wi.sibling=null,wi=Er}while(wi!==null)}}Ge=P}}if(P.subtreeFlags&2064&&O!==null)O.return=P,Ge=O;else e:for(;Ge!==null;){if(P=Ge,P.flags&2048)switch(P.tag){case 0:case 11:case 15:jo(9,P,P.return)}var oe=P.sibling;if(oe!==null){oe.return=P.return,Ge=oe;break e}Ge=P.return}}var q=c.current;for(Ge=q;Ge!==null;){O=Ge;var de=O.child;if(O.subtreeFlags&2064&&de!==null)de.return=O,Ge=de;else e:for(O=q;Ge!==null;){if(Y=Ge,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:Sf(9,Y)}}catch($e){Xi(Y,Y.return,$e)}if(Y===O){Ge=null;break e}var We=Y.sibling;if(We!==null){We.return=Y.return,Ge=We;break e}Ge=Y.return}}if(At=b,ws(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(rp,c)}catch{}_=!0}return _}finally{Ht=y,Dn.transition=f}}return!1}function n2(c,f,y){f=jv(y,f),f=gA(c,f,1),La(c,f),f=Li(),c=Vp(c,1),c!==null&&(lf(c,1,f),Ji(c,f))}function Xi(c,f,y){if(c.tag===3)n2(c,c,y);else for(;f!==null;){if(f.tag===3){n2(f,c,y);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Na===null||!Na.has(_))){c=jv(y,c),c=vA(f,c,1),La(f,c),c=Li(),f=Vp(f,1),f!==null&&(lf(f,1,c),Ji(f,c));break}}f=f.return}}function _L(c,f,y){var _=c.pingCache;_!==null&&_.delete(f),f=Li(),c.pingedLanes|=c.suspendedLanes&y,kn===c&&(di&y)===y&&(Jn===4||Jn===3&&(di&130023424)===di&&500>ii()-ly?Jo(c,0):oy|=y),Ji(c,f)}function i2(c,f){f===0&&(c.mode&1?(f=np,np<<=1,!(np&130023424)&&(np=4194304)):f=1);var y=Li();c=Vp(c,f),c!==null&&(lf(c,f,y),Ji(c,y))}function AL(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),i2(c,y)}function bL(c,f){var y=0;switch(c.tag){case 13:var _=c.stateNode,b=c.memoizedState;b!==null&&(y=b.retryLane);break;case 19:_=c.stateNode;break;default:throw Error(a(314))}_!==null&&_.delete(f),i2(c,y)}var r2;r2=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||ni.current)ir=!0;else{if(!(c.lanes&y)&&!(f.flags&128))return ir=!1,dL(c,f,y);ir=!!(c.flags&131072)}else ir=!1,fn&&f.flags&1048576&&W_(f,hp,f.index);switch(f.lanes=0,f.tag){case 2:var _=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var b=js(f,Xt.current);tc(f,y),b=zv(null,f,_,c,b,y);var P=Hv();return f.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Wi(_)?(P=!0,ep(f)):P=!1,f.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Ev(f),b.updater=fp,f.stateNode=b,b._reactInternals=f,Pv(f,_,c,y),f=Kv(null,f,_,!0,P,y)):(f.tag=0,fn&&P&&Rv(f),Ii(null,f,b,y),f=f.child),f;case 16:_=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,b=_._init,_=b(_._payload),f.type=_,b=f.tag=EL(_),c=Xr(_,c),b){case 0:f=Xv(null,f,_,c,y);break e;case 1:f=TA(null,f,_,c,y);break e;case 11:f=_A(null,f,_,c,y);break e;case 14:f=AA(null,f,_,Xr(_.type,c),y);break e}throw Error(a(306,_,""))}return f;case 0:return _=f.type,b=f.pendingProps,b=f.elementType===_?b:Xr(_,b),Xv(c,f,_,b,y);case 1:return _=f.type,b=f.pendingProps,b=f.elementType===_?b:Xr(_,b),TA(c,f,_,b,y);case 3:e:{if(PA(f),c===null)throw Error(a(387));_=f.pendingProps,P=f.memoizedState,b=P.element,k_(c,f),up(f,_,null,y);var O=f.memoizedState;if(_=O.element,me&&P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:O.cache,transitions:O.transitions},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){b=Error(a(423)),f=RA(c,f,_,y,b);break e}else if(_!==b){b=Error(a(424)),f=RA(c,f,_,y,b);break e}else for(me&&(nr=ee(f.stateNode.containerInfo),tr=f,fn=!0,Kr=null,cf=!1),y=Y_(f,null,_,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(rc(),_===b){f=Zs(c,f,y);break e}Ii(c,f,_,y)}f=f.child}return f;case 5:return Z_(f),c===null&&Iv(f),_=f.type,b=f.pendingProps,P=c!==null?c.memoizedProps:null,O=b.children,be(_,b)?O=null:P!==null&&be(_,P)&&(f.flags|=32),EA(c,f),Ii(c,f,O,y),f.child;case 6:return c===null&&Iv(f),null;case 13:return DA(c,f,y);case 4:return Nv(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=sc(f,null,_,y):Ii(c,f,_,y),f.child;case 11:return _=f.type,b=f.pendingProps,b=f.elementType===_?b:Xr(_,b),_A(c,f,_,b,y);case 7:return Ii(c,f,f.pendingProps,y),f.child;case 8:return Ii(c,f,f.pendingProps.children,y),f.child;case 12:return Ii(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(_=f.type._context,b=f.pendingProps,P=f.memoizedProps,O=b.value,F_(f,_,O),P!==null)if(xs(P.value,O)){if(P.children===b.children&&!ni.current){f=Zs(c,f,y);break e}}else for(P=f.child,P!==null&&(P.return=f);P!==null;){var Y=P.dependencies;if(Y!==null){O=P.child;for(var he=Y.firstContext;he!==null;){if(he.context===_){if(P.tag===1){he=Xs(-1,y&-y),he.tag=2;var Pe=P.updateQueue;if(Pe!==null){Pe=Pe.shared;var Qe=Pe.pending;Qe===null?he.next=he:(he.next=Qe.next,Qe.next=he),Pe.pending=he}}P.lanes|=y,he=P.alternate,he!==null&&(he.lanes|=y),Cv(P.return,y,f),Y.lanes|=y;break}he=he.next}}else if(P.tag===10)O=P.type===f.type?null:P.child;else if(P.tag===18){if(O=P.return,O===null)throw Error(a(341));O.lanes|=y,Y=O.alternate,Y!==null&&(Y.lanes|=y),Cv(O,y,f),O=P.sibling}else O=P.child;if(O!==null)O.return=P;else for(O=P;O!==null;){if(O===f){O=null;break}if(P=O.sibling,P!==null){P.return=O.return,O=P;break}O=O.return}P=O}Ii(c,f,b.children,y),f=f.child}return f;case 9:return b=f.type,_=f.pendingProps.children,tc(f,y),b=wr(b),_=_(b),f.flags|=1,Ii(c,f,_,y),f.child;case 14:return _=f.type,b=Xr(_,f.pendingProps),b=Xr(_.type,b),AA(c,f,_,b,y);case 15:return bA(c,f,f.type,f.pendingProps,y);case 17:return _=f.type,b=f.pendingProps,b=f.elementType===_?b:Xr(_,b),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Wi(_)?(c=!0,ep(f)):c=!1,tc(f,y),G_(f,_,b),Pv(f,_,b,y),Kv(null,f,_,!0,c,y);case 19:return NA(c,f,y);case 22:return CA(c,f,y)}throw Error(a(156,f.tag))};function s2(c,f){return xv(c,f)}function CL(c,f,y,_){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(c,f,y,_){return new CL(c,f,y,_)}function gy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function EL(c){if(typeof c=="function")return gy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===g)return 11;if(c===S)return 14}return 2}function Oa(c,f){var y=c.alternate;return y===null?(y=Cr(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function jp(c,f,y,_,b,P){var O=2;if(_=c,typeof c=="function")gy(c)&&(O=1);else if(typeof c=="string")O=5;else e:switch(c){case d:return Qo(y.children,b,P,f);case h:O=8,b|=8;break;case p:return c=Cr(12,y,f,b|2),c.elementType=p,c.lanes=P,c;case w:return c=Cr(13,y,f,b),c.elementType=w,c.lanes=P,c;case x:return c=Cr(19,y,f,b),c.elementType=x,c.lanes=P,c;case A:return Jp(y,b,P,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case v:O=10;break e;case m:O=9;break e;case g:O=11;break e;case S:O=14;break e;case M:O=16,_=null;break e}throw Error(a(130,c==null?c:typeof c,""))}return f=Cr(O,y,f,b),f.elementType=c,f.type=_,f.lanes=P,f}function Qo(c,f,y,_){return c=Cr(7,c,_,f),c.lanes=y,c}function Jp(c,f,y,_){return c=Cr(22,c,_,f),c.elementType=A,c.lanes=y,c.stateNode={},c}function vy(c,f,y){return c=Cr(6,c,null,f),c.lanes=y,c}function yy(c,f,y){return f=Cr(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function TL(c,f,y,_,b){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vv(0),this.expirationTimes=vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vv(0),this.identifierPrefix=_,this.onRecoverableError=b,me&&(this.mutableSourceEagerHydrationData=null)}function a2(c,f,y,_,b,P,O,Y,he){return c=new TL(c,f,y,Y,he),f===1?(f=1,P===!0&&(f|=8)):f=0,P=Cr(3,null,null,f),c.current=P,P.stateNode=c,P.memoizedState={element:_,isDehydrated:y,cache:null,transitions:null},Ev(P),c}function o2(c){if(!c)return xr;c=c._reactInternals;e:{if(B(c)!==c||c.tag!==1)throw Error(a(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Wi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(a(171))}if(c.tag===1){var y=c.type;if(Wi(y))return D_(c,y,f)}return f}function l2(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=Z(f),c===null?null:c.stateNode}function c2(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function xy(c,f){c2(c,f),(c=c.alternate)&&c2(c,f)}function PL(c){return c=Z(c),c===null?null:c.stateNode}function RL(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=Li();br(c,134217728,f),xy(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Li(),y=ka(c);br(c,y,f),xy(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=of(f.pendingLanes);y!==0&&(yv(f,y|1),Ji(f,ii()),!(At&6)&&(fc(),ws()))}break;case 13:var _=Li();ZA(function(){return br(c,1,_)}),xy(c,1)}},t.batchedUpdates=function(c,f){var y=At;At|=1;try{return c(f)}finally{At=y,At===0&&(fc(),sp&&ws())}},t.createComponentSelector=function(c){return{$$typeof:Dp,value:c}},t.createContainer=function(c,f,y,_,b,P,O){return a2(c,f,!1,null,y,_,b,P,O)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Bp,value:c}},t.createHydrationContainer=function(c,f,y,_,b,P,O,Y,he){return c=a2(y,_,!0,c,b,P,O,Y,he),c.context=o2(null),y=c.current,_=Li(),b=ka(y),P=Xs(_,b),P.callback=f??null,La(y,P),c.current.lanes=b,lf(c,b,_),Ji(c,_),c},t.createPortal=function(c,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:_==null?null:""+_,children:c,containerInfo:f,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:Ip,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Lp,value:c}},t.createTextSelector=function(c){return{$$typeof:Np,value:c}},t.deferredUpdates=function(c){var f=Ht,y=Dn.transition;try{return Dn.transition=null,Ht=16,c()}finally{Ht=f,Dn.transition=y}},t.discreteUpdates=function(c,f,y,_,b){var P=Ht,O=Dn.transition;try{return Dn.transition=null,Ht=1,c(f,y,_,b)}finally{Ht=P,Dn.transition=O,At===0&&fc()}},t.findAllNodes=sy,t.findBoundingRects=function(c,f){if(!Nt)throw Error(a(363));f=sy(c,f),c=[];for(var y=0;y<f.length;y++)c.push(z(f[y]));for(f=c.length-1;0<f;f--){y=c[f];for(var _=y.x,b=_+y.width,P=y.y,O=P+y.height,Y=f-1;0<=Y;Y--)if(f!==Y){var he=c[Y],Pe=he.x,Qe=Pe+he.width,gt=he.y,lt=gt+he.height;if(_>=Pe&&P>=gt&&b<=Qe&&O<=lt){c.splice(f,1);break}else if(_!==Pe||y.width!==he.width||lt<P||gt>O){if(!(P!==gt||y.height!==he.height||Qe<_||Pe>b)){Pe>_&&(he.width+=Pe-_,he.x=_),Qe<b&&(he.width=b-Pe),c.splice(f,1);break}}else{gt>P&&(he.height+=gt-P,he.y=P),lt<O&&(he.height=O-gt),c.splice(f,1);break}}}return c},t.findHostInstance=l2,t.findHostInstanceWithNoPortals=function(c){return c=H(c),c=c!==null?K(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return l2(c)},t.flushControlled=function(c){var f=At;At|=1;var y=Dn.transition,_=Ht;try{Dn.transition=null,Ht=1,c()}finally{Ht=_,Dn.transition=y,At=f,At===0&&(fc(),ws())}},t.flushPassiveEffects=Ko,t.flushSync=ZA,t.focusWithin=function(c,f){if(!Nt)throw Error(a(363));for(c=ny(c),f=KA(c,f),f=Array.from(f),c=0;c<f.length;){var y=f[c++];if(!fe(y)){if(y.tag===5&&De(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ht},t.getFindAllNodesFailureDescription=function(c,f){if(!Nt)throw Error(a(363));var y=0,_=[];c=[ny(c),0];for(var b=0;b<c.length;){var P=c[b++],O=c[b++],Y=f[O];if((P.tag!==5||!fe(P))&&(iy(P,Y)&&(_.push(ry(Y)),O++,O>y&&(y=O)),O<f.length))for(P=P.child;P!==null;)c.push(P,O),P=P.sibling}if(y<f.length){for(c=[];y<f.length;y++)c.push(ry(f[y]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ue(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:PL,findFiberByHostInstance:c.findFiberByHostInstance||RL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{rp=f.inject(c),ys=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,y,_){if(!Nt)throw Error(a(363));c=sy(c,f);var b=He(c,y,_).disconnect;return{disconnect:function(){b()}}},t.registerMutableSourceForHydration=function(c,f){var y=f._getVersion;y=y(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,y]:c.mutableSourceEagerHydrationData.push(f,y)},t.runWithPriority=function(c,f){var y=Ht;try{return Ht=c,f()}finally{Ht=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,y,_){var b=f.current,P=Li(),O=ka(b);return y=o2(y),f.context===null?f.context=y:f.pendingContext=y,f=Xs(P,O),f.payload={element:c},_=_===void 0?null:_,_!==null&&(f.callback=_),La(b,f),c=br(b,O,P),c!==null&&cp(c,b,O),O},t};QD.exports=s6;var a6=QD.exports;const o6=qw(a6);var YD={exports:{}},ZD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(I,J){var j=I.length;I.push(J);e:for(;0<j;){var V=j-1>>>1,Q=I[V];if(0<r(Q,J))I[V]=J,I[j]=Q,j=V;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var J=I[0],j=I.pop();if(j!==J){I[0]=j;e:for(var V=0,Q=I.length,ge=Q>>>1;V<ge;){var xe=2*(V+1)-1,be=I[xe],ce=xe+1,Ye=I[ce];if(0>r(be,j))ce<Q&&0>r(Ye,be)?(I[V]=Ye,I[ce]=j,V=ce):(I[V]=be,I[xe]=j,V=xe);else if(ce<Q&&0>r(Ye,j))I[V]=Ye,I[ce]=j,V=ce;else break e}}return J}function r(I,J){var j=I.sortIndex-J.sortIndex;return j!==0?j:I.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,p=3,v=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(I){for(var J=t(u);J!==null;){if(J.callback===null)i(u);else if(J.startTime<=I)i(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function A(I){if(g=!1,M(I),!m)if(t(l)!==null)m=!0,ue(E);else{var J=t(u);J!==null&&pe(A,J.startTime-I)}}function E(I,J){m=!1,g&&(g=!1,x(T),T=-1),v=!0;var j=p;try{for(M(J),h=t(l);h!==null&&(!(h.expirationTime>J)||I&&!H());){var V=h.callback;if(typeof V=="function"){h.callback=null,p=h.priorityLevel;var Q=V(h.expirationTime<=J);J=n.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&i(l),M(J)}else i(l);h=t(l)}if(h!==null)var ge=!0;else{var xe=t(u);xe!==null&&pe(A,xe.startTime-J),ge=!1}return ge}finally{h=null,p=j,v=!1}}var R=!1,D=null,T=-1,B=5,L=-1;function H(){return!(n.unstable_now()-L<B)}function Z(){if(D!==null){var I=n.unstable_now();L=I;var J=!0;try{J=D(!0,I)}finally{J?W():(R=!1,D=null)}}else R=!1}var W;if(typeof S=="function")W=function(){S(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=Z,W=function(){ie.postMessage(null)}}else W=function(){w(Z,0)};function ue(I){D=I,R||(R=!0,W())}function pe(I,J){T=w(function(){I(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){m||v||(m=!0,ue(E))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(I){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var j=p;p=J;try{return I()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var j=p;p=I;try{return J()}finally{p=j}},n.unstable_scheduleCallback=function(I,J,j){var V=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=j+Q,I={id:d++,callback:J,priorityLevel:I,startTime:j,expirationTime:Q,sortIndex:-1},j>V?(I.sortIndex=j,e(u,I),t(l)===null&&I===t(u)&&(g?(x(T),T=-1):g=!0,pe(A,j-V))):(I.sortIndex=Q,e(l,I),m||v||(m=!0,ue(E))),I},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(I){var J=p;return function(){var j=p;p=J;try{return I.apply(this,arguments)}finally{p=j}}}})(ZD);YD.exports=ZD;var GC=YD.exports;function qD(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const ua=[];function $D(n,e,t=!1,i={}){for(const s of ua)if(qD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=ua.indexOf(r);s!==-1&&ua.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(ua.push(r),!t)throw r.promise}const l6=(n,e,t)=>$D(n,e,!1,t),c6=(n,e,t)=>void $D(n,e,!0,t),u6=n=>{if(n===void 0||n.length===0)ua.splice(0,ua.length);else{const e=ua.find(t=>qD(n,t.keys,t.equal));if(e){const t=ua.indexOf(e);t!==-1&&ua.splice(t,1)}}};var VC,WC;const eB=n=>n&&n.isOrthographicCamera,f6=n=>n&&n.hasOwnProperty("current"),tf=typeof window<"u"&&((VC=window.document)!=null&&VC.createElement||((WC=window.navigator)==null?void 0:WC.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function tB(n){const e=N.useRef(n);return tf(()=>void(e.current=n),[n]),e}function d6({set:n}){return tf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class nB extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}nB.getDerivedStateFromError=()=>({error:!0});const iB="__default",h6=n=>n&&!!n.memoized&&!!n.changes;function rB(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const Jf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Tn={obj:n=>n===Object(n)&&!Tn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Tn.str(n)||Tn.num(n))return n===e;const s=Tn.obj(n);if(s&&i==="reference")return n===e;const a=Tn.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;for(o in r?e:n)if(n[o]!==e[o])return!1;if(Tn.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function p6(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function m6(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function kc(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function Ew(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const jC=/-\d+$/;function Tx(n,e,t){if(Tn.str(t)){if(jC.test(t)){const s=t.replace(jC,""),{target:a,key:o}=Ew(n,s);Array.isArray(a[o])||(a[o]=[])}const{target:i,key:r}=Ew(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function JC(n,e,t){var i,r;if(Tn.str(t)){const{target:s,key:a}=Ew(n,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function sB(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:o,...l}={},u=!1){var d;const h=(d=n==null?void 0:n.__r3f)!=null?d:{},p=Object.entries(r),v=[];if(u){const g=Object.keys(l);for(let w=0;w<g.length;w++)r.hasOwnProperty(g[w])||p.unshift([g[w],iB+"remove"])}p.forEach(([g,w])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&g==="object"||Tn.equ(w,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return v.push([g,w,!0,[]]);let S=[];g.includes("-")&&(S=g.split("-")),v.push([g,w,!1,S]);for(const M in r){const A=r[M];M.startsWith(`${g}-`)&&v.push([M,A,!1,M.split("-")])}});const m={...r};return h.memoizedProps&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:v}}function Px(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},a=s.root,o=(i=a==null||a.getState==null?void 0:a.getState())!=null?i:{},{memoized:l,changes:u}=h6(e)?e:sB(n,e),d=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let v=0;v<u.length;v++){let[m,g,w,x]=u[v],S=n,M=S[m];if(x.length&&(M=x.reduce((A,E)=>A[E],n),!(M&&M.set))){const[A,...E]=x.reverse();S=E.reverse().reduce((R,D)=>R[D],n),m=A}if(g===iB+"remove")if(M&&M.constructor){var h;g=new M.constructor(...(h=l.args)!=null?h:[])}else if(S.constructor){var p;const A=new S.constructor(...(p=S.__r3f.memoizedProps.args)!=null?p:[]);g=A[M],A.dispose&&A.dispose()}else g=0;if(w)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(M&&M.set&&(M.copy||M instanceof El)){if(Array.isArray(g))M.fromArray?M.fromArray(g):M.set(...g);else if(M.copy&&g&&g.constructor&&M.constructor.name===g.constructor.name)M.copy(g);else if(g!==void 0){const A=M instanceof Ee;!A&&M.setScalar?M.setScalar(g):M instanceof El&&g instanceof El?M.mask=g.mask:M.set(g),!("ColorManagement"in uh)&&!o.linear&&A&&M.convertSRGBToLinear()}}else S[m]=g,!o.linear&&S[m]instanceof $t&&(S[m].encoding=Wt);Uc(n)}if(s.parent&&o.internal&&n.raycast&&d!==s.eventCount){const v=o.internal.interaction.indexOf(n);v>-1&&o.internal.interaction.splice(v,1),s.eventCount&&o.internal.interaction.push(n)}return u.length&&(r=n.__r3f)!=null&&r.parent&&Tw(n),n}function Uc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Tw(n){n.onUpdate==null||n.onUpdate(n)}function aB(n,e){n.manual||(eB(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function g6(n,e,t){const i=t.pop(),r=t.reduce((s,a)=>s[a],n);return r[i]=e}function Qm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function v6(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return nu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nu.ContinuousEventPriority;default:return nu.DefaultEventPriority}}function oB(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function y6(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{oB(t.capturedMap,e,i,r)})}function x6(n){function e(l){const{internal:u}=n.getState(),d=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function i(l,u){const d=n.getState(),h=new Set,p=[],v=u?u(d.internal.interaction):d.internal.interaction;for(let x=0;x<v.length;x++){const S=Jf(v[x]);S&&(S.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function m(x){const S=Jf(x);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var M;S.events.compute==null||S.events.compute(l,S,(M=S.previousRoot)==null?void 0:M.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(x,!0):[]}let g=v.flatMap(m).sort((x,S)=>{const M=Jf(x.object),A=Jf(S.object);return!M||!A?x.distance-S.distance:A.events.priority-M.events.priority||x.distance-S.distance}).filter(x=>{const S=Qm(x);return h.has(S)?!1:(h.add(S),!0)});d.events.filter&&(g=d.events.filter(g,d));for(const x of g){let S=x.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&p.push({...x,eventObject:S}),S=S.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let x of d.internal.capturedMap.get(l.pointerId).values())h.has(Qm(x.intersection))||p.push(x.intersection);return p}function r(l,u,d,h){const p=n.getState();if(l.length){const v={stopped:!1};for(const m of l){const g=Jf(m.object)||p,{raycaster:w,pointer:x,camera:S,internal:M}=g,A=new k(x.x,x.y,0).unproject(S),E=L=>{var H,Z;return(H=(Z=M.capturedMap.get(L))==null?void 0:Z.has(m.eventObject))!=null?H:!1},R=L=>{const H={intersection:m,target:u.target};M.capturedMap.has(L)?M.capturedMap.get(L).set(m.eventObject,H):M.capturedMap.set(L,new Map([[m.eventObject,H]])),u.target.setPointerCapture(L)},D=L=>{const H=M.capturedMap.get(L);H&&oB(M.capturedMap,m.eventObject,H,L)};let T={};for(let L in u){let H=u[L];typeof H!="function"&&(T[L]=H)}let B={...m,...T,pointer:x,intersections:l,stopped:v.stopped,delta:d,unprojectedPoint:A,ray:w.ray,camera:S,stopPropagation(){const L="pointerId"in u&&M.capturedMap.get(u.pointerId);if((!L||L.has(m.eventObject))&&(B.stopped=v.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(H=>H.eventObject===m.eventObject))){const H=l.slice(0,l.indexOf(m));s([...H,m])}},target:{hasPointerCapture:E,setPointerCapture:R,releasePointerCapture:D},currentTarget:{hasPointerCapture:E,setPointerCapture:R,releasePointerCapture:D},nativeEvent:u};if(h(B),v.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const d of u.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,v=p==null?void 0:p.handlers;if(u.hovered.delete(Qm(d)),p!=null&&p.eventCount){const m={...d,intersections:l};v.onPointerOut==null||v.onPointerOut(m),v.onPointerLeave==null||v.onPointerLeave(m)}}}function a(l,u){for(let d=0;d<u.length;d++){const h=u[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=n.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))}}return function(d){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=d;const v=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(d,v?t:void 0),x=m?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=w.map(M=>M.eventObject)),m&&!w.length&&x<=2&&(a(d,p.interaction),h&&h(d)),v&&s(w);function S(M){const A=M.eventObject,E=A.__r3f,R=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(v){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const D=Qm(M),T=p.hovered.get(D);T?T.stopped&&M.stopPropagation():(p.hovered.set(D,M),R.onPointerOver==null||R.onPointerOver(M),R.onPointerEnter==null||R.onPointerEnter(M))}R.onPointerMove==null||R.onPointerMove(M)}else{const D=R[l];D?(!m||p.initialHits.includes(A))&&(a(d,p.interaction.filter(T=>!p.initialHits.includes(T))),D(M)):m&&p.initialHits.includes(A)&&a(d,p.interaction.filter(T=>!p.initialHits.includes(T)))}}r(w,d,x,S)}}return{handlePointer:o}}let Pw={},JM=n=>void(Pw={...Pw,...n});function w6(n,e){function t(d,{args:h=[],attach:p,...v},m){let g=`${d[0].toUpperCase()}${d.slice(1)}`,w;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=v.object;w=kc(x,{type:d,root:m,attach:p,primitive:!0})}else{const x=Pw[g];if(!x)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");w=kc(new x(...h),{type:d,root:m,attach:p,memoizedProps:{args:h}})}return w.__r3f.attach===void 0&&(w instanceof mt?w.__r3f.attach="geometry":w instanceof Rn&&(w.__r3f.attach="material")),g!=="inject"&&Px(w,v),w}function i(d,h){let p=!1;if(h){var v,m;(v=h.__r3f)!=null&&v.attach?Tx(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(m=d.__r3f)==null||m.objects.push(h),h.__r3f||kc(h,{}),h.__r3f.parent=d,Tw(h),Uc(h)}}function r(d,h,p){let v=!1;if(h){var m,g;if((m=h.__r3f)!=null&&m.attach)Tx(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const w=d.children.filter(S=>S!==h),x=w.indexOf(p);d.children=[...w.slice(0,x),h,...w.slice(x)],v=!0}v||(g=d.__r3f)==null||g.objects.push(h),h.__r3f||kc(h,{}),h.__r3f.parent=d,Tw(h),Uc(h)}}function s(d,h,p=!1){d&&[...d].forEach(v=>a(h,v,p))}function a(d,h,p){if(h){var v,m,g;if(h.__r3f&&(h.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(A=>A!==h)),(m=h.__r3f)!=null&&m.attach)JC(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var w;d.remove(h),(w=h.__r3f)!=null&&w.root&&y6(h.__r3f.root,h)}const S=(g=h.__r3f)==null?void 0:g.primitive,M=p===void 0?h.dispose!==null&&!S:p;if(!S){var x;s((x=h.__r3f)==null?void 0:x.objects,h,M),s(h.children,h,M)}h.__r3f&&(delete h.__r3f.root,delete h.__r3f.objects,delete h.__r3f.handlers,delete h.__r3f.memoizedProps,S||delete h.__r3f),M&&h.dispose&&h.type!=="Scene"&&GC.unstable_scheduleCallback(GC.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Uc(d)}}function o(d,h,p,v){var m;const g=(m=d.__r3f)==null?void 0:m.parent;if(!g)return;const w=t(h,p,d.__r3f.root);if(d.children){for(const x of d.children)x.__r3f&&i(w,x);d.children=d.children.filter(x=>!x.__r3f)}d.__r3f.objects.forEach(x=>i(w,x)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||a(g,d),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(g,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[v,v.alternate].forEach(x=>{x!==null&&(x.stateNode=w,x.ref&&(typeof x.ref=="function"?x.ref(w):x.ref.current=w))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:o6({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,h))},removeChildFromContainer:(d,h)=>{h&&a(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const v=d.getState().scene;v.__r3f&&r(v,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,v){if(d.__r3f.primitive&&v.object&&v.object!==d)return[!0];{const{args:m=[],children:g,...w}=v,{args:x=[],children:S,...M}=p;if(!Array.isArray(m))throw new Error("R3F: the args prop must be an array!");if(m.some((E,R)=>E!==x[R]))return[!0];const A=sB(d,w,M,!0);return A.changes.length?[!1,A]:null}},commitUpdate(d,[h,p],v,m,g,w){h?o(d,v,g,w):Px(d,p)},commitMount(d,h,p,v){var m;const g=(m=d.__r3f)!=null?m:{};d.raycast&&g.handlers&&g.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>kc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:v}=(h=d.__r3f)!=null?h:{};p&&v&&JC(v,d,p),d.isObject3D&&(d.visible=!1),Uc(d)},unhideInstance(d,h){var p;const{attach:v,parent:m}=(p=d.__r3f)!=null?p:{};v&&m&&Tx(m,d,v),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),Uc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():nu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Tn.fun(performance.now)?performance.now:Tn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Tn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Tn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Px}}const S6=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],lB=n=>!!(n!=null&&n.render),XM=N.createContext(null),M6=(n,e)=>{const t=jM((o,l)=>{const u=new k,d=new k,h=new k;function p(x=l().camera,S=d,M=l().size){const{width:A,height:E,top:R,left:D}=M,T=A/E;S instanceof k?h.copy(S):h.set(...S);const B=x.getWorldPosition(u).distanceTo(h);if(eB(x))return{width:A/x.zoom,height:E/x.zoom,top:R,left:D,factor:1,distance:B,aspect:T};{const L=x.fov*Math.PI/180,H=2*Math.tan(L/2)*B,Z=H*(A/E);return{width:Z,height:H,top:R,left:D,factor:A/Z,distance:B,aspect:T}}}let v;const m=x=>o(S=>({performance:{...S.performance,current:x}})),g=new se;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,S)=>e(x,S,l()),legacy:!1,linear:!1,flat:!1,scene:kc(new Bu),controls:null,clock:new HM,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();v&&clearTimeout(v),x.performance.current!==x.performance.min&&m(x.performance.min),v=setTimeout(()=>m(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:x=>o(S=>({...S,events:{...S.events,...x}})),setSize:(x,S,M,A,E)=>{const R=l().camera,D={width:x,height:S,top:A||0,left:E||0,updateStyle:M};o(T=>({size:D,viewport:{...T.viewport,...p(R,d,D)}}))},setDpr:x=>o(S=>{const M=rB(x);return{viewport:{...S.viewport,dpr:M,initialDpr:S.viewport.initialDpr||M}}}),setFrameloop:(x="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,x!=="never"&&(S.start(),S.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,S,M)=>{const A=l().internal;return A.priority=A.priority+(S>0?1:0),A.subscribers.push({ref:x,priority:S,store:M}),A.subscribers=A.subscribers.sort((E,R)=>E.priority-R.priority),()=>{const E=l().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(S>0?1:0),E.subscribers=E.subscribers.filter(R=>R.ref!==x))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:d,set:h}=t.getState();(l!==r||u.dpr!==s)&&(r=l,s=u.dpr,aB(o,l),d.setPixelRatio(u.dpr),d.setSize(l.width,l.height,l.updateStyle)),o!==a&&(a=o,h(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function _6(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let Ym,cB=new Set,A6=new Set,b6=new Set;const C6=n=>_6(n,cB);function Rx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Xf(n,e){switch(n){case"before":return Rx(cB,e);case"after":return Rx(A6,e);case"tail":return Rx(b6,e)}}let Dx,Bx;function Ix(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Dx=e.internal.subscribers,Ym=0;Ym<Dx.length;Ym++)Bx=Dx[Ym],Bx.ref.current(Bx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function E6(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,Xf("before",l);for(const d of n.values()){var u;r=d.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=Ix(l,r))}if(Xf("after",l),t===0)return Xf("tail",l),e=!1,cancelAnimationFrame(i)}function a(l,u=1){var d;if(!l)return n.forEach(h=>a(h.store.getState()),u);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function o(l,u=!0,d,h){if(u&&Xf("before",l),d)Ix(l,d,h);else for(const p of n.values())Ix(l,p.store.getState());u&&Xf("after",l)}return{loop:s,invalidate:a,advance:o}}function T6(n){const e=N.useRef(null);return tf(()=>void(e.current=n.current.__r3f),[n]),e}function KM(){const n=N.useContext(XM);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ei(n=t=>t,e){return KM()(n,e)}function fh(n,e=0){const t=KM(),i=t.getState().internal.subscribe,r=tB(n);return tf(()=>i(r,e,t),[e,i,t]),null}function uB(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{l.scene&&Object.assign(l,p6(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l.message})`))))))}}function nf(n,e,t,i){const r=Array.isArray(e)?e:[e],s=l6(uB(t,i),[n,...r],{equal:Tn.equ});return Array.isArray(e)?s:s[0]}nf.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return c6(uB(t),[n,...i])};nf.clear=function(n,e){const t=Array.isArray(e)?e:[e];return u6([n,...t])};const ku=new Map,{invalidate:XC,advance:KC}=E6(ku),{reconciler:dh,applyProps:iu}=w6(ku,v6),Dc={objects:"shallow",strict:!1},P6=(n,e)=>{const t=typeof n=="function"?n(e):n;return lB(t)?t:new gM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function R6(n){return n instanceof HTMLCanvasElement}function D6(n,e){if(e)return e;if(R6(n)&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function B6(n){const e=ku.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||M6(XC,KC),a=t||dh.createContainer(s,nu.ConcurrentRoot,null,!1,null,"",r,null);e||ku.set(n,{fiber:a,store:s});let o,l=!1;return{configure(u={}){let{gl:d,size:h,events:p,onCreated:v,shadows:m=!1,linear:g=!1,flat:w=!1,legacy:x=!1,orthographic:S=!1,frameloop:M="always",dpr:A=[1,2],performance:E,raycaster:R,camera:D,onPointerMissed:T}=u,B=s.getState(),L=B.gl;B.gl||B.set({gl:L=P6(d,n)});let H=B.raycaster;H||B.set({raycaster:H=new WM});const{params:Z,...W}=R||{};if(Tn.equ(W,H,Dc)||iu(H,{...W}),Tn.equ(Z,H.params,Dc)||iu(H,{params:{...H.params,...Z}}),!B.camera){const pe=D instanceof Ku,I=pe?D:S?new Vl(0,0,0,0,.1,1e3):new hn(75,0,.1,1e3);pe||(I.position.z=5,D&&iu(I,D),D!=null&&D.rotation||I.lookAt(0,0,0)),B.set({camera:I})}if(!B.xr){const pe=(j,V)=>{const Q=s.getState();Q.frameloop!=="never"&&KC(j,!0,Q,V)},I=()=>{const j=s.getState();j.gl.xr.enabled=j.gl.xr.isPresenting,j.gl.xr.setAnimationLoop(j.gl.xr.isPresenting?pe:null),j.gl.xr.isPresenting||XC(j)},J={connect(){const j=s.getState().gl;j.xr.addEventListener("sessionstart",I),j.xr.addEventListener("sessionend",I)},disconnect(){const j=s.getState().gl;j.xr.removeEventListener("sessionstart",I),j.xr.removeEventListener("sessionend",I)}};L.xr&&J.connect(),B.set({xr:J})}if(L.shadowMap){const pe=Tn.boo(m);if(pe&&L.shadowMap.enabled!==m||!Tn.equ(m,L.shadowMap,Dc)){const I=L.shadowMap.enabled;L.shadowMap.enabled=!!m,pe?L.shadowMap.type=QS:Object.assign(L.shadowMap,m),I!==L.shadowMap.enabled&&(L.shadowMap.needsUpdate=!0)}}"ColorManagement"in uh&&g6(uh,x,["ColorManagement","legacyMode"]);const K=g?ps:Wt,ie=w?fs:nM;L.outputEncoding!==K&&(L.outputEncoding=K),L.toneMapping!==ie&&(L.toneMapping=ie),B.legacy!==x&&B.set(()=>({legacy:x})),B.linear!==g&&B.set(()=>({linear:g})),B.flat!==w&&B.set(()=>({flat:w})),d&&!Tn.fun(d)&&!lB(d)&&!Tn.equ(d,L,Dc)&&iu(L,d),p&&!B.events.handlers&&B.set({events:p(s)}),A&&B.viewport.dpr!==rB(A)&&B.setDpr(A);const ue=D6(n,h);return Tn.equ(ue,B.size,Dc)||B.setSize(ue.width,ue.height,ue.updateStyle,ue.top,ue.left),B.frameloop!==M&&B.setFrameloop(M),B.onPointerMissed||B.set({onPointerMissed:T}),E&&!Tn.equ(E,B.performance,Dc)&&B.set(pe=>({performance:{...pe.performance,...E}})),o=v,l=!0,this},render(u){return l||this.configure(),dh.updateContainer(N.createElement(I6,{store:s,children:u,onCreated:o,rootElement:n}),a,null,()=>{}),s},unmount(){fB(n)}}}function I6({store:n,children:e,onCreated:t,rootElement:i}){return tf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),N.createElement(XM.Provider,{value:n},e)}function fB(n,e){const t=ku.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),dh.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),m6(r),ku.delete(n),e&&e(n)}catch{}},500)})}}function L6(n,e,t){return N.createElement(N6,{key:e.uuid,children:n,container:e,state:t})}function N6({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=KM(),[o]=N.useState(()=>new WM),[l]=N.useState(()=>new se),u=N.useCallback((h,p)=>{const v={...h};Object.keys(h).forEach(g=>{(S6.includes(g)||h[g]!==p[g])&&delete v[g]});let m;if(p&&r){const g=p.camera;m=h.viewport.getCurrentViewport(g,new k,r),g!==h.camera&&aB(g,r)}return{...v,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...p==null?void 0:p.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...m},...s}},[n]),[d]=N.useState(()=>{const h=a.getState();return jM((v,m)=>({...h,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...i},size:{...h.size,...r},...s,set:v,get:m,setEvents:g=>v(w=>({...w,events:{...w.events,...g}}))}))});return N.useEffect(()=>{const h=a.subscribe(p=>d.setState(v=>u(p,v)));return()=>{h(),d.destroy()}},[]),N.useEffect(()=>{d.setState(h=>u(a.getState(),h))},[u]),N.createElement(N.Fragment,null,dh.createPortal(N.createElement(XM.Provider,{value:d},e),d,null))}dh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});function Rw(n,e,t){var i,r,s,a,o;e==null&&(e=100);function l(){var d=Date.now()-a;d<e&&d>=0?i=setTimeout(l,e-d):(i=null,t||(o=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,a=Date.now();var d=t&&!i;return i||(i=setTimeout(l,e)),d&&(o=n.apply(s,r),s=r=null),o};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(o=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}Rw.debounce=Rw;var F6=Rw;const QC=qw(F6);function k6(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=N.useRef(!1);N.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,v,m]=N.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:M,top:A,width:E,height:R,bottom:D,right:T,x:B,y:L}=l.current.element.getBoundingClientRect(),H={left:M,top:A,width:E,height:R,bottom:D,right:T,x:B,y:L};l.current.element instanceof HTMLElement&&r&&(H.height=l.current.element.offsetHeight,H.width=l.current.element.offsetWidth),Object.freeze(H),h.current&&!H6(l.current.lastBounds,H)&&o(l.current.lastBounds=H)};return[S,d?QC(S,d):S,u?QC(S,u):S]},[o,r,u,d]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",m,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function w(){l.current.element&&(l.current.resizeObserver=new s(m),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",m,{capture:!0,passive:!0})))}const x=S=>{!S||S===l.current.element||(g(),l.current.element=S,l.current.scrollContainers=dB(S),w())};return O6(m,!!t),U6(v),N.useEffect(()=>{g(),w()},[t,m,v]),N.useEffect(()=>g,[]),[x,a,p]}function U6(n){N.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function O6(n,e){N.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function dB(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...dB(n.parentElement)]}const z6=["x","y","top","bottom","left","right","width","height"],H6=(n,e)=>z6.every(t=>n[t]===e[t]);var G6=Object.defineProperty,V6=Object.defineProperties,W6=Object.getOwnPropertyDescriptors,YC=Object.getOwnPropertySymbols,j6=Object.prototype.hasOwnProperty,J6=Object.prototype.propertyIsEnumerable,ZC=(n,e,t)=>e in n?G6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qC=(n,e)=>{for(var t in e||(e={}))j6.call(e,t)&&ZC(n,t,e[t]);if(YC)for(var t of YC(e))J6.call(e,t)&&ZC(n,t,e[t]);return n},X6=(n,e)=>V6(n,W6(e));function hB(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=hB(i,e,t);if(r)return r;i=e?null:i.sibling}}function pB(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const QM=pB(N.createContext(null));class mB extends N.Component{render(){return N.createElement(QM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:$C,ReactCurrentDispatcher:eE}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K6(){const n=N.useContext(QM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const i of[$C==null?void 0:$C.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=hB(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function Q6(){var n,e;const t=K6(),[i]=N.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==QM&&!i.has(s)&&i.set(s,(e=eE==null?void 0:eE.current)==null?void 0:e.readContext(pB(s))),r=r.return}return i}function Y6(){const n=Q6();return N.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>N.createElement(e,null,N.createElement(t.Provider,X6(qC({},i),{value:n.get(t)}))),e=>N.createElement(mB,qC({},e))),[n])}const Lx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Z6(n){const{handlePointer:e}=x6(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Lx).reduce((t,i)=>({...t,[i]:e(i)}),{}),connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,o])=>{const[l,u]=Lx[a];t.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[o]=Lx[s];i.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const q6=N.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=Z6,eventSource:o,eventPrefix:l,shadows:u,linear:d,flat:h,legacy:p,orthographic:v,frameloop:m,dpr:g,performance:w,raycaster:x,camera:S,onPointerMissed:M,onCreated:A,...E},R){N.useMemo(()=>JM(uh),[]);const D=Y6(),[T,B]=k6({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=N.useRef(null),H=N.useRef(null),[Z,W]=N.useState(null);N.useImperativeHandle(R,()=>L.current);const K=tB(M),[ie,ue]=N.useState(!1),[pe,I]=N.useState(!1);if(ie)throw ie;if(pe)throw pe;const J=N.useRef(null);B.width>0&&B.height>0&&Z&&(J.current||(J.current=B6(Z)),J.current.configure({gl:s,events:a,shadows:u,linear:d,flat:h,legacy:p,orthographic:v,frameloop:m,dpr:g,performance:w,raycaster:x,camera:S,size:B,onPointerMissed:(...V)=>K.current==null?void 0:K.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(o?f6(o)?o.current:o:H.current),l&&V.setEvents({compute:(Q,ge)=>{const xe=Q[l+"X"],be=Q[l+"Y"];ge.pointer.set(xe/ge.size.width*2-1,-(be/ge.size.height)*2+1),ge.raycaster.setFromCamera(ge.pointer,ge.camera)}}),A==null||A(V)}}),J.current.render(N.createElement(D,null,N.createElement(nB,{set:I},N.createElement(N.Suspense,{fallback:N.createElement(d6,{set:ue})},e))))),tf(()=>{W(L.current)},[]),N.useEffect(()=>{if(Z)return()=>fB(Z)},[Z]);const j=o?"none":"auto";return N.createElement("div",Eu({ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...r}},E),N.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},N.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),$6=N.forwardRef(function(e,t){return N.createElement(mB,null,N.createElement(q6,Eu({},e,{ref:t})))});let Kf=0;const e9=jM(n=>(tu.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Kf)/(i-Kf)*100})},tu.onLoad=()=>{n({active:!1})},tu.onError=e=>n(t=>({errors:[...t.errors,e]})),tu.onProgress=(e,t,i)=>{t===i&&(Kf=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Kf)/(i-Kf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),t9=n=>`Loading ${n.toFixed(2)}%`;function n9({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:i,dataInterpolation:r=t9,initialState:s=a=>a}){const{active:a,progress:o}=e9(),l=N.useRef(0),u=N.useRef(0),d=N.useRef(null),[h,p]=N.useState(s(a));N.useEffect(()=>{let m;return a!==h&&(m=setTimeout(()=>p(a),300)),()=>clearTimeout(m)},[h,a]);const v=N.useCallback(()=>{d.current&&(l.current+=(o-l.current)/2,(l.current>.95*o||o===100)&&(l.current=o),d.current.innerText=r(l.current),l.current<o&&(u.current=requestAnimationFrame(v)))},[r,o]);return N.useEffect(()=>(v(),()=>cancelAnimationFrame(u.current)),[v]),h?N.createElement("div",{style:{...Zm.container,opacity:a?1:0,...n}},N.createElement("div",null,N.createElement("div",{style:{...Zm.inner,...e}},N.createElement("div",{style:{...Zm.bar,transform:`scaleX(${o/100})`,...t}}),N.createElement("span",{ref:d,style:{...Zm.data,...i}})))):null}const Zm={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function i9(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Ed(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function r9(n,e){if(n){if(typeof n=="string")return Dw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Dw(n,e)}}function s9(n){if(Array.isArray(n))return Dw(n)}function a9(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function o9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l9(n){return s9(n)||a9(n)||r9(n)||o9()}new se;new se;function c9(n,e,t){return Math.max(e,Math.min(t,n))}function u9(n,e){return c9(n-Math.floor(n/e)*e,0,e)}function f9(n,e){var t=u9(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function gB(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Pr=function n(e,t,i){var r=this;gB(this,n),Ed(this,"dot2",function(s,a){return r.x*s+r.y*a}),Ed(this,"dot3",function(s,a,o){return r.x*s+r.y*a+r.z*o}),this.x=e,this.y=t,this.z=i},d9=[new Pr(1,1,0),new Pr(-1,1,0),new Pr(1,-1,0),new Pr(-1,-1,0),new Pr(1,0,1),new Pr(-1,0,1),new Pr(1,0,-1),new Pr(-1,0,-1),new Pr(0,1,1),new Pr(0,-1,1),new Pr(0,1,-1),new Pr(0,-1,-1)],tE=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],nE=new Array(512),iE=new Array(512),h9=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=tE[t]^e&255:i=tE[t]^e>>8&255,nE[t]=nE[t+256]=i,iE[t]=iE[t+256]=d9[i%12]}};h9(0);function p9(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function rE(n){var e=p9(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var m9=function n(e){var t=this;gB(this,n),Ed(this,"seed",0),Ed(this,"init",function(i){t.seed=i,t.value=rE(i)}),Ed(this,"value",rE(this.seed)),this.init(e)};new m9(Math.random());var g9=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},vB=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function Zn(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:vB,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=o)return n[e]=t,!1;i=Math.max(1e-4,i);var u=2/i,d=a(u*r),h=n[e]-t,p=t,v=s*i;h=Math.min(Math.max(h,-v),v),t=n[e]-h;var m=(n.__damp[l]+u*h)*r;n.__damp[l]=(n.__damp[l]-u*m)*d;var g=t+(h+m)*d;return p-n[e]>0==g>p&&(g=p,n.__damp[l]=(g-p)/r),n[e]=g,!0}function mu(n,e,t,i,r,s,a,o){return Zn(n,e,n[e]+f9(n[e],t),i,r,s,a,o)}var Qf=new se,sE,aE;function v9(n,e,t,i,r,s,a){return typeof e=="number"?Qf.setScalar(e):Array.isArray(e)?Qf.set(e[0],e[1]):Qf.copy(e),sE=Zn(n,"x",Qf.x,t,i,r,s,a),aE=Zn(n,"y",Qf.y,t,i,r,s,a),sE||aE}var Bc=new k,oE,lE,cE;function Bw(n,e,t,i,r,s,a){return typeof e=="number"?Bc.setScalar(e):Array.isArray(e)?Bc.set(e[0],e[1],e[2]):Bc.copy(e),oE=Zn(n,"x",Bc.x,t,i,r,s,a),lE=Zn(n,"y",Bc.y,t,i,r,s,a),cE=Zn(n,"z",Bc.z,t,i,r,s,a),oE||lE||cE}var rl=new Dt,uE,fE,dE,hE;function y9(n,e,t,i,r,s,a){return typeof e=="number"?rl.setScalar(e):Array.isArray(e)?rl.set(e[0],e[1],e[2],e[3]):rl.copy(e),uE=Zn(n,"x",rl.x,t,i,r,s,a),fE=Zn(n,"y",rl.y,t,i,r,s,a),dE=Zn(n,"z",rl.z,t,i,r,s,a),hE=Zn(n,"w",rl.w,t,i,r,s,a),uE||fE||dE||hE}var Yf=new Gl,pE,mE,gE;function x9(n,e,t,i,r,s,a){return Array.isArray(e)?Yf.set(e[0],e[1],e[2],e[3]):Yf.copy(e),pE=mu(n,"x",Yf.x,t,i,r,s,a),mE=mu(n,"y",Yf.y,t,i,r,s,a),gE=mu(n,"z",Yf.z,t,i,r,s,a),pE||mE||gE}var Ic=new Ee,vE,yE,xE;function w9(n,e,t,i,r,s,a){return e instanceof Ee?Ic.copy(e):Array.isArray(e)?Ic.setRGB(e[0],e[1],e[2]):Ic.set(e),vE=Zn(n,"r",Ic.r,t,i,r,s,a),yE=Zn(n,"g",Ic.g,t,i,r,s,a),xE=Zn(n,"b",Ic.b,t,i,r,s,a),vE||yE||xE}var $r=new Fn,ra=new Dt,wE=new Dt,Zf=new Dt,SE,ME,_E,AE;function yB(n,e,t,i,r,s,a){var o=n;Array.isArray(e)?$r.set(e[0],e[1],e[2],e[3]):$r.copy(e);var l=n.dot($r)>0?1:-1;return $r.x*=l,$r.y*=l,$r.z*=l,$r.w*=l,SE=Zn(n,"x",$r.x,t,i,r,s,a),ME=Zn(n,"y",$r.y,t,i,r,s,a),_E=Zn(n,"z",$r.z,t,i,r,s,a),AE=Zn(n,"w",$r.w,t,i,r,s,a),ra.set(n.x,n.y,n.z,n.w).normalize(),wE.set(o.__damp.velocity_x,o.__damp.velocity_y,o.__damp.velocity_z,o.__damp.velocity_w),Zf.copy(ra).multiplyScalar(wE.dot(ra)/ra.dot(ra)),o.__damp.velocity_x-=Zf.x,o.__damp.velocity_y-=Zf.y,o.__damp.velocity_z-=Zf.z,o.__damp.velocity_w-=Zf.w,n.set(ra.x,ra.y,ra.z,ra.w),SE||ME||_E||AE}var qf=new JD,bE,CE,EE;function S9(n,e,t,i,r,s,a){return Array.isArray(e)?qf.set(e[0],e[1],e[2]):qf.copy(e),bE=Zn(n,"radius",qf.radius,t,i,r,s,a),CE=mu(n,"phi",qf.phi,t,i,r,s,a),EE=mu(n,"theta",qf.theta,t,i,r,s,a),bE||CE||EE}var qm=new je,TE=new k,PE=new Fn,RE=new k,DE,BE,IE;function M9(n,e,t,i,r,s,a){var o=n;return o.__damp===void 0&&(o.__damp={position:new k,rotation:new Fn,scale:new k},n.decompose(o.__damp.position,o.__damp.rotation,o.__damp.scale)),Array.isArray(e)?qm.set.apply(qm,l9(e)):qm.copy(e),qm.decompose(TE,PE,RE),DE=Bw(o.__damp.position,TE,t,i,r,s,a),BE=yB(o.__damp.rotation,PE,t,i,r,s,a),IE=Bw(o.__damp.scale,RE,t,i,r,s,a),n.compose(o.__damp.position,o.__damp.rotation,o.__damp.scale),DE||BE||IE}var _9=Object.freeze({__proto__:null,rsqw:g9,exp:vB,damp:Zn,dampAngle:mu,damp2:v9,damp3:Bw,damp4:y9,dampE:x9,dampC:w9,dampQ:yB,dampS:S9,dampM:M9});let YM=Wh();const pt=n=>Vh(n,YM);let ZM=Wh();pt.write=n=>Vh(n,ZM);let iv=Wh();pt.onStart=n=>Vh(n,iv);let qM=Wh();pt.onFrame=n=>Vh(n,qM);let $M=Wh();pt.onFinish=n=>Vh(n,$M);let gu=[];pt.setTimeout=(n,e)=>{let t=pt.now()+e,i=()=>{let s=gu.findIndex(a=>a.cancel==i);~s&&gu.splice(s,1),co-=~s?1:0},r={time:t,handler:n,cancel:i};return gu.splice(xB(t),0,r),co+=1,wB(),r};let xB=n=>~(~gu.findIndex(e=>e.time>n)||~gu.length);pt.cancel=n=>{iv.delete(n),qM.delete(n),$M.delete(n),YM.delete(n),ZM.delete(n)};pt.sync=n=>{Iw=!0,pt.batchedUpdates(n),Iw=!1};pt.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,pt.onStart(t)}return i.handler=n,i.cancel=()=>{iv.delete(t),e=null},i};let e_=typeof window<"u"?window.requestAnimationFrame:()=>{};pt.use=n=>e_=n;pt.now=typeof performance<"u"?()=>performance.now():Date.now;pt.batchedUpdates=n=>n();pt.catch=console.error;pt.frameLoop="always";pt.advance=()=>{pt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):MB()};let lo=-1,co=0,Iw=!1;function Vh(n,e){Iw?(e.delete(n),n(0)):(e.add(n),wB())}function wB(){lo<0&&(lo=0,pt.frameLoop!=="demand"&&e_(SB))}function A9(){lo=-1}function SB(){~lo&&(e_(SB),pt.batchedUpdates(MB))}function MB(){let n=lo;lo=pt.now();let e=xB(lo);if(e&&(_B(gu.splice(0,e),t=>t.handler()),co-=e),!co){A9();return}iv.flush(),YM.flush(n?Math.min(64,lo-n):16.667),qM.flush(),ZM.flush(),$M.flush()}function Wh(){let n=new Set,e=n;return{add(t){co+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return co-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,co-=e.size,_B(e,i=>i(t)&&n.add(i)),co+=n.size,e=n)}}}function _B(n,e){n.forEach(t=>{try{e(t)}catch(i){pt.catch(i)}})}function Lw(){}const b9=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Ie={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function aa(n,e){if(Ie.arr(n)){if(!Ie.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}const Kt=(n,e)=>n.forEach(e);function Aa(n,e,t){if(Ie.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}const Or=n=>Ie.und(n)?[]:Ie.arr(n)?n:[n];function Td(n,e){if(n.size){const t=Array.from(n);n.clear(),Kt(t,e)}}const hd=(n,...e)=>Td(n,t=>t(...e)),t_=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let n_,AB,_o=null,bB=!1,i_=Lw;const C9=n=>{n.to&&(AB=n.to),n.now&&(pt.now=n.now),n.colors!==void 0&&(_o=n.colors),n.skipAnimation!=null&&(bB=n.skipAnimation),n.createStringInterpolator&&(n_=n.createStringInterpolator),n.requestAnimationFrame&&pt.use(n.requestAnimationFrame),n.batchedUpdates&&(pt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(i_=n.willAdvance),n.frameLoop&&(pt.frameLoop=n.frameLoop)};var Us=Object.freeze({__proto__:null,get createStringInterpolator(){return n_},get to(){return AB},get colors(){return _o},get skipAnimation(){return bB},get willAdvance(){return i_},assign:C9});const Pd=new Set;let kr=[],Nx=[],c0=0;const rv={get idle(){return!Pd.size&&!kr.length},start(n){c0>n.priority?(Pd.add(n),pt.onStart(E9)):(CB(n),pt(Nw))},advance:Nw,sort(n){if(c0)pt.onFrame(()=>rv.sort(n));else{const e=kr.indexOf(n);~e&&(kr.splice(e,1),EB(n))}},clear(){kr=[],Pd.clear()}};function E9(){Pd.forEach(CB),Pd.clear(),pt(Nw)}function CB(n){kr.includes(n)||EB(n)}function EB(n){kr.splice(T9(kr,e=>e.priority>n.priority),0,n)}function Nw(n){const e=Nx;for(let t=0;t<kr.length;t++){const i=kr[t];c0=i.priority,i.idle||(i_(i),i.advance(n),i.idle||e.push(i))}return c0=0,Nx=kr,Nx.length=0,kr=e,kr.length>0}function T9(n,e){const t=n.findIndex(e);return t<0?n.length:t}const P9=(n,e,t)=>Math.min(Math.max(t,n),e),R9={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ls="[-+]?\\d*\\.?\\d+",u0=ls+"%";function sv(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}const D9=new RegExp("rgb"+sv(ls,ls,ls)),B9=new RegExp("rgba"+sv(ls,ls,ls,ls)),I9=new RegExp("hsl"+sv(ls,u0,u0)),L9=new RegExp("hsla"+sv(ls,u0,u0,ls)),N9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,F9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,k9=/^#([0-9a-fA-F]{6})$/,U9=/^#([0-9a-fA-F]{8})$/;function O9(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=k9.exec(n))?parseInt(e[1]+"ff",16)>>>0:_o&&_o[n]!==void 0?_o[n]:(e=D9.exec(n))?(Lc(e[1])<<24|Lc(e[2])<<16|Lc(e[3])<<8|255)>>>0:(e=B9.exec(n))?(Lc(e[1])<<24|Lc(e[2])<<16|Lc(e[3])<<8|FE(e[4]))>>>0:(e=N9.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=U9.exec(n))?parseInt(e[1],16)>>>0:(e=F9.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=I9.exec(n))?(LE(NE(e[1]),$m(e[2]),$m(e[3]))|255)>>>0:(e=L9.exec(n))?(LE(NE(e[1]),$m(e[2]),$m(e[3]))|FE(e[4]))>>>0:null}function Fx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function LE(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=Fx(r,i,n+1/3),a=Fx(r,i,n),o=Fx(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function Lc(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function NE(n){return(parseFloat(n)%360+360)%360/360}function FE(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function $m(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function kE(n){let e=O9(n);if(e===null)return n;e=e||0;let t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}const hh=(n,e,t)=>{if(Ie.fun(n))return n;if(Ie.arr(n))return hh({range:n,output:e,extrapolate:t});if(Ie.str(n.output[0]))return n_(n);const i=n,r=i.output,s=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",o=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(u=>u);return u=>{const d=H9(u,s);return z9(u,s[d],s[d+1],r[d],r[d+1],l,a,o,i.map)}};function z9(n,e,t,i,r,s,a,o,l){let u=l?l(n):n;if(u<e){if(a==="identity")return u;a==="clamp"&&(u=e)}if(u>t){if(o==="identity")return u;o==="clamp"&&(u=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),i===-1/0?u=-u:r===1/0?u=u+i:u=u*(r-i)+i,u)}function H9(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}const G9=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const i=t*n,r=e==="end"?Math.floor(i):Math.ceil(i);return P9(0,1,r/n)},f0=1.70158,eg=f0*1.525,UE=f0+1,OE=2*Math.PI/3,zE=2*Math.PI/4.5,tg=n=>n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375,V9={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>1-(1-n)*(1-n),easeInOutQuad:n=>n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2,easeInCubic:n=>n*n*n,easeOutCubic:n=>1-Math.pow(1-n,3),easeInOutCubic:n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1-Math.pow(1-n,4),easeInOutQuart:n=>n<.5?8*n*n*n*n:1-Math.pow(-2*n+2,4)/2,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1-Math.pow(1-n,5),easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1-Math.pow(-2*n+2,5)/2,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n===0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n===1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n===0?0:n===1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2,easeInCirc:n=>1-Math.sqrt(1-Math.pow(n,2)),easeOutCirc:n=>Math.sqrt(1-Math.pow(n-1,2)),easeInOutCirc:n=>n<.5?(1-Math.sqrt(1-Math.pow(2*n,2)))/2:(Math.sqrt(1-Math.pow(-2*n+2,2))+1)/2,easeInBack:n=>UE*n*n*n-f0*n*n,easeOutBack:n=>1+UE*Math.pow(n-1,3)+f0*Math.pow(n-1,2),easeInOutBack:n=>n<.5?Math.pow(2*n,2)*((eg+1)*2*n-eg)/2:(Math.pow(2*n-2,2)*((eg+1)*(n*2-2)+eg)+2)/2,easeInElastic:n=>n===0?0:n===1?1:-Math.pow(2,10*n-10)*Math.sin((n*10-10.75)*OE),easeOutElastic:n=>n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n*10-.75)*OE)+1,easeInOutElastic:n=>n===0?0:n===1?1:n<.5?-(Math.pow(2,20*n-10)*Math.sin((20*n-11.125)*zE))/2:Math.pow(2,-20*n+10)*Math.sin((20*n-11.125)*zE)/2+1,easeInBounce:n=>1-tg(1-n),easeOutBounce:tg,easeInOutBounce:n=>n<.5?(1-tg(1-2*n))/2:(1+tg(2*n-1))/2,steps:G9};function Fw(){return Fw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Fw.apply(this,arguments)}const Uu=Symbol.for("FluidValue.get"),kl=Symbol.for("FluidValue.observers"),Ts=n=>!!(n&&n[Uu]),Br=n=>n&&n[Uu]?n[Uu]():n,HE=n=>n[kl]||null;function W9(n,e){n.eventObserved?n.eventObserved(e):n(e)}function d0(n,e){let t=n[kl];t&&t.forEach(i=>{W9(i,e)})}class j9{constructor(e){if(this[Uu]=void 0,this[kl]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");J9(this,e)}}const J9=(n,e)=>TB(n,Uu,e);function jh(n,e){if(n[Uu]){let t=n[kl];t||TB(n,kl,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function h0(n,e){let t=n[kl];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[kl]=null,n.observerRemoved&&n.observerRemoved(i,e)}}const TB=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Rg=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,X9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,GE=new RegExp(`(${Rg.source})(%|[a-z]+)`,"i"),K9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,av=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,PB=n=>{const[e,t]=Q9(n);if(!e||t_())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&av.test(t))return PB(t);if(t)return t}return n},Q9=n=>{const e=av.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]};let kx;const Y9=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,RB=n=>{kx||(kx=_o?new RegExp(`(${Object.keys(_o).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>Br(s).replace(av,PB).replace(X9,kE).replace(kx,kE)),t=e.map(s=>s.match(Rg).map(Number)),r=t[0].map((s,a)=>t.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(s=>hh(Fw({},n,{output:s})));return s=>{var a;const o=!GE.test(e[0])&&((a=e.find(u=>GE.test(u)))==null?void 0:a.replace(Rg,""));let l=0;return e[0].replace(Rg,()=>`${r[l++](s)}${o||""}`).replace(K9,Y9)}},r_="react-spring: ",DB=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${r_}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},Z9=DB(console.warn);function q9(){Z9(`${r_}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const $9=DB(console.warn);function e8(){$9(`${r_}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ov(n){return Ie.str(n)&&(n[0]=="#"||/\d/.test(n)||!t_()&&av.test(n)||n in(_o||{}))}const s_=t_()?N.useEffect:N.useLayoutEffect,t8=()=>{const n=N.useRef(!1);return s_(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function BB(){const n=N.useState()[1],e=t8();return()=>{e.current&&n(Math.random())}}function n8(n,e){const[t]=N.useState(()=>({inputs:e,result:n()})),i=N.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&i8(e,s.inputs)||(s={inputs:e,result:n()}):s=t,N.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function i8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}const IB=n=>N.useEffect(n,r8),r8=[];function VE(n){const e=N.useRef();return N.useEffect(()=>{e.current=n}),e.current}const ph=Symbol.for("Animated:node"),s8=n=>!!n&&n[ph]===n,Es=n=>n&&n[ph],a_=(n,e)=>b9(n,ph,e),lv=n=>n&&n[ph]&&n[ph].getPayload();class LB{constructor(){this.payload=void 0,a_(this,this)}getPayload(){return this.payload||[]}}class rf extends LB{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Ie.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new rf(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Ie.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ie.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Ou extends rf{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=hh({output:[e,e]})}static create(e){return new Ou(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Ie.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=hh({output:[this.getValue(),e]})),this._value=0,super.reset()}}const p0={dependencies:null};class o_ extends LB{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Aa(this.source,(i,r)=>{s8(i)?t[r]=i.getValue(e):Ts(i)?t[r]=Br(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Kt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Aa(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){p0.dependencies&&Ts(e)&&p0.dependencies.add(e);const t=lv(e);t&&Kt(t,i=>this.add(i))}}class l_ extends o_{constructor(e){super(e)}static create(e){return new l_(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(a8)),!0)}}function a8(n){return(ov(n)?Ou:rf).create(n)}function kw(n){const e=Es(n);return e?e.constructor:Ie.arr(n)?l_:ov(n)?Ou:rf}function m0(){return m0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},m0.apply(this,arguments)}const WE=(n,e)=>{const t=!Ie.fun(n)||n.prototype&&n.prototype.isReactComponent;return N.forwardRef((i,r)=>{const s=N.useRef(null),a=t&&N.useCallback(m=>{s.current=c8(r,m)},[r]),[o,l]=l8(i,e),u=BB(),d=()=>{const m=s.current;if(t&&!m)return;(m?e.applyAnimatedValues(m,o.getValue(!0)):!1)===!1&&u()},h=new o8(d,l),p=N.useRef();s_(()=>(p.current=h,Kt(l,m=>jh(m,h)),()=>{p.current&&(Kt(p.current.deps,m=>h0(m,p.current)),pt.cancel(p.current.update))})),N.useEffect(d,[]),IB(()=>()=>{const m=p.current;Kt(m.deps,g=>h0(g,m))});const v=e.getComponentProps(o.getValue());return N.createElement(n,m0({},v,{ref:a}))})};class o8{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&pt.write(this.update)}}function l8(n,e){const t=new Set;return p0.dependencies=t,n.style&&(n=m0({},n,{style:e.createAnimatedStyle(n.style)})),n=new o_(n),p0.dependencies=null,[n,t]}function c8(n,e){return n&&(Ie.fun(n)?n(e):n.current=e),e}const jE=Symbol.for("AnimatedComponent"),u8=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new o_(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=a=>{const o=JE(a)||"Anonymous";return Ie.str(a)?a=s[a]||(s[a]=WE(a,r)):a=a[jE]||(a[jE]=WE(a,r)),a.displayName=`Animated(${o})`,a};return Aa(n,(a,o)=>{Ie.arr(n)&&(o=JE(a)),s[o]=s(a)}),{animated:s}},JE=n=>Ie.str(n)?n:n&&Ie.str(n.displayName)?n.displayName:Ie.fun(n)&&n.name||null;function li(){return li=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},li.apply(this,arguments)}function fl(n,...e){return Ie.fun(n)?n(...e):n}const Rd=(n,e)=>n===!0||!!(e&&n&&(Ie.fun(n)?n(e):Or(n).includes(e))),NB=(n,e)=>Ie.obj(n)?e&&n[e]:n,FB=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,f8=n=>n,c_=(n,e=f8)=>{let t=d8;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Ie.und(s)||(i[r]=s)}return i},d8=["config","onProps","onStart","onChange","onPause","onResume","onRest"],h8={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function p8(n){const e={};let t=0;if(Aa(n,(i,r)=>{h8[r]||(e[r]=i,t++)}),t)return e}function kB(n){const e=p8(n);if(e){const t={to:e};return Aa(n,(i,r)=>r in e||(t[r]=i)),t}return li({},n)}function mh(n){return n=Br(n),Ie.arr(n)?n.map(mh):ov(n)?Us.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function m8(n){for(const e in n)return!0;return!1}function Uw(n){return Ie.fun(n)||Ie.arr(n)&&Ie.obj(n[0])}function g8(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function v8(n,e){if(e&&n.ref!==e){var t;(t=n.ref)==null||t.delete(n),e.add(n),n.ref=e}}const y8={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Ow=li({},y8.default,{mass:1,damping:1,easing:V9.linear,clamp:!1});class x8{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,Ow)}}function w8(n,e,t){t&&(t=li({},t),XE(t,e),e=li({},t,e)),XE(n,e),Object.assign(n,e);for(const a in Ow)n[a]==null&&(n[a]=Ow[a]);let{mass:i,frequency:r,damping:s}=n;return Ie.und(r)||(r<.01&&(r=.01),s<0&&(s=0),n.tension=Math.pow(2*Math.PI/r,2)*i,n.friction=4*Math.PI*s*i/r),n}function XE(n,e){if(!Ie.und(e.decay))n.duration=void 0;else{const t=!Ie.und(e.tension)||!Ie.und(e.friction);(t||!Ie.und(e.frequency)||!Ie.und(e.damping)||!Ie.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}const KE=[];class S8{constructor(){this.changed=!1,this.values=KE,this.toValues=null,this.fromValues=KE,this.to=void 0,this.from=void 0,this.config=new x8,this.immediate=!1}}function UB(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((a,o)=>{var l;let u,d,h=Rd((l=t.cancel)!=null?l:i==null?void 0:i.cancel,e);if(h)m();else{Ie.und(t.pause)||(r.paused=Rd(t.pause,e));let g=i==null?void 0:i.pause;g!==!0&&(g=r.paused||Rd(g,e)),u=fl(t.delay||0,e),g?(r.resumeQueue.add(v),s.pause()):(s.resume(),v())}function p(){r.resumeQueue.add(v),r.timeouts.delete(d),d.cancel(),u=d.time-pt.now()}function v(){u>0&&!Us.skipAnimation?(r.delayed=!0,d=pt.setTimeout(m,u),r.pauseQueue.add(p),r.timeouts.add(d)):m()}function m(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(p),r.timeouts.delete(d),n<=(r.cancelId||0)&&(h=!0);try{s.start(li({},t,{callId:n,cancel:h}),a)}catch(g){o(g)}}})}const u_=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?vu(n.get()):e.every(t=>t.noop)?OB(n.get()):as(n.get(),e.every(t=>t.finished)),OB=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),as=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),vu=n=>({value:n,cancelled:!0,finished:!1});function zB(n,e,t,i){const{callId:r,parentId:s,onRest:a}=e,{asyncTo:o,promise:l}=t;return!s&&n===o&&!e.reset?l:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const u=c_(e,(w,x)=>x==="onRest"?void 0:w);let d,h;const p=new Promise((w,x)=>(d=w,h=x)),v=w=>{const x=r<=(t.cancelId||0)&&vu(i)||r!==t.asyncId&&as(i,!1);if(x)throw w.result=x,h(w),w},m=(w,x)=>{const S=new QE,M=new YE;return(async()=>{if(Us.skipAnimation)throw gh(t),M.result=as(i,!1),h(M),M;v(S);const A=Ie.obj(w)?li({},w):li({},x,{to:w});A.parentId=r,Aa(u,(R,D)=>{Ie.und(A[D])&&(A[D]=R)});const E=await i.start(A);return v(S),t.paused&&await new Promise(R=>{t.resumeQueue.add(R)}),E})()};let g;if(Us.skipAnimation)return gh(t),as(i,!1);try{let w;Ie.arr(n)?w=(async x=>{for(const S of x)await m(S)})(n):w=Promise.resolve(n(m,i.stop.bind(i))),await Promise.all([w.then(d),p]),g=as(i.get(),!0,!1)}catch(w){if(w instanceof QE)g=w.result;else if(w instanceof YE)g=w.result;else throw w}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?o:void 0,t.promise=s?l:void 0)}return Ie.fun(a)&&pt.batchedUpdates(()=>{a(g,i,i.item)}),g})()}function gh(n,e){Td(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}class QE extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class YE extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const zw=n=>n instanceof f_;let M8=1;class f_ extends j9{constructor(...e){super(...e),this.id=M8++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Es(this);return e&&e.getValue()}to(...e){return Us.to(this,e)}interpolate(...e){return q9(),Us.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){d0(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||rv.sort(this),d0(this,{type:"priority",parent:this,priority:e})}}const Ul=Symbol.for("SpringPhase"),HB=1,Hw=2,Gw=4,Ux=n=>(n[Ul]&HB)>0,Xa=n=>(n[Ul]&Hw)>0,$f=n=>(n[Ul]&Gw)>0,ZE=(n,e)=>e?n[Ul]|=Hw|HB:n[Ul]&=~Hw,qE=(n,e)=>e?n[Ul]|=Gw:n[Ul]&=~Gw;class _8 extends f_{constructor(e,t){if(super(),this.key=void 0,this.animation=new S8,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ie.und(e)||!Ie.und(t)){const i=Ie.obj(e)?li({},e):li({},t,{from:e});Ie.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Xa(this)||this._state.asyncTo)||$f(this)}get goal(){return Br(this.animation.to)}get velocity(){const e=Es(this);return e instanceof rf?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Ux(this)}get isAnimating(){return Xa(this)}get isPaused(){return $f(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{config:s,toValues:a}=r;const o=lv(r.to);!o&&Ts(r.to)&&(a=Or(Br(r.to))),r.values.forEach((d,h)=>{if(d.done)return;const p=d.constructor==Ou?1:o?o[h].lastPosition:a[h];let v=r.immediate,m=p;if(!v){if(m=d.lastPosition,s.tension<=0){d.done=!0;return}let g=d.elapsedTime+=e;const w=r.fromValues[h],x=d.v0!=null?d.v0:d.v0=Ie.arr(s.velocity)?s.velocity[h]:s.velocity;let S;const M=s.precision||(w==p?.005:Math.min(1,Math.abs(p-w)*.001));if(Ie.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,E=Math.exp(-(1-A)*g);m=w+x/(1-A)*(1-E),v=Math.abs(d.lastPosition-m)<=M,S=x*E}else{S=d.lastVelocity==null?x:d.lastVelocity;const A=s.restVelocity||M/10,E=s.clamp?0:s.bounce,R=!Ie.und(E),D=w==p?d.v0>0:w<p;let T,B=!1;const L=1,H=Math.ceil(e/L);for(let Z=0;Z<H&&(T=Math.abs(S)>A,!(!T&&(v=Math.abs(p-m)<=M,v)));++Z){R&&(B=m==p||m>p==D,B&&(S=-S*E,m=p));const W=-s.tension*1e-6*(m-p),K=-s.friction*.001*S,ie=(W+K)/s.mass;S=S+ie*L,m=m+S*L}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,d.durationProgress>0&&(d.elapsedTime=s.duration*d.durationProgress,g=d.elapsedTime+=e)),A=(s.progress||0)+g/this._memoizedDuration,A=A>1?1:A<0?0:A,d.durationProgress=A),m=w+s.easing(A)*(p-w),S=(m-d.lastPosition)/e,v=A==1}d.lastVelocity=S,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),v=!0)}o&&!o[h].done&&(v=!1),v?d.done=!0:t=!1,d.setValue(m,s.round)&&(i=!0)});const l=Es(this),u=l.getValue();if(t){const d=Br(r.to);(u!==d||i)&&!s.decay?(l.setValue(d),this._onChange(d)):i&&s.decay&&this._onChange(u),this._stop()}else i&&this._onChange(u)}set(e){return pt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Xa(this)){const{to:e,config:t}=this.animation;pt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return Ie.und(e)?(i=this.queue||[],this.queue=[]):i=[Ie.obj(e)?e:li({},t,{to:e})],Promise.all(i.map(r=>this._update(r))).then(r=>u_(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),gh(this._state,e&&this._lastCallId),pt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=Ie.obj(i)?i[t]:i,(i==null||Uw(i))&&(i=void 0),r=Ie.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:i,from:r};return Ux(this)||(e.reverse&&([i,r]=[r,i]),r=Br(r),Ie.und(r)?Es(this)||this._set(i):this._set(r)),s}_update(e,t){let i=li({},e);const{key:r,defaultProps:s}=this;i.default&&Object.assign(s,c_(i,(l,u)=>/^on/.test(u)?NB(l,r):l)),eT(this,i,"onProps"),td(this,"onProps",i,this);const a=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return UB(++this._lastCallId,{key:r,props:i,defaultProps:s,state:o,actions:{pause:()=>{$f(this)||(qE(this,!0),hd(o.pauseQueue),td(this,"onPause",as(this,ed(this,this.animation.to)),this))},resume:()=>{$f(this)&&(qE(this,!1),Xa(this)&&this._resume(),hd(o.resumeQueue),td(this,"onResume",as(this,ed(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(l=>{if(i.loop&&l.finished&&!(t&&l.noop)){const u=GB(i);if(u)return this._update(u,!0)}return l})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(vu(this));const r=!Ie.und(e.to),s=!Ie.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(vu(this));const{key:a,defaultProps:o,animation:l}=this,{to:u,from:d}=l;let{to:h=u,from:p=d}=e;s&&!r&&(!t.default||Ie.und(h))&&(h=p),t.reverse&&([h,p]=[p,h]);const v=!aa(p,d);v&&(l.from=p),p=Br(p);const m=!aa(h,u);m&&this._focus(h);const g=Uw(t.to),{config:w}=l,{decay:x,velocity:S}=w;(r||s)&&(w.velocity=0),t.config&&!g&&w8(w,fl(t.config,a),t.config!==o.config?fl(o.config,a):void 0);let M=Es(this);if(!M||Ie.und(h))return i(as(this,!0));const A=Ie.und(t.reset)?s&&!t.default:!Ie.und(p)&&Rd(t.reset,a),E=A?p:this.get(),R=mh(h),D=Ie.num(R)||Ie.arr(R)||ov(R),T=!g&&(!D||Rd(o.immediate||t.immediate,a));if(m){const Z=kw(h);if(Z!==M.constructor)if(T)M=this._set(R);else throw Error(`Cannot animate between ${M.constructor.name} and ${Z.name}, as the "to" prop suggests`)}const B=M.constructor;let L=Ts(h),H=!1;if(!L){const Z=A||!Ux(this)&&v;(m||Z)&&(H=aa(mh(E),R),L=!H),(!aa(l.immediate,T)&&!T||!aa(w.decay,x)||!aa(w.velocity,S))&&(L=!0)}if(H&&Xa(this)&&(l.changed&&!A?L=!0:L||this._stop(u)),!g&&((L||Ts(u))&&(l.values=M.getPayload(),l.toValues=Ts(h)?null:B==Ou?[1]:Or(R)),l.immediate!=T&&(l.immediate=T,!T&&!A&&this._set(u)),L)){const{onRest:Z}=l;Kt(b8,K=>eT(this,t,K));const W=as(this,ed(this,u));hd(this._pendingCalls,W),this._pendingCalls.add(i),l.changed&&pt.batchedUpdates(()=>{l.changed=!A,Z==null||Z(W,this),A?fl(o.onRest,W):l.onStart==null||l.onStart(W,this)})}A&&this._set(E),g?i(zB(t.to,t,this._state,this)):L?this._start():Xa(this)&&!m?this._pendingCalls.add(i):i(OB(E))}_focus(e){const t=this.animation;e!==t.to&&(HE(this)&&this._detach(),t.to=e,HE(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ts(t)&&(jh(t,this),zw(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ts(e)&&h0(e,this)}_set(e,t=!0){const i=Br(e);if(!Ie.und(i)){const r=Es(this);if(!r||!aa(i,r.getValue())){const s=kw(i);!r||r.constructor!=s?a_(this,s.create(i)):r.setValue(i),r&&pt.batchedUpdates(()=>{this._onChange(i,t)})}}return Es(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,td(this,"onStart",as(this,ed(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),fl(this.animation.onChange,e,this)),fl(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Es(this).reset(Br(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Xa(this)||(ZE(this,!0),$f(this)||this._resume())}_resume(){Us.skipAnimation?this.finish():rv.start(this)}_stop(e,t){if(Xa(this)){ZE(this,!1);const i=this.animation;Kt(i.values,s=>{s.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),d0(this,{type:"idle",parent:this});const r=t?vu(this.get()):as(this.get(),ed(this,e??i.to));hd(this._pendingCalls,r),i.changed&&(i.changed=!1,td(this,"onRest",r,this))}}}function ed(n,e){const t=mh(e),i=mh(n.get());return aa(i,t)}function GB(n,e=n.loop,t=n.to){let i=fl(e);if(i){const r=i!==!0&&kB(i),s=(r||n).reverse,a=!r||r.reset;return vh(li({},n,{loop:e,default:!1,pause:void 0,to:!s||Uw(t)?t:void 0,from:a?n.from:void 0,reset:a},r))}}function vh(n){const{to:e,from:t}=n=kB(n),i=new Set;return Ie.obj(e)&&$E(e,i),Ie.obj(t)&&$E(t,i),n.keys=i.size?Array.from(i):null,n}function A8(n){const e=vh(n);return Ie.und(e.default)&&(e.default=c_(e)),e}function $E(n,e){Aa(n,(t,i)=>t!=null&&e.add(i))}const b8=["onStart","onRest","onChange","onPause","onResume"];function eT(n,e,t){n.animation[t]=e[t]!==FB(e,t)?NB(e[t],n.key):void 0}function td(n,e,...t){var i,r,s,a;(i=(r=n.animation)[e])==null||i.call(r,...t),(s=(a=n.defaultProps)[e])==null||s.call(a,...t)}const C8=["onStart","onChange","onRest"];let E8=1,T8=class{constructor(e,t){this.id=E8++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(li({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,i)=>e[i]=t.get()),e}set(e){for(const t in e){const i=e[t];Ie.und(i)||this.springs[t].set(i)}}update(e){return e&&this.queue.push(vh(e)),this}start(e){let{queue:t}=this;return e?t=Or(e).map(vh):this.queue=[],this._flush?this._flush(this,t):(XB(this,t),Vw(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const i=this.springs;Kt(Or(t),r=>i[r].stop(!!e))}else gh(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(Ie.und(e))this.start({pause:!0});else{const t=this.springs;Kt(Or(e),i=>t[i].pause())}return this}resume(e){if(Ie.und(e))this.start({pause:!1});else{const t=this.springs;Kt(Or(e),i=>t[i].resume())}return this}each(e){Aa(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:i}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Td(e,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const a=!r&&this._started,o=s||a&&i.size?this.get():null;s&&t.size&&Td(t,([l,u])=>{u.value=o,l(u,this,this._item)}),a&&(this._started=!1,Td(i,([l,u])=>{u.value=o,l(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;pt.onFrame(this._onFrame)}};function Vw(n,e){return Promise.all(e.map(t=>VB(n,t))).then(t=>u_(n,t))}async function VB(n,e,t){const{keys:i,to:r,from:s,loop:a,onRest:o,onResolve:l}=e,u=Ie.obj(e.default)&&e.default;a&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const d=Ie.arr(r)||Ie.fun(r)?r:void 0;d?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):Kt(C8,g=>{const w=e[g];if(Ie.fun(w)){const x=n._events[g];e[g]=({finished:S,cancelled:M})=>{const A=x.get(w);A?(S||(A.finished=!1),M&&(A.cancelled=!0)):x.set(w,{value:null,finished:S||!1,cancelled:M||!1})},u&&(u[g]=e[g])}});const h=n._state;e.pause===!h.paused?(h.paused=e.pause,hd(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const p=(i||Object.keys(n.springs)).map(g=>n.springs[g].start(e)),v=e.cancel===!0||FB(e,"cancel")===!0;(d||v&&h.asyncId)&&p.push(UB(++n._lastAsyncId,{props:e,state:h,actions:{pause:Lw,resume:Lw,start(g,w){v?(gh(h,n._lastAsyncId),w(vu(n))):(g.onRest=o,w(zB(d,g,h,n)))}}})),h.paused&&await new Promise(g=>{h.resumeQueue.add(g)});const m=u_(n,await Promise.all(p));if(a&&m.finished&&!(t&&m.noop)){const g=GB(e,a,r);if(g)return XB(n,[g]),VB(n,g,!0)}return l&&pt.batchedUpdates(()=>l(m,n,n.item)),m}function tT(n,e){const t=li({},n.springs);return e&&Kt(Or(e),i=>{Ie.und(i.keys)&&(i=vh(i)),Ie.obj(i.to)||(i=li({},i,{to:void 0})),JB(t,i,r=>jB(r))}),WB(n,t),t}function WB(n,e){Aa(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,jh(t,n))})}function jB(n,e){const t=new _8;return t.key=n,e&&jh(t,e),t}function JB(n,e,t){e.keys&&Kt(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function XB(n,e){Kt(e,t=>{JB(n.springs,t,i=>jB(i,n))})}function P8(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const R8=["children"],cv=n=>{let{children:e}=n,t=P8(n,R8);const i=N.useContext(g0),r=t.pause||!!i.pause,s=t.immediate||!!i.immediate;t=n8(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=g0;return N.createElement(a,{value:t},e)},g0=D8(cv,{});cv.Provider=g0.Provider;cv.Consumer=g0.Consumer;function D8(n,e){return Object.assign(n,N.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}const B8=()=>{const n=[],e=function(r){e8();const s=[];return Kt(n,(a,o)=>{if(Ie.und(r))s.push(a.start());else{const l=t(r,a,o);l&&s.push(a.start(l))}}),s};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return Kt(n,i=>i.pause(...arguments)),this},e.resume=function(){return Kt(n,i=>i.resume(...arguments)),this},e.set=function(i){Kt(n,r=>r.set(i))},e.start=function(i){const r=[];return Kt(n,(s,a)=>{if(Ie.und(i))r.push(s.start());else{const o=this._getProps(i,s,a);o&&r.push(s.start(o))}}),r},e.stop=function(){return Kt(n,i=>i.stop(...arguments)),this},e.update=function(i){return Kt(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(r,s,a){return Ie.fun(r)?r(a,s):r};return e._getProps=t,e};function I8(n,e,t){const i=Ie.fun(e)&&e;i&&!t&&(t=[]);const r=N.useMemo(()=>i||arguments.length==3?B8():void 0,[]),s=N.useRef(0),a=BB(),o=N.useMemo(()=>({ctrls:[],queue:[],flush(x,S){const M=tT(x,S);return s.current>0&&!o.queue.length&&!Object.keys(M).some(E=>!x.springs[E])?Vw(x,S):new Promise(E=>{WB(x,M),o.queue.push(()=>{E(Vw(x,S))}),a()})}}),[]),l=N.useRef([...o.ctrls]),u=[],d=VE(n)||0;N.useMemo(()=>{Kt(l.current.slice(n,d),x=>{g8(x,r),x.stop(!0)}),l.current.length=n,h(d,n)},[n]),N.useMemo(()=>{h(0,Math.min(d,n))},t);function h(x,S){for(let M=x;M<S;M++){const A=l.current[M]||(l.current[M]=new T8(null,o.flush)),E=i?i(M,A):e[M];E&&(u[M]=A8(E))}}const p=l.current.map((x,S)=>tT(x,u[S])),v=N.useContext(cv),m=VE(v),g=v!==m&&m8(v);s_(()=>{s.current++,o.ctrls=l.current;const{queue:x}=o;x.length&&(o.queue=[],Kt(x,S=>S())),Kt(l.current,(S,M)=>{r==null||r.add(S),g&&S.start({default:v});const A=u[M];A&&(v8(S,A.ref),S.ref?S.queue.push(A):S.start(A))})}),IB(()=>()=>{Kt(o.ctrls,x=>x.stop(!0))});const w=p.map(x=>li({},x));return r?[w,r]:w}function L8(n,e){const t=Ie.fun(n),[[i],r]=I8(1,t?n:[n],t?e||[]:e);return t||arguments.length==2?[i,r]:i}let nT;(function(n){n.MOUNT="mount",n.ENTER="enter",n.UPDATE="update",n.LEAVE="leave"})(nT||(nT={}));class N8 extends f_{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=hh(...t);const i=this._get(),r=kw(i);a_(this,r.create(i))}advance(e){const t=this._get(),i=this.get();aa(t,i)||(Es(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&iT(this._active)&&Ox(this)}_get(){const e=Ie.arr(this.source)?this.source.map(Br):Or(Br(this.source));return this.calc(...e)}_start(){this.idle&&!iT(this._active)&&(this.idle=!1,Kt(lv(this),e=>{e.done=!1}),Us.skipAnimation?(pt.batchedUpdates(()=>this.advance()),Ox(this)):rv.start(this))}_attach(){let e=1;Kt(Or(this.source),t=>{Ts(t)&&jh(t,this),zw(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Kt(Or(this.source),e=>{Ts(e)&&h0(e,this)}),this._active.clear(),Ox(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Or(this.source).reduce((t,i)=>Math.max(t,(zw(i)?i.priority:0)+1),0))}}function F8(n){return n.idle!==!1}function iT(n){return!n.size||Array.from(n).every(F8)}function Ox(n){n.idle||(n.idle=!0,Kt(lv(n),e=>{e.done=!0}),d0(n,{type:"idle",parent:n}))}Us.assign({createStringInterpolator:RB,to:(n,e)=>new N8(n,e)});const k8=["primitive"].concat(Object.keys(uh).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Us.assign({createStringInterpolator:RB,colors:R9,frameLoop:"demand"});C6(()=>{pt.advance()});const U8=u8(k8,{applyAnimatedValues:iu}),O8=U8.animated;function z8(n,e,t){return Math.max(e,Math.min(n,t))}const on={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function rT(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function sT(n,e,t,i=.15){return i===0?z8(n,e,t):n<e?-rT(e-n,t-e,i)+e:n>t?+rT(n-t,t-e,i)+t:n}function H8(n,[e,t],[i,r]){const[[s,a],[o,l]]=n;return[sT(e,s,a,i),sT(t,o,l,r)]}function G8(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function V8(n){var e=G8(n,"string");return typeof e=="symbol"?e:String(e)}function Hn(n,e,t){return e=V8(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function xn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aT(Object(t),!0).forEach(function(i){Hn(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aT(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const KB={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function oT(n){return n?n[0].toUpperCase()+n.slice(1):""}const W8=["enter","leave"];function j8(n=!1,e){return n&&!W8.includes(e)}function J8(n,e="",t=!1){const i=KB[n],r=i&&i[e]||e;return"on"+oT(n)+oT(r)+(j8(t,r)?"Capture":"")}const X8=["gotpointercapture","lostpointercapture"];function K8(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=X8.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function Q8(n,e=""){const t=KB[n],i=t&&t[e]||e;return n+i}function uv(n){return"touches"in n}function QB(n){return uv(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Y8(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function Z8(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function YB(n){return uv(n)?Z8(n)[0]:n}function Ww(n,e){try{const t=e.clientX-n.clientX,i=e.clientY-n.clientY,r=(e.clientX+n.clientX)/2,s=(e.clientY+n.clientY)/2,a=Math.hypot(t,i);return{angle:-(Math.atan2(t,i)*180)/Math.PI,distance:a,origin:[r,s]}}catch{}return null}function q8(n){return Y8(n).map(e=>e.identifier)}function lT(n,e){const[t,i]=Array.from(n.touches).filter(r=>e.includes(r.identifier));return Ww(t,i)}function zx(n){const e=YB(n);return uv(n)?e.identifier:e.pointerId}function zu(n){const e=YB(n);return[e.clientX,e.clientY]}const cT=40,uT=800;function ZB(n){let{deltaX:e,deltaY:t,deltaMode:i}=n;return i===1?(e*=cT,t*=cT):i===2&&(e*=uT,t*=uT),[e,t]}function $8(n){var e,t;const{scrollX:i,scrollY:r,scrollLeft:s,scrollTop:a}=n.currentTarget;return[(e=i??s)!==null&&e!==void 0?e:0,(t=r??a)!==null&&t!==void 0?t:0]}function eV(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:s})}return e}function v0(n,...e){return typeof n=="function"?n(...e):n}function tV(){}function nV(...n){return n.length===0?tV:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function fT(n,e){return Object.assign({},e,n||{})}const iV=32;class qB{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?v0(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,eV(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const R=t._delta.map(Math.abs);on.addTo(t._distance,R)}this.axisIntent&&this.axisIntent(e);const[a,o]=t._movement,[l,u]=i.threshold,{_step:d,values:h}=t;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(a)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(o)>=u&&h[1])):(d[0]===!1&&(d[0]=Math.abs(a)>=l&&Math.sign(a)*l),d[1]===!1&&(d[1]=Math.abs(o)>=u&&Math.sign(o)*u)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[R,D]=h;p[0]=d[0]!==!1?R-d[0]:0,p[1]=d[1]!==!1?D-d[1]:0}else p[0]=d[0]!==!1?a-d[0]:0,p[1]=d[1]!==!1?o-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const v=t.offset,m=t._active&&!t._blocked||t.active;m&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=v0(i.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[g,w]=t.offset,[[x,S],[M,A]]=t._bounds;t.overflow=[g<x?-1:g>S?1:0,w<M?-1:w>A?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const E=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=H8(t._bounds,t.offset,E),t.delta=on.sub(t.offset,v),this.computeMovement(),m&&(!t.last||s>iV)){t.delta=on.sub(t.offset,v);const R=t.delta.map(Math.abs);on.addTo(t.distance,R),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[R[0]/s,R[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(xn(xn(xn({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function rV([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class Jh extends qB{constructor(...e){super(...e),Hn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=on.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=on.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[QB(e)]:i.axisThreshold;t.axis=rV(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const sV=n=>n,dT=.15,$B={enabled(n=!0){return n},eventOptions(n,e,t){return xn(xn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[dT,dT];case!1:return[0,0];default:return on.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return on.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||sV},threshold(n){return on.toVector(n,0)}},aV=0,Kl=xn(xn({},$B),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=aV){return n},bounds(n={}){if(typeof n=="function")return s=>Kl.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),hT={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class oV extends Jh{constructor(...e){super(...e),Hn(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Kl.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=zx(e),i._pointerActive=!0,this.computeValues(zu(e)),this.computeInitial(),t.preventScrollAxis&&QB(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=zx(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const s=zu(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=on.sub(s,t._values),this.computeValues(s)),on.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=zx(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,a]=t._distance;if(t.tap=s<=i.tapsThreshold&&a<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[o,l]=t._delta,[u,d]=t._movement,[h,p]=i.swipe.velocity,[v,m]=i.swipe.distance,g=i.swipe.duration;if(t.elapsedTime<g){const w=Math.abs(o/t.timeDelta),x=Math.abs(l/t.timeDelta);w>h&&Math.abs(u)>v&&(t.swipe[0]=Math.sign(o)),x>p&&Math.abs(d)>m&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,lV(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=hT[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,on.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in hT&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function lV(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Xh=typeof window<"u"&&window.document&&window.document.createElement;function cV(){return Xh&&"ontouchstart"in window}function pT(){return cV()||Xh&&window.navigator.maxTouchPoints>1}function uV(){return Xh&&"onpointerdown"in window}function fV(){return Xh&&"exitPointerLock"in window.document}function dV(){try{return"constructor"in GestureEvent}catch{return!1}}const Nr={isBrowser:Xh,gesture:dV(),touch:pT(),touchscreen:pT(),pointer:uV(),pointerLock:fV()},hV=250,pV=180,mV=.5,gV=50,vV=250,yV=10,mT={mouse:0,touch:0,pen:8},xV=xn(xn({},Kl),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Nr.pointerLock,Nr.touch&&t?"touch":this.pointerLock?"mouse":Nr.pointer&&!r?"pointer":Nr.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?hV:void 0,!(!Nr.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const s=on.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=mV,distance:e=gV,duration:t=vV}={}){return{velocity:this.transform(on.toVector(n)),distance:this.transform(on.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return pV;case!1:return 0;default:return n}},axisThreshold(n){return n?xn(xn({},mT),n):mT},keyboardDisplacement(n=yV){return n}});function eI(n){const[e,t]=n.overflow,[i,r]=n._delta,[s,a]=n._direction;(e<0&&i>0&&s<0||e>0&&i<0&&s>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(n._movement[1]=n._movementBound[1])}const wV=30,SV=100;class MV extends qB{constructor(...e){super(...e),Hn(this,"ingKey","pinching"),Hn(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:i}=this.state;e==="wheel"?this.state.offset=on.add(t,i):this.state.offset=[(1+t[0])*i[0],t[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,i]=e._movement;if(!e.axis){const r=Math.abs(t)*wV-Math.abs(i);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,i=this.ctrl.touchIds;if(t._active&&t._touchIds.every(s=>i.has(s))||i.size<2)return;this.start(e),t._touchIds=Array.from(i).slice(0,2);const r=lT(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,i=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(i.keys()).every(a=>r.has(a))||(i.size<2&&i.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const s=Ww(...Array.from(i.values()));s&&this.pinchStart(e,s)}pinchStart(e,t){const i=this.state;i.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=lT(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const i=Ww(...Array.from(t.values()));i&&this.pinchMove(e,i)}pinchMove(e,t){const i=this.state,r=i._values[1],s=t.angle-r;let a=0;Math.abs(s)>270&&(a+=Math.sign(s)),this.computeValues([t.distance,t.angle-360*a]),i.origin=t.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const i=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=on.sub(t._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-ZB(e)[1]/SV*i.offset[0],0],on.addTo(i._movement,i._delta),eI(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const _V=xn(xn({},$B),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Nr.touch&&Nr.gesture)return"gesture";if(Nr.touch&&i)return"touch";if(Nr.touchscreen){if(Nr.pointer)return"pointer";if(Nr.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=a=>{const o=fT(v0(t,a),{min:-1/0,max:1/0});return[o.min,o.max]},s=a=>{const o=fT(v0(i,a),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof i!="function"?[r(),s()]:a=>[r(a),s(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",on.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class AV extends Jh{constructor(...e){super(...e),Hn(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(zu(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=zu(e),i=this.state;i._delta=on.sub(t,i._values),on.addTo(i._movement,i._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const bV=xn(xn({},Kl),{},{mouseOnly:(n=!0)=>n});class CV extends Jh{constructor(...e){super(...e),Hn(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,i=$8(e);t._delta=on.sub(i,t._values),on.addTo(t._movement,t._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const EV=Kl;class TV extends Jh{constructor(...e){super(...e),Hn(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=ZB(e),on.addTo(t._movement,t._delta),eI(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const PV=Kl;class RV extends Jh{constructor(...e){super(...e),Hn(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(zu(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const t=this.state;if(!t._active)return;t._active=!1;const i=zu(e);t._movement=t._delta=on.sub(i,t._values),this.computeValues(i),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const DV=xn(xn({},Kl),{},{mouseOnly:(n=!0)=>n}),d_=new Map,jw=new Map;function BV(n){d_.set(n.key,n.engine),jw.set(n.key,n.resolver)}const IV={key:"drag",engine:oV,resolver:xV},LV={key:"hover",engine:RV,resolver:DV},NV={key:"move",engine:AV,resolver:bV},FV={key:"pinch",engine:MV,resolver:_V},kV={key:"scroll",engine:CV,resolver:EV},UV={key:"wheel",engine:TV,resolver:PV};function OV(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function zV(n,e){if(n==null)return{};var t=OV(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const HV={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Nr.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},GV=["target","eventOptions","window","enabled","transform"];function Dg(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=Dg(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function VV(n,e,t={}){const i=n,{target:r,eventOptions:s,window:a,enabled:o,transform:l}=i,u=zV(i,GV);if(t.shared=Dg({target:r,eventOptions:s,window:a,enabled:o,transform:l},HV),e){const d=jw.get(e);t[e]=Dg(xn({shared:t.shared},u),d)}else for(const d in u){const h=jw.get(d);h&&(t[d]=Dg(xn({shared:t.shared},u[d]),h))}return t}class tI{constructor(e,t){Hn(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,s){const a=this._listeners,o=Q8(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=xn(xn({},l),s);e.addEventListener(o,r,u);const d=()=>{e.removeEventListener(o,r,u),a.delete(d)};return a.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class WV{constructor(){Hn(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class jV{constructor(e){Hn(this,"gestures",new Set),Hn(this,"_targetEventStore",new tI(this)),Hn(this,"gestureEventStores",{}),Hn(this,"gestureTimeoutStores",{}),Hn(this,"handlers",{}),Hn(this,"config",{}),Hn(this,"pointerIds",new Set),Hn(this,"touchIds",new Set),Hn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),JV(this,e)}setEventIds(e){if(uv(e))return this.touchIds=new Set(q8(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=VV(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const a of this.gestures){const o=this.config[a],l=gT(i,o.eventOptions,!!r);if(o.enabled){const u=d_.get(a);new u(this,e,a).bind(l)}}const s=gT(i,t.eventOptions,!!r);for(const a in this.nativeHandlers)s(a,"",o=>this.nativeHandlers[a](xn(xn({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const s in i)i[s]=nV(...i[s]);if(!r)return i;for(const s in i){const{device:a,capture:o,passive:l}=K8(s);this._targetEventStore.add(r,a,"",i[s],{capture:o,passive:l})}}}}function Nc(n,e){n.gestures.add(e),n.gestureEventStores[e]=new tI(n,e),n.gestureTimeoutStores[e]=new WV}function JV(n,e){e.drag&&Nc(n,"drag"),e.wheel&&Nc(n,"wheel"),e.scroll&&Nc(n,"scroll"),e.move&&Nc(n,"move"),e.pinch&&Nc(n,"pinch"),e.hover&&Nc(n,"hover")}const gT=(n,e,t)=>(i,r,s,a={},o=!1)=>{var l,u;const d=(l=a.capture)!==null&&l!==void 0?l:e.capture,h=(u=a.passive)!==null&&u!==void 0?u:e.passive;let p=o?i:J8(i,r,d);t&&h&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)},XV=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function KV(n){const e={},t={},i=new Set;for(let r in n)XV.test(r)?(i.add(RegExp.lastMatch),t[r]=n[r]):e[r]=n[r];return[t,e,i]}function Fc(n,e,t,i,r,s){if(!n.has(t)||!d_.has(i))return;const a=t+"Start",o=t+"End",l=u=>{let d;return u.first&&a in e&&e[a](u),t in e&&(d=e[t](u)),u.last&&o in e&&e[o](u),d};r[i]=l,s[i]=s[i]||{}}function QV(n,e){const[t,i,r]=KV(n),s={};return Fc(r,t,"onDrag","drag",s,e),Fc(r,t,"onWheel","wheel",s,e),Fc(r,t,"onScroll","scroll",s,e),Fc(r,t,"onPinch","pinch",s,e),Fc(r,t,"onMove","move",s,e),Fc(r,t,"onHover","hover",s,e),{handlers:s,config:e,nativeHandlers:i}}function YV(n,e={},t,i){const r=vn.useMemo(()=>new jV(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),vn.useEffect(r.effect.bind(r)),vn.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function ZV(n){return n.forEach(BV),function(t,i){const{handlers:r,nativeHandlers:s,config:a}=QV(t,i||{});return YV(r,a,void 0,s)}}function qV(n,e){return ZV([IV,FV,kV,UV,NV,LV])(n,e||{})}function $V({enabled:n=!0,snap:e,global:t,domElement:i,cursor:r=!0,children:s,speed:a=1,rotation:o=[0,0,0],zoom:l=1,polar:u=[0,Math.PI/2],azimuth:d=[-1/0,1/0],config:h={mass:1,tension:170,friction:26}}){const p=Ei(R=>R.events),v=Ei(R=>R.gl),m=i||p.connected||v.domElement,{size:g}=Ei(),w=N.useMemo(()=>[o[0]+u[0],o[0]+u[1]],[o[0],u[0],u[1]]),x=N.useMemo(()=>[o[1]+d[0],o[1]+d[1]],[o[1],d[0],d[1]]),S=N.useMemo(()=>[oo.clamp(o[0],...w),oo.clamp(o[1],...x),o[2]],[o[0],o[1],o[2],w,x]),[M,A]=L8(()=>({scale:1,rotation:S,config:h}));N.useEffect(()=>void A.start({scale:1,rotation:S,config:h}),[S]),N.useEffect(()=>{if(t&&r&&n)return m.style.cursor="grab",v.domElement.style.cursor="",()=>{m.style.cursor="default",v.domElement.style.cursor="default"}},[t,r,m,n]);const E=qV({onHover:({last:R})=>{r&&!t&&n&&(m.style.cursor=R?"auto":"grab")},onDrag:({down:R,delta:[D,T],memo:[B,L]=M.rotation.animation.to||S})=>{if(!n)return[T,D];r&&(m.style.cursor=R?"grabbing":"grab"),D=oo.clamp(L+D/g.width*Math.PI*a,...x),T=oo.clamp(B+T/g.height*Math.PI*a,...w);const H=e&&!R&&typeof e!="boolean"?e:h;return A.start({scale:R&&T>w[1]/2?l:1,rotation:e&&!R?S:[T,D,0],config:Z=>Z==="scale"?{...H,friction:H.friction*3}:H}),[T,D]}},{target:t?m:void 0});return N.createElement(O8.group,Eu({},E==null?void 0:E(),M),s)}let nd;function eW(){var n;if(nd!==void 0)return nd;try{let e;const t=document.createElement("canvas");return nd=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),nd}catch{return nd=!1}}function vT(n,e){if(e===KR)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===r0||e===aM){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===r0)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class h_ extends Vi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new sW(t)}),this.register(function(t){return new hW(t)}),this.register(function(t){return new pW(t)}),this.register(function(t){return new mW(t)}),this.register(function(t){return new oW(t)}),this.register(function(t){return new lW(t)}),this.register(function(t){return new cW(t)}),this.register(function(t){return new uW(t)}),this.register(function(t){return new rW(t)}),this.register(function(t){return new fW(t)}),this.register(function(t){return new aW(t)}),this.register(function(t){return new dW(t)}),this.register(function(t){return new nW(t)}),this.register(function(t){return new gW(t)}),this.register(function(t){return new vW(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Ls.extractUrlBase(e),this.manager.itemStart(e);const o=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new pr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,a,function(d){t(d),s.manager.itemEnd(e)},o)}catch(d){o(d)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ls.decodeText(new Uint8Array(e.slice(0,4)))===nI){try{a[Lt.KHR_BINARY_GLTF]=new yW(e)}catch(d){r&&r(d);return}s=JSON.parse(a[Lt.KHR_BINARY_GLTF].content)}else s=JSON.parse(Ls.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new DW(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);o[d.name]=d,a[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Lt.KHR_MATERIALS_UNLIT:a[d]=new iW;break;case Lt.KHR_DRACO_MESH_COMPRESSION:a[d]=new xW(s,this.dracoLoader);break;case Lt.KHR_TEXTURE_TRANSFORM:a[d]=new wW;break;case Lt.KHR_MESH_QUANTIZATION:a[d]=new SW;break;default:h.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function tW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Lt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class nW{constructor(e){this.parser=e,this.name=Lt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new Ee(16777215);l.color!==void 0&&d.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new OM(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new UM(d),u.distance=h;break;case"spot":u=new kM(d),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,no(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class iW{constructor(){this.name=Lt.KHR_MATERIALS_UNLIT}getMaterialType(){return ur}extendParams(e,t,i){const r=[];e.color=new Ee(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class rW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class sW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new se(o,o)}return Promise.all(s)}}class aW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class oW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ee(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class lW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class cW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ee(o[0],o[1],o[2]),Promise.all(s)}}class uW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class fW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Ee(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(s)}}class dW{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:zs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class hW{constructor(e){this.parser=e,this.name=Lt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class pW{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mW{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class gW{constructor(e){this.name=Lt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,u=r.byteLength||0,d=r.count,h=r.byteStride,p=new Uint8Array(o,l,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,h,p,r.mode,r.filter).then(function(v){return v.buffer}):a.ready.then(function(){const v=new ArrayBuffer(d*h);return a.decodeGltfBuffer(new Uint8Array(v),d,h,p,r.mode,r.filter),v})})}else return null}}class vW{constructor(e){this.name=Lt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==Rr.TRIANGLES&&u.mode!==Rr.TRIANGLE_STRIP&&u.mode!==Rr.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],l={};for(const u in a)o.push(this.parser.getDependency("accessor",a[u]).then(d=>(l[u]=d,l[u])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(u=>{const d=u.pop(),h=d.isGroup?d.children:[d],p=u[0].count,v=[];for(const m of h){const g=new je,w=new k,x=new Fn,S=new k(1,1,1),M=new wM(m.geometry,m.material,p);for(let A=0;A<p;A++)l.TRANSLATION&&w.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,A),l.SCALE&&S.fromBufferAttribute(l.SCALE,A),M.setMatrixAt(A,g.compose(w,x,S));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&m.geometry.setAttribute(A,l[A]);Ut.prototype.copy.call(M,m),this.parser.assignFinalMaterial(M),v.push(M)}return d.isGroup?(d.clear(),d.add(...v),d):v[0]}))}}const nI="glTF",id=12,yT={JSON:1313821514,BIN:5130562};class yW{constructor(e){this.name=Lt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,id);if(this.header={magic:Ls.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==nI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-id,r=new DataView(e,id);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===yT.JSON){const l=new Uint8Array(e,id+s,a);this.content=Ls.decodeText(l)}else if(o===yT.BIN){const l=id+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class xW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Lt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},u={};for(const d in a){const h=Jw[d]||d.toLowerCase();o[h]=a[d]}for(const d in e.attributes){const h=Jw[d]||d.toLowerCase();if(a[d]!==void 0){const p=i.accessors[e.attributes[d]],v=yu[p.componentType];u[h]=v.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(h){r.decodeDracoFile(d,function(p){for(const v in p.attributes){const m=p.attributes[v],g=l[v];g!==void 0&&(m.normalized=g)}h(p)},o,u)})})}}class wW{constructor(){this.name=Lt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class SW{constructor(){this.name=Lt.KHR_MESH_QUANTIZATION}}class iI extends ef{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,u=o*3,d=r-t,h=(i-t)/d,p=h*h,v=p*h,m=e*u,g=m-u,w=-2*v+3*p,x=v-p,S=1-w,M=x-p+h;for(let A=0;A!==o;A++){const E=a[g+A+o],R=a[g+A+l]*d,D=a[m+A+o],T=a[m+A]*d;s[A]=S*E+M*R+w*D+x*T}return s}}const MW=new Fn;class _W extends iI{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return MW.fromArray(s).normalize().toArray(s),s}}const Rr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},yu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xT={9728:ht,9729:qe,9984:eh,9985:U0,9986:pu,9987:Fs},wT={33071:Vn,33648:Tu,10497:Pi},Hx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Ea.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ka={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},AW={CUBICSPLINE:void 0,LINEAR:Ll,STEP:Pu},Gx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function bW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Gh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ns})),n.DefaultMaterial}function sl(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function no(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function CW(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let u=0,d=e.length;u<d;u++){const h=e[u];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;a.push(p)}if(r){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;o.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(u){const d=u[0],h=u[1],p=u[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function EW(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function TW(n){let e;const t=n.extensions&&n.extensions[Lt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Vx(t.attributes):e=n.indices+":"+Vx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+Vx(n.targets[i]);return e}function Vx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Xw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function PW(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const RW=new je;class DW{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new ev(this.options.manager):this.textureLoader=new VD(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};sl(s,o,r),no(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[u,d]of a.children.entries())s(d,o.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Lt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Ls.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=Hx[r.type],o=yu[r.componentType],l=r.normalized===!0,u=new o(r.count*a);return Promise.resolve(new bt(u,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=Hx[r.type],u=yu[r.componentType],d=u.BYTES_PER_ELEMENT,h=d*l,p=r.byteOffset||0,v=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let g,w;if(v&&v!==h){const x=Math.floor(p/v),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count;let M=t.cache.get(S);M||(g=new u(o,x*v,r.count*v/d),M=new Ph(g,v/d),t.cache.add(S,M)),w=new Do(M,l,p%v/d,m)}else o===null?g=new u(r.count*l):g=new u(o,p,r.count*l),w=new bt(g,l,m);if(r.sparse!==void 0){const x=Hx.SCALAR,S=yu[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,A=r.sparse.values.byteOffset||0,E=new S(a[1],M,r.sparse.count*x),R=new u(a[2],A,r.sparse.count*l);o!==null&&(w=new bt(w.array.slice(),w.itemSize,w.normalized));for(let D=0,T=E.length;D<T;D++){const B=E[D];if(w.setX(B,R[D*l]),l>=2&&w.setY(B,R[D*l+1]),l>=3&&w.setZ(B,R[D*l+2]),l>=4&&w.setW(B,R[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=a.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const p=(s.samplers||{})[a.sampler]||{};return d.magFilter=xT[p.magFilter]||qe,d.minFilter=xT[p.minFilter]||Fs,d.wrapS=wT[p.wrapS]||Pi,d.wrapT=wT[p.wrapT]||Pi,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",u=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(h){u=!0;const p=new Blob([h],{type:a.mimeType});return l=o.createObjectURL(p),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(p,v){let m=p;t.isImageBitmapLoader===!0&&(m=function(g){const w=new $t(g);w.needsUpdate=!0,p(w)}),t.load(Ls.resolveURL(h,s.path),m,void 0,v)})}).then(function(h){return u===!0&&o.revokeObjectURL(l),h.userData.mimeType=a.mimeType||PW(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[Lt.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Lt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Lt.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&("colorSpace"in a?a.colorSpace=r===3001?"srgb":"srgb-linear":a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Y0,Rn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Ri,Rn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Gh}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},u=[];if(l[Lt.KHR_MATERIALS_UNLIT]){const h=r[Lt.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),u.push(h.extendParams(o,s,t))}else{const h=s.pbrMetallicRoughness||{};if(o.color=new Ee(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;o.color.fromArray(p),o.opacity=p[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",h.baseColorTexture,3001)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=ha);const d=s.alphaMode||Gx.OPAQUE;if(d===Gx.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===Gx.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==ur&&(u.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new se(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;o.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&a!==ur&&(u.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==ur&&(o.emissive=new Ee().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==ur&&u.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const h=new a(o);return s.name&&(h.name=s.name),no(h,s),t.associations.set(h,{materials:e}),s.extensions&&sl(r,h,s),h})}createUniqueName(e){const t=kt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[Lt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return ST(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],d=TW(u),h=r[d];if(h)a.push(h.promise);else{let p;u.extensions&&u.extensions[Lt.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=ST(new mt,u,t),r[d]={primitive:u,promise:p},a.push(p)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,u=a.length;l<u;l++){const d=a[l].material===void 0?bW(this.cache):this.getDependency("material",a[l].material);o.push(d)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const u=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let v=0,m=d.length;v<m;v++){const g=d[v],w=a[v];let x;const S=u[v];if(w.mode===Rr.TRIANGLES||w.mode===Rr.TRIANGLE_STRIP||w.mode===Rr.TRIANGLE_FAN||w.mode===void 0)x=s.isSkinnedMesh===!0?new yM(g,S):new Wn(g,S),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),w.mode===Rr.TRIANGLE_STRIP?x.geometry=vT(x.geometry,aM):w.mode===Rr.TRIANGLE_FAN&&(x.geometry=vT(x.geometry,r0));else if(w.mode===Rr.LINES)x=new ms(g,S);else if(w.mode===Rr.LINE_STRIP)x=new _a(g,S);else if(w.mode===Rr.LINE_LOOP)x=new SM(g,S);else if(w.mode===Rr.POINTS)x=new MM(g,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(x.geometry.morphAttributes).length>0&&EW(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),no(x,s),w.extensions&&sl(r,x,w),t.assignFinalMaterial(x),h.push(x)}for(let v=0,m=h.length;v<m;v++)t.associations.set(h[v],{meshes:e,primitives:v});if(h.length===1)return s.extensions&&sl(r,h[0],s),h[0];const p=new ga;s.extensions&&sl(r,p,s),t.associations.set(p,{meshes:e});for(let v=0,m=h.length;v<m;v++)p.add(h[v]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new hn(oo.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Vl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),no(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let u=0,d=a.length;u<d;u++){const h=a[u];if(h){o.push(h);const p=new je;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new xM(o,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],a=[],o=[],l=[],u=[];for(let d=0,h=i.channels.length;d<h;d++){const p=i.channels[d],v=i.samplers[p.sampler],m=p.target,g=m.node,w=i.parameters!==void 0?i.parameters[v.input]:v.input,x=i.parameters!==void 0?i.parameters[v.output]:v.output;m.node!==void 0&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",w)),o.push(this.getDependency("accessor",x)),l.push(v),u.push(m))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(d){const h=d[0],p=d[1],v=d[2],m=d[3],g=d[4],w=[];for(let x=0,S=h.length;x<S;x++){const M=h[x],A=p[x],E=v[x],R=m[x],D=g[x];if(M===void 0)continue;M.updateMatrix();let T;switch(Ka[D.path]){case Ka.weights:T=Lu;break;case Ka.rotation:T=Bo;break;case Ka.position:case Ka.scale:default:T=Nu;break}const B=M.name?M.name:M.uuid,L=R.interpolation!==void 0?AW[R.interpolation]:Ll,H=[];Ka[D.path]===Ka.weights?M.traverse(function(W){W.morphTargetInfluences&&H.push(W.name?W.name:W.uuid)}):H.push(B);let Z=E.array;if(E.normalized){const W=Xw(Z.constructor),K=new Float32Array(Z.length);for(let ie=0,ue=Z.length;ie<ue;ie++)K[ie]=Z[ie]*W;Z=K}for(let W=0,K=H.length;W<K;W++){const ie=new T(H[W]+"."+Ka[D.path],A.array,Z,L);R.interpolation==="CUBICSPLINE"&&(ie.createInterpolant=function(pe){const I=this instanceof Bo?_W:iI;return new I(this.times,this.values,this.getValueSize()/3,pe)},ie.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),w.push(ie)}}return new Fu(r,void 0,w)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,u=r.weights.length;l<u;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let u=0,d=o.length;u<d;u++)a.push(i.getDependency("node",o[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(u){const d=u[0],h=u[1],p=u[2];p!==null&&d.traverse(function(v){v.isSkinnedMesh&&v.bind(p,RW)});for(let v=0,m=h.length;v<m;v++)d.add(h[v]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),this.nodeCache[e]=Promise.all(o).then(function(u){let d;if(s.isBone===!0?d=new Q0:u.length>1?d=new ga:u.length===1?d=u[0]:d=new Ut,d!==u[0])for(let h=0,p=u.length;h<p;h++)d.add(u[h]);if(s.name&&(d.userData.name=s.name,d.name=a),no(d,s),s.extensions&&sl(i,d,s),s.matrix!==void 0){const h=new je;h.fromArray(s.matrix),d.applyMatrix4(h)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new ga;i.name&&(s.name=r.createUniqueName(i.name)),no(s,i),i.extensions&&sl(t,s,i);const a=i.nodes||[],o=[];for(let l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let d=0,h=l.length;d<h;d++)s.add(l[d]);const u=d=>{const h=new Map;for(const[p,v]of r.associations)(p instanceof Rn||p instanceof $t)&&h.set(p,v);return d.traverse(p=>{const v=r.associations.get(p);v!=null&&h.set(p,v)}),h};return r.associations=u(s),s})}}function BW(n,e,t){const i=e.attributes,r=new Pa;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,u=o.max;if(l!==void 0&&u!==void 0){if(r.set(new k(l[0],l[1],l[2]),new k(u[0],u[1],u[2])),o.normalized){const d=Xw(yu[o.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new k,l=new k;for(let u=0,d=s.length;u<d;u++){const h=s[u];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],v=p.min,m=p.max;if(v!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(m[2]))),p.normalized){const g=Xw(yu[p.componentType]);l.multiplyScalar(g)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new Os;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function ST(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=Jw[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return no(n,e),BW(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?CW(n,e.targets,t):n})}const Wx=new WeakMap;class IW extends Vi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new pr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(Wx.has(e)){const l=Wx.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((u,d)=>{r._callbacks[s]={resolve:u,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Wx.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new mt;e.index&&t.setIndex(new bt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new bt(a,o))}return t}_loadLibrary(e,t){const i=new pr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=LW.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function LW(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,u=o.taskConfig;e.then(d=>{const h=d.draco,p=new h.Decoder,v=new h.DecoderBuffer;v.Init(new Int8Array(l),l.byteLength);try{const m=t(h,p,v,u),g=m.attributes.map(w=>w.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:o.id,error:m.message})}finally{h.destroy(v),h.destroy(p)}});break}};function t(a,o,l,u){const d=u.attributeIDs,h=u.attributeTypes;let p,v;const m=o.GetEncodedGeometryType(l);if(m===a.TRIANGULAR_MESH)p=new a.Mesh,v=o.DecodeBufferToMesh(l,p);else if(m===a.POINT_CLOUD)p=new a.PointCloud,v=o.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const g={index:null,attributes:[]};for(const w in d){const x=self[h[w]];let S,M;if(u.useUniqueIDs)M=d[w],S=o.GetAttributeByUniqueId(p,M);else{if(M=o.GetAttributeId(p,a[d[w]]),M===-1)continue;S=o.GetAttribute(p,M)}g.attributes.push(r(a,o,p,w,x,S))}return m===a.TRIANGULAR_MESH&&(g.index=i(a,o,p)),a.destroy(p),g}function i(a,o,l){const d=l.num_faces()*3,h=d*4,p=a._malloc(h);o.GetTrianglesUInt32Array(l,h,p);const v=new Uint32Array(a.HEAPF32.buffer,p,d).slice();return a._free(p),{array:v,itemSize:1}}function r(a,o,l,u,d,h){const p=h.num_components(),m=l.num_points()*p,g=m*d.BYTES_PER_ELEMENT,w=s(a,d),x=a._malloc(g);o.GetAttributeDataArrayForAllPoints(l,h,w,g,x);const S=new d(a.HEAPF32.buffer,x,m).slice();return a._free(x),{name:u,array:S,itemSize:p}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let ng;const jx=()=>{if(ng)return ng;const n="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",e="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",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const a=WebAssembly.instantiate(o(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function o(h){const p=new Uint8Array(h.length);for(let m=0;m<h.length;++m){const g=h.charCodeAt(m);p[m]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let v=0;for(let m=0;m<h.length;++m)p[v++]=p[m]<60?i[p[m]]:(p[m]-60)*64+p[++m];return p.buffer.slice(0,v)}function l(h,p,v,m,g,w){const x=s.exports.sbrk,S=v+3&-4,M=x(S*m),A=x(g.length),E=new Uint8Array(s.exports.memory.buffer);E.set(g,A);const R=h(M,v,m,A,g.length);if(R===0&&w&&w(M,S,m),p.set(E.subarray(M,M+v*m)),x(M-x(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ng={ready:a,supported:!0,decodeVertexBuffer(h,p,v,m,g){l(s.exports.meshopt_decodeVertexBuffer,h,p,v,m,s.exports[u[g]])},decodeIndexBuffer(h,p,v,m){l(s.exports.meshopt_decodeIndexBuffer,h,p,v,m)},decodeIndexSequence(h,p,v,m){l(s.exports.meshopt_decodeIndexSequence,h,p,v,m)},decodeGltfBuffer(h,p,v,m,g,w){l(s.exports[d[g]],h,p,v,m,s.exports[u[w]])}},ng};function NW(n,e,t,i){const r=class extends Mt{constructor(a={}){const o=Object.entries(n);super({uniforms:o.reduce((l,[u,d])=>{const h=dM.clone({[u]:{value:d}});return{...l,...h}},{}),vertexShader:e,fragmentShader:t}),this.key="",o.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:u=>this.uniforms[l].value=u})),Object.assign(this,a),i&&i(this)}};return r.key=oo.generateUUID(),r}let ig=null;function rI(n,e,t){return i=>{t&&t(i),n&&(ig||(ig=new IW),ig.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(ig)),e&&i.setMeshoptDecoder(typeof jx=="function"?jx():jx)}}function fv(n,e=!0,t=!0,i){return nf(h_,n,rI(e,t,i))}fv.preload=(n,e=!0,t=!0,i)=>nf.preload(h_,n,rI(e,t,i));fv.clear=n=>nf.clear(h_,n);const FW=N.forwardRef(function({children:e,disable:t,disableX:i,disableY:r,disableZ:s,left:a,right:o,top:l,bottom:u,front:d,back:h,onCentered:p,precise:v=!0,cacheKey:m=0,...g},w){const x=N.useRef(null),S=N.useRef(null),M=N.useRef(null);return N.useLayoutEffect(()=>{S.current.matrixWorld.identity();const A=new Pa().setFromObject(M.current,v),E=new k,R=new Os,D=A.max.x-A.min.x,T=A.max.y-A.min.y,B=A.max.z-A.min.z;A.getCenter(E),A.getBoundingSphere(R);const L=l?T/2:u?-T/2:0,H=a?-D/2:o?D/2:0,Z=d?B/2:h?-B/2:0;S.current.position.set(t||i?0:-E.x+H,t||r?0:-E.y+L,t||s?0:-E.z+Z),typeof p<"u"&&p({parent:x.current.parent,container:x.current,width:D,height:T,depth:B,boundingBox:A,boundingSphere:R,center:E,verticalAlignment:L,horizontalAlignment:H,depthAlignment:Z})},[m,p,l,a,d,t,i,r,s,v,o,u,h]),N.useImperativeHandle(w,()=>x.current,[]),N.createElement("group",Eu({ref:x},g),N.createElement("group",{ref:S},N.createElement("group",{ref:M},e)))}),kW=N.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],...a},o)=>{const l=N.useRef(null),u=N.useRef(Math.random()*1e4);return fh(d=>{var h,p;if(!e||t===0)return;const v=u.current+d.clock.getElapsedTime();l.current.rotation.x=Math.cos(v/4*t)/8*i,l.current.rotation.y=Math.sin(v/4*t)/8*i,l.current.rotation.z=Math.sin(v/4*t)/20*i;let m=Math.sin(v/4*t)/10;m=oo.mapLinear(m,-.1,.1,(h=s==null?void 0:s[0])!==null&&h!==void 0?h:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),l.current.position.y=m*r,l.current.updateMatrix()}),N.createElement("group",a,N.createElement("group",{ref:i9([l,o]),matrixAutoUpdate:!1},n))});function UW(){const[n,e]=N.useState({x:0,y:0,elementX:0,elementY:0,elementPositionX:0,elementPositionY:0}),t=N.useRef(null);return N.useLayoutEffect(()=>{const i=r=>{let s={x:r.pageX,y:r.pageY};if(t.current instanceof HTMLElement){const{left:a,top:o}=t.current.getBoundingClientRect(),l=a+window.pageXOffset,u=o+window.pageYOffset,d=r.pageX-l,h=r.pageY-u;s.elementX=d,s.elementY=h,s.elementX=d,s.elementY=h,s.elementPositionX=l,s.elementPositionY=u}e(a=>({...a,...s}))};return document.addEventListener("mousemove",i),()=>{document.removeEventListener("mousemove",i)}},[]),[n,t]}function OW(){const[n,e]=N.useState({width:null,height:null});return N.useLayoutEffect(()=>{const t=()=>{e({width:window.innerWidth,height:window.innerHeight})};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),n}var zW=`varying vec2 vUv;

void main()
{
    vec4 modelPosition = modelMatrix * vec4(position, 1.0);
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;

    gl_Position = projectionPosition;

    vUv = uv;
}`,HW=`uniform float uTime;
uniform vec3 uColorStart;
uniform vec3 uColorEnd;

varying vec2 vUv;

vec4 permute(vec4 x){ return mod(((x*34.0)+1.0)*x, 289.0); }
vec4 taylorInvSqrt(vec4 r){ return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }

float cnoise(vec3 P)
{
    vec3 Pi0 = floor(P); 
    vec3 Pi1 = Pi0 + vec3(1.0); 
    Pi0 = mod(Pi0, 289.0);
    Pi1 = mod(Pi1, 289.0);
    vec3 Pf0 = fract(P); 
    vec3 Pf1 = Pf0 - vec3(1.0); 
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;

    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);

    vec4 gx0 = ixy0 / 7.0;
    vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);

    vec4 gx1 = ixy1 / 7.0;
    vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);

    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;

    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);

    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 

    return 2.2 * n_xyz;
}

void main()
{
    
    vec2 displacedUv = vUv + cnoise(vec3(vUv * 15.0, uTime * 0.1));

    
    float strength = cnoise(vec3(displacedUv * 10.0, uTime * 0.2));

    
    
    

    
    strength += step(- 0.4, strength) * 12.0;

    
    

    
    vec3 color = mix(uColorStart, uColorEnd, strength);

    gl_FragColor = vec4(color, -.04);
}`;/**
 * postprocessing v6.33.0 build Fri Aug 11 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var Ql="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",GW=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,rg=class extends Mt{constructor(n=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:n?"2":"1"},uniforms:{inputBuffer:new ne(null),cocBuffer:new ne(null),texelSize:new ne(new se),kernel64:new ne(null),kernel16:new ne(null),scale:new ne(1)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:GW,vertexShader:Ql}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set cocBuffer(n){this.uniforms.cocBuffer.value=n}setCoCBuffer(n){this.uniforms.cocBuffer.value=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(n){return this.scale}setScale(n){this.scale=n}generateKernel(){const n=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let i=0,r=0;for(let s=0,a=Math.sqrt(80);s<80;++s){const o=s*n,l=Math.sqrt(s)/a,u=l*Math.cos(o),d=l*Math.sin(o);s%5===0?(t[r++]=u,t[r++]=d):(e[i++]=u,e[i++]=d)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},dt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},ru={RED:0,GREEN:1,BLUE:2,ALPHA:3},sI="",Qt="srgb",Hu="srgb-linear",pd={FULL:0,SINGLE:1},Dd={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},ds={NONE:0,DEPTH:1,CONVOLUTION:2},jt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},dl={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},sf={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},VW={SCALE_UP:"lut.scaleup"},p_={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},aI=Number(Ea.replace(/\D+/g,"")),m_=aI>=152,oI=new Map([[ps,Hu],[Wt,Qt]]),WW=new Map([[Hu,ps],[Qt,Wt]]);function ba(n){return n===null?null:m_?n.outputColorSpace:oI.get(n.outputEncoding)}function qn(n,e){n!==null&&(m_?n.colorSpace=e:n.encoding=WW.get(e))}function Jx(n,e){n===null||e===null||(m_?e.colorSpace=n.colorSpace:e.encoding=n.encoding)}function Kh(n){return aI<154?n.replace("colorspace_fragment","encodings_fragment"):n}function su(n,e,t){return n*(e-t)-e}function wl(n,e,t){return Math.min(Math.max((n+e)/(e-t),0),1)}var jW=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,JW=class extends Mt{constructor(n){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ne(null),focusDistance:new ne(0),focusRange:new ne(0),cameraNear:new ne(.3),cameraFar:new ne(1e3)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:jW,vertexShader:Ql}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(n)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ui){this.depthBuffer=n,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(n){this.uniforms.focusDistance.value=n}get worldFocusDistance(){return-su(this.focusDistance,this.near,this.far)}set worldFocusDistance(n){this.focusDistance=wl(-n,this.near,this.far)}getFocusDistance(n){this.uniforms.focusDistance.value=n}setFocusDistance(n){this.uniforms.focusDistance.value=n}get focalLength(){return this.focusRange}set focalLength(n){this.focusRange=n}get focusRange(){return this.uniforms.focusRange.value}set focusRange(n){this.uniforms.focusRange.value=n}get worldFocusRange(){return-su(this.focusRange,this.near,this.far)}set worldFocusRange(n){this.focusRange=wl(-n,this.near,this.far)}getFocalLength(n){return this.focusRange}setFocalLength(n){this.focusRange=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof hn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},XW=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,KW="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",QW=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],YW=class extends Mt{constructor(n=new Dt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ne(null),texelSize:new ne(new Dt),scale:new ne(1),kernel:new ne(0)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:XW,vertexShader:KW}),this.fragmentShader=Kh(this.fragmentShader),this.setTexelSize(n.x,n.y),this.kernelSize=sf.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return QW[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},ZW=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,lI=class extends Mt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ne(null),opacity:new ne(1)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ZW,vertexShader:Ql}),this.fragmentShader=Kh(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},qW=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,$W=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,e7=class extends Mt{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ne(null),cameraNear:new ne(.3),cameraFar:new ne(1e3)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qW,vertexShader:$W}),this.depthBuffer=n,this.depthPacking=ks,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ks){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof hn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},t7=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,n7=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,i7=class extends Mt{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new ne(null),texelPosition:new ne(new se)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:t7,vertexShader:n7}),this.depthCopyMode=pd.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set inputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ui){this.depthBuffer=n,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(n){this.uniforms.texelPosition.value=n}get mode(){return this.depthCopyMode}set mode(n){this.depthCopyMode=n,this.defines.DEPTH_COPY_MODE=n.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(n){this.mode=n}},r7=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in highp float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;highp float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){highp float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
highp vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
highp vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,s7="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",a7=class extends Mt{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ne(null),normalBuffer:new ne(null),texelSize:new ne(new se)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:r7,vertexShader:s7})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ui){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},o7=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.x*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.x=a+b/d;
#endif
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.y*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.y=a+b/d;
#endif
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,cI=class extends Mt{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:Dd.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new ne(null),depthBuffer0:new ne(null),depthBuffer1:new ne(null),cameraNearFar:new ne(new se(1,1))},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:o7,vertexShader:Ql}),this.depthMode=i0}set depthBuffer0(n){this.uniforms.depthBuffer0.value=n}set depthPacking0(n){this.defines.DEPTH_PACKING_0=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(n,e=ui){this.depthBuffer0=n,this.depthPacking0=e}set depthBuffer1(n){this.uniforms.depthBuffer1.value=n}set depthPacking1(n){this.defines.DEPTH_PACKING_1=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(n,e=ui){this.depthBuffer1=n,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(n){this.defines.DEPTH_TEST_STRATEGY=n.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(n){this.maxDepthStrategy=n?Dd.KEEP_MAX_DEPTH:Dd.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(n){this.maxDepthStrategy=n}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(n){this.defines.DEPTH_EPSILON=n.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(n){this.epsilon=n}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(n){let e;switch(n){case qS:e="false";break;case $S:e="true";break;case Zd:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case F0:e="abs(d1 - d0) > DEPTH_EPSILON";break;case i0:e="d0 > d1";break;case Yd:e="d0 >= d1";break;case eM:e="d0 <= d1";break;case tM:default:e="d0 < d1";break}this.defines.DEPTH_MODE=n.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(n){this.depthMode=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),n instanceof hn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},l7=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,c7="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",u7=class extends Mt{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ne(null),texelSize:new ne(new se)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:l7,vertexShader:c7}),this.fragmentShader=Kh(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},f7=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,d7="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",h7=class extends Mt{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Ea.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ne(null),depthBuffer:new ne(null),resolution:new ne(new se),texelSize:new ne(new se),cameraNear:new ne(.3),cameraFar:new ne(1e3),aspect:new ne(1),time:new ne(0)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ui){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=f7.replace(jt.FRAGMENT_HEAD,n.get(jt.FRAGMENT_HEAD)||"").replace(jt.FRAGMENT_MAIN_UV,n.get(jt.FRAGMENT_MAIN_UV)||"").replace(jt.FRAGMENT_MAIN_IMAGE,n.get(jt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=d7.replace(jt.VERTEX_HEAD,n.get(jt.VERTEX_HEAD)||"").replace(jt.VERTEX_MAIN_SUPPORT,n.get(jt.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Kh(this.fragmentShader),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof hn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return jt}},p7=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,m7=class extends Mt{constructor(n){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new ne(null),lightPosition:new ne(n),density:new ne(1),decay:new ne(1),weight:new ne(1),exposure:new ne(1),clampMax:new ne(1)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:p7,vertexShader:Ql})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(n){this.uniforms.lightPosition.value=n}get density(){return this.uniforms.density.value}set density(n){this.uniforms.density.value=n}getDensity(){return this.uniforms.density.value}setDensity(n){this.uniforms.density.value=n}get decay(){return this.uniforms.decay.value}set decay(n){this.uniforms.decay.value=n}getDecay(){return this.uniforms.decay.value}setDecay(n){this.uniforms.decay.value=n}get weight(){return this.uniforms.weight.value}set weight(n){this.uniforms.weight.value=n}getWeight(){return this.uniforms.weight.value}setWeight(n){this.uniforms.weight.value=n}get exposure(){return this.uniforms.exposure.value}set exposure(n){this.uniforms.exposure.value=n}getExposure(){return this.uniforms.exposure.value}setExposure(n){this.uniforms.exposure.value=n}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(n){this.uniforms.clampMax.value=n}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(n){this.uniforms.clampMax.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){const e=Math.floor(n);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}},g7=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,v7=class extends Mt{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ea.replace(/\D+/g,"")},uniforms:{inputBuffer:new ne(null),threshold:new ne(0),smoothing:new ne(1),range:new ne(null)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:g7,vertexShader:Ql}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},y7=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,x7=class extends Mt{constructor(n=null){super({name:"MaskMaterial",uniforms:{maskTexture:new ne(n),inputBuffer:new ne(null),strength:new ne(1)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:y7,vertexShader:Ql}),this.colorChannel=ru.RED,this.maskFunction=p_.DISCARD}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set maskTexture(n){this.uniforms.maskTexture.value=n,delete this.defines.MASK_PRECISION_HIGH,n.type!==cn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(n){this.maskTexture=n}set colorChannel(n){this.defines.COLOR_CHANNEL=n.toFixed(0),this.needsUpdate=!0}setColorChannel(n){this.colorChannel=n}set maskFunction(n){this.defines.MASK_FUNCTION=n.toFixed(0),this.needsUpdate=!0}setMaskFunction(n){this.maskFunction=n}get inverted(){return this.defines.INVERTED!==void 0}set inverted(n){this.inverted&&!n?delete this.defines.INVERTED:n&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get strength(){return this.uniforms.strength.value}set strength(n){this.uniforms.strength.value=n}getStrength(){return this.strength}setStrength(n){this.strength=n}},w7="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",S7="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",M7=class extends Mt{constructor(n=new se){super({name:"OutlineMaterial",uniforms:{inputBuffer:new ne(null),texelSize:new ne(new se)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:w7,vertexShader:S7}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},_7=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,A7="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",b7=class extends Mt{constructor(n){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ne(null),normalBuffer:new ne(null),normalDepthBuffer:new ne(null),noiseTexture:new ne(null),inverseProjectionMatrix:new ne(new je),projectionMatrix:new ne(new je),texelSize:new ne(new se),cameraNearFar:new ne(new se),distanceCutoff:new ne(new se),proximityCutoff:new ne(new se),noiseScale:new ne(new se),minRadiusScale:new ne(.33),intensity:new ne(1),fade:new ne(.01),bias:new ne(0)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_7,vertexShader:A7}),this.copyCameraSettings(n),this.resolution=new se,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(n){this.uniforms.normalDepthBuffer.value=n,n!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(n){this.normalDepthBuffer=n}set normalBuffer(n){this.uniforms.normalBuffer.value=n}setNormalBuffer(n){this.uniforms.normalBuffer.value=n}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ui){this.depthBuffer=n,this.depthPacking=e}set noiseTexture(n){this.uniforms.noiseTexture.value=n}setNoiseTexture(n){this.uniforms.noiseTexture.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){this.defines.SAMPLES_INT=n.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/n).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(n){this.defines.SPIRAL_TURNS=n.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(n){this.rings=n}get intensity(){return this.uniforms.intensity.value}set intensity(n){this.uniforms.intensity.value=n,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(n){this.uniforms.intensity.value=n}get fade(){return this.uniforms.fade.value}set fade(n){this.uniforms.fade.value=n}getFade(){return this.uniforms.fade.value}setFade(n){this.uniforms.fade.value=n}get bias(){return this.uniforms.bias.value}set bias(n){this.uniforms.bias.value=n}getBias(){return this.uniforms.bias.value}setBias(n){this.uniforms.bias.value=n}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(n){this.uniforms.minRadiusScale.value=n}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(n){this.uniforms.minRadiusScale.value=n}updateRadius(){const n=this.r*this.resolution.height;this.defines.RADIUS=n.toFixed(11),this.defines.RADIUS_SQ=(n*n).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(n){this.r=Math.min(Math.max(n,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(n){this.radius=n}get distanceScaling(){return!0}set distanceScaling(n){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(n){this.distanceScaling=n}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(n){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-su(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(n){this.distanceThreshold=wl(-n,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(n){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+n,0),1)}get worldDistanceFalloff(){return-su(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(n){this.distanceFalloff=wl(-n,this.near,this.far)}setDistanceCutoff(n,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(n){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-su(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(n){this.proximityThreshold=wl(-n,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(n){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+n,0),1)}get worldProximityFalloff(){return-su(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(n){this.proximityFalloff=wl(-n,this.near,this.far)}setProximityCutoff(n,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),this.uniforms.projectionMatrix.value.copy(n.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(n.projectionMatrix).invert(),n instanceof hn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms,i=t.noiseTexture.value;i!==null&&t.noiseScale.value.set(n/i.image.width,e/i.image.height),t.texelSize.value.set(1/n,1/e),this.resolution.set(n,e),this.updateRadius()}},C7=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,E7="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",T7=class extends Mt{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ne(null),supportBuffer:new ne(null),texelSize:new ne(new se),radius:new ne(.85)},blending:ln,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:C7,vertexShader:E7}),this.fragmentShader=Kh(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},P7=new Ku,Qa=null;function R7(){if(Qa===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Qa=new mt,Qa.setAttribute!==void 0?(Qa.setAttribute("position",new bt(n,3)),Qa.setAttribute("uv",new bt(e,2))):(Qa.addAttribute("position",new bt(n,3)),Qa.addAttribute("uv",new bt(e,2)))}return Qa}var jn=class uI{constructor(e="Pass",t=new Bu,i=P7){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Wn(R7(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Bu),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=ui){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ct||t instanceof Rn||t instanceof $t||t instanceof uI)&&this[e].dispose()}}},fI=class extends jn{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new lI,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Ct(1,1,{minFilter:qe,magFilter:qe,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==cn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":ba(n)===Qt&&qn(this.renderTarget.texture,Qt))}},D7=class extends jn{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},MT=new Ee,Qh=class extends jn{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=n.getClearAlpha(),l=s!==null,u=a>=0;l?(n.getClearColor(MT),n.setClearColor(s,u?a:o)):u&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(MT,o):u&&n.setClearAlpha(o)}},af=class extends jn{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Qh,this.overrideMaterialManager=t===null?null:new AT(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new AT(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=s.background,d=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,a):n.render(s,a),a.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=d}},g_=class extends jn{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Yt.AUTO_SIZE,height:s=Yt.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new af(n,e,new j0({depthPacking:ks}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const u=l.clearPass;u.overrideClearColor=new Ee(16777215),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ct(1,1,{minFilter:ht,magFilter:ht}),this.renderTarget.texture.name="DepthPass.Target");const d=this.resolution=new Yt(this,a,o,i);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},dI=class extends jn{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Yt.AUTO_SIZE,height:i=Yt.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new a7;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ct(1,1,{minFilter:ht,magFilter:ht,depthBuffer:!1,type:Pn}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Yt(this,r,s,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=ui){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},B7=class extends jn{constructor({depthPacking:n=ks}={}){super("DepthCopyPass");const e=new i7;e.outputDepthPacking=n,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ct(1,1,{type:n===ks?cn:Pn,minFilter:ht,magFilter:ht,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(n,e=ui){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.inputDepthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.renderTarget.setSize(n,e)}},sg=new Float32Array([255/256/256**3,255/256/256**2,255/256/256,255/256]);function I7(n){return(n[0]*sg[0]+n[1]*sg[1]+n[2]*sg[2]+n[3]*sg[3])/255}var L7=class extends B7{constructor({depthPacking:n=ks,mode:e=pd.SINGLE}={}){super({depthPacking:n}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=n===ks?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(n){return this.fullscreenMaterial.texelPosition.set(n.x*.5+.5,n.y*.5+.5),new Promise(e=>{this.callback=e})}render(n,e,t,i,r){const s=this.fullscreenMaterial,a=s.mode;if(a===pd.FULL&&super.render(n),this.callback!==null){const o=this.renderTarget,l=this.pixelBuffer,u=o.texture.type!==Pn;let d=0,h=0;if(a===pd.SINGLE)super.render(n);else{const p=s.texelPosition;d=Math.round(p.x*o.width),h=Math.round(p.y*o.height)}n.readRenderTargetPixels(o,d,h,1,1,l),this.callback(u?I7(l):l[0]),this.callback=null}}setSize(n,e){this.fullscreenMaterial.mode===pd.FULL&&super.setSize(n,e)}};function _T(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(s,r))}}function N7(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&t.attributes&ds.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let u=l.get(jt.FRAGMENT_HEAD)||"",d=l.get(jt.FRAGMENT_MAIN_UV)||"",h=l.get(jt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(jt.VERTEX_HEAD)||"",v=l.get(jt.VERTEX_MAIN_SUPPORT)||"";const m=new Set,g=new Set;if(a&&(d+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const S=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);v+=`	${n}MainSupport(`,v+=S?`vUv);
`:`);
`;for(const M of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const A of M[1].split(/\s*,\s*/))t.varyings.add(A),m.add(A),g.add(A);for(const M of r.matchAll(o))g.add(M[1])}for(const S of i.matchAll(o))g.add(S[1]);for(const S of e.defines.keys())g.add(S.replace(/\([\w\s,]*\)/g,""));for(const S of e.uniforms.keys())g.add(S);g.delete("while"),g.delete("for"),g.delete("if"),e.uniforms.forEach((S,M)=>t.uniforms.set(n+M.charAt(0).toUpperCase()+M.slice(1),S)),e.defines.forEach((S,M)=>t.defines.set(n+M.charAt(0).toUpperCase()+M.slice(1),S));const w=new Map([["fragment",i],["vertex",r]]);_T(n,g,t.defines),_T(n,g,w),i=w.get("fragment"),r=w.get("vertex");const x=e.blendMode;if(t.blendModes.set(x.blendFunction,x),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===Qt?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==sI?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&ds.DEPTH&&S.test(i)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const M=n+"BlendOpacity";t.uniforms.set(M,x.opacity),h+=`color0 = blend${x.blendFunction}(color0, color1, ${M});

	`,u+=`uniform float ${M};

`}if(u+=i+`
`,r!==null&&(p+=r+`
`),l.set(jt.FRAGMENT_HEAD,u),l.set(jt.FRAGMENT_MAIN_UV,d),l.set(jt.FRAGMENT_MAIN_IMAGE,h),l.set(jt.VERTEX_HEAD,p),l.set(jt.VERTEX_MAIN_SUPPORT,v),e.extensions!==null)for(const S of e.extensions)t.extensions.add(S)}}var F7=class extends jn{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new h7(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new W7;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===dt.DST)n.attributes|=a.getAttributes()&ds.DEPTH;else{if(n.attributes&a.getAttributes()&ds.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);N7("e"+e++,a,n)}let t=n.shaderParts.get(jt.FRAGMENT_HEAD),i=n.shaderParts.get(jt.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(jt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;n.attributes&ds.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Qt&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(jt.FRAGMENT_HEAD,t),n.shaderParts.set(jt.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(jt.FRAGMENT_MAIN_UV,r);for(const[a,o]of n.shaderParts)o!==null&&n.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=ui){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==cn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},dv=class extends jn{constructor({kernelSize:n=sf.MEDIUM,resolutionScale:e=.5,width:t=Yt.AUTO_SIZE,height:i=Yt.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Ct(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Yt(this,r,s,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new YW,this._blurMaterial.kernelSize=n,this.copyMaterial=new lI}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,d=u.kernelSequence;let h=e;this.fullscreenMaterial=u;for(let p=0,v=d.length;p<v;++p){const m=p&1?l:o;u.kernel=d[p],u.inputBuffer=h.texture,n.setRenderTarget(m),n.render(s,a),h=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==cn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):ba(n)===Qt&&(qn(this.renderTargetA.texture,Qt),qn(this.renderTargetB.texture,Qt)))}static get AUTO_SIZE(){return Yt.AUTO_SIZE}},k7=class extends jn{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=Yt.AUTO_SIZE,height:s=Yt.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new v7(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Yt(this,a,o,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==cn&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},U7=class extends jn{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Qh(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),a=n.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,h=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,d,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(o,l)):(n.setRenderTarget(e),n.render(o,l),n.setRenderTarget(t),n.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},O7=class extends jn{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new u7,this.upsamplingMaterial=new T7,this.resolution=new se}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:d}=this;let h=e;this.fullscreenMaterial=o;for(let p=0,v=u.length;p<v;++p){const m=u[p];o.setSize(h.width,h.height),o.inputBuffer=h.texture,n.setRenderTarget(m),n.render(s,a),h=m}this.fullscreenMaterial=l;for(let p=d.length-1;p>=0;--p){const v=d[p];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[p].texture,n.setRenderTarget(v),n.render(s,a),h=v}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==cn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(ba(n)===Qt)for(const r of i)qn(r.texture,Qt)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},z7=class extends jn{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Yt.AUTO_SIZE,height:s=Yt.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new af(n,e,new RM);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new Ee(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ct(1,1,{minFilter:ht,magFilter:ht}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new Yt(this,a,o,i);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},os=class extends jn{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==cn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Xx=1/1e3,H7=1e3,G7=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*Xx}get fixedDelta(){return this._fixedDelta*Xx}set fixedDelta(n){this._fixedDelta=n*H7}get elapsed(){return this._elapsed*Xx}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},V7=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new fI,this.depthTexture=null,this.passes=[],this.timer=new G7,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new se),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===cn&&ba(e)===Qt&&(qn(this.inputBuffer.texture,Qt),qn(this.outputBuffer.texture,Qt),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new J0;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Ro,e.type=wo):e.type=pa,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){const s=this.renderer,a=s===null?new se:s.getDrawingBufferSize(new se),o={minFilter:qe,magFilter:qe,stencilBuffer:t,depthBuffer:e,type:i},l=new Ct(a.width,a.height,o);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),i===cn&&ba(s)===Qt&&qn(l.texture,Qt),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new se),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,o),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){const a=(l,u)=>l||u.needsDepthTexture;t.reduce(a,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,a=!1,o,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const d of this.passes)d.enabled&&(d.render(t,r,s,e,a),d.needsSwap&&(a&&(i.renderToScreen=d.renderToScreen,o=t.getContext(),l=t.state.buffers.stencil,l.setFunc(o.NOTEQUAL,1,4294967295),i.render(t,r,s,e,a),l.setFunc(o.EQUAL,1,4294967295)),u=r,r=s,s=u),d instanceof U7?a=!0:d instanceof D7&&(a=!1))}setSize(e,t,i){const r=this.renderer,s=r.getSize(new se);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&r.setSize(e,t,i);const a=r.getDrawingBufferSize(new se);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},W7=class{constructor(){this.shaderParts=new Map([[jt.FRAGMENT_HEAD,null],[jt.FRAGMENT_MAIN_UV,null],[jt.FRAGMENT_MAIN_IMAGE,null],[jt.VERTEX_HEAD,null],[jt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ds.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Hu}},Kx=!1,AT=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ha:t=this.materialsFlatShadedDoubleSide;break;case pi:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ha:t=this.materialsDoubleSide;break;case pi:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Mt))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Ns;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=pi,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ha,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=pi,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ha,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Kx){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Kx}static set workaroundEnabled(n){Kx=n}},Ya=-1,Yt=class extends Vr{constructor(n,e=Ya,t=Ya,i=1){super(),this.resizable=n,this.baseSize=new se(1,1),this.preferredSize=new se(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new se,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Ya?t.width=e.width:e.height!==Ya?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Ya?t.height=e.height:e.width!==Ya?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Ya),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ya}},v_=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},j7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",J7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",X7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",K7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Q7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Y7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Z7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",q7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",$7="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",ej="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",tj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",nj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",ij="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",rj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",sj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",aj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",oj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",lj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",cj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",uj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",fj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",dj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",hj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",pj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",mj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",gj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",vj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",yj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",xj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",wj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Sj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Mj="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",_j=new Map([[dt.ADD,j7],[dt.ALPHA,J7],[dt.AVERAGE,X7],[dt.COLOR,K7],[dt.COLOR_BURN,Q7],[dt.COLOR_DODGE,Y7],[dt.DARKEN,Z7],[dt.DIFFERENCE,q7],[dt.DIVIDE,$7],[dt.DST,null],[dt.EXCLUSION,ej],[dt.HARD_LIGHT,tj],[dt.HARD_MIX,nj],[dt.HUE,ij],[dt.INVERT,rj],[dt.INVERT_RGB,sj],[dt.LIGHTEN,aj],[dt.LINEAR_BURN,oj],[dt.LINEAR_DODGE,lj],[dt.LINEAR_LIGHT,cj],[dt.LUMINOSITY,uj],[dt.MULTIPLY,fj],[dt.NEGATION,dj],[dt.NORMAL,hj],[dt.OVERLAY,pj],[dt.PIN_LIGHT,mj],[dt.REFLECT,gj],[dt.SATURATION,vj],[dt.SCREEN,yj],[dt.SOFT_LIGHT,xj],[dt.SRC,wj],[dt.SUBTRACT,Sj],[dt.VIVID_LIGHT,Mj]]),Aj=class extends Vr{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new ne(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return _j.get(this.blendFunction)}},zi=class extends Vr{constructor(n,e,{attributes:t=ds.NONE,blendFunction:i=dt.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new Aj(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Hu,this._outputColorSpace=sI}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=ui){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Ct||e instanceof Rn||e instanceof $t||e instanceof jn)&&this[n].dispose()}}},bj=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,hI=class extends zi{constructor({blendFunction:n=dt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:o=sf.LARGE,resolutionScale:l=.5,width:u=Yt.AUTO_SIZE,height:d=Yt.AUTO_SIZE,resolutionX:h=u,resolutionY:p=d}={}){super("BloomEffect",bj,{blendFunction:n,uniforms:new Map([["map",new ne(null)],["intensity",new ne(r)]])}),this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new dv({kernelSize:o}),this.luminancePass=new k7({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new O7,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const v=this.resolution=new Yt(this,h,p,l);v.addEventListener("change",m=>this.setSize(v.baseWidth,v.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,ba(n)===Qt&&qn(this.renderTarget.texture,Qt))}},Cj="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",Ej=class extends zi{constructor(n){super("ColorAverageEffect",Cj,{blendFunction:n})}},Tj=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}`,Pj=class extends zi{constructor(n,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,resolutionScale:l=1,width:u=Yt.AUTO_SIZE,height:d=Yt.AUTO_SIZE,resolutionX:h=u,resolutionY:p=d}={}){super("DepthOfFieldEffect",Tj,{blendFunction:e,attributes:ds.DEPTH,uniforms:new Map([["nearColorBuffer",new ne(null)],["farColorBuffer",new ne(null)],["nearCoCBuffer",new ne(null)],["scale",new ne(1)]])}),this.camera=n,this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new os(new JW(n));const v=this.cocMaterial;v.focusDistance=r,v.focusRange=a,t!==void 0&&(v.worldFocusDistance=t),i!==void 0&&(v.worldFocusRange=i),this.blurPass=new dv({resolutionScale:l,resolutionX:h,resolutionY:p,kernelSize:sf.MEDIUM}),this.maskPass=new os(new x7(this.renderTargetCoC.texture));const m=this.maskPass.fullscreenMaterial;m.maskFunction=p_.MULTIPLY_RGB_SET_ALPHA,m.colorChannel=ru.GREEN,this.bokehNearBasePass=new os(new rg(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new os(new rg(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new os(new rg(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new os(new rg(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const g=this.resolution=new Yt(this,h,p,l);g.addEventListener("change",w=>this.setSize(g.baseWidth,g.baseHeight)),this.bokehScale=o}set mainCamera(n){this.camera=n,this.cocMaterial.copyCameraSettings(n)}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(n){this.bokehNearBasePass.fullscreenMaterial.scale=n,this.bokehNearFillPass.fullscreenMaterial.scale=n,this.bokehFarBasePass.fullscreenMaterial.scale=n,this.bokehFarFillPass.fullscreenMaterial.scale=n,this.maskPass.fullscreenMaterial.strength=n,this.uniforms.get("scale").value=n}getBokehScale(){return this.bokehScale}setBokehScale(n){this.bokehScale=n}getTarget(){return this.target}setTarget(n){this.target=n}calculateFocusDistance(n){const e=this.camera,t=e.position.distanceTo(n);return wl(-t,e.near,e.far)}setDepthTexture(n,e=ui){this.circleOfConfusionMaterial.depthBuffer=n,this.circleOfConfusionMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){const o=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=o}this.cocPass.render(n,null,r),this.blurPass.render(n,r,s),this.maskPass.render(n,e,a),this.bokehFarBasePass.render(n,a,i),this.bokehFarFillPass.render(n,i,this.renderTargetFar),this.bokehNearBasePass.render(n,e,i),this.bokehNearFillPass.render(n,i,this.renderTargetNear)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.cocPass.setSize(n,e),this.blurPass.setSize(n,e),this.maskPass.setSize(n,e),this.renderTargetCoC.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetFar.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(n,e),this.bokehNearFillPass.fullscreenMaterial.setSize(n,e),this.bokehFarBasePass.fullscreenMaterial.setSize(n,e),this.bokehFarFillPass.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){this.cocPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.bokehNearBasePass.initialize(n,e,t),this.bokehNearFillPass.initialize(n,e,t),this.bokehFarBasePass.initialize(n,e,t),this.bokehFarFillPass.initialize(n,e,t),this.blurPass.initialize(n,e,cn),n.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,ba(n)===Qt&&(qn(this.renderTarget.texture,Qt),qn(this.renderTargetNear.texture,Qt),qn(this.renderTargetFar.texture,Qt),qn(this.renderTargetMasked.texture,Qt)))}};function bT(n,e,t){const i=document.createElement("canvas"),r=i.getContext("2d");if(i.width=n,i.height=e,t instanceof Image)r.drawImage(t,0,0);else{const s=r.createImageData(n,e);s.data.set(t),r.putImageData(s,0,0)}return i}var Rj=class pI{constructor(e=0,t=0,i=null){this.width=e,this.height=t,this.data=i}toCanvas(){return typeof document>"u"?null:bT(this.width,this.height,this.data)}static from(e){const{width:t,height:i}=e;let r;if(e instanceof Image){const s=bT(t,i,e);s!==null&&(r=s.getContext("2d").getImageData(0,0,t,i).data)}else r=e.data;return new pI(t,i,r)}},Dj=`"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,CT=new Ee,Bj=class Bg extends Mo{constructor(e,t){super(e,t,t,t),this.type=Pn,this.format=pn,this.minFilter=qe,this.magFilter=qe,this.wrapS=Vn,this.wrapT=Vn,this.wrapR=Vn,this.unpackAlignment=1,this.needsUpdate=!0,qn(this,Hu),this.domainMin=new k(0,0,0),this.domainMax=new k(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(e,t=!0){const i=this.image;let r;return e<=i.width?r=Promise.reject(new Error("The target size must be greater than the current size")):r=new Promise((s,a)=>{const o=URL.createObjectURL(new Blob([Dj],{type:"text/javascript"})),l=new Worker(o);l.addEventListener("error",d=>a(d.error)),l.addEventListener("message",d=>{const h=new Bg(d.data,e);Jx(this,h),h.type=this.type,h.name=this.name,URL.revokeObjectURL(o),s(h)});const u=t?[i.data.buffer]:[];l.postMessage({operation:VW.SCALE_UP,data:i.data,size:e},u)}),r}applyLUT(e){const t=this.image,i=e.image,r=Math.min(t.width,t.height,t.depth),s=Math.min(i.width,i.height,i.depth);if(r!==s)console.error("Size mismatch");else if(e.type!==Pn||this.type!==Pn)console.error("Both LUTs must be FloatType textures");else if(e.format!==pn||this.format!==pn)console.error("Both LUTs must be RGBA textures");else{const a=t.data,o=i.data,l=r,u=l**2,d=l-1;for(let h=0,p=l**3;h<p;++h){const v=h*4,m=a[v+0]*d,g=a[v+1]*d,w=a[v+2]*d,x=Math.round(m+g*l+w*u)*4;a[v+0]=o[x+0],a[v+1]=o[x+1],a[v+2]=o[x+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===Pn){const e=this.image.data,t=new Uint8Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]*255+.5;this.image.data=t,this.type=cn,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===cn){const e=this.image.data,t=new Float32Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]/255;this.image.data=t,this.type=Pn,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===Pn){for(let t=0,i=e.length;t<i;t+=4)CT.fromArray(e,t).convertLinearToSRGB().toArray(e,t);qn(this,Qt),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===Pn){for(let t=0,i=e.length;t<i;t+=4)CT.fromArray(e,t).convertSRGBToLinear().toArray(e,t);qn(this,Hu),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,i=new Bs(this.image.data,e,t);return i.name=this.name,i.type=this.type,i.format=this.format,i.minFilter=qe,i.magFilter=qe,i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.generateMipmaps=!1,i.needsUpdate=!0,Jx(this,i),i}static from(e){const t=e.image,{width:i,height:r}=t,s=Math.min(i,r);let a;if(t instanceof Image){const u=Rj.from(t).data;if(i>r){a=new Uint8Array(u.length);for(let d=0;d<s;++d)for(let h=0;h<s;++h)for(let p=0;p<s;++p){const v=(p+d*s+h*s*s)*4,m=(p+h*s+d*s*s)*4;a[m+0]=u[v+0],a[m+1]=u[v+1],a[m+2]=u[v+2],a[m+3]=u[v+3]}}else a=new Uint8Array(u.buffer)}else a=t.data.slice();const o=new Bg(a,s);return o.type=e.type,o.name=e.name,Jx(e,o),o}static createNeutral(e){const t=new Float32Array(e**3*4),i=e**2,r=1/(e-1);for(let a=0;a<e;++a)for(let o=0;o<e;++o)for(let l=0;l<e;++l){const u=(a+o*e+l*i)*4;t[u+0]=a*r,t[u+1]=o*r,t[u+2]=l*r,t[u+3]=1}const s=new Bg(t,e);return s.name="neutral",s}};function Ij(n,e,t){const i=new Map([[O0,1],[z0,1],[rM,2],[pn,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),t===cn){r=new Uint8Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()*255+.5}else{r=new Float32Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()}return r}var Kw=class extends Bs{constructor(n,e,t=O0,i=cn){super(Ij(n*e,t,i),n,e,t,i),this.needsUpdate=!0}},Lj="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",ag="Glitch.Generated";function Ki(n,e){return n+Math.random()*(e-n)}var Nj=class extends zi{constructor({chromaticAberrationOffset:n=null,delay:e=new se(1.5,3.5),duration:t=new se(.6,1),strength:i=new se(.3,1),columns:r=.05,ratio:s=.85,perturbationMap:a=null,dtSize:o=64}={}){if(super("GlitchEffect",Lj,{uniforms:new Map([["perturbationMap",new ne(null)],["columns",new ne(r)],["active",new ne(!1)],["random",new ne(1)],["seeds",new ne(new se)],["distortion",new ne(new se)]])}),a===null){const l=new Kw(o,o,pn);l.name=ag,this.perturbationMap=l}else this.perturbationMap=a;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=t,this.breakPoint=new se(Ki(this.delay.x,this.delay.y),Ki(this.duration.x,this.duration.y)),this.strength=i,this.mode=dl.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=n}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(n){this.delay.x=n}getMinDelay(){return this.delay.x}setMinDelay(n){this.delay.x=n}get maxDelay(){return this.delay.y}set maxDelay(n){this.delay.y=n}getMaxDelay(){return this.delay.y}setMaxDelay(n){this.delay.y=n}get minDuration(){return this.duration.x}set minDuration(n){this.duration.x=n}getMinDuration(){return this.duration.x}setMinDuration(n){this.duration.x=n}get maxDuration(){return this.duration.y}set maxDuration(n){this.duration.y=n}getMaxDuration(){return this.duration.y}setMaxDuration(n){this.duration.y=n}get minStrength(){return this.strength.x}set minStrength(n){this.strength.x=n}getMinStrength(){return this.strength.x}setMinStrength(n){this.strength.x=n}get maxStrength(){return this.strength.y}set maxStrength(n){this.strength.y=n}getMaxStrength(){return this.strength.y}setMaxStrength(n){this.strength.y=n}getMode(){return this.mode}setMode(n){this.mode=n}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(n){this.ratio=Math.min(Math.max(1-n,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(n){this.uniforms.get("columns").value=n}getGlitchColumns(){return this.columns}setGlitchColumns(n){this.columns=n}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(n){this.chromaticAberrationOffset=n}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(n){const e=this.perturbationMap;e!==null&&e.name===ag&&e.dispose(),n.minFilter=n.magFilter=ht,n.wrapS=n.wrapT=Pi,n.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=n}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(n){this.perturbationMap=n}generatePerturbationMap(n=64){const e=new Kw(n,n,pn);return e.name=ag,e}update(n,e,t){const i=this.mode,r=this.breakPoint,s=this.chromaticAberrationOffset,a=this.strength;let o=this.time,l=!1,u=0,d=0,h;i!==dl.DISABLED&&(i===dl.SPORADIC&&(o+=t,h=o>r.x,o>=r.x+r.y&&(r.set(Ki(this.delay.x,this.delay.y),Ki(this.duration.x,this.duration.y)),o=0)),u=Math.random(),this.uniforms.get("random").value=u,h&&u>this.ratio||i===dl.CONSTANT_WILD?(l=!0,u*=a.y*.03,d=Ki(-Math.PI,Math.PI),this.seeds.set(Ki(-a.y,a.y),Ki(-a.y,a.y)),this.distortion.set(Ki(0,1),Ki(0,1))):(h||i===dl.CONSTANT_MILD)&&(l=!0,u*=a.x*.03,d=Ki(-Math.PI,Math.PI),this.seeds.set(Ki(-a.x,a.x),Ki(-a.x,a.x)),this.distortion.set(Ki(0,1),Ki(0,1))),this.time=o),s!==null&&(l?s.set(Math.cos(d),Math.sin(d)).multiplyScalar(u):s.set(0,0)),this.uniforms.get("active").value=l}dispose(){const n=this.perturbationMap;n!==null&&n.name===ag&&n.dispose()}},Fj=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,Qx=new k,ET=new je,kj=class extends zi{constructor(n,e,{blendFunction:t=dt.SCREEN,samples:i=60,density:r=.96,decay:s=.9,weight:a=.4,exposure:o=.6,clampMax:l=1,blur:u=!0,kernelSize:d=sf.SMALL,resolutionScale:h=.5,width:p=Yt.AUTO_SIZE,height:v=Yt.AUTO_SIZE,resolutionX:m=p,resolutionY:g=v}={}){super("GodRaysEffect",Fj,{blendFunction:t,attributes:ds.DEPTH,uniforms:new Map([["map",new ne(null)]])}),this.camera=n,this._lightSource=e,this.lightSource=e,this.lightScene=new Bu,this.screenPosition=new se,this.renderTargetA=new Ct(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new Ct(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new J0,this.renderPassLight=new af(this.lightScene,n),this.renderPassLight.clearPass.overrideClearColor=new Ee(0),this.clearPass=new Qh(!0,!1,!1),this.clearPass.overrideClearColor=new Ee(0),this.blurPass=new dv({kernelSize:d}),this.blurPass.enabled=u,this.depthMaskPass=new os(new cI);const w=this.depthMaskMaterial;w.depthBuffer1=this.renderTargetLight.depthTexture,w.copyCameraSettings(n),this.godRaysPass=new os(new m7(this.screenPosition));const x=this.godRaysMaterial;x.density=r,x.decay=s,x.weight=a,x.exposure=o,x.maxIntensity=l,x.samples=i;const S=this.resolution=new Yt(this,m,g,h);S.addEventListener("change",M=>this.setSize(S.baseWidth,S.baseHeight))}set mainCamera(n){this.camera=n,this.renderPassLight.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}get lightSource(){return this._lightSource}set lightSource(n){this._lightSource=n,n!==null&&(n.material.depthWrite=!1,n.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.godRaysMaterial.dithering}set dithering(n){const e=this.godRaysMaterial;e.dithering=n,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}get samples(){return this.godRaysMaterial.samples}set samples(n){this.godRaysMaterial.samples=n}setDepthTexture(n,e=ui){this.depthMaskPass.fullscreenMaterial.depthBuffer0=n,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(n,e,t){const i=this.lightSource,r=i.parent,s=i.matrixAutoUpdate,a=this.renderTargetA,o=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),r!==null&&(s||ET.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(n,o),this.clearPass.render(n,a),this.depthMaskPass.render(n,o,a),i.material.depthWrite=!1,i.matrixAutoUpdate=s,r!==null&&(s||i.matrix.copy(ET),r.add(i)),Qx.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((Qx.x+1)*.5,-1),2),Math.min(Math.max((Qx.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(n,a,a),this.godRaysPass.render(n,a,this.renderTargetB)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.renderTargetLight.setSize(i,r),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.renderPassLight.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),this.godRaysPass.initialize(n,e,t),t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,this.renderTargetLight.texture.type=t,ba(n)===Qt&&(qn(this.renderTargetA.texture,Qt),qn(this.renderTargetB.texture,Qt),qn(this.renderTargetLight.texture,Qt)))}},Uj="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",Oj=class extends zi{constructor({blendFunction:n=dt.OVERLAY,scale:e=1,lineWidth:t=0}={}){super("GridEffect",Uj,{blendFunction:n,uniforms:new Map([["scale",new ne(new se)],["lineWidth",new ne(t)]])}),this.resolution=new se,this.s=0,this.scale=e,this.l=0,this.lineWidth=t}get scale(){return this.s}set scale(n){this.s=Math.max(n,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(n){this.scale=n}get lineWidth(){return this.l}set lineWidth(n){this.l=n,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(n){this.lineWidth=n}setSize(n,e){this.resolution.set(n,e);const t=n/e,i=this.scale*(e*.125);this.uniforms.get("scale").value.set(t*i,i),this.uniforms.get("lineWidth").value=i/e+this.lineWidth}},zj=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,Hj=class extends zi{constructor(n,{blendFunction:e=dt.SRC,tetrahedralInterpolation:t=!1,inputEncoding:i=Wt,inputColorSpace:r}={}){super("LUT3DEffect",zj,{blendFunction:e,uniforms:new Map([["lut",new ne(null)],["scale",new ne(new k)],["offset",new ne(new k)],["domainMin",new ne(null)],["domainMax",new ne(null)]])}),this.tetrahedralInterpolation=t,this.inputColorSpace=r||oI.get(i),this.lut=n}get inputEncoding(){return this.inputColorSpace}set inputEncoding(n){this.inputColorSpace=n}getInputEncoding(){return this.inputColorSpace}setInputEncoding(n){this.inputColorSpace=n}getOutputEncoding(){return this.outputColorSpace}get lut(){return this.uniforms.get("lut").value}set lut(n){const e=this.defines,t=this.uniforms;if(this.lut!==n&&(t.get("lut").value=n,n!==null)){const i=n.image,r=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),t.get("domainMin").value=null,t.get("domainMax").value=null,(n.type===Pn||n.type===er)&&e.set("LUT_PRECISION_HIGH","1"),i.width>i.height?e.set("LUT_STRIP_HORIZONTAL","1"):n instanceof Mo&&e.set("LUT_3D","1"),n instanceof Bj){const s=n.domainMin,a=n.domainMax;(s.x!==0||s.y!==0||s.z!==0||a.x!==1||a.y!==1||a.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),t.get("domainMin").value=s.clone(),t.get("domainMax").value=a.clone())}this.tetrahedralInterpolation=r}}getLUT(){return this.lut}setLUT(n){this.lut=n}updateScaleOffset(){const n=this.lut;if(n!==null){const e=Math.min(n.image.width,n.image.height),t=this.uniforms.get("scale").value,i=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&n instanceof Mo)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t)}else t.setScalar(e-1),i.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin).multiplyScalar(e);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t).addScalar(1/(2*e))}else t.setScalar((e-1)/e),i.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const n=this.lut;n!==null&&(n.minFilter=qe,n.magFilter=qe,this.tetrahedralInterpolation&&(n instanceof Mo?(n.minFilter=ht,n.magFilter=ht):console.warn("Tetrahedral interpolation requires a 3D texture")),n.source===void 0&&(n.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(n){n?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(n){this.tetrahedralInterpolation=n}},Gj=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,Vj="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",Wj=class extends zi{constructor(n,e,{blendFunction:t=dt.SCREEN,patternTexture:i=null,patternScale:r=1,edgeStrength:s=1,pulseSpeed:a=0,visibleEdgeColor:o=16777215,hiddenEdgeColor:l=2230538,kernelSize:u=sf.VERY_SMALL,blur:d=!1,xRay:h=!0,multisampling:p=0,resolutionScale:v=.5,width:m=Yt.AUTO_SIZE,height:g=Yt.AUTO_SIZE,resolutionX:w=m,resolutionY:x=g}={}){super("OutlineEffect",Gj,{uniforms:new Map([["maskTexture",new ne(null)],["edgeTexture",new ne(null)],["edgeStrength",new ne(s)],["visibleEdgeColor",new ne(new Ee(o))],["hiddenEdgeColor",new ne(new Ee(l))],["pulse",new ne(1)],["patternScale",new ne(r)],["patternTexture",new ne(null)]])}),this.blendMode.addEventListener("change",E=>{this.blendMode.blendFunction===dt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=i,this.xRay=h,this.scene=n,this.camera=e,this.renderTargetMask=new Ct(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Ct(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Qh,this.clearPass.overrideClearColor=new Ee(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new g_(n,e),this.maskPass=new af(n,e,new e7(this.depthPass.texture,e));const S=this.maskPass.clearPass;S.overrideClearColor=new Ee(16777215),S.overrideClearAlpha=1,this.blurPass=new dv({resolutionScale:v,resolutionX:w,resolutionY:x,kernelSize:u}),this.blurPass.enabled=d;const M=this.blurPass.resolution;M.addEventListener("change",E=>this.setSize(M.baseWidth,M.baseHeight)),this.outlinePass=new os(new M7);const A=this.outlinePass.fullscreenMaterial;A.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new v_,this.selection.layer=10,this.pulseSpeed=a}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=Pi,this.defines.set("USE_PATTERN","1"),this.setVertexShader(Vj)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,r=this.camera,s=this.selection,o=this.uniforms.get("pulse"),l=i.background,u=r.layers.mask;(this.forceUpdate||s.size>0)&&(i.background=null,o.value=1,this.pulseSpeed>0&&(o.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),r.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),r.layers.mask=u,i.background=l,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.depthPass.setSize(i,r),this.renderTargetOutline.setSize(i,r),this.outlinePass.fullscreenMaterial.setSize(i,r)}initialize(n,e,t){this.blurPass.initialize(n,e,cn),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}},jj="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",Jj=class extends zi{constructor(n=30){super("PixelationEffect",jj,{uniforms:new Map([["active",new ne(!1)],["d",new ne(new Dt)]])}),this.resolution=new se,this._granularity=0,this.granularity=n}get granularity(){return this._granularity}set granularity(n){let e=Math.floor(n);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(n){this.granularity=n}setSize(n,e){const t=this.resolution;t.set(n,e);const i=this.granularity,r=i/t.x,s=i/t.y;this.uniforms.get("d").value.set(r,s,1/r,1/s)}},Xj=class extends hI{constructor(n,e,t){super(t),this.setAttributes(this.getAttributes()|ds.DEPTH),this.camera=e,this.depthPass=new g_(n,e),this.clearPass=new Qh(!0,!1,!1),this.clearPass.overrideClearColor=new Ee(0),this.depthMaskPass=new os(new cI);const i=this.depthMaskMaterial;i.copyCameraSettings(e),i.depthBuffer1=this.depthPass.texture,i.depthPacking1=ks,i.depthMode=Zd,this.renderTargetMasked=new Ct(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new v_,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(n){this.depthPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(n){this._inverted=n,this.depthMaskMaterial.depthMode=n?F0:Zd}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(n){this._ignoreBackground=n,this.depthMaskMaterial.maxDepthStrategy=n?Dd.DISCARD_MAX_DEPTH:Dd.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}setDepthTexture(n,e=ui){this.depthMaskMaterial.depthBuffer0=n,this.depthMaskMaterial.depthPacking0=e}update(n,e,t){const i=this.camera,r=this.selection,s=this.inverted;let a=e;if(this.ignoreBackground||!s||r.size>0){const o=i.layers.mask;i.layers.set(r.layer),this.depthPass.render(n),i.layers.mask=o,a=this.renderTargetMasked,this.clearPass.render(n,a),this.depthMaskPass.render(n,e,a)}super.update(n,a,t)}setSize(n,e){super.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.depthPass.setSize(n,e)}initialize(n,e,t){super.initialize(n,e,t),this.clearPass.initialize(n,e,t),this.depthPass.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),n.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTargetMasked.texture.type=t,ba(n)===Qt&&qn(this.renderTargetMasked.texture,Qt))}},Kj=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,TT=64,Qj=class extends zi{constructor(n,e,{blendFunction:t=dt.MULTIPLY,samples:i=9,rings:r=7,normalDepthBuffer:s=null,depthAwareUpsampling:a=!0,worldDistanceThreshold:o,worldDistanceFalloff:l,worldProximityThreshold:u,worldProximityFalloff:d,distanceThreshold:h=.97,distanceFalloff:p=.03,rangeThreshold:v=5e-4,rangeFalloff:m=.001,minRadiusScale:g=.1,luminanceInfluence:w=.7,radius:x=.1825,intensity:S=1,bias:M=.025,fade:A=.01,color:E=null,resolutionScale:R=1,width:D=Yt.AUTO_SIZE,height:T=Yt.AUTO_SIZE,resolutionX:B=D,resolutionY:L=T}={}){super("SSAOEffect",Kj,{blendFunction:t,attributes:ds.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new ne(null)],["normalDepthBuffer",new ne(s)],["luminanceInfluence",new ne(w)],["color",new ne(null)],["intensity",new ne(S)],["scale",new ne(0)]])}),this.renderTarget=new Ct(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const H=this.resolution=new Yt(this,B,L,R);H.addEventListener("change",K=>this.setSize(H.baseWidth,H.baseHeight)),this.camera=n,this.depthDownsamplingPass=new dI({normalBuffer:e,resolutionScale:R}),this.depthDownsamplingPass.enabled=s===null,this.ssaoPass=new os(new b7(n));const Z=new Kw(TT,TT,pn);Z.wrapS=Z.wrapT=Pi;const W=this.ssaoMaterial;W.normalBuffer=e,W.noiseTexture=Z,W.minRadiusScale=g,W.samples=i,W.radius=x,W.rings=r,W.fade=A,W.bias=M,W.distanceThreshold=h,W.distanceFalloff=p,W.proximityThreshold=v,W.proximityFalloff=m,o!==void 0&&(W.worldDistanceThreshold=o),l!==void 0&&(W.worldDistanceFalloff=l),u!==void 0&&(W.worldProximityThreshold=u),d!==void 0&&(W.worldProximityFalloff=d),s!==null&&(this.ssaoMaterial.normalDepthBuffer=s,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=a,this.color=E}set mainCamera(n){this.camera=n,this.ssaoMaterial.copyCameraSettings(n)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(n){this.ssaoMaterial.normalBuffer=n,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=n}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(n){this.ssaoMaterial.samples=n}get rings(){return this.ssaoMaterial.rings}set rings(n){this.ssaoMaterial.rings=n}get radius(){return this.ssaoMaterial.radius}set radius(n){this.ssaoMaterial.radius=n}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(n){this.depthAwareUpsampling!==n&&(n?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(n){this.depthAwareUpsampling=n}get distanceScaling(){return!0}set distanceScaling(n){}get color(){return this.uniforms.get("color").value}set color(n){const e=this.uniforms,t=this.defines;n!==null?t.has("COLORIZE")?e.get("color").value.set(n):(t.set("COLORIZE","1"),e.get("color").value=new Ee(n),this.setChanged()):t.has("COLORIZE")&&(t.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(n){this.uniforms.get("luminanceInfluence").value=n}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getColor(){return this.color}setColor(n){this.color=n}setDistanceCutoff(n,e){this.ssaoMaterial.distanceThreshold=n,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(n,e){this.ssaoMaterial.proximityThreshold=n,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(n,e=ui){this.depthDownsamplingPass.setDepthTexture(n,e),this.ssaoMaterial.depthBuffer=n,this.ssaoMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(n),this.ssaoPass.render(n,null,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(i,r),this.renderTarget.setSize(i,r),this.depthDownsamplingPass.resolution.scale=t.scale,this.depthDownsamplingPass.setSize(n,e)}initialize(n,e,t){try{let i=this.uniforms.get("normalDepthBuffer").value;i===null&&(this.depthDownsamplingPass.initialize(n,e,t),i=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=i,this.ssaoMaterial.normalDepthBuffer=i,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},Yj=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,Zj=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,qj=class extends zi{constructor({blendFunction:n,texture:e=null,aspectCorrection:t=!1}={}){super("TextureEffect",Yj,{blendFunction:n,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new ne(null)],["scale",new ne(1)],["uvTransform",new ne(null)]])}),this.texture=e,this.aspectCorrection=t}get texture(){return this.uniforms.get("map").value}set texture(n){const e=this.texture,t=this.uniforms,i=this.defines;e!==n&&(t.get("map").value=n,t.get("uvTransform").value=n.matrix,i.delete("TEXTURE_PRECISION_HIGH"),n!==null&&(n.matrixAutoUpdate?(i.set("UV_TRANSFORM","1"),this.setVertexShader(Zj)):(i.delete("UV_TRANSFORM"),this.setVertexShader(null)),n.type!==cn&&i.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==n.type||e.encoding!==n.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(n){this.texture=n}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(n){this.aspectCorrection!==n&&(n?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const n=this.texture;return n!==null&&n.matrixAutoUpdate}set uvTransform(n){const e=this.texture;e!==null&&(e.matrixAutoUpdate=n)}setTextureSwizzleRGBA(n,e=n,t=n,i=n){const r="rgba";let s="";(n!==ru.RED||e!==ru.GREEN||t!==ru.BLUE||i!==ru.ALPHA)&&(s=[".",r[n],r[e],r[t],r[i]].join("")),this.defines.set("TEXEL","texel"+s),this.setChanged()}update(n,e,t){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}};const y_=N.createContext(null),Uo=N.createContext(null),$j=vn.memo(N.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:o,disableNormalPass:l,stencilBuffer:u,multisampling:d=8,frameBufferType:h=er},p)=>{const{gl:v,scene:m,camera:g,size:w}=Ei(),x=t||m,S=e||g,[M,A,E]=N.useMemo(()=>{const B=eW(),L=new V7(v,{depthBuffer:o,stencilBuffer:u,multisampling:d>0&&B?d:0,frameBufferType:h});L.addPass(new af(x,S));let H=null,Z=null;return l||(Z=new z7(x,S),Z.enabled=!1,L.addPass(Z),i!==void 0&&B&&(H=new dI({normalBuffer:Z.texture,resolutionScale:i}),H.enabled=!1,L.addPass(H))),[L,Z,H]},[S,v,o,u,d,h,x,l,i]);N.useEffect(()=>M==null?void 0:M.setSize(w.width,w.height),[M,w]),fh((B,L)=>{if(r){const H=v.autoClear;v.autoClear=a,u&&!a&&v.clearStencil(),M.render(L),v.autoClear=H}},r?s:0);const R=N.useRef(null),D=T6(R);N.useLayoutEffect(()=>{const B=[];if(R.current&&D.current&&M){const L=D.current.objects;for(let H=0;H<L.length;H++){const Z=L[H];if(Z instanceof zi){const W=[];for(;L[H]instanceof zi;)W.push(L[H++]);H--;const K=new F7(S,...W);B.push(K)}else Z instanceof jn&&B.push(Z)}for(const H of B)M==null||M.addPass(H);A&&(A.enabled=!0),E&&(E.enabled=!0)}return()=>{for(const L of B)M==null||M.removePass(L);A&&(A.enabled=!1),E&&(E.enabled=!1)}},[M,n,S,A,E,D]);const T=N.useMemo(()=>({composer:M,normalPass:A,downSamplingPass:E,resolutionScale:i,camera:S,scene:x}),[M,A,E,i,S,x]);return N.useImperativeHandle(p,()=>M,[M]),C(Uo.Provider,{value:T,children:C("group",{ref:R,children:n})})})),uo=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let eJ=0;const PT=new WeakMap,tJ=(n,e)=>vn.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},a){let o=PT.get(n);if(!o){const d=`@react-three/postprocessing/${n.name}-${eJ++}`;JM({[d]:n}),PT.set(n,o=d)}const l=Ei(d=>d.camera),u=vn.useMemo(()=>{var d,h;return[...(d=e==null?void 0:e.args)!=null?d:[],...(h=s.args)!=null?h:[{...e,...s}]]},[JSON.stringify(s)]);return C(o,{camera:l,"blendMode-blendFunction":i,"blendMode-opacity-value":r,...s,ref:a,args:u})}),og=(n,e)=>{const t=n[e];return vn.useMemo(()=>typeof t=="number"?new se(t,t):t?new se(...t):new se,[t])},nJ=N.forwardRef(function({target:e,depthTexture:t,...i},r){const s=Ei(l=>l.invalidate),{camera:a}=N.useContext(Uo),o=N.useMemo(()=>{const l=new Pj(a,i),u=l.maskPass.getFullscreenMaterial();return u.maskFunction=p_.MULTIPLY_RGB_SET_ALPHA,l},[a,i]);return N.useLayoutEffect(()=>{if(e&&typeof e!="number"){const l=e instanceof k?new k().set(e.x,e.y,e.z):new k().set(e[0],e[1],e[2]);o.target=l}t&&o.setDepthTexture(t.texture,t.packing),s()},[e,t,o]),C("primitive",{ref:r,object:o,dispose:null})});N.forwardRef(({target:n=void 0,mouse:e=!1,debug:t=void 0,manual:i=!1,smoothTime:r=.25,...s},a)=>{const o=N.useRef(null),l=N.useRef(null),u=N.useRef(null),d=Ei(({scene:E})=>E),h=Ei(({pointer:E})=>E),{composer:p,camera:v}=N.useContext(Uo),[m]=N.useState(()=>new L7),[g]=N.useState(()=>new fI);N.useEffect(()=>(p.addPass(m),p.addPass(g),()=>{p.removePass(m),p.removePass(g)}),[p,m,g]),N.useEffect(()=>()=>{m.dispose(),g.dispose()},[m,g]);const[w]=N.useState(()=>new k(0,0,0)),[x]=N.useState(()=>new k(0,0,0)),S=N.useCallback(async(E,R)=>(x.x=E,x.y=R,x.z=await m.readDepth(x),x.z=x.z*2-1,1-x.z>1e-7?x.unproject(v):!1),[x,m,v]),M=N.useCallback(async(E,R=!0)=>{var D;if(n)w.set(...n);else{const{x:T,y:B}=e?h:{x:0,y:0},L=await S(T,B);L&&w.copy(L)}R&&((D=o.current)!=null&&D.target)&&(r>0&&E>0?_9.damp3(o.current.target,w,r,E):o.current.target.copy(w))},[n,w,e,S,r,h]);fh(async(E,R)=>{var D;i||M(R),l.current&&l.current.position.copy(w),u.current&&((D=o.current)!=null&&D.target)&&u.current.position.copy(o.current.target)});const A=N.useMemo(()=>({dofRef:o,hitpoint:w,update:M}),[w,M]);return N.useImperativeHandle(a,()=>A,[A]),te(bo,{children:[t?L6(te(bo,{children:[te("mesh",{ref:l,children:[C("sphereGeometry",{args:[t,16,16]}),C("meshBasicMaterial",{color:"#00ff00",opacity:1,transparent:!0,depthWrite:!1})]}),te("mesh",{ref:u,children:[C("sphereGeometry",{args:[t/2,16,16]}),C("meshBasicMaterial",{color:"#00ff00",opacity:.5,transparent:!0,depthWrite:!1})]})]}),d):null,C(nJ,{ref:o,...s,target:w})]})});const iJ=tJ(hI,{blendFunction:dt.ADD});N.forwardRef(function({blendFunction:e=dt.NORMAL},t){const i=N.useMemo(()=>new Ej(e),[e]);return C("primitive",{ref:t,object:i,dispose:null})});N.forwardRef(function({active:e=!0,...t},i){const r=Ei(d=>d.invalidate),s=og(t,"delay"),a=og(t,"duration"),o=og(t,"strength"),l=og(t,"chromaticAberrationOffset"),u=N.useMemo(()=>new Nj({...t,delay:s,duration:a,strength:o,chromaticAberrationOffset:l}),[s,a,t,o,l]);return N.useLayoutEffect(()=>{u.mode=e?t.mode||dl.SPORADIC:dl.DISABLED,r()},[e,u,r,t.mode]),N.useEffect(()=>()=>{u.dispose()},[u]),C("primitive",{ref:i,object:u,dispose:null})});N.forwardRef(function(e,t){const{camera:i}=N.useContext(Uo),r=N.useMemo(()=>new kj(i,uo(e.sun),e),[i,e]);return N.useLayoutEffect(()=>void(r.lightSource=uo(e.sun)),[r,e.sun]),C("primitive",{ref:t,object:r,dispose:null})});N.forwardRef(function({size:e,...t},i){const r=Ei(a=>a.invalidate),s=N.useMemo(()=>new Oj(t),[t]);return N.useLayoutEffect(()=>{e&&s.setSize(e.width,e.height),r()},[s,e]),C("primitive",{ref:i,object:s,dispose:null})});N.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:o,hiddenEdgeColor:l,width:u,height:d,kernelSize:h,blur:p,xRay:v,...m},g){const w=Ei(E=>E.invalidate),{scene:x,camera:S}=N.useContext(Uo),M=N.useMemo(()=>new Wj(x,S,{blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:o,hiddenEdgeColor:l,width:u,height:d,kernelSize:h,blur:p,xRay:v,...m}),[i,p,S,s,d,l,h,r,a,x,o,u,v]),A=N.useContext(y_);return N.useEffect(()=>{if(!A&&e)return M.selection.set(Array.isArray(e)?e.map(uo):[uo(e)]),w(),()=>{M.selection.clear(),w()}},[M,e,A,w]),N.useEffect(()=>{M.selectionLayer=t,w()},[M,w,t]),N.useRef(),N.useEffect(()=>{var E;if(A&&A.enabled&&(E=A.selected)!=null&&E.length)return M.selection.set(A.selected),w(),()=>{M.selection.clear(),w()}},[A,M.selection,w]),C("primitive",{ref:g,object:M})});N.forwardRef(function({granularity:e=5},t){const i=N.useMemo(()=>new Jj(e),[e]);return C("primitive",{ref:t,object:i,dispose:null})});const rJ=(n,e)=>n.layers.enable(e.selection.layer),sJ=(n,e)=>n.layers.disable(e.selection.layer);N.forwardRef(function({selection:e=[],selectionLayer:t=10,lights:i=[],luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:o,height:l,kernelSize:u,mipmapBlur:d,...h},p){i.length===0&&console.warn("SelectiveBloom requires lights to work.");const v=Ei(S=>S.invalidate),{scene:m,camera:g}=N.useContext(Uo),w=N.useMemo(()=>new Xj(m,g,{blendFunction:dt.ADD,luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:o,height:l,kernelSize:u,mipmapBlur:d,...h}),[m,g,r,s,a,o,l,u,d,h]),x=N.useContext(y_);return N.useEffect(()=>{if(!x&&e)return w.selection.set(Array.isArray(e)?e.map(uo):[uo(e)]),v(),()=>{w.selection.clear(),v()}},[w,e,x,v]),N.useEffect(()=>{w.selection.layer=t,v()},[w,v,t]),N.useEffect(()=>{if(i&&i.length>0)return i.forEach(S=>rJ(uo(S),w)),v(),()=>{i.forEach(S=>sJ(uo(S),w)),v()}},[w,v,i,t]),N.useEffect(()=>{var S;if(x&&x.enabled&&(S=x.selected)!=null&&S.length)return w.selection.set(x.selected),v(),()=>{w.selection.clear(),v()}},[x,w.selection,v]),C("primitive",{ref:p,object:w,dispose:null})});N.forwardRef(function(e,t){const{camera:i,normalPass:r,downSamplingPass:s,resolutionScale:a}=N.useContext(Uo),o=N.useMemo(()=>r===null&&s===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new Qj(i,r&&!s?r.texture:null,{blendFunction:dt.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:s?s.texture:null,resolutionScale:a??1,depthAwareUpsampling:!0,...e}),[i,r,e]);return C("primitive",{ref:t,object:o,dispose:null})});N.forwardRef(function({textureSrc:e,texture:t,...i},r){const s=nf(ev,e);N.useLayoutEffect(()=>{s.encoding=Wt,s.wrapS=s.wrapT=Pi},[s]);const a=N.useMemo(()=>new qj({...i,texture:s||t}),[i,s,t]);return C("primitive",{ref:r,object:a,dispose:null})});N.forwardRef(function({lut:e,tetrahedralInterpolation:t,...i},r){const s=N.useMemo(()=>new Hj(e,i),[e,i]),a=Ei(o=>o.invalidate);return N.useLayoutEffect(()=>{t&&(s.tetrahedralInterpolation=t),e&&(s.lut=e),a()},[s,a,e,t]),C("primitive",{ref:r,object:s,dispose:null})});const aJ=`
uniform sampler2D uCharacters;
uniform float uCharactersCount;
uniform float uCellSize;
uniform bool uInvert;
uniform vec3 uColor;

const vec2 SIZE = vec2(16.);

vec3 greyscale(vec3 color, float strength) {
    float g = dot(color, vec3(0.299, 0.587, 0.114));
    return mix(color, vec3(g), strength);
}

vec3 greyscale(vec3 color) {
    return greyscale(color, 1.0);
}

void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {
    vec2 cell = resolution / uCellSize;
    vec2 grid = 1.0 / cell;
    vec2 pixelizedUV = grid * (0.5 + floor(uv / grid));
    vec4 pixelized = texture2D(inputBuffer, pixelizedUV);
    float greyscaled = greyscale(pixelized.rgb).r;

    if (uInvert) {
        greyscaled = 1.0 - greyscaled;
    }

    float characterIndex = floor((uCharactersCount - 1.0) * greyscaled);
    vec2 characterPosition = vec2(mod(characterIndex, SIZE.x), floor(characterIndex / SIZE.y));
    vec2 offset = vec2(characterPosition.x, -characterPosition.y) / SIZE;
    vec2 charUV = mod(uv * (cell / SIZE), 1.0 / SIZE) - vec2(0., 1.0 / SIZE) + offset;
    vec4 asciiCharacter = texture2D(uCharacters, charUV);

    asciiCharacter.rgb = uColor * asciiCharacter.r;
    asciiCharacter.a = pixelized.a;
    outputColor = asciiCharacter;
}
`;class oJ extends zi{constructor({characters:e=" .:,'-^=*+?!|0#X%WM@",fontSize:t=54,cellSize:i=16,color:r="#ffffff",invert:s=!1}={}){const a=new Map([["uCharacters",new ne(new $t)],["uCellSize",new ne(i)],["uCharactersCount",new ne(e.length)],["uColor",new ne(new Ee(r))],["uInvert",new ne(s)]]);super("ASCIIEffect",aJ,{uniforms:a});const o=this.uniforms.get("uCharacters");o&&(o.value=this.createCharactersTexture(e,t))}createCharactersTexture(e,t){const i=document.createElement("canvas"),r=1024,s=16,a=r/s;i.width=i.height=r;const o=new mD(i,void 0,Pi,Pi,ht,ht),l=i.getContext("2d");if(!l)throw new Error("Context not available");l.clearRect(0,0,r,r),l.font=`${t}px arial`,l.textAlign="center",l.textBaseline="middle",l.fillStyle="#fff";for(let u=0;u<e.length;u++){const d=e[u],h=u%s,p=Math.floor(u/s);l.fillText(d,h*a+a/2,p*a+a/2)}return o.needsUpdate=!0,o}}N.forwardRef(({characters:n=" .:,'-^=*+?!|0#X%WM@",fontSize:e=54,cellSize:t=16,color:i="#ffffff",invert:r=!1},s)=>{const a=N.useMemo(()=>new oJ({characters:n,fontSize:e,cellSize:t,color:i,invert:r}),[n,e,t,i,r]);return C("primitive",{ref:s,object:a})});var lJ=`#define GLSLIFY 1
uniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}`,cJ=`#define GLSLIFY 1
#define MODE_DEFAULT 0
#define MODE_REFLECTIONS 1
#define MODE_RAW_REFLECTION 2
#define MODE_BLURRED_REFLECTIONS 3
#define MODE_INPUT 4
#define MODE_BLUR_MIX 5
#define FLOAT_EPSILON 0.00001
uniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;
#include <boxBlur>
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}
#if RENDER_MODE == MODE_DEFAULT
outputColor=vec4(inputColor.rgb+reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_REFLECTIONS
outputColor=vec4(reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_RAW_REFLECTION
outputColor=vec4(reflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLURRED_REFLECTIONS
outputColor=vec4(blurredReflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_INPUT
outputColor=vec4(inputColor.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLUR_MIX
outputColor=vec4(vec3(blur),1.0);
#endif
}`,mI=`#define GLSLIFY 1
vec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}
#define Scale (vec3(0.8, 0.8, 0.8))
#define K (19.19)
vec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}`,uJ=`#define GLSLIFY 1
#define INV_EULER 0.36787944117144233
alpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;
#ifdef boxBlur
if(needsBlur)inputColor=boxBlurredColor;
#endif
if(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}`;class fJ extends Mt{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new ne(1),normalMap:new ne(null),normalScale:new ne(new se(1,1)),uvTransform:new ne(new Ci),roughness:new ne(1),roughnessMap:new ne(null)},vertexShader:`
                #ifdef USE_MRT
                 varying vec2 vHighPrecisionZW;
                #endif
                #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <common>
                #include <uv_pars_vertex>
                #include <displacementmap_pars_vertex>
                #include <normal_pars_vertex>
                #include <morphtarget_pars_vertex>
                #include <skinning_pars_vertex>
                #include <logdepthbuf_pars_vertex>
                #include <clipping_planes_pars_vertex>
                #ifdef USE_UV
                  ${Ea.replace(/\D+/g,"")>=151?"uniform mat3 uvTransform;":""}
                #endif
                void main() {
                    #include <uv_vertex>
                    #include <beginnormal_vertex>
                    #include <morphnormal_vertex>
                    #include <skinbase_vertex>
                    #include <skinnormal_vertex>
                    #include <defaultnormal_vertex>
                    #include <normal_vertex>
                    #include <begin_vertex>
                    #include <morphtarget_vertex>
                    #include <skinning_vertex>
                    #include <displacementmap_vertex>
                    #include <project_vertex>
                    #include <logdepthbuf_vertex>
                    #include <clipping_planes_vertex>
                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                        vViewPosition = - mvPosition.xyz;
                    #endif
                    #ifdef USE_MRT
                        vHighPrecisionZW = gl_Position.zw;
                    #endif
                    #ifdef USE_UV
                        vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
                    #endif
                }
            `,fragmentShader:`
                 #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <packing>
                #include <uv_pars_fragment>
                #include <normal_pars_fragment>
                #include <bumpmap_pars_fragment>
                #include <normalmap_pars_fragment>
                #include <logdepthbuf_pars_fragment>
                #include <clipping_planes_pars_fragment>
                #include <roughnessmap_pars_fragment>

                #ifdef USE_MRT
                layout(location = 0) out vec4 gNormal;
                layout(location = 1) out vec4 gDepth;

                varying vec2 vHighPrecisionZW;
                #endif
                uniform float roughness;
                void main() {
                    #include <clipping_planes_fragment>
                    #include <logdepthbuf_fragment>
                    #include <normal_fragment_begin>
                    #include <normal_fragment_maps>

                    float roughnessFactor = roughness;

                    if(roughness > 10.0e9){
                        roughnessFactor = 1.;
                    }else{
                        #ifdef useRoughnessMap
                            vec4 texelRoughness = texture2D( roughnessMap, vUv );
                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
                            roughnessFactor *= texelRoughness.g;
                        #endif
                    }

                    vec3 normalColor = packNormalToRGB( normal );
                    #ifdef USE_MRT
                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        vec4 depthColor = packDepthToRGBA( fragCoordZ );
                        gNormal = vec4( normalColor, roughnessFactor );
                        gDepth = depthColor;
                    #else
                        gl_FragColor = vec4(normalColor, roughnessFactor);
                    #endif
                }
            `,toneMapped:!1}),this.normalMapType=Ta,this.normalScale=new se(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?s0:null},set(e){}})}}var dJ=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,hJ=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;
#define INVALID_RAY_COORDS vec2(-1.0);
#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)
#define FLOAT_EPSILON 0.00001
float nearMinusFar;float nearMulFar;float farMinusNear;
#include <packing>
#include <helperFunctions>
vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;
#ifndef missedRays
if(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}
#endif
depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){
#if refineSteps == 0
if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;
#else
return BinarySearch(dir,hitPos,rayHitDepthDifference);
#endif
}
#ifndef missedRays
if(hitPos.z>0.0){return INVALID_RAY_COORDS;}
#endif
lastProjectedCoord=projectedCoord;}hitPos.z=1.0;
#ifndef missedRays
return INVALID_RAY_COORDS;
#endif
rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return nearMulFar/(farMinusNear*depth-cameraFar);
#else
return depth*nearMinusFar-cameraNear;
#endif
}
#include <common>
#include <cube_uv_reflection_fragment>
vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){
#if defined(ENVMAP_TYPE_CUBE_UV)
vec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;
#else
return vec3(0.0);
#endif
}`;class pJ extends Mt{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new ne(null),accumulatedTexture:new ne(null),normalTexture:new ne(null),depthTexture:new ne(null),_projectionMatrix:new ne(new je),_inverseProjectionMatrix:new ne(new je),cameraMatrixWorld:new ne(new je),cameraNear:new ne(0),cameraFar:new ne(0),rayDistance:new ne(0),intensity:new ne(0),roughnessFade:new ne(0),fade:new ne(0),thickness:new ne(0),ior:new ne(0),maxDepthDifference:new ne(0),jitter:new ne(0),jitterRoughness:new ne(0),maxRoughness:new ne(0),samples:new ne(0),envMap:new ne(null),envMapPosition:new ne(new k),envMapSize:new ne(new k),viewMatrix:new ne(new je)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:hJ.replace("#include <helperFunctions>",mI),vertexShader:dJ,toneMapped:!1,depthWrite:!1,depthTest:!1})}}const gI=n=>{const e=[n],t=[];for(;e.length!==0;){const i=e.shift();i.material&&t.push(i);for(const r of i.children)r.visible&&e.push(r)}return t},mJ=n=>{const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}},RT=(n,e,t)=>{n.uniforms.envMap.value=e;const i=mJ({envMapCubeUVHeight:t});n.defines.ENVMAP_TYPE_CUBE_UV="",n.defines.CUBEUV_TEXEL_WIDTH=i.texelWidth,n.defines.CUBEUV_TEXEL_HEIGHT=i.texelHeight,n.defines.CUBEUV_MAX_MIP=i.maxMip+".0",n.needsUpdate=!0},gJ=()=>{try{const n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}};class vJ extends jn{constructor(e,t={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=e,this._scene=e._scene,this._camera=e._camera,this.fullscreenMaterial=new pJ,e._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const i=t.width||typeof window<"u"?window.innerWidth:2e3,r=t.height||typeof window<"u"?window.innerHeight:1e3;this.renderTarget=new Ct(i,r,{minFilter:qe,magFilter:qe,type:er,depthBuffer:!1}),this.renderPass=new af(this._scene,this._camera),this.USE_MRT=gJ(),this.USE_MRT?(this.gBuffersRenderTarget=new cM(i,r,2,{minFilter:qe,magFilter:qe}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new g_(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=qe,this.webgl1DepthPass.renderTarget.magFilter=qe,this.webgl1DepthPass.renderTarget.texture.minFilter=qe,this.webgl1DepthPass.renderTarget.texture.magFilter=qe,this.webgl1DepthPass.setSize(typeof window<"u"?window.innerWidth:2e3,typeof window<"u"?window.innerHeight:1e3),this.gBuffersRenderTarget=new Ct(i,r,{minFilter:qe,magFilter:qe}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(e,t){this.renderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(e,t,i,r){this.ssrEffect[r]?t[i]!==e[i]&&(e[i]=t[i],e.uniforms[i].value=t[i],t[i]?e.defines[r]="":delete e.defines[r],e.needsUpdate=!0):e[i]!==void 0&&(e[i]=void 0,e.uniforms[i].value=void 0,delete e.defines[r],e.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=gI(this._scene);for(const e of this.visibleMeshes)if(e.material){const t=e.material;let[i,r]=this.cachedMaterials.get(e)||[];if(t!==i){r&&r.dispose(),r=new fJ,this.USE_MRT&&(r.defines.USE_MRT=""),r.normalScale=t.normalScale,r.uniforms.normalScale.value=t.normalScale;const s=t.map||t.normalMap||t.roughnessMap||t.metalnessMap;s&&(r.uniforms.uvTransform.value=s.matrix),this.cachedMaterials.set(e,[t,r])}this.keepMaterialMapUpdated(r,t,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(r,t,"roughnessMap","useRoughnessMap"),r.uniforms.roughness.value=this.ssrEffect.selection.size===0||this.ssrEffect.selection.has(e)?t.roughness||0:1e11,e.material=r}}unsetMRTMaterialInScene(){for(const t of this.visibleMeshes){var e;if(((e=t.material)==null?void 0:e.type)==="MRTMaterial"){t.visible=!0;const[i]=this.cachedMaterials.get(t);t.material=i}}}render(e,t){this.setMRTMaterialInScene(),e.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(e,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(e,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=t.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}}const DT={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};var yJ=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,xJ=`#define GLSLIFY 1
uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;
#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001
#define FLOAT_EPSILON 0.00001
#define FLOAT_ONE_MINUS_EPSILON 0.99999
vec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;
#ifdef boxBlur
vec3 boxBlurredColor=inputTexel.rgb;
#endif
vec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);
#ifdef dilation
if(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}
#endif
if(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){
#ifdef boxBlur
if(absX<=2&&absY<=2)boxBlurredColor+=col;
#endif
col=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;
#ifdef boxBlur
float pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);
#endif
if(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{
#ifdef boxBlur
accumulatedColor=boxBlurredColor;
#else
accumulatedColor=inputColor;
#endif
}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;
#include <custom_compose_shader>
gl_FragColor=vec4(undoColorTransform(outputColor),alpha);}`;class wJ extends Mt{constructor(e){const t=xJ.replace("#include <custom_compose_shader>",e);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new ne(null),accumulatedTexture:new ne(null),velocityTexture:new ne(null),lastVelocityTexture:new ne(null),samples:new ne(1),blend:new ne(.5),correction:new ne(1),exponent:new ne(1),invTexSize:new ne(new se)},defines:{correctionRadius:1},vertexShader:yJ,fragmentShader:t})}}const SJ=`
    #ifdef USE_SKINNING
      #ifdef BONE_TEXTURE
        uniform sampler2D prevBoneTexture;
        mat4 getPrevBoneMatrix( const in float i ) {
          float j = i * 4.0;
          float x = mod( j, float( boneTextureSize ) );
          float y = floor( j / float( boneTextureSize ) );
          float dx = 1.0 / float( boneTextureSize );
          float dy = 1.0 / float( boneTextureSize );
          y = dy * ( y + 0.5 );
          vec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );
          vec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );
          vec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );
          vec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );
          mat4 bone = mat4( v1, v2, v3, v4 );
          return bone;
        }
      #else
        uniform mat4 prevBoneMatrices[ MAX_BONES ];
        mat4 getPrevBoneMatrix( const in float i ) {
          mat4 bone = prevBoneMatrices[ int(i) ];
          return bone;
        }
      #endif
    #endif
`,MJ=`
    vec3 transformed;

    // Get the normal
    ${rt.skinbase_vertex}
    ${rt.beginnormal_vertex}
    ${rt.skinnormal_vertex}
    ${rt.defaultnormal_vertex}

    // Get the current vertex position
    transformed = vec3( position );
    ${rt.skinning_vertex}
    newPosition = velocityMatrix * vec4( transformed, 1.0 );

    // Get the previous vertex position
    transformed = vec3( position );
    ${rt.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}
    ${rt.skinning_vertex.replace(/vec4 /g,"")}
    prevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );

    gl_Position = newPosition;
`;class _J extends Mt{constructor(){super({uniforms:{prevVelocityMatrix:{value:new je},velocityMatrix:{value:new je},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`
                    #define MAX_BONES 1024

                    ${rt.skinning_pars_vertex}
                    ${SJ}

                    uniform mat4 velocityMatrix;
                    uniform mat4 prevVelocityMatrix;
                    uniform float interpolateGeometry;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
          varying vec2 vHighPrecisionZW;

                    void main() {

                        ${MJ}

            vHighPrecisionZW = gl_Position.zw;

                    }`,fragmentShader:`
                    uniform float intensity;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
          varying vec2 vHighPrecisionZW;

                    void main() {
            #ifdef FULL_MOVEMENT
            gl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );
            return;
            #endif

                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;
                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;

                        vec2 vel = pos1 - pos0;

            float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;

                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );

                    }`}),this.isVelocityMaterial=!0}}const AJ=new Ee(0),bJ=["visible","wireframe","side"];class CJ extends jn{constructor(e,t){var i,r;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new k,quaternion:new Fn},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=e,this._camera=t,this.renderTarget=new Ct(((i=window)==null?void 0:i.innerWidth)||1e3,((r=window)==null?void 0:r.innerHeight)||1e3,{type:er})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=gI(this._scene);for(const i of this.visibleMeshes){var e;const r=i.material;let[s,a]=this.cachedMaterials.get(i)||[];if(r!==s){var t;a=new _J,a.lastMatrixWorld=new je,i.material=a,(t=i.skeleton)!=null&&t.boneTexture&&this.saveBoneTexture(i),this.cachedMaterials.set(i,[r,a])}if(a.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,i.modelViewMatrix),i.userData.needsUpdatedReflections||r.map instanceof pD?("FULL_MOVEMENT"in a.defines||(a.needsUpdate=!0),a.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in a.defines&&(delete a.defines.FULL_MOVEMENT,a.needsUpdate=!0),i.visible=this.cameraMovedThisFrame||!i.matrixWorld.equals(a.lastMatrixWorld)||i.skeleton||"FULL_MOVEMENT"in a.defines,i.material=a,!!i.visible){this.renderedMeshesThisFrame++;for(const o of bJ)a[o]=r[o];(e=i.skeleton)!=null&&e.boneTexture&&(a.defines.USE_SKINNING="",a.defines.BONE_TEXTURE="",a.uniforms.boneTexture.value=i.skeleton.boneTexture)}}}saveBoneTexture(e){let t=e.material.uniforms.prevBoneTexture.value;if(t&&t.image.width===e.skeleton.boneTexture.width)t=e.material.uniforms.prevBoneTexture.value,t.image.data.set(e.skeleton.boneTexture.image.data);else{var i;(i=t)==null||i.dispose();const r=e.skeleton.boneTexture.image.data.slice(),s=e.skeleton.boneTexture.image.width;t=new Bs(r,s,s,pn,Pn),e.material.uniforms.prevBoneTexture.value=t,t.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const t of this.visibleMeshes)if(t.material.isVelocityMaterial){var e;t.visible=!0,t.material.lastMatrixWorld.copy(t.matrixWorld),t.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,t.modelViewMatrix),(e=t.skeleton)!=null&&e.boneTexture&&this.saveBoneTexture(t),t.material=this.cachedMaterials.get(t)[0]}}setSize(e,t){this.renderTarget.setSize(e,t)}renderVelocity(e){if(e.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:t}=this._scene;this._scene.background=AJ,e.render(this._scene,this._camera),this._scene.background=t}else e.clearColor()}checkCameraMoved(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return e>1e-6||t>1e-6?(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0):!1}render(e){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(e),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const BT=new se;class EJ extends jn{constructor(e,t,i,r={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new k,quaternion:new Fn},this._scene=e,this._camera=t,this.renderTarget=new Ct(1,1,{minFilter:qe,magFilter:qe,type:er,depthBuffer:!1}),this.velocityPass=new CJ(e,t),this.fullscreenMaterial=new wJ(i),this.fullscreenMaterial.defines.correctionRadius=r.correctionRadius||1,r.dilation&&(this.fullscreenMaterial.defines.dilation=""),r.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(e,t){this.renderTarget.setSize(e,t),this.velocityPass.setSize(e*this.velocityResolutionScale,t*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=this.velocityResolutionScale===1?ht:qe,this.velocityPass.renderTarget.texture.magFilter=this.velocityResolutionScale===1?ht:qe,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/e,1/t),this.setupFramebuffers(e,t)}setupFramebuffers(e,t){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new Mw(e,t,pn),this.accumulatedTexture.minFilter=qe,this.accumulatedTexture.magFilter=qe,this.accumulatedTexture.type=er,this.lastVelocityTexture=new Mw(e*this.velocityResolutionScale,t*this.velocityResolutionScale,pn),this.lastVelocityTexture.minFilter=this.velocityResolutionScale===1?ht:qe,this.lastVelocityTexture.magFilter=this.velocityResolutionScale===1?ht:qe,this.lastVelocityTexture.type=er,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(e>1e-6||t>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(e){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera),e.copyFramebufferToTexture(BT,this.accumulatedTexture),e.setRenderTarget(this.velocityPass.renderTarget),e.copyFramebufferToTexture(BT,this.lastVelocityTexture)}}const IT=function(e,t){let i=1,r=0;for(;e>0;)i/=t,r+=i*(e%t),e=~~(e/t);return r},TJ=n=>{const e=[];let t=1;const i=t+n;for(;t<i;t++)e.push([IT(t,2)-.5,IT(t,3)-.5]);return e};function LT(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const PJ=`
#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )
    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

    #ifdef BOX_PROJECTED_ENV_MAP
        vWorldPosition = worldPosition.xyz;
    #endif
#endif
`,RJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    uniform vec3 envMapSize;
    uniform vec3 envMapPosition;
    varying vec3 vWorldPosition;

    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
        vec3 nDir = normalize( v );

        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;

        vec3 rbminmax;

        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;

        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
        vec3 boxIntersection = vWorldPosition + nDir * correction;

        return boxIntersection - cubePos;
    }
#endif
`,DJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,BJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function IJ(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP="",n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t};const i=new RegExp(LT("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),r=new RegExp(LT("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");n.vertexShader=`varying vec3 vWorldPosition;
`+n.vertexShader.replace("#include <worldpos_vertex>",PJ),n.fragmentShader=RJ+`
`+n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",rt.envmap_physical_pars_fragment).replace(i,`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                ${DJ}`).replace(r,`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                ${BJ}`)}const LJ=cJ.replace("#include <helperFunctions>",mI).replace("#include <boxBlur>",lJ),NJ=["blur","blurSharpness","blurKernel"],FJ=new G0(1);let lg;class kJ extends zi{constructor(e,t,i=DT){super("SSREffect",LJ,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new ne(null)],["blur",new ne(0)],["blurSharpness",new ne(0)],["blurKernel",new ne(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=TJ(1024),this.haltonIndex=0,this.selection=new v_,this.lastSize=void 0,this.cubeCamera=new hM(.001,1e3,FJ),this.usingBoxProjectedEnvMap=!1,this._scene=e,this._camera=t,i={...DT,...i,...{boxBlur:!0,dilation:!0}},this.temporalResolvePass=new EJ(e,t,uJ,i),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new vJ(this,i),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:i.width,height:i.height,resolutionScale:i.resolutionScale,velocityResolutionScale:i.velocityResolutionScale},this.setSize(i.width,i.height),this.makeOptionsReactive(i)}makeOptionsReactive(e){let t=!1;const i=this.reflectionsPass.fullscreenMaterial.uniforms,r=Object.keys(i);for(const s of Object.keys(e))Object.defineProperty(this,s,{get(){return e[s]},set(a){if(!(e[s]===a&&t))switch(e[s]=a,NJ.includes(s)||this.setSize(this.lastSize.width,this.lastSize.height,!0),s){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=a,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=a;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=a;break;case"blurKernel":this.uniforms.get("blurKernel").value=a;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"missedRays":a?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(a),this.temporalResolvePass.fullscreenMaterial.needsUpdate=t;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=a;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=a;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=a;break;case"distance":i.rayDistance.value=a;default:r.includes(s)&&(i[s].value=a)}}}),this[s]=e[s];t=!0}setSize(e,t,i=!1){!i&&e===this.lastSize.width&&t===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale&&this.velocityResolutionScale===this.lastSize.velocityResolutionScale||(this.temporalResolvePass.setSize(e,t),this.reflectionsPass.setSize(e,t),this.lastSize={width:e,height:t,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(e,t=new k,i=new k,r=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new G0(r),this.cubeCamera.position.copy(t),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(e,this._scene),lg||(lg=new l0(e),lg.compileCubemapShader());const s=lg.fromCubemap(this.cubeCamera.renderTarget.texture).texture;s.minFilter=qe,s.magFilter=qe;const a=this.reflectionsPass.fullscreenMaterial;return IJ(a,t,i),a.fragmentShader=a.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),a.uniforms.envMapPosition.value.copy(t),a.uniforms.envMapSize.value.copy(i),RT(a,s,r),this.usingBoxProjectedEnvMap=!0,s}setIBLRadiance(e,t){this._scene.traverse(i=>{if(i.material){var r;const s=(r=t.properties.get(i.material))==null?void 0:r.uniforms;s&&"disableIBLRadiance"in s&&(s.disableIBLRadiance.value=e)}})}deleteBoxProjectedEnvMapFallback(){const e=this.reflectionsPass.fullscreenMaterial;e.uniforms.envMap.value=null,e.fragmentShader=e.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete e.defines.BOX_PROJECTED_ENV_MAP,e.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(e,t){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const o=this.reflectionsPass.fullscreenMaterial;let l=null;if(this._scene.traverse(u=>{if(!l&&u.material&&!u.material.envMap){const d=e.properties.get(u.material);"envMap"in d&&d.envMap instanceof $t&&(l=d.envMap)}}),l){const u=this._scene.environment.image.height;RT(o,l,u)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[i,r]=this.haltonSequence[this.haltonIndex],{width:s,height:a}=this.lastSize;this.temporalResolvePass.velocityPass.render(e),this._camera.setViewOffset&&this._camera.setViewOffset(s,a,i,r,s,a),this.reflectionsPass.render(e,t),this.temporalResolvePass.render(e),this._camera.clearViewOffset()}static patchDirectEnvIntensity(e=0){e===0?rt.envmap_physical_pars_fragment=rt.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):rt.envmap_physical_pars_fragment=rt.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+e.toFixed(5)+";")}}N.forwardRef(function({ENABLE_BLUR:e=!0,USE_MRT:t=!0,...i},r){const{invalidate:s}=Ei(),{scene:a,camera:o}=N.useContext(Uo),l=N.useMemo(()=>new kJ(a,o,{ENABLE_BLUR:e,USE_MRT:t,...i}),[a,o,e,t,i]),u=N.useContext(y_);return N.useEffect(()=>{var d;if(u&&u.enabled&&(d=u.selected)!=null&&d.length)return l.selection.set(u.selected),s(),()=>{l.selection.clear(),s()}},[u]),C("primitive",{ref:r,object:l,...i})});const Yh=new mt;Yh.setAttribute("position",new bt(new Float32Array([-1,-1,3,-1,-1,3]),2));Yh.setAttribute("uv",new bt(new Float32Array([0,0,2,0,0,2]),2));Yh.boundingSphere=new Os;Yh.computeBoundingSphere=function(){};const UJ=new Vl;class rd{constructor(e){this._mesh=new Wn(Yh,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,UJ)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}}const OJ={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new je},viewMat:{value:new je},projViewMat:{value:new je},projectionMatrixInv:{value:new je},viewMatrixInv:{value:new je},cameraPos:{value:new k},resolution:{value:new se},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform highp sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float[SAMPLES] samplesR;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        return getWorldPosLog(vec3(coord, depth));
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
      vec3 bitangent = cross(normal, tangent);
      mat3 tbn = mat3(tangent, bitangent, normal);
      float occluded = 0.0;
      float totalWeight = 0.0;
     /* float radiusScreen = distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(48.0, 0.0) / resolution)
      );/*vUv.x < 0.5 ? radius : min(distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(100.0, 0.0) / resolution)
      ), radius);
      float distanceFalloffScreen = radiusScreen * 0.2;*/
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      for(float i = 0.0; i < FSAMPLES; i++) {
        vec3 sampleDirection = 
        tbn * 
        samples[int(i)];
        ;
        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;
        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) 
         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/
        #ifdef LOGDEPTH
        float distSample = linearize_depth_log(sampleDepth, near, far);
        #else
        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);
        #endif
        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);
        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);
        float weight = dot(sampleDirection, normal);
          occluded += rangeCheck * weight * 
            (distSample + bias
               < distWorld ? 1.0 : 0.0) * (
          (dot(
            diff,
            diff
             
            ) < 1.0 || (sampleDepth == depth) || (
              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0
            ) ? 0.0 : 1.0)
          );
          totalWeight += weight;
      }
      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);
}`},zJ={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new je},viewMat:{value:new je},projectionMatrixInv:{value:new je},viewMatrixInv:{value:new je},cameraPos:{value:new k},resolution:{value:new se},color:{value:new k(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform highp sampler2D downsampledDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform bool fog;
    uniform bool fogExp;
    uniform bool colorMultiply;
    uniform float fogDensity;
    uniform float fogNear;
    uniform float fogFar;
    uniform float radius;
    uniform float distanceFalloff;
    uniform vec3 cameraPos;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        #ifdef HALFRES 
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

     
        float finalAo = pow(texel.a, intensity);
        float fogFactor;
        float fogDepth = distance(
            cameraPos,
            getWorldPos(depth, vUv)
        );
        if (fog) {
            if (fogExp) {
                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
            } else {
                fogFactor = smoothstep( fogNear, fogFar, fogDepth );
            }
        }
        finalAo = mix(finalAo, 1.0, fogFactor);
        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = LinearTosRGB(gl_FragColor);
        }
    }
    `},HJ={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new je},viewMat:{value:new je},projectionMatrixInv:{value:new je},viewMatrixInv:{value:new je},cameraPos:{value:new k},resolution:{value:new se},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.a;
        float baseOcc = data.a;
        vec3 normal = data.rgb * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        if (d == 1.0) {
          gl_FragColor = data;
          return;
        }
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
            radiusToUse * distanceFalloff
        : distanceFalloff;


        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.a;
            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
            float rangeCheck = dSample == 1.0 ? 0.0 :exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        occlusion /= count;
        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);
    }
    `},GJ={uniforms:{sceneDepth:{value:null},resolution:{value:new se},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new je},projectionMatrixInv:{value:new je},logDepth:{value:!1}},vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform highp sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        vec2[] uvSamples = vec2[4](
            uv,
            uv + vec2(pixelSize.x, 0.0),
            uv + vec2(0.0, pixelSize.y),
            uv + pixelSize
        );
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[] samples = float[4](depth00, depth10, depth01, depth11);
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
       /* float[] samples = float[4](depth00, depth10, depth01, depth11);
        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);
        float[] distances = float[4](depth00, depth10, depth01, depth11);
        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));

        int remaining[3];
        int rejected[3];
        int i, j, k;

        for(i = 0, j = 0, k = 0; i < 4; ++i) {
            if (distances[i] < maxDistance) {
                remaining[j++] = i;
            } else {
                rejected[k++] = i;
            }
        }
        for(;j < 3;++j) {
            remaining[j] = rejected[--k];
        }
        vec3 s = vec3(
            samples[remaining[0]],
            samples[remaining[1]],
            samples[remaining[2]]
        );
        c = (s.x + s.y + s.z) / 3.0;

        distances[0] = abs(c - s.x);
        distances[1] = abs(c - s.y);
        distances[2] = abs(c - s.z);

        float minDistance = min(min(distances[0], distances[1]), distances[2]);

        for(i = 0; i < 3; ++i) {
            if (distances[i] == minDistance) {
                break;
            }
        }*/
      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]
        ), 0.0);*/
    }`};var vI="5L7pP4UXrOIr/VZ1G3f6p89FIWU7lqc7J3DPxKjJUXODJoHQzf/aNVM+ABlvhXeBGN7iC0WkmTjEaAqOItBfBdaK5KSGV1ET5SOKl3x9JOX5w2sAl6+6KjDhVUHgbqq7DZ5EeYzbdSNxtrQLW/KkPJoOTG4u5CBUZkCKHniY9l7DUgjuz708zG1HIC8qfohi1vPjPH9Lq47ksjRrjwXD4MlVCjdAqYFGodQ8tRmHkOfq4wVRIAHvoavPHvN1lpk3X4Y1yzAPGe8S9KBs3crc4GwlU1dEOXiWol/mgQqxkNqB1xd04+0Bmpwj0GcCc4NUi+c731FUxjvaexCkCJ0qhrJJ++htWqetNC4NewClu8aFRSwrqiJEGe+qtTg4CYCHaF1wJI0sy/ZBQAI0qAMyBvVjWZlv2pdkCaro9eWDLK5I4mbb8E4d7hZr9dDJiTJm6Bmb5S+2F7yal/JPdeLUfwq7jmVLaQfhv4tWMJAt7V4sG9LuAv2oPJgSj1nnlBvPibfHM2TrlWHwGCLGxW/5Jm2TotaDL+pHDM5pn1r0UuTZ24N8S5k68bLHW9tfD+2k4zGev23ExJb4YTRKWrj82N5LjJ26lj1BkGZ0CsXLGGELoPaYQomjTqPxYqhfwOwDliNGVqux9ffuybqOKgsbB51B1GbZfG8vHDBE2JQGib1mnCmWOWAMJcHN0cKeDHYTflbDTVXajtr68mwfRje6WueQ/6yWqmZMLWNH7P27zGFhMFqaqfg11Q88g/9UA/FROe9yfq0yOO0pnNAxvepFy2BpEbcgG+mCyjCC01JWlOZlIPdf1TtlyOt7L94ToYGCukoFt4OqwOrofamjECpSgKLLmrRM+sNRAw12eaqk8KtdFk7pn2IcDQiPXCh16t1a+psi+w9towHTKPyQM0StKr61b2BnN1HU+aezFNBLfHTiXwhGTbdxLLmrsAGIVSiNAeCGE8GlB0iOv2v78kP0CTmAPUEqnHYRSDlP+L6m/rYjEK6Q85GRDJi2W20/7NLPpSOaMR++IFvpkcwRuc59j8hh9tYlc1xjdt2jmp9KJczB7U9P43inuxLOv11P5/HYH5d6gLB0CsbGC8APjh+EcCP0zFWqlaACZweLhVfv3yiyd8R3bdVg8sRKsxPvhDaPpiFp9+MN+0Ua0bsPr+lhxfZhMhlevkLbR4ZvcSRP6ApQLy3+eMh9ehCB3z5DVAaN3P6J8pi5Qa88ZQsOuCTWyH6q8yMfBw8y8nm6jaOxJhPH6Hf0I4jmALUBsWKH4gWBnyijHh7z3/1HhQzFLRDRrIQwUtu11yk7U0gDw/FatOIZOJaBx3UqbUxSZ6dboFPm5pAyyXC2wYdSWlpZx/D2C6hDO2sJM4HT9IKWWmDkZIO2si/6BKHruXIEDpfAtz3xDlIdKnnlqnkfCyy6vNOPyuoWsSWBeiN0mcfIrnOtp2j7bxjOkr25skfS/lwOC692cEp7TKSlymbsyzoWg/0AN66SvQYo6BqpNwPpTaUu25zMWlwVUdfu1EEdc0O06TI0JmHk4f6GZQbfOs//OdgtGPO6uLoadJycR8Z80rkd88QoNmimZd8vcpQKScCFkxH1RMTkPlN3K7CL/NSMOiXEvxrn9VyUPFee63uRflgaPMSsafvqMgzTt3T1RaHNLLFatQbD0Vha4YXZ/6Ake7onM65nC9cyLkteYkDfHoJtef7wCrWXTK0+vH38VUBcFJP0+uUXpkiK0gDXNA39HL/qdVcaOA16kd2gzq8aHpNSaKtgMLJC6fdLLS/I/4lUWV2+djY9Rc3QuJOUrlHFQERtXN4xJaAHZERCUQZ9ND2pEtZg8dsnilcnqmqYn3c1sRyK0ziKpHNytEyi2gmzxEFchvT1uBWxZUikkAlWuyqvvhteSG9kFhTLNM97s3X1iS2UbE6cvApgbmeJ/KqtP0NNT3bZiG9TURInCZtVsNZzYus6On0wcdMlVfqo8XLhT5ojaOk4DtCyeoQkBt1mf5luFNaLFjI/1cnPefyCQwcq5ia/4pN4NB+xE/3SEPsliJypS964SI6o5fDVa0IERR8DoeQ+1iyRLU1qGYexB61ph4pkG1rf3c2YD6By1pFCmww9B0r2VjFeaubkIdgWx4RKLQRPLENdGo8ezI5mkNtdCws19aP1uHhenD+HKa8GDeLulb2fiMRhU2xJzzz9e4yOMPvEnGEfbCiQ17nUDpcFDWthr68mhZ4WiHUkRpaVWJNExuULcGkuyVLsQj59pf6OHFR7tofhy9FMrWPCEvX1d5sCVJt8yBFiB6NoOuwMy4wlso9I2G4E5/5B2c6vIZUUY9fFujT3hpkdTuVhbhBwLCtnlIjBpN4cq+waZ0wXSrmebcl+dcrb7sPh9jKxFINkScDTBgjSUfLkC3huJJs/M4M8AOFxbbSIVpBUarYFmLpGsv+V6TJnWNTwI41tubwo7QSI1VOdRKT/Pp8U3oK2ciDbeuWnAGAANvQjGfcewdAdo6H83XzqlK/4yudtFHJSv9Y+qJskwnVToH1I0+tJ3vsLBXtlvMzLIxUj/8LcqZnrNHfVRgabFNXW0qpUvDgxnP3f54KooR3NI+2Q/VHAYFigMkQE5dLH6C6fGs/TKeE6E2jOhZQcP9/rrJjJKcLYdn5cw6XLCUe9F7quk5Yhac+nYL5HOXvp6Q/5qbiQHkuebanX77YSNx34YaWYpcEHuY1u/lEVTCQ7taPaw3oNcn/qJhMzGPZUs3XAq48wj/hCIO2d5aFdfXnS0yg57/jxzDJBwkdOgeVnyyh19Iz1UqiysT4J1eeKwUuWEYln23ydtP7g3R1BnvnxqFPAnOMgOIop2dkXPfUh/9ZKV3ZQbZNactPD4ql5Qg9CxSBnIwzlj/tseQKWRstwNbf17neGwDFFWdm/8f+nDWt/WlKV3MUiAm3ci6xXMDSL5ubPXBg/gKEE7TsZVGUcrIbdXILcMngvGs7unvlPJh6oadeBDqiAviIZ/iyiUMdQZAuf/YBAY0VP1hcgInuWoKbx31AOjyTN2OOHrlthB3ny9JKHOAc8BMvqopikPldcwIQoFxTccKKIeI815GcwaKDLsMbCsxegrzXl8E0bpic/xffU9y1DCgeKZoF2PIY77RIn6kSRdBiGd8NtNwT74dyeFBMkYraPkudN26x9NPuBt4iCOAnBFaNSKVgKiZQruw22kM1fgBKG7cPYAxdHJ8M4V/jzBn2jEJg+jk/jjV4oMmMNOpKB5oVpVh7tK529Z+5vKZ0NSY2A4YdcT0x4BdkoNEDrpsTmekSTjvx9ZBiTHrm9M/n/hGmgpjz4WEjttRfAEy5DYH5vCK/9GuVPa4hoApFaNlrFD/n2PpKOw24iKujKhVIz41p1E0HwsCd/c17OA0H0RjZi1V/rjJLexUzpmXTMIMuzaOBbU4dxvQMgyvxJvR6DyF3BaHkaqT4P3FRYlm+zh8EEGgmkNqD1WRUubDW62VqLoH8UEelIpL7C8CguWWGGCAIDPma9bnh+7IJSt0Cn6ACER2mYk8dLsrN70RUVLiE0ig+08yPY9IOtuqHf/KYsT84BwhMcVq7t8q1WVjpJGNyXdtIPIjhAzabtrX03Itn29QO3TCixE9WpkHIOdAoGvqCrw1D3x9g9Px8u0yZZuulZuGy0veSY34KDSlhsO1zx2ZMrpDBzCHPB4niwApk6NevIvmBxU3+4yaewDvgEQDJ6Of5iRxjAIpp9UO8EzNY4blj4qh8SCSZTqbe/lShE6tNU9Y5IoWHeJxPcHF9KwYQD7lFcIpcscHrcfkHJfL2lL1zczKywEF7BwkjXEirgBcvNWayatqdTVT5oLbzTmED3EOYBSXFyb2VIYk3t0dOZWJdG1nP+W7Qfyeb8MSIyUGKEA57ptPxrPHKYGZPHsuBqQuVSrn0i8KJX+rlzAqo8AawchsJ26FckxTf5+joTcw+2y8c8bushpRYEbgrdr64ltEYPV2AbVgKXV3XACoD1gbs01CExbJALkuItjfYN3+6I8kbiTYmdzBLaNC+xu9z/eXcRQV1Lo8cJoSsKyWJPuTncu5vcmfMUAWmuwhjymK1rhYR8pQMXNQg9X+5ha5fEnap+LhUL1d5SURZz9rGdOWLhrMcMKSaU3LhOQ/6a6qSCwgzQxCW2gFs53fpvfWxhH+xDHdKRV6w29nQ6rNqd9by+zm1OpzYyJwvFyOkrVXQUwt4HaapnweCa7Tj2Mp/tT4YcY3Q/tk1czgkzlV5mpDrdp1spOYB8ionAwxujjdhj5y9qEHu0uc36PAKAYsKLaEoiwPnob0pdluPWdv4sNSlG8GWViI+x/Z4DkW/kSs2iE3ADFjg4TCvgCbX3v0Hz0KZkerrpzEIukAusidDs2g/w0zgmLnZXvVr5kkpwQTLZ0L6uaTHl0LVikIuNIVPmL3fOQJqIdfzymUN0zucIrDintBn6ICl/inj5zteISv5hEMGMqtHc2ghcFJvmH3ZhIZi34vqqTFCb9pltTYz582Y3dwYaHb9khdfve1YryzEwEKbI8qm62qv+NyllC+WxLLAJjz0ZaEF2aTn35qeFmkbP6LDYcbwqWxA0WKsteB7vy8bRHE4r8LhubWDc0pbe90XckSDDAkRej0TQlmWsWwaz18Tx2phykVvwuIRzf4kt9srT8N7gsMjMs0NLAAldabFf2tiMoaaxHcZSX51WPc1BrwApMxih227qTZkcgtkdK1h314XvZKUKh/XysWYnk1ST4kiBI1B9OlfTjB3WHzTAReFLofsGtikwpIXzQBc/gOjz2Thlj36WN0sxyf4RmAFtrYt64fwm+ThjbhlmUTZzebLl4yAkAqzJSfjPBZS2H/IvkkTUdVh0qdB6EuiHEjEil5lk9BTPzxmoW4Jx543hiyy4ASdYA2DNoprsR9iwGFwFG3F2vIROy4L5CZrl230+k733JwboSNBKngsaFPtqo+q3mFFSjC1k0kIAFmKihaYSwaSF7konmYHZWmchuaq15TpneA2ADSRvA07I7US0lTOOfKrgxhzRl0uJihcEZhhYWxObjvNTJ/5sR4Aa5wOQhGClGLb746cJhQ2E6Jie1hbGgWxUH7YSKETptrTeR/xfcMNk2WM12S0XElC9klR8O7jLYekEOZdscP0ypSdoCVZAoK+2ju2PHE869Q9rxCs9DVQco4BriiPbCjN/8tBjsah4IuboR5QbmbyDpcdXVxGMxvWKIjocBuKbjb+B4HvkunbG0wX0IFCjQKoNMFIKcJSJXtkP3EO+J16uh4img0LQlBAOYwBLupu5r1NALMo0g3xkd9b4f7KoCBWHeyk24FmYUCy/PGLv0xErOTyORp8TJ5nnc2k1dOVBTJok7iHye9dwxwRVP3c7eAS8pMmJYHGpzIHz6ii2WJm8HMTPAZdA4q+ugj3PNCL/N45kyglqvQV4f/+ryDDG5RPy5HVoV9FVuJcq2dxF9Y0heVoipV6q1LyfAeuMzbsUV+rsSBmCSV+1CdKlxy0T0Y6Om0X6701URm2Ml6DIQgJ/3KO6kwcMYRrmKsY7TfxWhSXZll+1PfyRXe9HS0t1IKTQMZL7ZqQ8D/o+en57Y9XAQ9C+kZYykNr0xOMxEwu2+Cppm69mQyTm3H7QX6kHvXF201r+KVAf354qypJC5OHSeBU47bM1bTaVmdVEWQ+9CcvvHdu8Ue5UndHM+EeukmR82voQpetZ7WJjyXs+tPS60nk09gymuORoHNtbm0VuvyigiEvOsyHiRBW7V6FyTCppLPEHvesan91SlEh1/QEunq+qgREFXByDwNKcAH5s8/RFg8hP4wcPmFqX0xXGSKY087bqRLsBZe52jThx0XLkhKQUWPvI18WQQS3g2Ra1pzQ1oNFKdfJJjyaH5tJH6w0/upJobwB8KZ5cIs9LnVGxfBaHXBfvLkNpab7dpU6TdcbBIc+A4bqXE/Xt8/xsGQOdoXra4Us5nDAM6v2BNBQaGMmgMfQQV+ikTteSHvyl8wUxULiYRIEKaiDxpBJnyf9OoqQdZVJ8ahqOvuwqq5mnDUAUzUr/Lvs1wLu2F+r4eZMfJPL4gV5mKLkITmozRnTvA7VABaxZmFRtkhvU5iH9RQ1z26ku7aABokvptx7RKZBVL6dveLKOzg0NC7HAxcg5kE1wuyJiEQLOpO0ma3AtWD2Q2Wmn2oPZeDYAwVyEpxuwDy7ivmdUDSL95ol3h2JByTMovOCgxZ1q4E5nwwa7+4WtDAse6bDdr27XgAi5Px3IWbyZ/vRiECKwOMeJSuIl8A4Ds0emI3SgKVVWVO5uyiEUET+ucEq0casA+DQyhzRc8j+Plo0pxKynB/t0uXod1FVV4fX1sC4kDfwFaUDGQ4p9HYgaMqIWX3OF/S8+vcR0JS0bDapWKJwAIIQiRUzvh5YwtzkjccbbrT9Ky/qt5X7MAGA0lzh43mDF9EB6lCGuO/aFCMhdOqNryvd73KdJNy3mxtT8AqgmG4xq7eE1jKu6rV0g8UGyMatzyIMjiOCf4lIJFzAfwDbIfC72TJ/TK+cGsLR8blpjlEILjD8Mxr7IffhbFhgo12CzXRQ2O8JqBJ70+t12385tSmFC8Or+U8svOaoGoojT1/EmjRMT7x2iTUZ7Ny02VGeMZTtGy029tGN1/9k7x3mFu63lYnaWjfJT1m1zpWO3HSXpGkFqVd/m3kDMv4X9rmLOpwEeu8r6TI6C2zUG+MT6v90OU3y5hKqLhpyFLGtkZhDmUg/W1JGSmA8N1TapR4Kny+P6+DuMadZ9+xBbv06nfOjMwkoTsjG0zFmNbvlxEjw+Pl5QYK+V8Qyb+nknZ0Nb/Ofi9+V0eoNtTrtD1/0wzUGGG5u2D/J1ouO/PjXFJVx6LurVnPOyFVbZx7s3ZSjSq+7YN3wzTbFbUvP8GBh7cKieJt56SIowQ2I577+UEXrxUKMFO+XaLLCALuiJWB2vUdpsT+kQ+adoeTfwOulXhd/KZ7ygjj6PhvGT1xzfT7hTwd6dzSB4xV70CesHC0dsg2VyujlMGBKjg5snbrHHX/LNj3SsoLGSX+bZNTDDCNTXh+dCVPlj4K8+hJ/kVddrbtZw26Hx5qYiv3oNNg5blHRSPtmojhZmBQAz8sLC9nAuWNSz1dIofFtlryEKklbdkhBCcx5dhj7pinXDNlCeatCeTCEjYCpZ3HRf5QzUcRR1Tdb3gwtYtpPdgMxmWfJGoZSu1EsCJbIhS16Ed97+8br4Ar1mB1GcnZVx/HPtJl4CgbHXrrDPwlE4od8deRQYLt9IlsvCqgesMmLAVxB+igH7WGTcY/e3lLHJ4rkBgh2p1QpUBRb/cSQsJCbosFDkalbJigimldVK7TIHKSq2w8mezku9hgw8fXJxGdXoL1ggma52kXzjP78l0d0zMwtTVlt0FqnRyGLPGEjmICzgSp7XPFlUr7AeMclQ4opqwBFInziM5F8oJJ8qeuckGOnAcZZOLl1+ZhGF17pfIuujipwFJL7ChIIB2vlo0IQZGTJPNa2YjNcGUw+a/gWYLkCp+bOGIYhWr08UIE709ZEHlUoEbumzgpJv1D0+hWYNEpj+laoZIK5weO2DFwLL6UBYNrXTm9YvvxeN9U9oKsB3zKBwzFFwDgid5ESMhy68xBnVa55sCZd+l5AnzT8etYjIwF/BGwEx1jjzFv32bk6EeJulESARh8RZ48o7rKw67UZpudPa15SDnL8AL8xMV2SC0D1P53p190zhCFkMmEiir2olwxcJppl/kLm6/0QSUQLNaxi1AC3Pg1CTosX2YQr73PjEIxIlg4mJ62vP7ZyoHE55B0SX9YrrrCPtNsrJEwtn6KOSt7nLT3n3DLJTPbLulcqQ1kETP6Huts29oP+JLEqRGWgnrqMD+mhCl1XCZifjgQ39AeudE8pyu2DqnYU3PyPbJhStq1HbP+VxgseWL+hQ+4w1okADlA9WqoaRuoS7IY77Cm40cJiE6FLomUMltT+xO3Upcv5dzSh9F57hodSBnMHukcH1kd9tqlpprBQ/Ij9E+wMQXrZG5PlzwYJ6jmRdnQtRj64wC/7vsDaaMFteBOUDR4ebRrNZJHhwlNEK9Bz3k7jqOV5KJpL74p2sQnd7vLE374Jz+G7H3RUbX17SobYOe9wKkL/Ja/zeiKExOBmPo0X29bURQMxJkN4ddbrHnOkn6+M1zTZHo0efsB23WSSsByfmye2ZuTEZ12J3Y8ffT6Fcv8XVfA/k+p+xJGreKHJRVUIBqfEIlRt987/QXkssXuvLkECSpVEBs+gE1meB6Xn1RWISG6sV3+KOVjiE9wGdRHS8rmTERRnk0mDNU/+kOQYN/6jdeq0IHeh9c6xlSNICo9OcX1MmAiEuvGay43xCZgxHeZqD7etZMigoJI5V2q7xDcXcPort7AEjLwWlEf4ouzy2iPa3lxpcJWdIcHjhLZf1zg/Kv3/yN1voOmCLrI1Fe0MuFbB0TFSUt+t4Wqe2Mj1o2KS0TFQPGRlFm26IvVP9OXKIQkjfueRtMPoqLfVgDhplKvWWJA673+52FgEEgm+HwEgzOjaTuBz639XtCTwaQL/DrCeRdXun0VU3HDmNmTkc6YrNR6tTVWnbqHwykSBswchFLnvouR0KRhDhZiTYYYNWdvXzY+61Jz5IBcTJavGXr9BcHdk/3tqaLbwCbfpwjxCFSUs1xfFcRzRfMAl+QYuCpsYGz9H01poc1LyzhXwmODmUSg/xFq/RosgYikz4Om/ni9QCcr28ZPISaKrY7O+CspM/s+sHtnA9o9WgFWhcBX2LDN2/AL5uB6UxL/RaBp7EI+JHGz6MeLfvSNJnBgI9THFdUwmg1AXb9pvd7ccLqRdmcHLRT1I2VuEAghBduBm7pHNrZIjb2UVrijpZPlGL68hr+SDlC31mdis0BjP4aZFEOcw+uB17y5u7WOnho60Vcy7gRr7BZ9z5zY1uIwo+tW1YKpuQpdR0Vi7AxKmaIa4jXTjUh7MRlNM0W/Ut/CSD7atFd4soMsX7QbcrUZZaWuN0KOVCL9E09UcJlX+esWK56mre/s6UO9ks0owQ+foaVopkuKG+HZYbE1L1e0VwY2J53aCpwC77HqtpyNtoIlBVzOPtFvzBpDV9TjiP3CcTTGqLKh+m7urHvtHSB/+cGuRk4SsTma9sPCVJ19UPvaAv5WB8u57lNeUewwKpXmmKm5XZV91+FqCCT6nVrrrOgXfYmGFlVjqsSn3/yufkGIdtmdD0yVBcYFR3hDx43e3E4iuiEtP3Me9gcsBqveQdKojKR//qD2nEDY0IktMgFvH+SqVWi9mAorym92NEGbY8MeDjp553MiTXCRSASPt+Ga5q7pB9vwFQCTpaoevx0yEfrq9rMs3eU6wclBMJ9Ve8m6QuLYZ58J41YG3jW/khW92h6M/vbFIUPuopZ6VVtpciesU74Ef7ic8iSymDohGeUn4ubT0vRsXmbsjaJaYhL8f+8I5EiD5l680MJbxX/4GYrOg4iPQqpKp0qddSu/HKtznHeVyxgTwhfEORMCwnaqetVSzvidaWN9P+fXtGXfEP9cTdwx2gKVfDdICq7hecgRhIs0qlCt6+5pGlCc6kWoplHa/KjP+FJdXBU/IDoKMxRjFhSYkggIkhvRKiN/b2ud8URPF+lB87AGAwyMjr/Wju2Uj5IrppXZWjI3d14BdKE2fhALyQPmHqqA+AXd2LwvRHcBq4mhOQ4oNRWH7wpzc6Pggfcbv9kqhLxrJKEaJqA6Rxi+TDNOJstd5DoRVCDjmVspCVyHJsFEWPg9+NA8l1e4X2PDvOd5MPZAGw6LRhWqeZoSQcPf9/dGJYAyzCmttlRnx0BfrKQ/G9i5DVJft9fuJwMi3OD/0Dv1bRoxcXAyZ0wMJ6rwk9RjRTF4ZK8JviCCNuVt/BqQYiphOzWCpnbwOZt6qXuiAabQWrS4mNXQ7cEErXR/yJcbdFp5nWE1bPBjD0fmG3ovMxmOq5blpcOs0DtNQpci1t+9DKERWAO53IVV/S4yhMklvIp0j0FIQgwjdUptqmoMYGVWSI5YkTKLHZdXRDv9zs+HdFZt1QVcdlGOgATro3fg6ticCrDQKUJC7bYX50wdvetilEwVenHhlr85HMLRLTD6nDXWId4ORLwwe5IXiOhpuZTVTv+xdkTxJofqeCRM/jcZqQlU0gFVTlYlfwMi6HKR2YG4fQ8TOtgR+yV+BMZb6L5OwDc/28/xdfD7GXFaVA2ZSObiIxBwT2Zev637EuvpM6rxcogdM4FJFa0ZhF7nrqtNsqWg5M7hZMORpjd4szf/wS+Ahs1shY54Ct5J1dOBO4sdEtSnRc0P9PhgyOCt6aQW98R22DpAcNTDe72AHK40vutKTPfpokghRPuGvz0dulBPKfC3O4KVDCyWrJGO7Ikdu06A0keKlVfi0tGcpO0NhzXEh75NHyMysAMV19fq7//sPC0For1k2uFEvq8lwrMAfmP7afR69U2RqaILHe7glpc8HmVf87Qb2ohsw+Di9U+ePdHLecS66MhB/0OwdcXR5WBcWTZLGq/kiAaT+bzkjR8GIpWdv6pfIgQ+Q0xdiKvo+gNB7/Nf9knNJGxnh7LeZEFtMn517tNc74PPS0M4K3I6HHZqNPA+VZcBc/g5a2ARyqKrJ4Z3krsuA+VOJJz2KJpBMgCCWFln3u7k6/q3DETAubKG/pt3ObaNT0NI0Qug90L2ip5dHnZJUjPTvK5E96aX/4mRU2u8n8kh6MKbY7ANBro3huF06U+JvfyELQP25oIaj+n0ITQ4KT9rXZD4EtBIOj95fYNldDN3io/VMIvWNj9P/b95WEMq8UAVfG2XG0N6fSYdnBEC7sUEbatbDICH9qA8TTuW9kEt9DlFOZFP7bdfYLa/khSY8W5K/AkIIAPXtMvyVKyESjKx9nfragssxC0jFMVY94d8lOAwRocdS/l/P43cBGa3IqDa0ihGPcmwS8O8Vj16Uy55rOrnN0shhRJZdW8I7F0Q0KeHc35GFo4aJOFc25gNafBu1V/VO0qS4Qkb6wjRrnlepUWjtYyaDABZceValuOMtoDdeIITWKOJiwGPpB12lQgwkmXh9M86podb0D117mNQ8ElluFvbaS8RTKQ6lyj88dUwoJU/ofOeubhoXWBF8eNumkVJu+As3ED/AvLlrV91UowIWI2m8HBG+a3k247ZKAGYsOcWe7fTWqL8eqwM5ZFuoXbeugPKuMOAtOsN+4dSwkhrSAlfGNTzFwEmCNWtzpa9CgPbYNcmoHtO8pj8qMvlGET6nrkJoQ2lp5MEUV1E2A4ZH70JUlCLXvqTIpZlzyxdr5p/GZiD1/BuFOGbyfFzhuxaC/l3lC2jjt6GNRBa06AqqPlYtdA7kiidYa5Qi0/XpXiMDyMXNOj3kmJEaXufW0GO8+DF8OoMULX1vvjCePKNis4AmxQKLCF+cjf/wyilCJvuiyLVPSdsuRTPZ0AhpdDF/1uFmDwG7iP3qYwNsKzqd3sYdnMolCOuQOIHWy1eQpWhuV+jmSeAC5zCc0/KsOIXkZPdiw8vtB33jEBpezpGDBP4JLY2wH1J7Fzp8y8RICqVd25mDT2tDb/L1mh4fv9TOfDH5dTeATqu+diOZi+/sIt18hiTovPsVQVaqXLPRx/4R/uH/86tBMcF+WBkThKLfblcVCIECc8DgNRVX97KdrsCeIK+CvJZMfwrftcDZDZyp7G8HeKl7bPYnTKX88dXAwAyz66O2chkPDHy/2K2XcT/61XnlAKgPwtI8yP9Vu45yh55KHhJu93mL4nfo8szp/IyDjmFHtSMqqoWsj8WaVhbjXgzZxcqZcyOe7pUK6aXF/Y32LnBOt0WN28UmHRiOpL525C63I2JQPX8vvOU0fz2ij74OeJ1Apgu3JRObfdo9xGDpp7cv3TdULEfNS6Gu3EJu7drBsBsogUqUc6wAUW3ux0/1hLVI/JEKJrAGm8g72C2aJSsGAsKFW4CBvBXVlNIKa5r7HvT1BeGYBfxTR1vhNlFFNN8WQYwr39yT/13XzRGiF2IsfE8HcN0+lN1zN/OnzekVBKkFY11GgrK5CLxrE/2HCEMwQb9yOuP2rTXiZzTEETp/ismFGcTWmbM9G1Sn2D/x3G74uWYZY4rgKB2Zo2bTKS6QnM5x1Yee66Y1L7K44AyiY5K2MH5wrTwxMFh+S8LzNQ25z6sunWZyiRwFIIvSnioltUXNiOr+XMZ6O9h9HcHxZJkfF0tUm6QkU7iJ2ozXARitiL86aqVsMOpmvdIBROhUoanPtCjgft8up3hAaKpw9Qs9MzYtBA2ijHXotzarkV3zKEK0dFFQUwT74NgCmGGuSCEDmFCezXPC9BhyGhmzNa6rQeQQz+r9CmGUZjIQEPsHwe86oCOQhWaHERsv5ia9rZvJ//7UXO7B329YUkLLAiqpLRsVV5XpcfdawlJqi/BVcCqO6dr9YJTFFRMVGhfUbB9YWNvYPY6RyaydAFYq1YIBQxuNAGfYWLMAHtt2XRHoOKCLz+qf5HCVBDOPOktQ3SdJBfxUkaiD585bmTzMwU3oeXUHZ55EC99Kz9kk4ZXMIENwVVpqW2JmGIcUiutIMj2KkpjE2QD+dIZUCxcX57kH7hiuUPnKCTdaw4KN95XPeFRvMcvo5L8LexWqvaJPECzwXCs/4XPAlSMpWUzBBjK3pEnkbueMkMJQrYcnXf7PjbAoJra1VLX4YuscQLpaeYWbT+h24hCFrfcHjxxx6WTSe4AGY/KHRZCQKqTuFWt0D8RmGWmvXSdg1ptIefYPshuIVZT7CV4Ny67fvjJugy0TNYHqoCO45CB88kxrvIsih19DqjD0UqiJsTFPcGW3P/ULOG3nb8CjpgVTIoa5nO9ZYEX4uEHu8hLXrJPjV1lTQ5xTdZVagg+Wj8V0EE4yPsTc345KM6lVXqLiHtm+G6edC4GVEiPgd98g+twSYm18gCsPnjqlLcFm9e72CLJbYD+ocIZOxuVjrX6IKh9fh7WqdIZ66x9PWkDGOVVGkx7jM76Ywe16DX9ng205kg5eq+R2q2MguTJxYv/wWHliD9mOYpzZKNXYC3Wr4iBGkm54hBwkPzFhiX/VBHdVH/KJ1ZIMOHxIN6arKdxrm6EBsgwDt0mPe0MX1HRUMq8ctcmysU6xX0bzM1J07kAvq33jw1q0Pq2cyMWme8F7aVkfhzZEFdyi8fVBQav0YZqvAjZ83WKH726rBx5Bn7GHFthR6H4lFsltu+jWmsAibJ3kpWMG/QbncU7n9skIBL0MuXXtj9sJg+4Dl0XhKJ1LcrMydaIgyrgZgScP4k8YQvcsBmD26X1iYXKLzMYfZn2IfRjznsrJ1e5cnl/3a5xiNoI6n1x1U36FWckJbyx+hiSZg0QqAqeeSvzFYMlZ2REnO/a6yoQhu7PdHMYEPFIvfyGeyCU8e7rpju4DrlOhszj9rOIpNsvCkuD+TLyf5J7D/wsPkBpscFVI1q7oUSU9bN30vH5AqnO7bsf+9rGhtVjOJQ32H9hHSAzR2ape4L0Cz4WxaySm4jvuGXwkFp5NMMLrgZ8LdA+5uLuyxO5SMOmJNDBcbbLefv7z6LyxBwltnfQLd7qqpG1MmNcoLUcx73BkNF/xpdS0cKd6G646ntChXSeTZJJTFYGw39T7fqXDPKoG2cF7/ZcTvME42gXLVjTqzAER1Rt5m7GYsh0X0+XgOeW9MJqE5j/rpGzY6vUu6ACcCTzDMdZHiWELpDnvgE1hmztLcSYz0MtNyUBLqvylUJJnJu79Sku9NMHCTkgqozTnhMFfduV2NLCSYvAI5HUvQp1h/M02vKFD6eosIkGTg6mujUo1W8hy5Knf/erkBQC9LzNqPAYCgR+hczgevta88NNqSlBZryq9QNeUK7RpbvHjoNhUKAAeNYH55LeTW36KyFaXdAkBvyNP9xmRuBokPi2OhqDby6IZ61mwfzG+GmACkS+G80A4WGON5izgJWeeDK91jzusfOi0RmEsVJXwbVUr8u/J2LCQaMnHhi+wJTEPN9tS2b6W4GRGCNmtjAMgPsP357nOeD3H2tcDAPu5xQBKMHf/j4ZhXlkvvy3YmBJsjsd4pSOlfPZCnw5JvzxEXM5JIc+E2mU4CgB0mdJnH4NEsCHYNeVRDXFNuyZUE4nuvaJf1h+11AWLdAZ72D9XNRcxfb2+XHZN/SN48U7yl+sNZhg5gn/PD8wkBtnRj1zBUPIWnoMP6yGUEEzuT+VaX3x2jEIZAZsr3rs9wCfY1Ss0EdIFFzBbyruUup4EPanbSYew5tf16/ZWVup5iykttuqL4xoC/jdZWsAZeSfDSd3fP9kbyAFYXkf0Q2lmxaTkKRZrCo9XCoiUG4yP1URJ5G7+HSOhhJp0Anz0N07QZtyFUye6rcgiOFbtyoO1lkuV0iQ602MTyFK9xLqNHtNy4cJaTO6hjtiwNynVc34ZA6H7k8ai6S6eF6jIG0xJx+JfP97lzuCZr8vU5SIzImaNpiQhyvDbz23//PJcOk7hD4iIvJzfIgOGIR6ZPEJpWHZQoacbF+omeHw8aWHaNOfaIyGeG4lEryMfhtNmWh4RAIpn8dLs7ZE2eTVDwK++xDoSUgh47WDmKlZ/k6OosEUoQjk7Q+Kp7OxwgMFShAv6z4pTW8loVj2+qXLQ0T3hmIue8qHy1o/HXjm089m71t6mrrUyDftqMYtmfvQXKDlZ+K1HR/FkqPSqcjGlcPPIwbMw3wIFKBdVMJ4pFLt+oOIkWZMw8pkoYZ3byw4LmAF+7BdicGXFcb5PWtDw5XNNVc6eB9dv0rAEpgr5J+bLr010bpfGw+IkRoxDbkDFmQdEQUSElP5bViLo1ur/23KN0jEwl+rGC6AUMKxHcv+T9F1Ktpn8jSSrKxJnVkK8UD/tH5DN6nXB8mjUdFU539e9ywLtLYCwmHYVEVqnFmdubduaSd1ivIo4pTsX+mJcOAkrR1D60RIoocCBIdwJhCBM1rOE2XSlPo0U+khALvw+zfxYzwzd4roWlLJkZheFRR8QB8v4USwmAcDswUZ2P/7v7Xa51Fs7orYebYyww4YW5869Y/c6Kq2eTR9HLSjYuChTkXaDygoo8nz/yJ0KzfX8oowaNAwz8HvQdlLU9V9hjqYMURyYvPzZ60G0itmUdZwB+sY6rUkMAZZtWStbDFmnk/dQorhwr3121XQWffrK3as0g29ASwxbsZ3dZAq/96b7/XWckbjmo8+jwdE680DzoEUUivnBgowMuBQxHXoGyp+w/cSGY88rWtmwoyNNIvChs/QsZRnbdV7y8x7t2RkliJV/j8e6qfctrTsMV22zoqgQuTSNFh7U7p/Q49L0kygXNnEYXCBDgi5BeNWxu7VjULcUHI+lGj+OTCEATzWrDmaynq3wT9IAejtvh3esCu6sEu9JOsXxMDpqxm4Tzl+pt2Wa5Bq3TM5TKH4N7KLir8FGIPA569+uJ1VEL3fW8Jyigz/nEUjAVYrdCWq2MnS4hQVgcvXq9aF7Xke/k++rAtIQqckPNwjKrV2t7HCOrA1ps88Y5Rw1Zp+9itnB71j8tNiQc7mV1kUCQXkoi5fOsq1uC6hUPUL7Z69NAM6lg0c/aeiifHoi35v+pVBh7CDM1XfvYpiK5JIbIQFHafmnhHfRTnMagKcjdE7zzgtxkTPKVrObTySTT51g9bB5ro/dzn/sB24fNM2LGJuRQsmC49PLi1jTRfZaLpo8Txxxczij5Pl2vur+S1wQW3W5qyVcIUySZHtFDQHv+EYDoZG1T1J7D91vEIV8dHzUBzW1UyuxRbP+M/CM/vsas6RzmS5traXnQ0Jzv9hYXxKHcs15TQCP744XsLjzFjILYURXFnhM+nnV0iO6nwls9TR4tlz1J9/NvE8FGg5mgpZA4htS05AK0NnU2gxuqf2vjCyWlm3ypKvaX4vxh8Um1MHGB2NTeAFhbDyGm+5w2zqJAWxVlj6dVePb5yR+aMhuz05YubCQJ0BOtoYQ6PoDoW5fCwCtXj5SHvCgL/3B5z2mcXWaRTf8/GsFAfX/ntdWZWFc2xg8MJeenwZ4dZUToce43If4zVb1ex3BMAWGhgkPwR5EgktZhW3Yi+nsnZTUr9FYI160YhAraB0zMV+ouHz6hYm25/ETDM0MTmcypoGgZISSkfwYAQaHGY45yZ91K4A4Mm4fnbMk8GTc4orypT3NLBqAxYdcY/qCH82PpIkmVOEHi1NoYaUymuImLLcib5pmd2MHTB3JR+4rLdRc3gtQ9zeFdciciRiWviu3HkqaLSxJeI2rgc7OKQslItumACQow89elXmi4P3gTZeCauvMH5nF4VrBcLjjwGD+KlKqe/RWIEgT2wGqAgSuL6b+RTTPnQZzxZ5y5HQJkEEKJp5NfoB8hJBM8qn6xbOFtyzBjVBrwSS1zCJR3lEc9ODQ5Wu/xct9/2Q6qLHnmNx6XwZus/i8rEd6UsVxGtoDrm+Br0L5oUojlwdcqyVV4PIMsR60JhZwJtgX7izQWj+GOeF9DA8Wexdmv6DWjgR8LEBp9YuPAM8tJDu3uCumNqHnF2ATYX/tuVO55OgQuiUhmDmJbF9jJyifBRtxOVI9DCNLUY71IXZYTuiYcnILQ/XHuVJ8aHDStL0N+3eYNvXwHi2vEiTPnBqzsC4TsPnFVnYY042j5i7C11AVdBZ1pGSa52jM9dIL119rry0mgGxFzI8xPs+7bmMfYKh37A4HtA081olG1m9S4Zch2hoNCGVvVhd6UL7C2d5hKIBHoB+Uxarq/4aQXhh7IWjSj+ca7Vhqb4+ZwY3nHXh2S9JH4XZxQojbe/eINxYlozTYtT2rpU/xbj+W2hXjFQ+z+dQ8wh9751MP0UpjutQdxz3/FJYAEG5BF400JXWCBs7KrCRf/l+F+d9EuwVk6thOPDB+HNS9iWlLmDgXvY6K0vgiyoeA3An+jWufdAG1suUMBuJT+/w0FNJZbObUT8c5q5WtQxASQF6E+/u8UwVBs1eo8jTamCrcdhZJlADJbqn3crcDHQlBQNGq7btcGKiJXW6q0cn3F0xzf+k1JJS2testB3rx15ZPTDXm8QV5XE2qxBOdM2n6t5YbxyNOmEdsHx+hMp+y9pWkcgw1NikeXuafJvzcjaNwE1Ad6gG79S68aO7jWpKgBETYLmV4ONHhBk7Be8tjf2WVvWMDQvQdOnk448yeMv1tQKU1xev0L171e/qxkMZbmkfKnd29XRCK2hgNNJhwt1qiYWZGKz7Di6K3fGDT7DO2YQ7WU33svE/WKGbWQEvzUV2w+VNYDocI4yxQ6i3i4zU2TjmjCwu5Pk+Ja9HSwLpEoUswq3tFJ1jimthgMXd7KjSl6Qd0K+vxWT8G4/+xITHsWDGSfQTSdFQth5uVVfa8wrkDZHTGVgpJys2ik+3I0dSf6TNo6A/sVptyY/kx1hdAWKPI6t/xj6s+fPMU3hg1vkEB0RRHq/tCy3KUUhzU/d0JKxTyjvUms5iy1GbOFco0NA4t83SK9sBmtLWm4kOLLflyxqgQYP08iyXwYXzKnlQ6VTipuaspSJ9g5H5Lu3eLMnPKbhcwuEg0VZ80ppJWjUnhS3rL35erzysp+fJhxsUs86m28/UwW+IgrS5Y0zWaxlFJ8xML5wk8sg1ragF+eNajyI0Y4mwStxt1RZH2BjaAhvu+SnNNIK88thEgZEsoHv+ii+OMmXJL7dnAiINVDz3tCnqDgpQX9OguNGgZj3axcjq1UgxDw785yNIpqNiLgv57399jVmJ0/RStNswaFIs6FtnkilFZldxj6m562jL4p5g3Y9XCiXRJX6nq2PGJFifFR7EyPG4jDMnBM4t+O8ZpEp3th7TCxEw+ZG4afHl4sNFaqxyLh6+979tt0Aq9BrqI+CS2U7HJoKiGmyVU1lFa3/0O5mNC1bzRgNMy+GXyifLwJP7FwUSUmxmVRpn+gnXWoIuswPutsiciurvN6lsMG7yqEc2Y5ZI3jrPgPq0xEKPZpF7teJa0TQn8BQL4Th+hjv2ByfwKookyXEmj0d1KMcsmfKaeKK3cZZubiYqmSCrnGpYTwgPk5itKucVtjViuswQsDR6TuyGSIHYvlz7wkLg1Rr0K9kV1o8RgABlhbLrN74cVWJW6TnfXN0q12JFMpUbEa8t1+j440FA+17o8qa8PQ9igkctVROVIfB3jU5vtGm5pYYHYSDvU2TEc15pIz19ka1q6c/7WXfF8+POkApdOw7nn7Kqz6V4tru7NXgnA/u0g6+fPRT3hp/QrDQwMsjwNCZxdWrR6pgCBDJNc7/KAlwC0UZ4yWQs0KsuwbbOgcTxQPK54wiXr7s+221hzZ8RVxfoRUKM3e4lpxHC83JllxlrV760tl06f7/65qhE1jhMfivAUXIXfRMe3uY/G2TpWYzDrw5Cm5cS062Bx9lhHq9gtJp8xZwAtSdSuW/Kd7+orEAiswA76N8ezmVGYgNaYlQ/xk930LAWAtKVBC4U6R08L45IohB1kFia7XJs0TcaT2zBZoLFuOGu4iJaoAnfjL3uS6gnRH7G7A+aT6ETlmkYUfgrBuaSLLDJfhPJe01PfN0oqBTeQURasl3N8BZiQSgdr0aDv3hPTiog4NSyfAUyy98WP7dnTDWQTY+Qwzgk1uxwRqHl5MpC/84Cuw1TXfRlgJrwPop10kCHjmffnFdxCe2J3R3J5j+3H/sZn3IUu3Suy+I+dAOMWvzwExNR3RRPVelZAhtarKlXPWNjPRIVP4JsAFSRXs3o/fSYAPaV/zP8q6DltH47/rYhCLdy/LrpOsbaLf09eACcClJosNefetNElkSFSuCgeY7oTAAl+8Y2zOXJb/bgEDpoDXfQqc6lnlBr/WsmVznkBS1M7ufiqpxvKXjwvR4WxLbh5NbMNy8LsnX4UiuAi8XonbSUcVZKQOWBYUecSOMj6jMG8gHu7WNreBHY90lV7FocDprSrSbexkAtMW9KlXcnrOyLnZdodGYdxz8aw71HztIqLhRdCOB6NyzHPoS2hDy6wLk0I5Jr2t+U0A+A7EsgSn/Ih03A5CspHnVF4MOic+Lck3m61Um+GHDEe4DrHBhmgtDlRQl1XJ/V/VumCHtUDDcZCkgjVMBOmVOGYW0Rcdi1ahdjhBcFlfjA+5cRjBop1aNDvdrf7CxkLVgxiCxhRctW8wczM8+kVmIrGtkaHGlr8y2D098HXE23r7fnJFUU68zyeyM265igNOGPzFG0dIgUDWN6S3ZcfMERJdWVvpGhVEHXNLeWqHiTcF3wOt0FbJY4XHEpmkoG9MQPJJ4ueQ01+MB+SR0rCSGzlE8zod19q75LlLWgzogpnJoD4gPxUYcX+Gpc5Ly4nk+Zm8LDXcNR7SNVxLh6NAcx8ekjb/AC7ADlRnfuHaHJaBodZr7RBX9FLTvocY6kY8bavdAkQicE9bbwGLkZu6whTCJ56lOvM39ijehpTOFqR3V53nQx4hfOvwRPU2y2w7UU8yiRbcyaX6jGJ9CRvl9ybV1tebTp5MMuMnwLcx/lven0w9T0atJuiUE2WtYGiVMaP3EchABl5AsyaCpu/BKAWDFvU2vaCL2/fJBKCKLjxG6xzT4Mh4wHhH3/EqsGSoQAHu2wbHmXHj2LvoW19GXDa2oyeKRwGG1PU+S7mE/S+UmjHiDF1oqJ0R5QsdjAZYN1MzpNX5YDqWYfhfdjAXyFQaVyGKkp1oEGTR8MK6jaGfRDFd41u2Ex8ac8jKPYu3pXsk8gu+m9tr1RVzTTuDsACW4S1h32yFHX7qpXSmA0QVEcR8W9j2Juu0pcYqTmdis88VgT3gq7iYue5Hx/3K6hFQa9rZrNSDcjaSQlNn4LSqs20bypnKqpzvnnxjMdz5StbzvoAJKgVZa4DLCVoJW765/KyTF4s4YztmAT1c0pTmKJHTpa106FegDo8p2zD6uOnwpYi0vJlRMDe9wPT6964UfAf6lq3qWypUOx9q6BbKEYt7K3gWMXDNN6wAm1fNnSOnZ4JkbPq7jLQrl0wL1V7QwO/sXneKGfTgUL28I5iPVG9dA2gS7Ki005JUR7Vmw4gX4TJvy1WS74cIXD08LCF5obqcZwamuoZ+FPMJEck0TLHjyH1baPr55/Cy0ptDfRJ7d89pbP48tLMHG5dO11Z8xSSpPGQSgXDWmpsNsmm+MvxJjMCi7OFDHxxpmTtjgnOCq+c7Fi1DybfhAntviKccz+sj+OPKPYOKeYYPLvq6MpUx/chSvBccg9dfbeqetQNCs3eiCFZTU1mrDido/mib64STMgsa+IKLk9PyxGGbVSQB9GsHto6f5prAFIbRDSItDedz3t5+Nn69FFS0nEfmkF7hKBmNVce5xv65USKGBoHYxJyutSGnRIq7vMDsAMvirOEJOzNi5Kt7fypuSU2c2Npo6UH5jMOkePH0TwgpammO3Fb2FX6f11309z/mqRmQ949HHRj/wMzKNx95M9pwKf+UQkMEwisL3YVotvHhCv4y00Ui0Ql8dR7tGqFcSdYtmoAOuAodkBNs4PZSjAAF7S/szwLddFMdCyB/dWPgFUiUE+WmUUCjYrKfJLQfNNpQ4NKaF57w7Kp/isZVwQPUJyjJavN3fQNKU+F74jVBJYQEcEdw0Niinyea0l9PJ1/AcTm/LI91RZjDvLI81pnat7RKU2P4/TnIAa3hIEfeg4iGQ+wTDlURK6YjNpN5s5VkQW9w7sDYKU4XmjyZsCQLxztqd4SDQvLyuPDhURAJXKfR1c7tq3mRu4usFHPqz7HgS0X7kNxiWWR3fb3uVwbgKpmgLYkwKrXKt09COw4MjhxeZlDXKy7nNLHXAIKPtferWQnZLboonQXK81x+BB3oUidBehK1swSXxVbscj/LsfONu/xYEXYPM3aMqIYd+2hAnFvDHbdrJLhGEd3sG5PyxqhzejhQJo9wauFK3xmPYqxB99J8zYU9/yzrEZNzzbvPoR9vUlE3Ha4zspVDzHHffPZMJ1VLZkKqGCf8ZqupqMt6T+NRPfmPm2xeDgvzMrRJEL4/zzlu7Z35smvzbgeC25VP2CUrZkRxEi15A0769ojdO1d7C9OG+swj1ROMM3NgKdeBADoRMeJkRZcZ1FbQu6C0BS9NNSaoxtFzYT4lX7+PQ7BKa84yrN+ujVVef+SgnEie1G0N+eOtbZF/UU+wkeerWjloYqFiqo0vBnmxh+TwNMo9I/8lfU2XTCT0K4OoWE08ipyNHjxHvfhY6qa3x4HzdQ8+jkiO5+j91YkihS5memfpFREHP/2veN5XcRue2zCVuAub8V6vDlOvyP+PBm+owyRhMmng5wwGGIXsOkQekXrXpE/6dFjkHwwoFoj5bIFiqp+4wHpSWRbv2xGrRpd2c87FzMP6Hfj/3LWIBqFiNOAxBw+AAP1XqUBszdZhzOSQrQS4Ein4fyV7MaGsB0VsMF4bPb4lx/foTGQRJv45LpoxDd84xCawHaX7jpXUrOdkFxx2oUvY2xqpgIvcVufwd+zAnaaVTnEyDXD7S/o/xrrk4mgTjXhcjj5Rzrbr23NmuZQvpdNzny5MCR9bwvIRIqzOZZLsstZSCDYa56JTvzxgBs20dYTtTUbe21uljlWqGfSh2bYAzOpf6UguK30ZxNXgLHs6Y6urtxFA5iLYvlue5mDONW0MOtQjhqr8fRbCkYneiDkvzHkQVT4F9v9vxh2SIGPBH8bZb8ugo/BSgXojeSdNXbBAIDsB6DUNSXnwlu/bFLaCqSbvu4+YLplwO1JbtrMf9ZUfsxerAZjB7E/zl3qwgK27FswemUmSM4i37YAVhQSocuV8AcDI/CSeCDNPavESshDQ8A/lVIrAJAMdP/rHXouiNU8RL/TIvfQiuZEb6dkIKMGGOW5kT8vO8pivWnT4v7qmwuJo52AS1r/RyQ2g/7c9ZJgmMIzf0GvJJRfMNu1utRNuLWHOm9JIMcJK3qiDtVpGCDP45W1oTTMUnMC91kYhP0GHjhCW8V38xhjHgFFBfuWMsmSQ9MvNqKXiqtUhDAkIy0PW7YSKaKUv6zctAiIk+Jt17kG6LpNVOeMvJnlVBaJSkKe0HTJJUMvf8R2zna35/yh2wNlWLzIP3BJR5aRNxkV94ICOlycI1/JYRZtzvWMNoIpQrdNvyBuBydhSwhRwPo079Xk/XQZpbhzN/KK4NbdJQV0JIMP+Y5UBIM3TTYlFGYVjcvA5yVozkimco91Fx/eo+ydgAx1gMezTh+bYxCtXPYkMoPdtaElRusxlmdSV9zgF4Np+iylun3LVxCycAFxGCFsmARf6y4I6zXY0tx81aQyalr3/ih+ZjxGNWdhItgNLdEZ/BOIJpPoAveh2bKbEFxU/M0+4xqDo3Ox8MnNn8Lmv15NJigSvJV+y2W/ZogEXNiv0/nuFzZGr0pKujOShzcdkEVlMw8mNZXZCbtM9V+mfawtLxCTvo+enFWhJcFv8LVTFycDjPGBXRQKNN+z68HJtYdpH++g5WdhQpCO+DE7Qdu6TmZgtetrpU2ZlgpslOx+4hb3aXaqbdc92LCh51er8vm1GQ9uWD9+fAPRV50ixhgc5zi2Jsg1xQVxzlaELRWJ5biyF+eCwNV0oFnTbBHr3Glm9qlGVOpoOsQC8hlNG88fxeAekkCGnHFn6i5WzyO7ShDYbZ2KM4eqndyy01v+6TFhmkxgc0dndt7EzRCcEfBxSaWZwcev6MDZcuvSZQ9CNSd4Tx25TY6UAbrhikuP1vNFfPdZhCG1pe6vx4D6Ez3zIb0zDa42FPpxWvIpEeXb7YTcfZOahSpSYaWLH/vq0F3U1KO7ZxliZpoMBBYJs91IE0bOkrPNQ/USYY0qKCO3CU+AFbOYxzKWBkIglrX34377BZ18MKQCv1KWfIHEeguSpvrNH5RQOD4LeiH2gdx1MOAKphlL41F4RpxaU4dy8xERFgqoyICQq9XmQ8WJSokwqvhQM0fLtsvyCO2PAkJ3BZg5IqoR5q/GdTLgOWPFR53Nqw9Ma5vBzZcQ4+iZgetmKg5ZIn+/7Jbi+VlViXuD9CaAUtdEmnwWTS7wZWuskVvc/SDaaKV+Jz6HrZTHo3UrAu0IZDBkXWmL+mTTjdTb1A+MdhKkY/hvFNwXj1FzUngsN58u/kTdJ3Xi0hy7efR6faAOi4SKGaiOty8lxDFkiD9wq2GW1EZEsoWGw/WzxXhWDzYY8CC7WuLFHc+x19jhH+FiLXwDIARRtnkJPF2BUPZ9+grZ3tjqAWhhN3h74w5pooRQUNATy05A9HDLnILGSCtfESoSilqtqAIQ/TV2t3KhOc+teDf5t+DqZDdB8Ob9YXyklrSO73pR0QAxPvQj57c6FIR5dOciqeHZ2LRABMROo8Jk8V6JFewCL8TCd/A5MSbXLky1cW7mXobqgeEXdFDoEydKo5oCuyn+2JYI/7pIGFAzErlHZ5hOaiT17HC3zp2HpJwsIAb4/oIoZ8x8ak43Yp83Ermq55Dg8HxKGHXbXs47sh0PzQELTGFsf5eO3lYAuJjMneoYWk8W/3tW2WLntEKBZEW4hOFgo8K58Rj0vk5KLyezu1d8SO/JcuxpOJqFUM2sxBmbQ/9qqwb90R0WulpR/Ju84bQ5/fTh7po/pbBb7AQaYNdK3fatD3K4TLHAaa66MQzp/+ZGyCjzo5OXRzJ8UHyg/YpNHvvlOpwQIOjakpLHwGV4WsLDPjEIqG23ily3LL0dlkYQxj3Xx0ApCo35zYGoGOtIclYS83MnI5TwVdQ+Hg453WFQN694DaqhGaL/dm0KncXYqXLi5polgT4DOrzD4oSVhrkh8GW2PaXjOFDCLPcn4RQj8dRGIJuV81LxMPZ0UL6zpkaebhbFBxcRJe38UiTbUPDjFWk2jBqzrBvXcKmgdDcmRyJhIpuq+3DQY464AlY42z2EM0yIK0I6b+VgpanMfpdWo7OxKY8RM5tSJv340/qD8SxrYsybMuUkF8fHj7HcvxEPC5YYrH4LW1YKg6QaeFZLvPbrHZHvi4OXLKkN8cGQO8019OKqcv6QnBlj01e7qS5evoGm53rv+VmDxxCXDiOrDg+IaPeMPrn8TJ1oReXYI3yb+4HQbikxP5TQXHk4YXPUv95+KmkxGsRgTwP71YiMpqNXp0loHZeXRp9i3euKrVtxMM0e6XAoACwNtcc6sOuhZVb1htBLudzahrDFt5GkdlwHjZl5y0LbvSHwII+qYeDwRKTTzyXaInHIM+8rc5TrjUlPRVwB5LKFpQnV8e7vLv7T7V/iJTW9h9TnRtNCSGcofBWYm5P7wZcAq3AFamEW/GMbo27ldz0plt5HI53ddWkn9IuCZY+Iy0MATUh3YenRTbVgdLYtu893SuN6EL4e9V4NhlzUjI8nOS6B99ecyC1Ot8sDahQpWHbmt2YvWGyL3S9tEVLKYs+LnghBmmSl2uPWfqPobPwBHNLW21LUjfZb7jfLMTsMp3icGO1npK/rCsUgdBVKVg0Ys+/WKuTmVJoC8Oe5h3PK1TQhbpZ2ytP9nlutQPtLAEt+CVT90DfVkn7lHLOX8AfS6HLzfHeAhu1alnl19RHKV1LI0G7RPzYgVaSpX7th9f06uo2WpxjL86i/2uzK2qj/ClHbGDyQr3F9/axmq4kJ7zZFVXVVwfiFr5bhUGVZeQJHKFAcsnqPKsb8vHyB9SpFpT9U1U7D4aS9vYgqajxhC+hOkolJV2dKAxysCkWBo3SPiPUrSQYZxOWwWCoQzbV0oeaDEcgUtqI3nq9TSmpQ688/+wb26P2CHLY1H7q5lypXSrnwnnztq/jN1o9lyvLmLyGguV0VJnDCREkiUNrZqGG06MsyA+Phd9CuFoM5M1Pyk7S6TJaHdTw0ni3n5ysAup0kyxr65lFc81NcH8xSmpp+iOEtQZrH/y01k1rGMRJAGFhi+nDecpUlnrh+qBOCMZCcSCovOPJrxjZnZJDMLdpMVu+tBSVS1nKxsYjY9Dtq1/++riVfLUVhzofIcIgQQPOqHioELxU3EpCcZMoL9laa5YlOZAMEp5apx7CphrkL+fyKbBAf8ctwVd93FTo7F5Oc/alNsCgK6lHruPROtN2RybiLqx8P5LTUZXU+Aoyz08zYHasR3U8hPDKj+6arWXR9yWdJoMn45prCSURKKy3+JHgvs2Ot6v6GbEtdCumgCttv2VNoU3KOqUwqNIWHqYm4eMijTM9VWB7umEyp7UPOI8fduHJY0W9xSCZdvc2xMjo3Zdu2o/WZKDMOSh9UmLvo45IBppD2dG++HJu8kbfFdlwuIxk2KHhgHQeNKcHhFkYGRzL2VJVMOAb0Co64wvds5CaYl9ZmBm4zuGDeaO2eI1XM4+rD/HmZyRF62SabgAe8TF43VuMutigJJMfbW2UK0azGLFbOfujnHD+GGBYmSmOQbUCOY99HYvswBQA6r9hrc2jtsUUxLVjxnZ4JnIrTwIVdWCTPtpJpvlA7m01/4tbUMyz9mv1jdN1jkiHQCJXXKg8bJ+aqW6rbwbn5yDSHBTcFXIegrhHGAjJOZI1pyP83Z3vMYTAJoo8V9IwyS+U6OVg78+IhSYHDYjRs8FrF8smHQ9h4qAYxp49rRP2d5uxLAuP72GvZaYvfeLOkMrcg0PkPuq7NsXhMFmiZa6PKBH1l+oKHI5DBLdZCvCwTPdXqmnz8gLzVRb/ixLTSdit2nrzt0x+5rDeZT+ac31NKNskQs6noKlQccyD3UxzfVZFmcbpmrfPsZD0Ve34xpKWk/E9Khn4A5yVPVq+dwnv0EyYecPqXGU7R8suTW0A6NJWweLI3iSGDlQXzMYsSWkSMhFTfyA2vTDt/3wXk+mVU6bRNkZvNnyVHYiA4tmnNwdh/RVsk/EgSerfTIf5VBmuAc2IKSeL5Nbrg3acgFj80mI8SWsc3dNAGCBLLMP89gH5UnLTKq78d9SxQH/g7DVnBh/qnBdw5CDrw/uMzcdXSxWqGIFcnQZt/1aOHxUg88MN2w+FPx/V75gy2wzEVe6G51PQIR2tZsxbv62HhgjwtlzrVREw/yzlaAiuXC26cnpvQzWXp2mOgihyPCWqq38nEadX2T7f1Y5zGxEGBaT//IcL/BsquAJX5EDbX8X1p8nLWR2yyjFRvqC/jssoCJBCDJOsZvoBfXqQSEKhNARH1YfueeKBslAwLi24/wAO1BHptlf1kQFNsOPlDvlYednrEp3a4SAz/G7LIVEsZBu0EKWZu/euB/XKdkGonP6t6lgEcCOw8mceuzvEVzyoPnMyzrqoNQXJb9C8ZCXSiedKiCgNwfNkpVlHbUgE2Rb9WFScOeEad+T+jT8XlSc8rcvkIuhAv/gxRu2eb2GonLTyokjcGF1EBpCJbhy2H3lhL0rdZIw1okA5pBg2oRfQceXTPzhuNKorTEF7t1UIgDqIo7/loxyTgbtKu29o9K9KujvCqUGyPY7upcfiZLNBVKh5uXAAZjQjhlhBp0ukmO4Avxu4xAVhCtnsOIA/tAm94U3HEuSr3wq+ZLo8pyoC9EB/q3pOzQRyCTkozmJwo1Ln/2xEbtNnS2S0NUIS3yz3/mBIdxONHxqP9FW+uoGI1F415lI1nZwK0SoPA0+flaokBGEoXgZnO4GOExU7VOjdPns59ekmDxqNhEHeAF5i5N/3W2NC1XGFjTpqLrnCECiwVkOTrLtp2ehUIaejOG6+1336YQSKMSsL4zhUjw6SQKryVRz5Ldn3R5/r8AOi02RJkQXPdvPsl/FMg96E/cJmIFLmEDzr1Gkh9G3zisG4pqM/MV6XIz+CtDUh6hmJB97VzN8jaPSS90vgDjvnaNlKky2/zIhE9ObugwrftI+Oi2a4VVaB/Mwn3VmaWjsU9NOf2usbcN/GLQMjvfeU/YvyEERPKw1leXZWWk1HXzY3P9MUq6MZq1hkEgFzds51mv8mnp1i4pQprPwY0TId1szXwe5TG+R5mMD76nGPQr7/EhQWksjsgGs7Zy5QYvMcGV5tcXJR+6hlHFIAc/M6XjkKYtwm673Bi+K1tNO9i1YBePTur4I+gMsOK7f7980mcJXhgdWdhNzUN2JvFsvXq3zZRG2V30sJtJYxj0aUv1u4/ppVHi1iHnTY3gDHsrQS8YwMX5XwZ2gcFYYe2wd7ZO9swr0gb8zf/fXx8QWKPXcK1UdJk3760B/TMlpWLCbhkqVoSTsOqzgkmFmFteCCTGhNyvFhw1RrTIWzRxq8Tj5FirvKvtkp2GAVhnZ7vnr71pyI0rKwQbVxKZuqM7GAvn2mRBj5p8djlHUsh/r/eBECptpbbjP5nFyuN4mvQLZCaxeTkDUzd/kNGLIzBFv1CElQO+xmf7Dzt1f7GM1Bh+wLDCJZlhcVDXbtPuGssdEie3lZNiWcXMTjZtWAT5MCmpq6JCRuFSHZYGKcSFZ9kOYJfEqLIcWdzpTA+Hmu+ktgSUwXVSwkaa/aHdZXh7IOyrudCBalCZpgXGRNbhN2XpEY60DXXO1Ci5ayZSoxtG0WRCC50+XtgWz7qgX5MRA5S+jzXCYy7O7Nn0ljVxiBxQNCZKZMTqi6mPfy2LZx76uyRUXHjnpJJEimflHDUxyX7fFg7iJvSrsZMH6Uv2xbfQNx5eCbx3oKycUrBY22KPmgfg/w07CDVsw6tb5VxPg5/X38cQtXI47U7MAGGjO28II12T+PjaXHlstPtkUQNn0DKkCYis+kVAkA1wyAJgYKLGnKD3nlVCarYqCkNIZbiVwO2Ydjl7N6iOtvvbAfuq7VKZLo0jEdw1YdsRaHcuJQulgb51JyELzYBkP1hd03IDcZfPg5XmNvYQSOINsCSn3BuLtkCPZRalK7+S97zxvJHiJCZJM9XP785NZ8B8fqDe/Ot0BS3PH1ptErwxBtpgfOj4d/41nrSjJQf9bV1kfdBHJxYbHILxOsWkZvoP/Z4Sl0Yx3bDjTF96xf96+6uIoQ351Ce6DeTwTnkPr20YwATlnhskWIddUohklNITCq/07zkiEc3B58uiBG6d9YAc4h/7s44FN2RG1UuZWeojrOZIhElvDP4KqHcOYbqqS95o7ilQH5ONJfy+aYiB+sPpn35HfHG3duLpNvBjXc+Klf4IKrFHjeVty02xPTNnbdL4gtkqPqMLhSgR/fDXzxJbSScqewiF1wdVoJ/fGL/nGWZfVlDHOQKD+/i/mqwXqvNqxtZeRHwoe/bodk66B9soOnZp36gdzVMRRQsQiBFf+HXjRcrRf9FsGghw3+qoN0JeeMvDJrkSBPsESDai/uVOzn2Ohge+UVdi050fdWpsjP0D/QuTdYs6QyI9xnhU8WT2+KBKzoZ7Bq8fOdKPeLulUhJjT34/EOnUloqus8+pzqNh/UdUOhgTlrbkuTfsaIYDm87u/GNIl3N53uaU8bgaBjpz0jdu1f59K4KFDtwUUeEUoeYx6DEkWKHdi7dtHhQF44lbysk7PqERrsuAQu2D5tDMl7kFoGdI8r/s8rMytJzYBU40wqeFvTl0ZVLdOB6Ya9E/f8VPbGx5MdpYqYMLMyB0QxVdnoJ+tgAQVWfH+jtOHD3PsjuT8dOTSrupuvHWRHQoGI1Qj1Hc6k+Mg84FAZ/gzl3SEzuGWZKFwuo2D3EiG95D2Z1szTqAuFRmT1nEh20tkC4ysmXx6JtN0taK1iRR62s2uNW5rSAvMEJ8yotr3UhJe22brlQn8Gvcq1I0aODaHJucQKVe6SXyfcDWODMw8xf+2C7Zx5a4Qlh7pJs550DictL4OxcDXKvVmLgVWRwb3moxv4kcxzm89EERJXCl7X/BziBkGQWOHPGF+6K5NFJYOFVv4+NyFq+OPMaSWZKoydplufY+CYyL63T8MCMmwqLTmAE8h0prhi174wnx7DHZWYuRJSYZ63uz97AGOzyI3aebclnud77znbZetbWUripe+AadLQeZPtWsF+FNiaXCy/98km137lWewyc7Gamai1Hd3Ls+KMMVh0R3NKTQ08TIClDfMKwUGKy/7YZlJHU3uW60X0r74Afh02v5MJgVOYkjmors6GAaDU7yKHydfkXYd6nEjYc76xws1LDLWCNNKBtUHNyLseOyNDgmHiJ41lXvq638RzDGis8WIniOb/pbTs+HsQVGPi6mxG+CU+oflMR6/qx3pVP+GPgqa0U0lo8MVmI1cBgSnPGgrh+J+m9TVg8nivua0EQP7xai44ruC5gsAVOp9bLsDXfHQujo6IpBmpfbbU8PDavZpTuJtmflVQuOImnRQ5kKoQz2NBFjdiHH3cF9QLgDP5vz/W5trCy22Uk+TCjXjdbCCHB3rJhKYTwiyQUf8xu6yTKtIwrbw4tzFgXDODmWYEnnpDupk3b4AP3qz4AZ2En5wi6aZV287AgCF4vH8TlWLni1E5Hd93vLxSYLBWSuj3eXGFtWyWpBkIeKu+YsBh19VeakA8OePM0ILu6dYYl9DNIK3kU1ybH+A5xYhFI/EqSX3vtNs6V5eQgxYLvu0hYFjiG+n8JzqLQVROiVa8XNQDYJtDAetPFSuEtGI3B8rnbbrNo9TJn/z3lRYq0ecBIe7a03vLESwhKOm1bGTk2kPMv/Sh9wyCOmIore7JhSFT9HIjonBfi+gcdDLfFt7dpShJmW1gkcXmitWwm1cC480CraHm/or2MHphB9Q1bmt/SBXFqXJdcv5GTt3IS2fRgqThhInCjRkh7Dk1iS2vMBLSGtRPppb4FEu762JehUMQxxLQre365CKoJGvJwVde91XQ+bDp5ZsMu/QHmLgITmwGXSpQFQlQBajqquxlwIOe2cyfezaSHIoRNLcwjW+epnmAtmmWA9KU29v/cA2iuWbj9ZV7HR4anhHkjbxnzKPHnIZ7Mm5wAf2o/3xUhnfH++quS20TdhalHgNhusidPKWyKWV8ZjFLgb1fX2r7ifLyUtxuKHHIfCWXQJ/DKeU61vxmPT34MTi2Q9r7/sK1CYuHVqMBsgtfenn31bUzCoyPN89KiO5wHveqnk3uyHnJSUBVTQQ3NyRPmeRKTQvWEBZ4QWcSgMyZF0RQgvUXRcp6KflF056fwahSioP622TdcTVYi4cAwSZLWDvfjoKFLMowPQpzn6ogXHc93fFA5NZmnwslSuesOyNI1EE3RM8kzat6thkmpOiGmm69Yn8yNuxz1YuuPWekoybkee106T9WTPXo44ea9E5QH2Ig6FZn716DBa2FyXHG1B+YfnmhbEpANlOi61BoGO4+G3WMJDokJXj9GhNsFqdaLjA1pkhLP+/mGCZoYsxNI+A+sMvWyoj+PMWeR8koRz+r9pNVEWT70WhiAkNTrojdr0sBLwxIM7D4zT+cVy96ZE+ABi9CqkM9VK7iOfkJVp7AqCqQ9EZ9emn8rB8zfoQZUBrVd6YS2AqiTFt0nJ8HfPGmnBWf3Xi5CgyWoLAmHJp/AfTdHB0+Ns5DlhL6UJ+O/6xys+CWVKtL9S8fVHkpwZZMJn6jVtiUTtXjywmiVXw9a6f/G7Qd4tZtcoS3aytxXYA9aGGmEeBobjiammhUaMDicH3nlOkDvvz19NqWOvHC2SMv7OQHtDIykYerPuoLz6SQNOBtw6oX2Sj3ZLITBDcWNx9CuZYYVaE+vleXnATrwn+PnuQ34jL52tp85aIOk684SUlQ8uyO2t+eIOHndZ3oxD+BcMAba/JVxRYUAUZoEw3D80WWOz0/ul+fYbhFnffx3PgOy2LLiu82D5FMSpi+Pd4EkIFTgfv7p/0vnX1wp0VpNzyXs/5S/4z0RFS21vIF67k1ERTfFuhLM/8fdbKognohMqTNF/+oqvXXLuJB7IHeDdn1X2eParLBEpz8y9CAN2g5VdE7EimekAOhkw+tTzqeEsgyQL4iVDnWrP/RcBd6CDm16/5t+I1SAxCn9wo8knzmpg8DYP8V/vHw8Stu7cliAt+G/VR4XPNZXWF2rZBeQO75os2jFJrbtkfhN9BzHT4HGgXTjyTy8NGsiQdeOw12GjYKCyxP+34kRHZqYsn0pFvVubB0+/emKRgiGXNRWQwMSvAB1xvTprD0Zyt08BjP/4W9HGNfNBcA0Qb9qF5hdQ4dDqpKAFLoIW2gFEVKOganw3M9/4WP9ckP0/g6kaJDRurtxNgT+PjvWYEWlFa80wKYCkd/0ZChV94njjGyg0t98Pz3AL2AFAhvRRiJwdfRcQqqhWkv/o6X45d5w1YLJOye3v7rgta7Ya0jAl/an42ng5Wz4S5we7n2+1W94JnpoGyV8WW2HYjKLkKmp4hBKlNtb5y4W1MrsG/wfq2N5Xrz2kqhdPQL/YoxgCQd6Y2KNkADVu7TxugQRWVuNL0BUj3JRFyWNeCmB74Wsz54OPnbq0GFFxzSkoiJ3Rtq8yEJMKvOMMalFKH7YFHKjb2nwrKVfuUUuRtTfJDiBuaEHHoX+MUrM2bBaAsSdnY5PjqcMBn/wwojQxzt2MoOCC3OEArr09ghhsj2M0mue5ntQcmcC1R/sK3zfShGJuazS+mJUeKxk5u36CYj8+SJCq8ZEv7bNf1+BywGeDQoTDGq6Yh1xW3Suwo2O/ykazTPK/TdVOICyiwK8MuQpK+FX3mqSPzxfLwFJ/iYDjs0WgW2kqXYgm+gkNToB5+jYH83Xlt0cbtEmkkBaVGlHz61rVuWzrK1yjn5nYHKvKCrBPPRth3AKDQQB83fdrbgIeIfB3iHya5NPpEyxbzmtN5Dnk7GqrQ4uu4h3QSoHU+74zs31cWqIx4SZ2bwWLvIxUtR6gufZhNZoMcmSB5z1O9TKvHMORD+VmuiqzsyJKA1OaApB+b9x6u9FTvUkalgl0r7raV+wRqimc2D7B1z/OiSagdd5UME2igLGUcgPlMSX1VsKQp/9yDiYei87KTBA2NPCUmgaLwVdvQFFFxWp2vGCY/KCUvxt3FOu6xIgwS4Vybvbj6feUCkrQPpO/wPHJPhAobSj/aa5YrUvjHMcQkDZwfc9mvghrk/PIPvcJa5InhVBfjh3Xr9vIvA4ac+m+pywS/EqkSX55xgiyj0TB1EE0NT3W2CPFdVD88P72SpdFzHS/6XsmbGtM8JE/m8eojzd4PM1bNADliZ+XG/9hbcKg6PftVKyKKt/8Bz4lGsHyT0VKj2vDGp/qDGBajSHrqzmpEjW5LXsb5kTV6HgbMcnPW2dzQju9N1sI/gPVlgGmk0bHKOX2Ws1q4aPizhcM/XiJ5EZNUK6bZNUeFaUJVTvGxglRUY7vdnoVOe0Raho3huh1XDeTlHpk/2gBjjhUQXe8FN5A4zcRqkNtKpSVq0xyw9j3yQlQxq/Lnqklpz8lXmzHkz8sX9HJjHwyn8UAjblvN0ZFIk4liejx0lVACoKvpsT9+pQoLY4weMHRzcuVC60DUFkaqLfclS4UJti5WK4FE3dYcc0OilX50uscLJomlR6pXriD6ELNNBWOSMt50CJjPkyt3Zn/xj1dlPVP1t6XExK+b3jMoULLPOrEGvjELfAMM1qcuBb0AijkIuFca8f8xapUlkvLjmmJW7RK94r8HaPzvmHHSqX9MXdivNI4A+JHy0VCe79UZZJvzMGzpnsj+Q6k3EItDBiA12fTMlSbEOMAWCdQq9TtyUiAaAqJozMzryEg0k+yVHqCc/DyJcCE2V4WXIhEnsOc5c8f4ChWfUaONhPPWogpDs/lyVCvp3m0NSfrAJKNiVy5aNC9gZ6c9BqwYgj/cDO3kdam6gCjhR+akALFYmt4ixHkWxKhDTGs5K+CwRiKJnvxP9dbxRPCBHbiVa8gsd2GuiNHZD98MNwXMdMC0MubVodd7dnyk3UQFfCIIL1osPxY0ZJ6DvZXwtZ2I0th6aqlTMULVo+lhSIU/5qO63lTSa3MgPRJEOi0AJ8/UlZuvgqLw9dyEDQoHTKWOsq+6fzoAyvIpv14fLaY+braPd6NkSaq0RClMenK1QLH87NZriUaeuCo6SZ7/CfUt2K6VOt0AjIK2jR0vorf6R8+TVzxZb+QdLimH9pU5tQc73xW93QRPMGy/gCK+R+YzmV4fHK52GWBEBL05EEoTY6OYG1WWji66dWnVTg0uPNw839p/yjLxkCfdTaH+v6hVUCd6HlROj6W8Mil6AYGC7NI2+qkZvJh/dAw/iQspXQNwwWHr6slLIp0hBHYTDh/J7Ba7ZR6cp3iU4bSXdmzhTahYDev4yKiIHyN64EANhI5OHYv1G4KXfIOvQizYWchPhzQg5eVGNMxsqrvWVxjtIbkKuHzE+IcA2NZ83GKz0D8z5zmgRnoJGKigseP9TmMS7BgAqtqyixA/SLc1KEUWrhXOQ6kA5ZQRazp3wwSa404cppBnfsS8EsEpbr/gXyW36cZ9pt1RhzyxGxDUmnZeBz/Uf1AP+gyLIg9x04u1fThm2w/H1ZXGvVqsO1VqutV5gUhFkdkwoCjzz3F3FUr1v0njGYT2mSZYvoF/fSd1W11c5VIhkEO06US5wYRmHVPYXmZnbK5YHQ8pkIDJ0yqssqFK34CuHE8RWb+Dr4omk779QOOcYomAMYQ9ILt2KUk2uNlahW/IjGtenuGLxb/t3aFoVz4oNwMZ7iyp4td8mdzgJAfnCcYtklubGAUB9k6bGC5DSkf5VFarnGEBWz600VGR8QywZ+jIYFZbtKT2QdDOYP6k7D8qVgEZByGmRedZRWaQDTggLyNgDD6pQwEeSs82+hTxWypqwU3zuAWqfwil+mytzVnKztyvMFJyJwPFaPr4Z3mTjyxCR2Jv674JVGGMUSWb0l+GtcYtd+NBGChwr8mB2hlyccget9liJhQEb0XgXfgVRlHlbO+jlZ9CcAew0Nw+tRcWgNnz/GL9Kur7RohRhaYZBBmQA6JhvzkazHRcdZDn0zDkfBmYP1PfQjP3d6qqx6gE7vrb3lBKEfK3Y/nCe4COdpr23oZCoIpssGXmqE8CGpO2bEwkSN6uqeqR4UtWR+xsgOzNeR49PTLJpFEAkXha5YaecJ8t/KR+eG7/HKV23zPZAMvHDC1rdxQ0l+6wlIgZbUybjBe6yusL7isRuuYYwg4+8+4lia2ox8RCdvmXlt00ZshBnAIfLkSwIqUzCcsD/d1ZG6Az728L4FCIqBKpbA6bzkJ87lYQpbaHpwPpqu3S0UqNDCwgg3q9MEn02X16E4xibz/rLx7NMDtHcwMOt9r1dVU6Hws9TvJVH7THrnSFESgN5eBy53Nq2Fdb8mySTxz5CitvVE+ZjHaYS3hq9Bax+uS7TxMIT4qJE7HGdsHM1/9uPNBylhP04Lck39JMe8v2dPOSJzyQoy8m/8Fc6h+X+5/mBVA9jAsG4vmx/KdUW+NXxgRt//SS2Ib7aGILsjOz+ZZQu/NMeuAsP1pFRTN90rqIVULbJ20ZJlrjoZD1VxHEoDFFGVWCVOT3jGK+vFD06gc3yDUSnZ7ZHjGmw4ZiAglY2nm78aUpXxI4BfUHqL6YQKFDCazUIryLi53RczlaTh0ry7WN4WpWK9sPJ0J49fu6RGUMYZd3+NrRvEdOrS5n+EJOTkr4lNzo8vawcYnR/n1Dq0rCHu5o2BGBEHABJbsFLi/mlWFO1MjpvUu6UPJjXlXse6MtBROT/mQfyegWGmFRQ7Q/O+rJp471+tQF10+bvkExfBoTQrewd5UwhAUODpyeW+aK6vx2AroUo2bGBZ/ZjcsJFfMYEMsm47LdQSq7T7peI2Ex+4/9oIAJGfhidbXA9UYPNhxigFTg83CETNYfYVkoambj3vv4MZNtE/wrIfTguBNqkQk9ebLPTmY2U4UCzbYqPKO5vjaZXeVksobDAJzhVjoU7p9TdFmNMyLyCQJryBSOcm0hFk/pcwcV15KZ/+IIqeQGPkTbiY1haWSnuQYBeyW5uSPHGtYw28cQS/v3rToNAUGVBSQ6zpBt4CHvaOfEJhuDJYZCcxvPeOStdCzaoSQn9nDe8wDc1MXrJ0+9N9TAKcS6u8ANLCLY4UfHLGf884/LFIn4OLOlRcNl7FS1IJgu1/vLm4INkgHt5ISp2vC3MFJHz1zJnopnKS1AgJtCmhJRZDaW6wis8CJ0KAJW0Yy0+kWI3lJ9N8yqJht68FMNVgkgaAGi5LuKmkZWm+ztKvf9gT8hJrXZkM/QdHI6wy9BqVeWa7g7ZM1YLbUv37YSnLmGsCrl/UVi/tG+fZbzY4bGye0zH08VQpGmyd/v++fS9EtasmbkQEIYnmLZLxO+tNHp3myIGwYBZVXjlWvrCiQcsP/Fu9l0HWmLBu3gvuJ4phtJsXXllJdM8iZIQR8Z6zEMs+cqVL7+TYhxDd0c0l4sbyIEw6N+V0v3ZbUlidyekdcz/aIomGdZtmdI+1QUrrHw7eDXT+G3zbTZMXxpEgJc4zY5bH5az8eHzwoo8QUleUKpVRrsErGmSF6GPJ2OltKYL6/C4zx4rHdcfsrQTcWBmrBWMMiFiU4NGtpYeACqYafRyu8j8x7ltp3nxVbsPO0MSoaR8tv61/q+YCqHX3h4vy4HzjCYEl+4ZDtj2+mawuj4J0rBpcDw+spzuCQ2khFbks09lPGxK8HYJl0Y/lNLUxGLZ+2h6+EFSaD22bYzF7dk/EhCWh6u/v1HUVKC/r/Wl6JHtd1V68J9zdOTgbvJuQug4r4vUV3JJolQQ5tecHKqcNoYjOIs6BZTlfB+yHGfGdxTKsGxbU/4taKuH8Qpd/M7fIG5zebrpiDHV97T4jiUNt7K64/u1e/+erXV34aOjfddcKNO76EzIf1pfD+KivBsRlzlsjj17aDPq/lnKHQCLsD+3TK021HNzhZyuwpLRKS3KE0XH/0TqUOr3VqLMcsSZM6349QJDznPG+sUqeS6wwMWp28TAoDKdmjzW6f+2au71HsOzLIeWencRa5JapKkVTYpvwMIC8u2L+/hYGJmk0588rq6Nnqe041NMzU6lj1K5KmSj0ZRiVpzu2FSTl4PBYHAuhe5dtwnRQwvvNqIELVxKMFWedxxB7UO4zpYRe2x0zH4X6pI2m4g6YdCs08vR9B7omy/goQUYbUZA+wJamq7/c0FhkNm74Mp05NSCK1Dcy1+9qp82p8XVkUB4+SsVRJ/Tqtn8v2esmemr7zjCfjLicMb05JqNoL6zzz0KaYkXeStBrF9+T7EbZTo2Fa/wS5NhJvRoZc8QUfS46HX8HIZ8A6LK8zKtROnakAnEEFoonVlvYR71xYuBAXbjtxfu/bteN8WkArB3//qp+3btpi2SIMyK6rX03iCLnzOd2OrPnD6xqgVT35e6NUMpN7EJSz0DRRzyze1J+Dx3cfx0M577W84qifD51mZG8VNbBf+5PxmGGrGOmkO+Q41YnCkx51D+X3CXsNAjaz/XfcPJUXJ00vaQyfYDtmFq4kU1ZHdnep48T4IskzPsYT9or3rd/ubiYLqeBqjnGbuNWb9ZdPDxkeBmJwYTjsTU+VugQmtz5+C3QBX0piVh3d7BK+Hk4mO3q8qJVQXeIqs4hKuRvBfIwwUyKg9W1x8dv+EwESuk2Bgs1+Zc3wzx4eGasynWs3V360wH3fKXZFTckeHZdgtzTqcQPC2hCHhSXyFMyljvrneLE+c+b/YQ0XcDBam1oAPzvKmmcgER6AqnyC32Ic4HMP4FQN2rh4Y2ntrawByV+9oq/Z8hdwQEPYRYiELBCnuGGXDQbl3ZLuUo0vfKU/AuMwYfNXmNM2vkn/GRrpc5WDP+MEL80tbJDZfDNBRfpfcvVpf75u0LrkIIjnU4adaolZWzB2yjIVwNrF7zF//n4N5xHeaGc7Vh1EYRdc0h2l23qFvLBNQ5kHbmX8Yta2Vj4DU6eBN3XyJBvJf9iL4x+hw1hx/7Ej5U8EZr/Qhgoni5r9PxBfU3fdvXICGW9DzST7GV141bvyMDXblFG5PizNjJUVAWNSxIAStz6+eDAbkYeAKTj6DIR6ysFvZAloBLCgSdMFd3ol/WXDQh3BbBtLqO9hp08BfumZjLpTJGRAIHzDizXZfhbgqejNSS27BIXQLV0muwzgXGqYt9McSvtLWo1Fos3k6Nu2qGyFftqQyDz0/bmgvtZyiFce/SLYnjt2Q9BnlmUVBWOtbDPvUgOSizvJDhdiSkbLLP96MJ7dKO3eUK2nZnpb4s4b2XGF4T6gC4qo9TDv9z2SY4Rffb/RjPs76P0YiWADpPB/nQjC2tDRlxt4sdNCIjmMsLgU+cr8cpyaMSYI9maP4HHww2jTPkGKvF6H6+DFAF+jAZKT9oi23gpZ2zavE0xXPkF7a2FTNJ3bwxvsJV+o0fXZAkmouYq6B2+6ccHhnUIeL10QtZaPoZPJB7/Xry/2Nv+JJFmQ/p2NSiO5bYGA8ej1vh5QlWhaX3JMs5gMBnyyIfXIMf4im0WEUnCPAJzq9q04Tmxzy7nGKKEf31kAp6IFk95aj0AogL7iljLVJlOXNvV7BwZn4dKfuZweSEZBqy+Mvual0TVDHiwHuIuXbvaw+OkU7aeAfck0Hc6H0jgt9g6Rxb6dAuaiKEN1cUYtD88y0b9Arq1q6ML9B20/FunTnZNF+IHgsg641FfllDFpQ+dqrIPKQ8IkLx/2ppx0ivQSrehNaf5dwtBjnPHroRGzG/RWOdiW0COPzepxIqcsWjhfmBXSUD7YCvPm/qTGcSnhcriFKew6a5s0AgK03I1gEifX6y90cJBY9REbQ7yW/XB+zAXN1XZQVEs7r+0ajtx8KvVBKJksKj5YFGdhEennMbwgCJJIMdt/pJD6FIcNVegt2LiQS70DAJeiNNG86dQVNYNZmYEfo8oa002xKLh1+rHlBX40iY8Wlv7FqswQFktpyLn5oSdo1jBRz8V3aRIOmhSnrs2wxGwGBEVEXvRm8RZVvSQ0xlKMVWs9Y7nnmJ9jEVuDL08D2ES3plzvCNP3FpKQeSknFeVBXv5T1Yk0/X5vdj1J1LYa6Ffxxrv90ObLHARkCI+tz6+0i5cZTinvgIYLMVnV/OL+m4RCsTy/+9VQPsYv6X2qSSlVdQ3KM1SOntMNUBpb4C0MsDh10xHQ0cbJK0gsR6X93ru63BDYbRZmPISt1casVwVVE7+u3l55XJGJ0Ev6S+2zpNqOAH66RuzpVskXE6X8x6wHOfp5PAI/7YG3Zozh1U27IXGEEKIm13Rt/nTE3pKWA7i1NFdVQKQ0CNdqEsBkjiuM41dd5rIbR4DMnoDva07v1esxYBGU4JWJUJQyejYbI9p7pqjrpHZUNlz2exX1lTAks+WxY6CExoPlSlNNv6AIsE0VdPmHOj4m0a8bigDelTpIL1WoePLhblmhRlkPDKiZvkzz6eG8vLeJjCGJL1+VFa4QREBVyuhcpZm1ygJm9kuQ+8v4yEMw0VO+TKee6sMFRVc/kS4IirJupnw48LoR2aRk+GuDBZ25xnKFxdSYqZqvWlEcemsbzl7wvQg5z2xKxEUsquyGziyzd/X+XFl/ct9KRLzyyb6ComIL8Wam9x6LPNZXvhO0QQZmQ8T2MFjmRJ42WyRzfyLGkJKft94uO0Yy6Fflo3AoIEon3XBygpi3Je932ToU5EKoikvqkeLFACpsBN5dseemiMdHxOJKrVJDdTS0qCcTzPCyz506oyENFdelskwdghmUnWyXK2WeJX2CBXudNUBON/i8kMdtJm52REvmGqVmxe5aricuTCGLbgZtYvigT++E7xltEh/ZgUoMP+d8vaPU/HdhZaUjsgQ8OoqZeezvNR2JFm2on+IliVyYQ/58LmZ2stgKoBbs4SllwiTpNRw7ecL2WR8bbg05aTN00C8aGWtReWSsYsirJ0K0I97flI2gJRRN717wESryWahXUAFZAdyD08j9SIZQm+wq5GkoUkK5cQ3wk1x01x4fKLPgPIj6D6lZiylqvWGtl6KxCfoSQXlNZIHeDsrIRqhINxdrCinM0iMMkveNxhqrEzhnBn8F6nXVY5zUDLzOXpp338I2HycFa2pueObEof3HQgFEMnHS3/CDKwJAyYl3HyA4X5vXUE8MMa79gYELseTf0IEUJRsfSa873vl6n29lFq+GCqF1I+mB5PSyLFvgHv6hG5Hd14PAHTKhY+xzCgOwwRZxygPwNET0UiO9ynH0p3j7GAFEs+VSjl4ArhHJbySohRLfm6B7FxxYJLJxJlQr5UdD+5Vs0nM6CehSZZNYw4FzcpYoL6nS+wGGSNKLVLXgbgvzAbT4B1J4GMS16IKMlo5S/dzM/NM4NI+a1Fuk4qwaewoHqGp78vgp+SkuhLyAVhI2Or50Id4LlHwRon9o7JT3D2pibchFvFi2VTEx6cLX/qorW2YGSSmnu9+M8teW9DIRH1TfabuDIuLk16NFz3kNr5QLPGAd0JzN2IYFA140yqfi9LfBcZI3aUK/Gt2bfMMk8eqttN8c92OmUYKUaHbB9C9cpEwaOYs49MztuGtI0VMqDDHN8HiRP55BpRIJtIWbSyi0/LOC94XhzqGVyuzaVaBfg0f++sV8wy7ytxlQYA9w1ejE0XaCkpM9zbOrymf4OrEaIyQX84Z9e6wQ1czIvOihnSaq/fcFdkxJcMzE2kWcARwWT1U80dW6B+v6HdclWMyMWLYr49iKWrhm7o1yumJKxVGiv1Rx3Tw61jrh+vuNjikpFRxa0F9G7ZWs57nuhaIeT8ZRjYzuyq4WZBEXs4CyfvmZxGcS4/G2aWon2O/UkjqrfdbBUF0yavSPdNJacaaZxFQNejGDPK7SCF82XxiahbNpwFs/t07gbCJkDUvvKjqaYv1SNJBa21RKsOuGJNKO/F6HTjc1Q5t8lqLL4e83gWTT4aubYGtE+D4e9zdPPo2R3dvG7bDrCQosp62YhTaV3B/kEQGqtzvu59fbgA6lFyGe7urhYr3TWCBFYBmrEpB78fWnXUEd1z0LSzMcWL6vuh4CJYR0tg1jX4H0wkw9mkbM07MXopLJ2Rt7/aL3Hl3MjO8h/1lqNlK74QTbgkurmgd23XflEcMhjO52Y/Wsz+CqwkBCDN8SUcd0hvJ6srikURdDKw75ZZMyms8NdzvzfsXreeCzpVaPKbkgWo0BlD+qWqaXziVa7YTSezNkCD1UBphMwE3IFwG3+Oja0AILbwR+VMjirrIkRPt+DMtp+OKLpkiE15AVv3jn19brZGZkhhAsuT2sTiWSjLvxJkMICAGdQY6CcJ1bmQsycrXCCxoxrME8B5k7aYQkl31h4kmnvmUA1Uo5bGEJkzebQNuMeVIRwKr7shM3Y3iowzuO8Jm833ALhjeDbR9i+ajGdiv5nuQcBDW0PZ0CB/GHvnmE702e3iEmWKin/StmkbfvsVh9mXnjLzZCRfht3g5Fu6OpDSsq1DSVUie4hNThGTSTWkOhTKbARv54Bxp1m/BqW0CfvfUJMQYci+HzQBrAw7lHJI8klNzq1wbwtxf0zzTFIpYQcsU3ddDWDMuciKmN+BHJ47B6FkgX4uR5QSWzLqgN2wQK1aLp2hgMJGqMII4rLK56VcDk89QQhw6cy8PCM19olNpuDwdrQFvP+77wiyyKx8Z4MVJNxV5vJWOwvF+aDouZMW5HNno5d960qcPPO89qYm6Zh6UO7MyFx272aWYtu/0+UZ6eThOP3s/uMGRarrYNGVN2bkl0VbM7ZArP2AnCQLuPoIbkry4nTS/RsIdFmPg98zeYI4R0RY41FQsBym1OXnJcHtmKPjfEXuujVQGfCPrCZsaT+vFbMFWIvUy7OxquIvdi2DVp3+q3E3NGG06d/cz77wgHGWrfcy5LJIzCMZHkk6m2QnZCXYVXwMsVhJI9nJcgG/CrU5lgDb/DlVEsXG06BHIuqVfnTyLdAQZYmJlEEk43pdgF69V12XC+sB9W5Tfm3jPwiHn/VmGszkYx+Er49CLbyk3hDBSKuzDj+nzCo77ZO40EIP4ZROdSwWlf5S8wfYcAzjNdj/aZ8uknw3tur126RfCzMA+cUo5mPaZL9cVp33X0mRTUIS2vgtwDRgsSSX5xcJUWR8gZbdeqyqQEEAeDu3+BMlrgYP2SH/le2u1yfVFn5JX9VQ04X9mmABR/KOd3rAYqR+OQwLWao9MXVS1y+0OKo0FlXuirKuPaY1BQbY3Vo05Gf/+N+u4rDcFBQqiCrYhgRAEjvVW9eNCaOsukcJWEaDuo/pWCYGJLadm4ssTCPvVVEJNBfVXAcTIxH4EFtWFMJUy5of50QNXNZBl+oRuFIkdbt04DeU6j2A3vzzP+IkMahLD6zBVJv+xRBIc5fODvnJMmJRMI8kcyMFqxpeWZAHxC68tGFNyl6yyGN95SwNYXwDSIQCPlL9bzjZaWNWvs5puiP2lbEBlDw5vCHtVmb/sD8QBgOhRassChwM5o5g4lhlD4u86wmdmVmhmEXnCyLeQJ0rRtqYIWRhg72ieDnqmPvOkDTWtKR38TeJwrK/7IRYfbNspygrU6yV9YtJyw3I3uEkDgbPrpcNUpISYvzv3beFg3ZN+swedqf3IVKkcdiAezu/KpHGHPyvX9oT6qzTS342/DenW9ctM197UfFl4rk21KxSma1KnLIWlGGasMF4+G3dxTnqBscul4CqNda6Qy8ita7HCzKlYa86yljm+HQA2B5ArJoZy4LNxeT9izFuQhEoEhUTNJQj2pCc/O44h8GpQX6XgpaAvAQJLVNq0yXGFbzb3O54XQ6sm557+lT3A+VWPyCJn1MLbsssHIdFhJcMtBFQYi0bS+exQ4Rq74xNE2CIRSzi3nj5TNy2AoO0gdyBC0/2iH67UB581jmM92OHqgD4EzAzyxDauPnlIdZu0nWwB4dtxWN+meq/faIuQpK2hoRP/ULwIJ9r3xyxtXxfFwJ3YquXldSEnxoPiYD85u0OAHvKOG6+3eBraUiOgvdfp1EjiroeSLLFutuPPV9XqhAReYPaRy87OAkV5tzSqvyfufCvOMTtkpxApWsJ9n+cNM2uBWu4lj1oDjGasCfCt6cfgCzh6UbZanbL/qCgf/iHjKYaavIiRLJrU2BuzdsP97XHkXLYbbfsHVTlXSohKOXOJ+3LiR6ix9UFLo9qieejYk+P4e5wC64jGQLSxJzYt3cErx1Rtc2+xlJaEBynLN4hLl/qOrgBM7a+yswC0Mh2OieA4SR6MfM9WK/FOWbVyoUBIUAKOhhIZp2LOgukk0/DInn7sF7dRP6Nw77MaAcYg6k0gdjQN9/1wtGVSBm+6LwkI+xfcK9l+JiWepXul+/EEdV7XXp/9lUsW4RQmIkda9H38FJj3EYJTrG4hEU9YWtNd2lKI1683cXFVzSMkh+2nuu9K0JUBoAnrYkKVZpAKF9G7y5n/KMZrP2xPuUFSOaruqriffSEX9Euj/k5dgewEyQCFTif83LhkIjt5qJ1LyI4ynIznWl1SoAdecEp+I5WmKBB2fr5yw33NX94q6HIP0jW3Np2E0r1f7fUjqdxV+iCRULU+yAwPXFvTL7HqfFLj+wCfIbOg+nsW03rGTf1haLvAZA/nC52pSDnC4f0qOiA6WtK20BldZUaA6GO3m5ZOCGyemGK4a12hM3BXnbladA/yTRV+pH7IiT/9WOijGGNXzV+K4wmdmRjU3It+QwUCRat2mGkEHhOcQY06pWeQqBGjHkWcceX8/drkk+tYysHMXVk8hLhLGjUVgivK1Ra4K+RtUcZO5fkVkWQ4W8fyo2tafhGEDSsflUH7yj8wsATBE9YpskR+r7Ac8xqdxtEAfRioGXSprjbLI2DAZZz9HAYR7rUHzvh/UPpFvrLbd/hFf7sF3RimWNpiGsQRZ11RqfZkck9IJu/FPU2DYr/HWUdskJHuLufXCvDbKn0F9sM31Hn3zIuAMTUc+tQsO9ll6jnNnW9Ulo7d32jEQMqJIrWQL5+Se0a8lKRp+XhYp4IfyUaTRC58vFEjKupeFEpU4EOp1AjeALc7vZV0ovza8QSl3ru6xFpY0/ckElMOChkhLWSDHLCKaFK/qC/SIfT50GJZnkCr5SgXZRddXq8Gc6XNjIzSdCF+9YlUFKMiri/sn1Gp/dEMhARah97GidLqitLNBlF+H8XoQmdrM3GXBSCN6izNn2ON0OzpCxOuM917OZCw2ZC0DSvNuTOFCGGYf1TYgUbgK2KKc4zm/25dz3GhVpFqs6x4yhZBbiy/6FD1vXW/aIcDiSUoIhwrUtxuGGZijb47Jz8JfUTblzx4eNPbXeYpygkQo1xXonjeouTuJvAH/zH+FK50zOLAtbN9AO6xjfX09CsjKitMVlHWmmQybLoBHBPkC5IbAZxvs3cH1VAcy2X90WL6y/0SXNsGeLBdr1OWVuYg+/wUNiR7QnP2ec7jNrZZOosT6Olwn02Dh6zSwKoDnMFLfk7lBO0p9mWjex7gEFXNfxFO19qmaoISUZEgdTuy7sHgrD/36o3XeFdzLFoFnOJa4yaENBXdTSmVZacz+5IGdVkEgjQt/TxuhNGHGtQuzNDfM4iNZ28Ly9S9WkUGMNAfDRLr4ipZkJxUA6HnlOi4Yb04/Ze8rB+HEXpDGC5Jpr4fN62LQh8o6kxknE1P5/rNmz43jehFlRUvCyNi3Y5St7lC7a2ogCt3Za6M7AshQdbVV2+R2DuuiLEJz0MLhnn/1/F2Z2U3h560PrnhR0Gc/5GW5DwO/DGrR/4PvL046BKjUp1lfrtKfE4osRTS9/oB0GrNW3cYgvhU8ld61sHhKOf4P94t4n7h9zdRXDaFv4ORPHokkY+NA9QA49RmsGMfJLu1/RXuluq0J4fsUUBoa9dL9T0yDJXvGtuoln8aYrNzoapa7E8cR73/wX6KwBPpwCUUlxsBtOj0rnca7zu5FqJC5W0U8Yt529SAI0S6nmWnS8zguQLRzf/gRLaqSQ6E9T6Q84u1cs56dzBMv2eBG+zAKw2V0x1NJX1gC8M2MYZpScdXEKPG1442UFWTEUlkM9OjbR4FurtJNV4IqEu1htlgltESO0SeZMHZ1JM7bNtYegevwPSCmW+S8uEGj7FTSSV0HbDg1rOnt4Ws8DxqN2T/HOXNd5NGboZ8VTSD6g6rLWcoWOwsyeG08GPG6KHPiLRunEdTPNmY74ObRGT1VCHP7nmBYmjnH+kqK6rDyrEoNjdqc8uG8yZrHWBXU9weqD5rpQ6S/annq7P/GiYepA2ZDdJA/GbdxpHYatPgkXt5sop564gVHZamW6cq/cdADaLCXWt1WgK7y11WaQR90YOen8BECQ56pmJbLvzzfWBhUUJP+dAEEK4o4wZv2+IBAFEdNkNF3mKntsLE5PDLA/IEiV0rziyORzLJsoxRMCQV/HlpCkXsaizcHT/vxU9iadf2hOkKehGum3973fFs7uRlqxz/oDerFL0617PqG+VYIxjeRb2IRLZJGH8vp8ITzF7U7HUg8Crs3WpVY5r8wxn8tzGvUUwY5csVu15Vmm1xcs0UL/lUCkrOXdLtlaa4pHLeQgpd/vu1ZzjMOcgzfQaIwiZK+fMZjRLAHUf83TSCOkovb3xPkD0jElmb4TBqFrwn8G4KWr+RM58qhCnlVimQ390m8YLz+fNHbBRDs7GJgHSK+v5Z9cwZq4glnR2eTjnqTy8Wo7BEg24CL/RT1AKzOIE7muo8oegzn8R6qab08LzTcbb0ippsScfjQoJhsr4jKG2pMVczpCYqptZcGD5rxTHFbL3+NDnEUptRMyARhF2FMiM7pgaB/IpAna1AHa5EPt7oBdzMGg7kOdSOpxrPXbdP3l/+QCfCLMpCsxFd3VAxA/IPVvK8JaenCYCadhyZ6rJeGxTUh11+OOAjrXIJxb/EbIy8rv6h7hywPp9ZhPCcgt9BN808JhGIaKwtL85jO5nipQyAF690xJ9A2DMuCx55TSG88fN6rqBMYDI+I+DtFmoAqJB27B/xxN9xMLnQwLcLCHOx4GIFCq3/6i7gwJePjoG/HKNb0XjhuEQmYFzTgtt/uIo1bBX4C+y1jrb+R0mRj+RyaDkRus8W4WW73qbcjpjIh2tGUY6KJyhEaKiK+LHG5euQeYZO4zXoKbZOWiJTvJNNVrWugpXkIIIE4zK/g4JKATQjtaC1qbJ6khaJHxOTS2goU5zGyjmaPKvVPrBh27E7E2iZ/6omwpBARV/9EKeU1m4Msz8Q7y3MzEF0C8VIIqAxB+Fk8qG970lhV/ZIX6CsxiHqybemqil3Qv/cWKm96fPoMJWSA1dcF03dSwSyNMdvKKBCYVYLuqr2pISKPaNRJJw2R43RNE6avh/TNA1tGJ/ilW/e4LbOvIh7cS2OsbjyXcD6WS0DYaDa+og0lSxehZQiDSt2fVdtF+DO7/cEUAM3uju47Fl17rUPkRPaheA+6/jpSYK5Nh6rSwO8Pbi1y4/L0L5SStva0NcscpH0pw/3Y9+Eqw1SDVvRn2r2d8vRC6YhQywdhKWraKGBMILqjiU2l5d3jb1tnQIwi95QiTJW7MAjJD4Plr9FGRGlM4NQyAiG8wSAKUbRCpmxE+zk9YhXjiC/Rbt983pV0VzovJW+90dH65IOb2VS+Wk+MpsRgZ86uEuxeGPyB++07HlAwqFjq0sm5Lvom/rcHSaLduJrDdabujYJRWbbY2QZptvGwTHAiaqsAafE9NQa2oq6hV8+E2YRbdEcrirxyx9JVWpti7CsFfA/egMevH0MR40/X1jQzMYbw6mr01MI833RiE3EuU79cpspC8tuN6QxFB7ExHF8yrFQ4vRniEkTgKc8kT2tC2HgNJJ+l/FwYXky6qbHj1cMtBGVOw3SFMHn5l5odYVrLqhL6R4DujKq/CEsEj742QjUogvrSb9DOh1Mm5Z7n6MI+YHii3bWp2abi25FJIiX3GM/137MQVr4wwQ5IQETnYx0CoXX1nLeqLjQ2VlOulhy58iVxN5d0Q2TEV6MPr+wA6lluGEC5890db42elDUvTbbMcjHGrT7WA4eEhNLqVT35NhLruSPkwg1UCAUz94Dj23i6dqS1MPh40Oyi0W+wfoWYXIw+siweU3qKdQM/IWLUwDjgMQuiK+CTyRgR/Cg+XmfazCLiF1JChK7C2x+ROCl4t2WjYngGRxBWRQqqrNqx1EesLx8Z8GOimBJK3Ip3O0TWp1z6fhibUBvCtBpCBH7Wz0MrsYEtW/6gd/rLbB2IcMxOrxgW5u+/ZBOjd+9Zg9SRf7ln5tqXgM7wZE2rj4u7BOezWvuyca2TpJkQOR8U/bR+LRjmN6RAS7MCfYSPtJWSbZYnQL8vGmJb39SyiYiER2Via1nlShjJEe3JgCwTOTiIQJ5h+NQeEs7qWkpIDJiQHb7VwcR7T1gLGhKAqUT5DPO5zvGPny/DOh+Lo+Xhxf5wTkF5p5yY0vM1gw2UZQ2nhCedQ+PBxACaAeuBYTyBs9aNWvYATPBLUtXJ3H/+rMIUQ3Xz5MJKdV6OhLEEK73rb9hfjPlA0gKO4j120U6VHh4AJvL3WqjaY/KCbwpCzUCADZmnJdpD4p4U5ry6/YuhcWXcVV4dFm5J8qADBWw9jPITjUtkf0lhIJkzhXLTcXQBZaaunvCCxyWh6ifYzNTTCGJcUD6DyfGam2zj4qdBy7DwBaL2S2IxicF7F2ubPDvx0+DEQVydAIF4Utn+/niyxDQpGlaaG5eRQcfYEHaZeHBOfZ8x6KnSsZnB8YZbLVBcEF3Mv/87cj4r/BYDYAaUWrrm/rWPImSVpvPlB3xQvVG305B+bCj4kIW4ZWzFnX7/nApDibPZxncAV04laDsD872g54z55DZylkUKHXF7Y5iFwsc0HDovYpJ1P+XIAb4pKZnw/e2BrTZn6jCeAAvAt6Z8EdXqS/KoRwK37xhZL7w17n2PYpqnoCtRAvnU/CocUq+el+PFEwM2GkhLBAJXvVbqxBMfPWlA8XMNY1+dfsV9Uy0C+WgSzcXw/ylN23DlELK9DPZ1nzFCvyDWygh1ABv0LXhuVuDEraYOrX0J/NpbYoxjl/mfncXN1DorfumMjOo/dWEk/OvdZ8w/66CtISpGM2htGRpT929qEz+kRM+2XpAqcSS9GOrLWVVUVIm3Ez/yIqAWm019Td/ytbE6eeYJaY+mJpelcp0h+4Y1hmcF9J6cZQEJi7foY8n1psVTCzE0QYMX+ScYxKxb/bU9eproUaSNTxHeNhomtba4y/CfLAZYXndn5ndeIjFIsRWRpwX3HwrIsKxRgd52tRs/iun5uy44w8u2wZgayiPbOTWGXUn/BDqak5EZebXbdQHyE0yEhUO5HcDnE6xlAuZFDSKLDTTZz9bWcfe1wy8KhSOwh15cBRibt+faUQgl7/5na6Nl5d1o7iUWTjOhjQa4z2Pha1PNGSn0hZFeICMKGtHJ6EGQbB+HF6+M2e8YSQjJ2cnG2SVpdzXlnkzxYqwXv0s0WM8nggSh7Viq5joXNiF3RJ0A9637p1HFJd2I7GrQ4ZTOWRi8jcZaL/25Pox9feMT7VDPV6TT++0Ri3a1aLS8IABZh2dWfxnBmXDWPdvrxmBiF3eePVqd2ZM5bI9YAN23/3qVLElDeD61xvgRdjkXkl2tqif3zsX1gGp9mzEm6suh1kWL75XC2kXlrCreiNi2pfI+iWVFJDXPd3MBNp7VSAZRp1jpt3ug1pQEM470lZXwotpDljklvGxuNeKwTuKNJw0EK74nc0d851QXL9P4pxZdM7pkmbA7IU2S2Xa/AJRP2VOz3Kyp9oW6FgoQi4noNkoHeNnprbQod8n+dQSSbMzNRZIuL/riHaxoOHkaGYwROCZwqcbK1tUnU2Qt1J+3UTvklj6wOD/d8lrZG7ucjZiCyHxK5XVtzq9lDJ4N1FvARCTUfnLeOLc5bmrtGvb8mmsr0lDDyR5607k41wzglZH1fExfmsXrEjiNLSzSKGb7FVusl07/BgeCclDsQkds2G654GVeUpX7UHaqQBEmJsIyvfxvz85+WyRaoYuQfSH9WpJLeUoXpUt7+Crnl1Jqz+eARyCmzL59OUUBwBuoQAl5VddIrfG6xvDA/RZBOV5AfwjOrJ2xRo4N42rCSFCcnOY7xfewl6tVLetiM2tGLqRLc9k/owyHriX1A9BnluzfDc5xdEUKyuwzWPG+tZGNDV0WLl1JyHPflzcBpj92G0AR0lGaMSZuKui5/LUMn69X9wPKc6FVkNEHEjHjQKPQjuFCokjN+N/6DlMscpE48IhHIa0Ghrc36GwGEiPRymXWKD/di92yfjZjDM3fdHBdwSxJRSBVKHSwh6Ey1/zWZRZ4kk+KMS8HuroIw1UPa+PDVpsSIKvmqZnZisbfHFWNW/dl9n5+wM4VIzhmrETz3k9WU3s+z84SHh2f7dGT/G5WvoisBYAgwm+pqFS0A8xyhy4PiKfgS+6TgnQD5hDEerpzgFSaMcw3yvDZ0+xfL0yznf0uY8N6APiqHdoJZOWqTPnTIbeBLc5dvFdh+mvD+sDtl8BAWzYR7QkSgnx30Ru7TH5a/g4byacurCNvG0lTgpkj9w42uqBp1zMsKr2riOCQwfCRKkuSX9CGADOYGqCHh1JUsk6RwvI9OvM9fCJoL7Sap8NUQ7mAvdB2ougA01NdqxVo8NeGta0R9C7QybiN4uAtDxw2zLTG9+0we68JkqZrj9tJilUV/f4wOLc83GfstXOVF2bAJ6zf56YworQQEDj6QnC+lqyMkGAr0QuAikm0jqS7fy9bYSBz5hekPILc94b8aUau3Kt69QI1kFEmcb19aFQA4bSegA9/hFi61RDIVQ7iOBqViYdGaK8d3zH5qWIjed0hR9e6o4zELdXWhOVOcPCmZIYYXvgUsAyGUoCszsCiTdwOaPEL2kRnYh0mNSZGb6/kr8XfbyUdbEZ7mDBYy0yTDxhkrpIoJmVutN6FHk/E4cTEolaGnv7x+QxQIKZus8IEygpdtBDxj+lC5M6HaJ313pLDYbjpCA+oYl11ISRJ/fB2oIdDBHFLefQmF1uHk7vtSmIyI7Q9HG0qxu8QRWecP8ipKR1o4bGrAhR2KcGEDE6k8r2F7N9lNUZCswXi/EXaOlPb9fdsaw1Sspku1xrmyADIImEs//XiPqI3Jl8BlrsHf1mAVCBmlqE7usMbDEpilt45ia5CXzVqlIZ95Fesu48LEATS3dyXVEjwQAqVbFBttbLfXvX4LhaGKv6P3XBsKWvqEFfq1rPYdohHtQH03ehlVMpZ/BRCBFV6dffGCrIa7OngRAbORd6wsIcR/gQSxhfrfHFmb9Ws3Pk/SikwIvAIYljNbXbvIpKTROSiPcmBDp4hxLkrjR+MfBFZLV5I4usLY6WYmjhT2kzW9XAxxLYCELLIf6lg6p/GFgpoRTm+yQ6PYtmKVvdTHyBxv28y3vTiy+reYBZqmC7x0TDasiMCcA+TxdKgDY4s61MpZyI1+RUzeMfx1qh9MBXg1tI/HSKpcUj7+qTrwp35J3ezefo6UZiEWMPBtx0/tJyaej7NUmUHVRBJfB1q0bsw4yHfui2ZOPNh/6R2/I0j09t9QGeRxpuJzB6DNbaPTOmER6WTXYEGXq7DhzkvCP247uSz6r7MfaasDs419fVF4RAt4XoxkFRmk3sjrhpNSeuDoG5RpjE4pI3rH/ESPaF6RIIJBiAbVU/ct/nKrDmBQPBYlNob0WmW07GhOvvz0m/BXTsPB8qA8Iesm6PsDuOLEEm5+jbniDFyXfndwIXHgWBB1GCyGV52MU+5iXguncQS8T+WyxaPDqCCXMjwPJxGObdF8mBkG2+SpqaBQkeN+1IL8Cbb72d3ySQUR/uO+N9v36KAiKVEPx8EERU0vfKi53JWN50+LSYqgHmF0UrnnHCNpcwfX8ezokGL4sK/rgFZlXnIqg6a8EJh7DfMOwMgTwRjjZ+TrXsj7SA6EaMRroFgxXRIOGDPYZgkadllrCosfuVZqNQwAY1cDJzuD4ocR7PgZYXbCA3g9Jd1PRx7PyRTNad56qFMVIv/9AYYd32opL/KQOuEa2LIoyMUHWsHVeJEgDnTAizkdfigKSmZVUDrztoGXA+B+9B+MYT2q5BETXJUKRLiEw3upTpXnlh7hkEk8/0D3rV1lUxxSlnDzLfFArxdnXRhBNu085RxiTwTISjItGPuj0MQknBfLTi9AeLTT9QUKRG7bxHm7P2Kei6fVAeNBP31q/OVsTuBJZfKaxLodsCxObxFdyJNLV2tAt+2SCAO5/VWcDOd7Or0wzbVGwbXJr73+/PYn3VfNQ4CSxdqgXNPWDqh9ZFVRQbSeb+bFmOpdkO7C70y6dTSHVuHlIY33/KV1QHDJ226atG4ltS4fk0ZNDrmPZ2Lps6qyMYO+Wkmsyw/ECuxfXcZ0zM7vmLjkk/LsX/XG0vaL3KZb2C51I5TVf8fBJmMxHHzKvaXDwSTGiya0f8ZZ3olqbqcd2cjXM0jicXlX0cJsaB81POyuItwEiYZwsHn4gymrnlD0mfAro2YoSC7KxDdL1DQVO+0a7fN1fLkv8ElaXx46Z8EGJ/W6akIr6uEuiFIQB9fHujgNzIzAgaDEYVITJJO5XQkyimdgaTBvra1hUbw4jb8imqVpd7G9dSoQVNPatqBlbm7NLsdI/einfpw6HdFlo9bpLb/wBxf2BGK/YWhn6LhzEvBuRuBZJTDv7HV9WfnA2SyT3HV/F6f+23aOYC8rxO7QQ1FI4/0m/OAHdCwYedzx6F6TIlSh668B+Id3ZxNP3V+Z82Tt/AHYSzDsxyYC8mxyk+Za4Q6u8y70AKpUm1NPP2WMeSHfqCc5mUcG67RR+sJWZg7P5iG4FPnFmWKv1nwwk+fM0IIA5p7xmHnj1zbj89sN0hc81tzI6enBjIyPd6P5GXzsmp9IRHKS506SAEK7IxfjQLxkNK1x+M8YAYLrD1qWXqo03kTvXgYllmtbguZX1FQGpXYjbZzgqSLxcXTKqQ/GhYqBJzZtvPaYGODBTozt0Rw6/vP+hTUJGOAYcEWWr5Mqy4792lLWmElkf2k2HiF5268DSkEL2oQl+VXl2NXgbfa8xxQoI7lpuNkURcA/pNz/go3LD+w41q4eQy20ecjCwekr0XfODump0XPUm2vvNfk4P/tAVA2PLhl21zoFOrSKjd6D1AiMtz/f41uWlBWCDDY4tDRMhyGsls4GW7P8b0/dGx6VTgC6oCCWxMyJyOgl5RPaFDE/EzGGGL9XUm5X9L3crn0DvEELm/Vx6HwlGWtnfZK7dA8/zJkr9b7PBgLeFlmXyfUBxZHF8kxgW5tcxvkEz0roS70jNLvk3QNCTUIwCHnqk5NRDEaewDCzjTR5lKzNzx1RHHJNiZZJ0lXrAsSM03iKPyYNdJfMwUAvRlKP49yIx7XS9cvseBWVvGNAc2I0PmR6Xc9KjqauqjgG/Q8i16OIPtQ2Ll3qDkunTNq2O65AEFG5qycHaB2/159N4n67iMEpyNowNdkq/ZlDxsX4dRKNvBUJaYqhID70qa2Rgq8+AzqTaJhuYrqrDDO1n/0rWggrBcFsYwo7ujJZblKGamFf+3B5MTAXNUOKn5PW91Gx56gtqTqz1dYMML1dFR/KZUZom7Wky7v9EfKnYbBseAvDuBFBFFCuXnhvWc/JS4ipUIe59Ls/kL+W5lteo1xt5bkJYfug17vGw6cqrOjTG4nQXZ+RbEDCMTf5JZ4DBcuVv+tGPyucc3B6R9NMF/lc4ubulrqcBPhRUjGBILbQ+4uBJ9eUHMAj2ijfMskRMLcV5FdgqIWhiEvxNVlZSRrzTzySfBUjZHCJQtbgDZ8nRWLwk6rQKWD5aSHuJh0vBgvlNTP+a4P7p59l0FYBPtoNpiFl/dOo05KHesQCueTxj7IB6io9sqTWxTu2PK2C3ACiXWNyxs52441hxg3eco87pSRV1NUvQeac35o3tgUpXtmtl2yHh3QO1mQ55wSqIri3PtVxJ57l0nOuyav/0ixzLEq3QlLZmLb8Y2JVlrdQMjhpcC1j0DS+VHrYIB4JgyXacVu9PCRoC5Y2+p8qfeJA3OFreaabxWxz5omyn/l55+ufQkO5e9iODCdLWl2crwLrUpaMCi8EUcVXGb3Z8oBCUdwuuohn1sivwQp1O+DaRFYXIbHQibdPfq4dU8WeiYJ4WKMlNEuQr/BRIGwOrAIM3Ppjmzvh27Lyx6xK14sUHgNy2ggNG57CBbXznFP/0NVrUQef5mMdso3AJ33SJxInqYebzcZ2pEVYHYczXE/+mcptBHb4ANtGohwQabL1xmFHav/wFH/al8TKjzGnYiFLEifJHL7OJD0x/rtzWuCrDToEWPBNtRKXFZqz/kBH6gsxzy/TUzP6R+C/A456FbGm8soK/uYyafgNmX0re6fgXeehUvtDCXdAUJElJt7AMv+VMdIrrOK7TAaHo6E8Khx1rq48yOqMqtC08so9cQh/AV760CiEtSm6PBL7JKCZBV4m7t8Gbbc4TQRawpuwTFyS/vt1JBnAQUBDPdEddlJlVAfbGy+OKkohOw9BB/JY9rDZQK1o/kpfl82umHijUnj0gVqhJCsrzUxYl+ygkRPDEPZqUIo/+AtsGplmBSxL8bUE1iBc8lCtShF2iqMC1DdHIH1DcucbSNtxOF9LY4IMng4T9eTYzDr+gnOPVxWBYMambJUexTzxyvFOneFg3r4FBEHqG3QZRgnKISYUQKv9B23A8vhFRe8uNZpBtiMtXqOQlVEbO/HzkRbqVaGj4s2XRVlhO+ewkvEaTp4pNLXG1OVF6ncxf3Fq94KmGuG29LLsFI1fuX35J0TsRNGo+TCioyTrXLVEjPztNVQL1/q5tGSrMPhfJEaQxHcrnqhVVqN1gfF+JK9Pgcud/lGa+Ig7eKQpJuUN+PYhBYQ/b6ahi4nLNe5+d8rQlfK/gl3OQ3WDGWuUMOt1YlBKoX+99JWlZr6tTAVgDF0NSHs5fqbU0euO7cXKnvVB3taBFHP6/KKZCBfGqzNo6DgZgiAELh1EYOni64dmOWUuwAQCKu+L8tnTFLlL6uKkaNtO8YGlOBVU9mQFYx4aGPgGEI/HTycxYXBClfKbmSErtcsuhalOh73FnzRz/thPjvRJcRwPtZmCHs1nYjivLMWWGprl4fRUOlrCDiwNU+9TZuaVsuCxj/4DzKfcla139igH7Z+0uskWkEq/c0mrsRLlVpl8ln0G77hwK9rLKc+RLeI6KLKy3Um5C6Of3qiKNoY/7ad3EFvdP4VICsuTMTii/bee9efmKAiym0A+l3hS7SofuEJ46In7BEO+Kf597wnd6s5mL1d5zNRBdOEmfNKyPdUuCW3u/SfFQes7nYlfV/B1DOE9p/pmgK+bx+eZdZUMu44uBGlaPvej5wxU9aumiyt/uCCZ4PyO0OYfFAMMqTaYcI8GxYeHO/3tDJsJisLleLpS/gvPLbEksIm3R4OCJ21S4P//uyzQ4EJZyYmWZjtknKJbz0vFEi0zDWnZHl4kvpMSPlVI8cEAG5r0JoNN59joEsMhUcPZ1YtIDYX9cnR711x6SQEnBGgTz6d3b1iebIdotlgqE03w87xlD0+qEykcVizaOB3Z+ocaMGWybZTIdpR4niV9mDm65EzKK8VQq59iMlABk54A7zAlMdkYNmaRuWJN+bLJ7RqEZf8vrpM0+3cwD0NctuwJJA13JIJVFlPStNIXzAW4pp1OnTx3rMZQfF+o4p92WDkF2tx1MUdC14Er9l1RlYsEYnOubj2IotL4tkgKwnE219ZsjXb8PJFkzakaWhRBJAkgbR6myiYFsJgC/lellsN9g1ML0j4HX4rwIzHbq20FDkBdfqN9SUnIbJf0QQr+QxHx4f0kRekXaqKZYUXYMbRKa6OObLPOaKGft7xFAgT2pHuSw7kdfloER91zsJPWQJbkAzyDFkkgUg80kW7n7n+WBN3CMXA3lU6QR23Ipx/98577h2OGkpcp5YiTX/TikBkcza+iwBGNBi/j+GwW8tGbKxpiSNEQqUDdqfscbVMQ+OSYGoeQKSLwREfUGDjR/emc+ZAJsy3sraTZkpHFZAI69dwO1dvsOw/Q+O/2lgghmEsk6NKzmfI+OYuOG2UoagP9Le/y9UABk4VHk54+6fW891qe1yVDT2KUc5hNeePBaQwVb5BQYPt/+2xEpqsHC4GY37hXyRSGvfwYa7DGUDbMKd8vud28h67mpOl7fe4uFRe/HOKf3TFs+9RX+QpL0+C2b4R/8VfkUQOABt4tcaDV34nU/UFXBUDvPYMYe0F24AZPIWphY9bLwt+tWvmuWwhvAgPN1rxvo3hpXvQNSPsVKgFUKENrmSCjWPYCUoQfJFpepI6oqpsVwJt6IlBFGO4soABNOS2KtnF9P7E9sSLK1WWOdGvYNhxKO5/D5ACMSM3oLy6XvjzPe57hP26DKKsIbhLZqcz8tJOcm1zlVKV87cVqDh5iOgGkNIKp7JU8eBp4VRPvv6peu3DR+ROhro3GOnpo6Cdltkq395hUi+pDXzwcONA2YjC4BKvX3JGZi77wJboSzwwPelRCe5297Gau3hHdjkNfDMaoCdfo4BX1IthlFNEHUm2nTsuiPe/rOux7FSlxIwT09NqnvyBmWQYcleqlPEreuoCZRFvXL07v84AxlxNdJM/atDmCjpmzumIoYOf4uVqV/8ZnSwV78WW0S0R7AwI0EDq4B6IaI6AUBwPrNLY0eeSw24zQ6qVAgBGW5aK79Mg+Skj4XxdPl8axMl4x6nwmnAfEBIju1ssp4yr/gdi9kl+ScGW3r5NVqJ1fXRkW9O0A6JBottvWGypQioSH2C46bepNpt5dXRK28XY0hseEnW9fDBaUMHziavWy8Q7jttulrsjOd5WunqGz20rPiwX/3fdKuQgv0g4CDqGBMamo9htCyKqN0qTOxWP5MmZG0lur+eIMwtcrfYqJujT19J3dps8mrCySt1MRdmlNIykG8cIMszw/nMlRV1DmpxNn2zf3gflXm1sXSH00EqrICj29dnyNSbIteQOqjPLqBf2QDDVVCAgcCz7vER9m5X4XkTIeB4ppqaFa2UHE05QSkAhs7FkyPf40UFGlKG8GnrdKq0ZLUk9m5jleTBwhdDsYP8HCDKRE6LS48qLHD4pvSl3XFvmH8KBEmyeyNwwJzAJQd8MqhmKsdandB6Ec1bHOw8agmVGP/vvY2C60X8AnR2r2HhdkUbclW9+ozjmxmipA1AJIZnqxg4aa1Le0RHfU2vkpf68y/rFMYgCXue7eNqxoS0NkOw9a9/WcDFJOh0Grb8zYjPgaSDENIFMCM0H5OlIqq2r2FKGkaQSMzVm87r9L7fysa4xxVMD0h7CIExLBVbCe1/r/WavK3yPhHVe3XBjyVTDOqI4/90N/Cm5KnqxFrVYOHbwMIXa3GwNwVME+38OpXvNwD6l+jN8BDCRDEjGDFC+WObTdm+5/tfm0QeEfVUYFtA7gTobiCnl8rywroMyBHNClofz+W7OhssrGuos+fRhh8kBA+Ni0fYdhKK+qCZaY0LUDpn17UUKCX6dOZccCYzSsD2iSQP74pFnhlkOzACsapdT20zbjF6ZqLgELUPT8IglaX38zP6zfdyBF+NjNf247XNtmIz4QCO5iRy/GcS8jjaWMfTxI3EbUvzrprtgRQDOz/eMnyVQVbbFiTMZfhfQLeu+j6iY0Qs/QYGFdHefwzAYuVpPhVZK/tXsy6DAioLlmNDzAu1eQ5ihCnobO+MOZtSD0+uTpiOAvPwGWf52xDUHj4zbdFtZULPV4c1TmWflDGMkg/Ia6kPHprHErwFTGoBg+1D6oX8lSPdz5srAF0RbktUTmq44+USAYYowZQOVbM3BWMc603Oy9SQD3buNTgzJ7yaMBbo/pjkzVrpW5xYH0Ra11ykiz32vo4nBg9Zvm92KHWhJm7uQJV5DMPA1JHBWBMcjz/uZupwXqjoTffeHZ17N3waXUaR7cZDs94ewlhsbQrmI7/A4zJDUZj0qKiVQhn3f3AneEhDwl6GUdCBdKY14q9n6ay58twW2PRXXPJ6UE6TUs6oqH/0xgDpP3bx/mfcCUy5oo91agCPtpTfowGZ0tyw5mIOsUqvdURDhjuWLX/WIqaPlYx3zmJ3ahTcxtC5xQgKWrQskF57LaOvwYN0lzIwz/joNYkiZwLyB7Joi0CsWWRC6SapEN5TClIisNQtNPmfwKaKYb+Hguo76RtcQMXdRZWjEJNHq8KZKeg/uWWDOW6aygLP9JDrNNW7JfWDyHPR8GL+29zBAD5FY1WZXsmYfdKU1VTLLzAHERJJGTpwKZH5k0uZrDYM8zG9WX+RVDM8bsmN8cI2wKz0Td8GEq9T4DvY6FuhMsqPGHC1tkLdxuwBYP0Lu2RvjXaxodrZhKfkkIwGcfm+lFS4WMFPCz3FwWwuvNLNqv7c85xnk3aXWl49yCW0YTzTqwyKuKWSIFJum5G8BBjvxx2yDOZMh18M2WhRGX5VA0p3eAilBsGa54P+iEat2c0lLnTrXg7fzDLJrjO/213hRmT/92zHwHShntUiR+9KUWKWRcx9OrMWfefEo/p2FR7dbNWoP/P/se7JJUfBzJixcPvTzMvSTQrccDAmpwoLnh6pnsAF37U9Cakvwb0EZzywhYhfUyAZ4oAu4R1X55yrbJifKRbLIC6NaYqZxbpzV9ec4/SFSjJKEvmVGa9tHfUJayAvrPPbVHNaxlbdJOOn7f43GTTdGGufXu/daAhuYtol2y5rFVUxlDpyKCfYRz3fOyJZEjhxizetlF5kpK8kUuEpKNWnSG9VEdmcn7Tu0/U9Pho+IZiTincXepD9zQXGusmr6j19TKRCe4dmbGmRl1cDDNABYeOKT51fHc6+d1Q9T2n1UMmkd+aiSUgNIrogqtnInezaEs7HmtmpjKttWg7ulLhPvEEnGE5TqPY3iCItPzYojGET4V755b+cNmqdG6OBTlbYjDs4AAp+ho1Iq8R/eWa0/FOyB4K5JLQ/WqwpaNPuaoufHcJMEld4peiw/7uIRZ9U4otV2lACBY2PfSUUu7vJ/iZUtvPoJmd8K/BmbnNo2iumTtQxEeARnjsHdzf1JrE1L6NGFsI7t81c5GCgmWILKM5pWDA5HO53I6aju6916JkUl1YcYyk9Hwwf/waKzGbNaeXD2d1jBd+rriDyPgR5p32kxAb41vjMM5QjUrVztISMmbVDBnx2qArnLJ6ECRGZcfK4U6LCAMxRtE+Y32MobWIYqbeJLCsaF4pCXyZjPABVmN36NRAavX8RXO80JuF2m/Snmg2NL0dSW67EVH9I4fcFSjpL73r6ohLh/V+uK3786Tpz4u9p1byZEEFVjn4eK4wBNeQ7DGhdbFbRTt6/9b55EBMfJGakrqZ4U+Fgnh2uIpidUcG+iBjHE5HMRX2ZKkKLyYQElkw/Kbj2w8OvDaxd8rzWoSUnwkiP9DB4L1FBdrrf9anTqNfPehHTBlyG9cgcQLrR8tQEZN9zuxs8BV1Zf+cIk9kSStcCODphQCbZP7NYhgTuqPh967gyo6DhJVEeM/gq2arEo3NkVtX7D7mzM4zzsjwEazeZbygY6xwP5F5NLqPJ0Hxncni2XMn/GdHQmTbQF1zee4LOhZaDlBzMZLsKXcJ3sJsBmPODcSW/FKYiVgzz7wLdz0C3bFpTwedWpIZzG+H0kpS6hOFF5yNj/xUGHEQK75qxYUFuXq2vFITPVf7aaAWUF+eBV5VbBqFcUccHNaTmGaDdRTdXTurKJ8ATxX0DHWz2qNhGP4nrYJRCKI12hvvahdfR6RlR+zca42mjybVuHEEGrU2KvnHy9+mmlQDH4jYHZKC6knkne5Q28ldgrISAF0p2u8YVTy2bGLZqUkIV6zWDXi0DuZMiQhOJwUgZQNnrjzpboxif7CaCAFdxHukA5fPTubF6aLOTWCnS/EP8ZSOIyNGpkn86BVLEgxNoCo5XDdJHdnSB0Zy+5O4NQSsoKdZzikwg0eSvXAE6j6WW27irlXjNHHxiuOY/LaFsSgXv62JfK2/O09r1DMjpxv32Y457Wd8wFBf9V6i6CdLP2Z9qNFsxcP88S7N6b5FAkZAkO78T3f4mpUVnXed/QQC1AAudBr+gg118i202+jHf4m1tBvD2iwt/8PqoAWQSajReU2kDJ91lZ9cqfgKVbzge5mUlKDSh7aeClFOoVz9UEdTQyNyjj+u7JaX9DWyqtt6955fcvBJF1aKEjjPQjYV4+FQr9Fnd8NqWavBRL91OUcILzXVselzvLQtPmmvtdhkUNi8G+O+b/qcVyHvls9lJjRGbe0YWtuq9zXA02yIjtBjoQd1vY0EmEFvb3u3xiPt9Wix6NZ7ljWQVbw229SAPrh/hsIECHTLmxKxWD3/K6TUieQeqJIfpcIoOQcgmvHDyyRUevzKImeikRzg+ly1+qSicz7hh/DCm/39Fyk6M86XNkhcEgJKANNt1matUHBPuMmqkqR0Irsee0uIofjg8efSzC4Ml6OzAV1PuydANODV+SaVqKrg8qTvT2ROpiQHqoOAq3EdFRo1QW+1ak/AYmGEVA4cF99A82GRm5mLHhLHqOSqBVNF5d+tjFko2morW+bAtWqE3Mhi2uYPJEeL+puWOoJaLV9uHtQIj2GvjqEnPiF3gSNk2kq1rb+v31DDwcalu1nsmfE1n7J39uQgliDyyoBoudkZrUtnIUrDsC6iGs/DA1YU+EpC8VYQ4iw91D0O8kJIRK0Zo3YzUzYnm6vxq+9EDAP5SWf+Eyupwlhcyq7rgfu0UcsS/cyy18bZBvpooyg1q0GNkTJ+MwtXBtDoaChHEqMdF/a7GjUgboSb8jHDJrfqRhQ/bbI62r8nHoOa6UgOaJLxxg1EhXpXmkd3Rch7uNxgpPzxP/mBdrGsygnoth1z7Q/YLYJb7LwpuGREdhP+ef4imi3CBmJrq9pWR8/s43S4uxqNYHUv9ha9RBACBhuz+S4xTQTZaCKSoDHnxC8CxGhiHczvJUTlt4rrWQpu9+AvsrR2wMvwqpTTd2ETTsO/P3JJiLBUvcs0TXCPCRY2h9Nx8ZqMz8XSEqa9ByDLoNM8PxxK/62v/Wkztb9dlxfHsl4u4UjIZo5lD7knNDevOZvFRYHhwFE22lXrX+Sffrt3y9R1DKaG/GlAPLQQX/Hetzpmce0TT69U3cFZSUWj1hcJa25OoCXx3O5jXSizjPu68eF6JRu4ly0GPmihJAcdY54LAu+PeTtHdGWaRfb6RVp9zxwP+2PoTSQm+qFhD5LkhsYuT1IwWLIAUjU9P0z7IOUj2QP4sYABt2vX5hJCVUnjOBPVGQTmwyR8LSRc2WvhlmD4DMitovW8AmruHvsuxxMnY/ybXB0f6jgvY+7tMu0sJN5r4DBEBXa37SH5PepbiAlY5L6+09qF9dbg57qZdXr+Lkj+9ODwIdoY9Ogs9QXAMPBK9sNLNDM1mFaODMVpqeBBx3+/X8BkyPofOmxl+kYJsG1PP50FDBXj0A4uVUwSXOnyDvjHd5pupMiy5DyOMVDjPDi22YVTeKKPxtGz5/wLm/x/DzHO4PBKlriUyR2fdazZ8MZwZO2yzm40RwLqezNhsNT7aqhOqWBMfTbYcyVtVzrROKLQ/cw8h9MBYgLQZ5m7RtajLhjAmwWRubbOysVY9+MbTxulvSqQymjxTj0/yGmowXOk8LorLHbyciHZbi5Wipq5e028xOnXPq0SO1Ei/BmXFCr+iw4toQwld1d5KXZJaq1eDPduqLEuVRpKA9CzB7KJsTTpdrYpMaOsIFM7Wgr9Oh/caoRAohQN6A6HSrmbUuxffYlS4ymc4W40QYfauuqpQ/JTXe2l3gW1vBU3Q0CQWi+YnGMAlM7QCe806vIrrgQmejgYb3z21bFn0KNZj8qMbtk0fubcrDYYwmBhjZezZtAK7N3MQKKCODWwtmN/WYEGctudKJzRB3xrBGIXPbh2oyOsQ4psvw2packPl36ulG2AlW5rvS3xsDrZG0jPgcLNOBZVquBKudvtx5EyYnivmLREWPn30cbkfL4RsfTwuJVSFZZJFh6UkofGq/bkz/WqbPwyDk8xppCVNz7JQstijvxEWrb40THMQJebLnzyY2q2jx2SLecaR7/0b676f5ddR3aDQqQxzS6YlPvFcYbw+8vic5SAk75H9CSsEorQCVlJSk7DU5HBRkzDnV2QtTJe9fsfqy1sQNBXqUXzv+3HDVDSjlHNPKEmNGm5+zlEP/Pa0mLR8hxOG5PeuHfsO4YAaC+btxGwKVWC9Se7tv8fBJBx1n+Kox6GyPB1SVukkNQkjh9dl8s6dR8uwRo6Ep3zrpyoDHwNvpGU0zV5/27gpveUjCyrt2ZF4TOPsS/WygLkfE2dbNXsNDXjU0kggbh+REnbrOGVNbeYAoc4ZX0aRdyTYOFzlRKaGo4MoHLkMH9FMwYlY+jItBYVbIzsByLIUmu7xM7N3q4VtOAzdBtYpwYx/5yTIIJ9yh2VZWg/uPZimDRgASUeaIeF/TU+n3NBLOkQvsf4CKuJi9s4FqpE2p0HLaw6yIcFU8mcl8Jx6XPWv+eL9Uv+Eyr1QVYQfaJcVwJ6kjFn9GSZ3uvbIxaZMwi7x+nNLp60sgdzogotqc5oVT+LDsygUDk+S361me7L2BWYFkcDER/Rx+J0tgDZ6wwKRu7kFtxCpqtt19WgsF6LzpqmDlLORvOsY68JnuZgBdo7ozFmFR6uGXxbySNeCvPKl92vkVsYEYjZ70nSsNQz9WiIy0pcd4Cjnd16gHVj3X+IIr+ZH/gTnYy0JQvVtpoQKA3yqTH8ZK5WAWFLSXjNeHCwtYmaan6uJoOWW3ktmR0n9j0uxSEniCHfobcaa4adhh6U65iKCHer9DsvpoFJxkj5jhGLhPSjJ+hLddzatV/1Ocn1CE5uZoZAMtgkhUYN5zk9+VUjJxOTjDsX8kQFan+fCSw0rK8IhXNp3dynfHXSYCNq076Pn60lpsgbLC41pl75UNjAtdkXJ0OFBP9SOFxYd/qxoACmCf2c4BNjgll3P8P77ikGQPLbKe6Bprf5RR7SLTcoLj+WEriYD+XvlnCQ6gwN09MIkc6PH+xS8JfJD7iyBoSsLx/L/1AzaxG7e0eIP2dxroERhpC6jg8arrg7XQBksDHIJZIPRhy16WjWaucMUOLtxrgBU9rezETjoCtMnBYdaOAagkVHdueRkp+p0+SRoZ4ejQaCwhOiYRYYJC7NsV73oO8dwYLioC3qILoo9B/eMud5uERJdTB+L3gaZcXObntZ43fegezhpmSwHyw4dM10xfsXF1MY5XAR1XmGR9Qz8Yrc2BSBiUUf1wSye1tGQLKtmsheBI0zWEKzJu8/tdWQ84lcWgnXo9INPwDU5XiJi0OyBQbwRH1ahR14L10g9kAYWlDK/0N3VzcgYYursjTtw/2wSHmfTGJsx5NOXmMmVliBLLHGu6G0jFBLZtUkH7EzFzorhlKhKRrLqXXlXpO8crQ3CHEcZLu9XzwCc9SvkPe94gxwonijdizLHtGfLLKLF1cdtXMFa7Mf4P/JQHiBZIRXBzCKoqPaIuvh7X4/SQdEJnxbsIECUF90ZnrLUpBjTXiX4XAc3Mse7eTXKyZp8Q3Sf1S3esZyDQl+BBER4PmbGOeQ+K1112FbEeyqQZg56WiQ0jRCUmP+Kew9A1ZxSjutLVOfkpuBwoSkP4RGNoe7WrmyTXKI6nk1Tnz0oe2Vm3PjBDf8Gwhe+fwAYSAjlPra1TtCj1uu1GcdIAm6ViQn9Srqf1ym9fPIxInLxt48mCIl6DSTi4ZJ+XkJrz2dXWQqhpSF4nNWapdIjJH+p1Opedufkw0xHlr4vORb9BCJ3W8vAPdZSqI7VxbNaaOfqhI/8w7L9horVKv7MLnEr2l2XgUM6+i5Ix58xgRlYVxa+ltEdaupD5yktPEOlldMIatEHTM9j7h7hxVvQPEbtQP6BmDdVaPz2u/o7+Aiy4lsXGE+Km2ss6828uqY4y28croxcwQBaemP2+4hEA88WmmXnQTmIMFje/i5qVzP/dynhApy5GEB55hU7+jPdveexxyrULupZB1hjyqISvKscuKXOXZUnp8dPLlTkOIlOhMu9t4Vx5PLPIDK0SdUiZ95AlS0+/1macnq6hXYYejgXigt9NePxN2PY9CC0HftH0q8httvBeLZ48ootbmSIZgK7/Wm1zqq/lUDZBL6CYC5KDyLg/WfRKIQMNyN2X432uLr/f/9AoV132hvDNWvIbdgJKmzFwnqjd8+MjwrCINW480Y/0ve7EpvtXHg4WzJv5MuILg89gjdMk86QRO9Q/YKdmb+HV6eMqRTq/oudO/E6zvH3NzGgHNz/zI4Clc1kXUMDTrnDpBI2KbWe//7iI6d1A8nhX4F+4tGki7hfsA4VOK83fdLmcdAGqQRjtItVXa3J7vhE+x0h3K+fVJpM2FZDdY7gVF9ME1rtQmyQOE+F7b6vQAUregqMnIegpxtIKRhyTvfx+DFWZLf+VUZHUO+CicH8sE+9LpldACFUpG+WMfE56X+8xIB5l+Eu4ij2kBUNYythq4o1kyIEuD1kt9XQ97gS9+waaIHokWae6jm/Y8Govgmk31Z2M0SBZAIeudbA/y6RkBys3zsWVHoPxD73jIs92cougppJ3Uxf/pQcoOw/qt20epdVJgHhT5/Rg5mNf+bvQ4LJnwSxs7VE9Qc/myZF4IFBUAom49bMTIghVW6RJ2gfXkP6ovc0THTEpxZWx4zTkARVTfH75vftaIkZptS+h3ERciwL+zFBfxojqrdRqqdkYWAVmXpf+ueckOfXPrN5b9eEwl8OJWgoXwyPM73RDn5ix09+qYTUbhIRquBAIHnO03H3q5TFdSXzP+sPDF+FV61ALiJwLttts7/NF2qhFJI57p4sixeZfoEtm0Dg5wGwPCH6tc6aqO8oe5R+IkDR8TuyFEN2w2kBdTxxvejaSoap3bQlCW4svakUIjVrpe7zCbbcGL0xSe/T3hysCfb20Xj0oFitmmY1Q+1QAbHJj3MfeeZfxuvYYoF7mLnb9sF2SPQEFrRwt08qapY0ODw4ReEM3TamVg4j3BvgKWWLIeWrMXPSM+I3hBzjUn6TbqMNWIPDWj5FBYrWBwXYB71BOpmX+5iYomjHoQ7LUcQ867QRS3qZXYnBbLy/FO2tEGfzE/rGyNxED2nvMySIIs4Fx3fZIsIZn/tCkocG9krZ5TWha4eDI3zmyCQeBMYsXlRDNsMfjEEBFh6/Qhq12c9IUp606kEY5bwbG/QnU+IAyJhlftn2f8iRL5A7v4R9oAJGU2GYjNHqZUGg2z6az4YMtQyXcV9X9WBRlaYnfVIRsmuVGDhDBIoG6C8AkCK6LdXd0NgeShgVCNpx7iacd6L5r4rVi1Gco6rCBwBfwyIJs4Fhnq8IZrURn9zhkJ2FenUPijnbIom4cDNJT3zqMfvySGt4ko2KqwoGDH25QLfuWMbcuRhuQwYKgCX9VgClxETR6DM5DNjTv7F3ysG0kI8NKZ5AZDzjJnJD4VVPwVR/fNKHpzgM8QQGSapVEbQCuiSw0xjHphp0eDxZeames1Mp9WwQ2puhmhj5ql1Lv0eYJEpN8RFa01yfNY0KZkTpYzcO/Ckhbb36k9esVXSMPl1G/K7/sR9Mcqvz7tEmdFwGaO02c6azfLxlRg6byx5y5aqHXBgH+N8X+0pGSjHsaENs0tEcJU4XtLrRLBJGIFVEe3TvIYkvc3siaU1d3xi9t7TPq1L/+hMRqojqmp8jBLyo7KEuYZeOKHFM3mUkV+XkyhiFhmwxtLgSsGMbh8fE6hCR2rTOIinlmsF74yj7IpViQkLbyCbrvDt5/yX6I7Y1abrFs7QBI3D9QnlxlwbgZHvFTKeaFKcI3NvUQFQURMimQ5M+eF6vwSlYff+7/cWpYmvPrIh9BVONzVYOe2tQdAWWT5fJSYL5Upt0L6Dl/pZObBEdo+FPC4b2+iU09eJ6vb/kc2/uq9CvCUV9KB+C/CPAJdOu7vq8wf/Yxy8081PEnm7VGsIzzoFYnDvfYTUyPhdXV2yICWljxWqkyEe4e1n+SZCRACDyiLTdzj5Dq5ThMdA+CNJhV09iM2iW1Pgf2XiLDkIpNo8ugDtNdVTMEBsO+uHzrqEI+EwMOFr2gevD8TkmyjvrYH9Bw6rkARUFwc7DRpOCIaACn2Edjv7bmiS3MFeVgdj1y0Rv+v1DYqY6EwHst3CNlpq6XBW7Q/fu+F1R20aHUR5Z1LIZ7wvY0E/w99bKzAyUjG7671ZUYF6F5+Ynv4Cm0twLZ+GTrBp8VL/LMeq8XYgzYldrklMglyWJS7iWBhdA5GraO3m3rO2AorN4N62bHcpIhG8kbvIkybnRVTEWt5a5f7iIYJN61OO1gLp+lMKa9CuaUR/y9eoF3/jHgqh6iPSadglFYQ/GTsLkzIXMTFtBelXwJHtvmQtoXItuOsLGvL2IK/M295YD8SaNfSND8zTfgUXGYQRyrzsPYC1cxWOto+YkW9R3EinZBFUy/5HWXF6WeqLcPADGeJH3U642mjV9hMqA/GY+7DcN2bpls25VizlGv+FyH0qhDmmd0gUS8y90rDX+Xk6y6McJ6S7gM/DYcoTHv/2NeKg4rjMw8TqrlL9LBcLKWQxtuJxVX7ObKDCs6fNlfUj6iRrGPFdJD+ziFknCJKgixZ5RJQEQZi2MefRmUYi5crYu3Oh50a5Jf+upvNzFAo7KhxO8WRvoqnLO0wvvdcPsaVUOIcvfZoUierdTyFyoxwnJI91KCBroEodybtBGshuLseewOL8RJP+H2Oqsca/SYdeeRtivXY+FFQeTQ33eeX3DdtS0+wgHXVCCQk/CkG/az4aY+ExO9eyJRmpeKAXose57USPZEoRKo6m3uIY0rsGhjw0xAS7X1DuBTFVuo29v3dChgu70cPjpl5/xQmrPdA36PXNZRWOszr9FtTYYxG7dHUooremnYo1QnUGWsN/xygLq9TDGLLhVH/pc4pD+15uGiALFzU4PINmfD25G8LAsJea1dQlpC1s7rkYJUQqIwFNDY4Eh0dawLn8fCol/rhUCEbEHM1dJlCBpXxKfm7zt/ZpsbXgy68nEkEoLjs9rk0E9GFFZoYLZv/4qZR7nl7qBbeALu0FWvdWoNb4hCvlkME+i5nbMafn9uVxxXlpXBlOxHA7IKvKJLMXQanWkuK9A+2VI1JSDoY06+R0/g5TPJIHfO3roljfhM9ncx6Qrk66xY1H0+2UgF+oQgm28A27u9+T4rGo0sT6suA8Jdwthg1T9gojZro33dFb5pubkZ5ZHchLzsKkibaR3DHxf769V4iImNuKKrpgMMK8vcvF4YgFx9Asca63MVyNPtp5+zXPASns3bwdmsxnn1S54GTdkB4DwX4L7JXMnQGqIaS+mPgWxbIZbFcDNIrMilEIEGFczfvcACtmReTyzqnpITyfsh5QK4RKX9ZWtvUy4bWXjsLYbNV7MrrZsT82c9cmf4f8I0sSYqVIlcUYgI782imxBuEKs3OWcogWDmwlr9TGLtVSSTlyzHUW4PU9f7Wv06gLioBSoAf5esTj3FD9kKtTKQZfTKEIOcCYWcfIk4IkcfoFGKSLqsHhBpBOTfEJ6dxkBJXCSlknDrb8XJYO4/96XFd4ThAg4/Heg3u5p1kP3QG2yMuUrty2cFQaT3cWMABIB2diEu/1KfFFSKbfjTp8aUhb99C/ZA5m7h8JWsGwT5Ml9Uhw6CmNHyRA15TyVwIsOH0I1tFeVqQaoqT7wGjyqrJ9bI+WtpjMv5CAGQfj+k2aPOJZ/zLvxAtkd/Bzh9BZPEwVE0I0DI82uWK72P5+mHKig5zbXYrQE5bSNA9/gHvSND2qLV3hLPnoJp5q/NeZX7mhb2aWf7qkF8iM4HEHQ6YiYA+E+kPmfMGabHq62QBi8sSJ3yb68iTcA4YT6f+gJb6G3adGkY9eeu7XQZiQEi2fXRSKUOj/zLkyh4R3hOAX6xhT1yCvCHT2Jb9tAzSMxe0RFbM3g6b/VHgP8nyZkt45j1ZYBTwOpQIaFU7nU5focNbiclNOds9b6I+FOnBXwyAf1ViJPMKBBofmR8wg+77g5o3CiYUzQ+KdNxUo14XQc58/GKrIq3XSIefM9azql5sX7KlTsU8DGT1HlHIYnd10cJYsAEHoN0mLKcHTySHsjTFesKWsmK+siZFXhlavE6F44mweXOrX6FBoELRrvIrsst4OH+O47VaML4CK/cNrjlTodfRr3u2XZsHCcw9kXLGX/15sm10DYmP3G3387x7LDyVoplrs0pzIvfcy41eb2Ob/wM6tQNLxQKnfSbL0eyYL+RWR09qeHT/lWpCFvcISYlmdF/jMaIWDyxE/LA1tguYOSiQtSqHfgqHr1n/k5nFhnUBnU1J1eys/8qySmWwIplgfD3uNcFHlg6trf2B11Om/f7E9onO53sWHhas4nNuhBJsUn2OjOnOAFZi2dcAvexHytVxIdybjHcEdXUcp0jkab19hwZ0RddTUGjtyulBmpbfGD+4d+oynTEjmMlYS/pfoCyhEk9XbgbBf7wtFs5qleFrCmB0NrUYZLxmw+2wFqYEUy2hYP3ZxY8uhRZeFXZfhOD58zGBx7lo4yMjiBc0zvOGqVQm8d4tk1CRpyGJOGJWVU4EpHPxqgMP6hV7f0IxJugziIEJHavrZauRXe0/THYEOKpl/a4jm/fah+oAzHRBqwetjJBSjNp5LaZ3ZUNQElZJBDOF1e4muumSHF6da394Cvppq45QN1B2wYBfbx4Y9fnq5b+heTNTCmP9XhMQGniDhmdhGzfPUY5YPvTUhEcaaA2ucNDUO/xvaUVhXDIodrM/05R31bnFkjUjn34N7Aiuagl9VB9SjYsu83Ws9eoevaZVwZMC4uiZko2GtNzZCyMHRq6GKhvEGBiM1gLyvMZk3eR2dGcn19YX72JnDBY6RWncG7lGAg0YZR9lyoCyQ13gtnyBi05gPlO9yOeIYGqQrhgRpR+pAvx4czdaBMpVI7SgZMAhMSsdPUEQ9stTtwSabBmrln0uHsOMhDvi0bNRUWUmqnu3eiLgzk2XKGyTaHCe59vZZcmDkk8aOO6pTw5H+DWALBPMcCOmfIz4cF9E5zesXbQkQNDFk7vlnAcetbpid+Ce9MnTb3Clhv0lL7lyusJYCpLpalVXmQ67YNR+IIDh9vW7XeWnU3FFfdnO0yqCON1josSLVMTTaH/T3Q7Y+gOUofDwwXaGyGRB+4GRC2kk7zANlgd7PmE5kXda4IpmTbP2OqUJ/O9EXW4aslQR5PtYy3tNMamtk4Lwzb6WIFll7MVBneG5vPfEGslblvK4unzLLIvceI6WxhiZNc/nr10k9nn8ikKPz5jmA9oC+lWIE8QR4XYTcO6WZ7VMORykmWLBbTE1NQc8/TBpYSaYjlsyOK50EEwZC6/hyMiltFDU/OcVfSs/4s0Rk68qJkU5mIFxzQcySQSzLKmqQzkbb2ZlC8MLMP8Tt/ui2UK3r3IoyOWjDNfAV+2/iYAbaU/gcEuC9PqZbBCpHpobrsMSJpIpAbdk+lZArMaQfdQP2kY9Krk6TsjNb/ad7Ghc/HTlJyxRISEoijGyuLhUJB5Ch35PrR1oibmRE3vvhC5cWj/AFFMlliT5ELHoj9ieMLEG0BOkVRUXKuv2bfaF8AdXORnzTtMfXYqB8UVY5TvybX4Mkg9YXaiDDrp7KV8wVHpmx3MIlmRkznG4Q7DbYNTZBEi2yxQfQW37NrAOyCP8AXP/EHi/BLLFg/ip1tleZLojlnpdzKgSmJyi4IRDWNifCtFxTRjzh2z9DNa3KUZLZnixrksQWHwp2gRkmuu7HYPHYIQrdjih0WnNb7CL7hFDLjbfGaVLQh5Fu7SHtZTqDYzgY4QnM/x2PC8v6+qmCAMbOvWxZOIxjgpUF1ud2/e41K1bJAXPTZ0ctJLsigJDqNH6fNsXGGXNx7cwJPgP6INK3Qxc3ylfv0L1e9m37k+CqkJJTN6MvvQuae8WjO1l0JvBh6yHIrZgf/Bt/DNS1QULgHfUCLdwH6GVXxn8JChzrTEJL4dTZGD6nCwPWD+eeU/jxNc/wph/HYngIZcSTOnA7ZoHemc7pUYXx0Nr45Sbce9CyAvFnCzoIYbXxoDXYVwt/7sf509VEfvoLzjbFrRKr4vntb5dgeDiwRX6neO0yQZsOSoVjVvOOSAuP4PT+ezKgOTL5CMeBFh5fTyCTneXHNexLrs1pBpLHH3kmt/Gi6938ByjJyGR1wM7/rvRQQoS1drQjQ0vefqIJKlavxUAyi0PuILAyGGfaeCzz00DKjY1cowpRuwwf7rYPEZOByjttnqj6EUZ84F5gZp+4HJmTpMjNq0q/lyKFhwHKG0wkVp5h+gESx82VKGR+mbao8YOh23JnEy+eNJ45yos7d1gFc6GC67dt+OzE5TpAYicEpe2YtuuIHNt0hQpdLBdS8eqx9D9RSrya3h16jYIp9Ogfv58USTrQa6bOJgC6Fuw3VSohoUOQpQ/XY+PVKw2eV8Q1N6yxzymT6QIiLizm3kcA+jtFVJVj/IlTTGr7Tj6P8fQmh0ag3AJfRbLs8nmEQ1QHGUtaUv9djTgKNG5hVLyiujHLL77tNlHcYLwqquU6Z2V+WMoDwfBiMDqK39/tNhs7dXQhQTHYkold5VgNmV+WJr8ETyoKTHTS8g1RZL+KCbZw1LZoGTgR6eNleq+XGRggG9pbw1+WcW0jzJpvQle+pDWTA3yPaJogeuohg7EijR/48Se6kjwNpGStelAHWNOtzrfgmNxtH9r1eSRWLz79nRNF5th43Vy+rZ9FcwK7PlfJojQmk6yDIgDVpS2IJtFflHkl2pdrA/ZK4Grks9dfURGUNk54HimplKaYEZX5dE2M9W/60vxTLBE6XeIZ01h4YiHBHGMX+eAHZAHpSk2dFZUbQL/ylbq8VdzyOCnwzB532xAsz2XqmJFNJCZ6YuvEpyZtLa07GuhPki8MeZUI63KN4jC30SSX7/bWpsMyfpqrzmMI+cCYlmRUB0Mu4kG/untuIlFzWG2JnuSThOvNB87WuxDF4K9MPLtApA2nPV+2yMqZtQu/5eBgMzg8/6FBhddJz3kV0onK4Jbo71w6dhI4czF3ksh7/wVe0vAH8B/pVGb1v7xscPIhg6KL+hvTtq6g1+kCPpBURUhkj6yrfPgZ3/Xtc22MaQJp0ouI8smF0IW7P8ZfkCNRlxyoz5rOlXJ2YoBYf+hZJACLpIW6Ecg7s2fptIWtvuAgGvGV7dSNLkYv17ghjkJQx6tLucnApd6V56PAKNj/7Yyi6MOC9uwvXC4HnQSolMT49c6/5ZRIfWauOyw+arQBxET3gqjgZPldHDuhPDdYxffuJ1ityuwa75OUwVzCfQ3DhhKAfuieBFYqqN1i5usxjNFwKad4V39gjt2wLjcS1yX59qz0LCyVW9KbSYU9A28hy5DC7hdtdQxRU9PX4vfg8R4KZzpT7OhJe4Rwnuob88KsYJT3Xdb5uQj/iI2b9k+IAL2RazReg2nxwi3ia771jH8mWcStAs1NJu+cMgx6oarFqLe8b1HSRxQ7za0WtQhVKdhOSo+l5MyUbO7l4rtMf8vOidRDYSBoESyiDirZR/lirb7mNwOHR9B00U3KDHjR+/6/p0FjHCVpWNOzJcWfIRQkZ6XmbdXoGNbYi+/6K31kVQSpEiFHlf0XTAzQKDh03BJv6aoldSXInQfAEINY34mN7TGvaILI1iq1F8qQD9LdUyM1y1GkmIcoViAyaqPmTF6srtanuyTM4L1D0wyuj0tEVAfuycGdwEON4fnsCqlt5T6S1obgnUutprS4s5WpzQgzd4U9TRXJErli2+o2bS7A/uISBZhgh/679K/zLda6gWtuZwAvTGNdCbAN9uwZti3Hk9kKWrIq/zDHz00+fSYLcc5sgjgY5sWd/F9nGirgGojICMTxUzGmVVyjsC+0iZ7i++UKuLA2KCekIgylXj+DAZVKUFgBgXYW5+1bwyASMUltB5MhCcaMuivyyhZw3MJ7OjjmJyH+sH7zwWOwFaztw+KQpl6ETunGZ4wgXDkkep9RDpXHKdERy5R1KfOfi61l4kXklOVi+UvIPbGuKxTqSuKxjgg5aUU0X3V/EKdOugbYyeYKlYTyfe6Py6u2Z+A0k4k2giHiUVqkoC8MKxTXxmChSs68WryAMhUxyo84ORdwTONcLdmrVJbnyH+ugmyyx9iKEPADsMijuo2U3uJDa7Wnfr9gcycQq006VxIwrhk0FV/BDjqzquNOsEJXdrimGw0G+JVU4/5BNk+lE5kSCYz9cOOfNBtbtPUoVHnu1jfPwwGlaTc7GUxPcDFnEgwaHh5znVnSwPAAdXz5o6vI34Epz0NKfx11wmUjfW8nTAn60/CwPV4XjHM2yzXbq/EA9hUimpPyH+gMWQc8fiEpaTtk7l1iADxvDO8EMdlaQ0nXdXnhCuCrsoC+Uvlb9IaXpTbhDyzTzYYUPRsJ1khYU6+UMPk1YHn7mE5V3/F28Yia/wrwDdF+R6TmVzsqudzix7NyUGk46wXs0WaHIURcZDicGiV7SEhoVNTU0zgBoaSd49LNnCcmSgWRMUa0JKdpcVnfovdDcIyEcqOXD4VeP1baW1O5XKi8DuZzNuEL/drafxlkHz2RIla0Jp8ILNn7S3fdeg9UhAx9q0+SKtkZq2KsJrdjjyAjr3GfTjVIDAz98414NxYOtS7EWs2ZaFK7+4WBYoC5Hkeq4b/TVXen2W5sxGUXGVbea0PfIOieEzqtacY9iZH8JBwrLvaO9mQx8S8Xs1qoQA5mRuhLUFIcDGMj1wJK/K+vclB5Bl071Plrpq5+L4WJ77f/haemR3QBDVN+DYo/NMMFkqokI7b1nRwuzDmI5dEx4XMlGANd6UtZZVQ12+CHjwiLfAM9yPWaei6wRjGbxBRZUWxyt/lA3BanlqVbrdSdMBG5p3j4Pa9sSfYjUr77zB9h2qpnC6V8u1+XFmGBTP3y97KCCHykGfB6mbCNng2OYcDfFxSp12MaqtqOwry+xB9gUkHlnfW9DENAGqcYOxFOWwZHAJEeIuPuyLr3pc8euQGkJA6K1rmHJDoeAl370hmHY+Wk02WBNr6bOj8owlbEPXZobBQ/xU4JVN9l2GH0nnIedokXyCvBiq+jOf90wECFhhyXgaKiOos+J5t5i72+cySCooSeyr88ULT2mwUuMCLDw9Pty72PByiEtatpiqNeZF8Kladg4jD+8iY+w8ru/PveAVmrABMft/YevFyzmyB1LNidUz8yrnolKmitwK2bPJrQzSfyMg7RCZtnj801QmxB2Hh1RdODJ04NYCR84mkyeVmLrySQsPfWBiZawIPusj3W803YTrCIFZh55a7RhYSAh5uolGsv0TMC+pfZ8CJFMfhrjIkPX4iPlpoVij0m+1EDPaObMhssohxiQLjAb8un88eH/6Z8SnJxoDDY9JjIkM28xe9G9BMqE8CdRizNqXF+yzFoq+i0JXmGCunk6mGwVz7dw0Aht2yZLXL1jgrrUpP84ikBVljLiJmABWcOUt5aq4e2FLPP4IYwNw6/6kBGhUw92jqGvzzSz2IXFoSGkFThCZ6Hdi95k3hbTR+UyOtNXxKf3qOHtoG1+tO5u2H6XvCe4OZ0IsSdV2C22f4X0XRjnoLI9dkAJcmaPzyLbgrWgj/dizWHsrNz5PzGCCZ7zywhZMyk6RrEJ5ucZ5k4Fosm8+U94ZyJFHYaHthMhJSLgoHd9plpggxNFeaBMx2BdSg8d0qM1P9s3xHTr7n+uvFsfU5qJafAkyfAi/gC+OLxCw0uMl/XJ+id3bpdG4VxQwyKvZaxCWrPaRHIy9KcdR43jv9jfykGUTzB9KjyF1G0SkyMHMeY5wgAmcEp9B8ffD92GR4FQExXAD/Rm70xyf9mrg0HowJ+Y5o1trz3gJx6Em+pGPt0PvCVSXsmyA7BLMqIiL8iKyvmFzR0O7FJPoUD5dZJ1eKn4tDUJJ4Umb72XTHqR1qs8KsHPpu1Bas2jM6FoTMyoX5aScTz2RVJH0xso6SkxxuMBg3uUblz4fj83SnK1GADX8ZJtrY6l5lrbF1/ZuSi1BShVAdFnfBB3Sh1SW4KQz2mL+Y4svWwspzeGp4W6pTFKdMDjOxHzkJHkAfLjLjqf+T1Axa9og+Cl7gRTi70bSWjsQM9F19HqH1IdJOoerLMQTLpuVpFU//G6/hsxG6sFsnzMJ7n73SbIizBrcriqJQot6sKe+uP1gONUVuBIPlDJA49atkvafSdkS4NR+zciAFrwoHjdIsVSJKqDxAVrM15uFJb4cUI1Z5j3Wgo4gLqLZDMdNtYKJ1P7oBTGSBKZGTqguAYXj9FtcQ4sSbuwAvEKj0iSHfGzNYpAzMhIVEl+O5tVLe4s/3uEd9Gsrl6bogS5HKQwX3XK8Vnj7lf+5qIQiTSzRnfkEpdxxgU0LAZG7OSxjiHkVD2gFaZ1GjKhIedce7dFUwac8qA8Ut250wwH7O4rKHFECWEhhPfyyNNFFWeFrcIjCB9QkpXuz0U80DXFirexggv6bCvxlzrpYL2A02HykHogeIIum14ATyzZnKSfKNZqYUHkFr6qN2/mPO1WK01C9CpwXcl3fLEficn+qMiFNH5a/JFJBAF2ZZWJ5EP8mGzPCF9CDlr0z0YHruP+6bAUG47CNw5yDdR0WDTjq/DqDE8W+/fc6iTB4r9945YbHjR76ZqoOFAkp3KnRniRLdWK5iKvLCCH/Jf9vzHnX4LfdHlAiEucOADd6aaTJnMDTB0DnLoW9pvA/TvJPoH2GYOwUyBgDkGv7VLqRPzjz9nIWylnnWqIlm7L9YRAuucHIleKaTQCeUrXP0Wnyp2nmBxzeDiVOPsap6l6MYLHO4xg8HBAK3J1dgvBpIjcYDKZexJV5mf8c0hpw5ODKTwdkKCeeTezcPXh/9nI/FlRcIYy8sH3nKCQ0EEucVi+uinLNXGTmZXSuB5jYC2k1R6X8FYDLSs7G3qg+Wa30/SZZVsN+vbIWPDRqs9HMz/V2eXRrxClGwzMRZTnpwuqrD1GTjLUluOf9uPygJGxe+/EB6Ak5UCCsCWe2GLD5iZX8ywqGyaP9CGKOOsQ504tSVjAMPPpKo7Ex8LT3xYdh4QReijfasLvMKd8/bu689y+WY+S8IO9LXV7KYzmOOycnb7imsjeiBPCZgNd2Hd2fLIQOaLorPkKjFZcGRaNO6lp+pBPTMvw9QIbYuQZBlhu48VmV3i/3Y0m71BChUWR3cdNSS4D96YC5J0Y7ZFqMHBW6G9p9pf1EMvsoq2dzX2wSvNYXqdP47zyePLrk+nreb97cBNao7U34lHDXeFQ+HqT8XvcE26g42SyQZmHFRlH2UZ0kohpcgm7Li2wAo0IHMre/0XfRV0HtarB6og11KC3Z7/RUcqKzEPA7ZEJQgZNgBZE02MFT702HN67p516Nvqkm0Gjx83wQdQMeqxlml8LDK0V5SdTdnatEK7C+bhiQ3CLRBupVuTeGYhJY/BbrqiE1SY1vdXZ2SFuvNbcrI6ErGJV8/qH1acDEtu58Cm9IYXlR4R//8FS+sjKjiIPcuzVQ+9bV25MODrRYTzxFJYbLhp2Um/HKOncgLdKHj7tOrMZfxR6CrV1qRAGh+vD5dMMDkqvh3RtFI8M/B+95gOm4879zLjARkfVycAOqjJdoBfgWjWNsJnafTkmc7B3nIQv/Doeol9zaGW/DlpeEHHLSCVAFpPcoRFbXqIB0NIfCnsKcK8GmaNVe1S1WmDjR9kV2WjYdDpu3d+gX3edjZ363f9jQEbUhFXtuRXOQv+gmYCubqBrqUoagUdP7xj0HIFEZg93/KZ2CrZfN9t0A6WcpUJBI5WLyoLnqf11jJxzi7XP7icTGifXh8HPdPwOvmb7A1BFcfY2H1yrgpQ9LL1WPc8f4dqfuE91BNq8DtcEql3/06rGk4gsNyWI77GnH9IKwUsAFlrpUmA3zzUPojorig8/2Cbd3TjsCKM9wxliCLyKPngKsM1KFkqM6bMFtyxYYrU2eewcxYM6RkLIzuCbt2tjjkrWkSVoIS5lGaeH9ACsgsCD8uBJTg2FG+jOXwTTSCvGIWOiSPmrIKKcqEISVvUcMWhHEeUKjXTMdtBmPl8s4WipwTYa2j7rmaa0RNf7IXAOT77NGep/q0h0KdWRo5UPERTufgAqHgtum1dZEPq6OH8ILA+nokd8MXPhCko+zgkNqNlrLQew5ugiVBI+TSaF0+Nh/0lIpsCoBQWlDacVD+Vx3x3aSXTbkp6URafBo7r4W0YMJYL0MnwFM5mzSBvH459mHAZ0yzT09dEXgjVW9/ggg2LxRO6yGo5FTpGQS5EwMSjG3crtd3U4X4CO+KX5W46TC5B/X/DpEipFhWLaE6rpYO0r44KwsS9Ge9H2dfFY3QNvXA1sWHN6WR25HgQ091u/FmxcmTXpvXerH0b5xRi1MwmGmrK4ZAT1TapoD8+smzXuW4xfFWkVDOL7zk9xNtB53A3+dJrIzc5OTB601UXSFtQkX3hWaSnhB0fIWaxp9w7vGQDYtDAeTTDigrLMhVNfLUpJcIxhrMjO0Amicb+Ubauev6gApJbByzVQRTWq047GGRSYgxukHnlk5+xWTYTi31cQQCJ9ILZRJ3tV05M1AIgNeeDW2H8IBJqkzSl9nnKSajGYOD7eMyjHHWbG4SEV8CvAH8Iew6SodPSlX4spOyb4O8XdYQ2bne98jMMolgBIbc8j1VfPhmdPcqVcmf5qMjZcC2VzGSMF9s4863hYPVGq86Huy5cmg6zBz+qDU3yje9vmEr3yJ6kZhF5z8UdlkJdjq/581O9VuCR2B3lyEAfQoUZot9HdVILawreyRxAy11JlpE3UoO/fi5/5omkUs0A7Gvb5+bsteFVIW+9l+qR2dINow47smAidv0bLLEr/yqKcUanjvixyzAQCM5CVzq0r7rDR9M7wjLxBq9eBWRVmyK9TfSJqXHjL8T3l8phqzWGZrkRC5oiPO6C5Wf59fFDP+ituUaiEqytebX0Feyu7U5Leql5gBMTdDPsmK7KUOyA5TuWxjGc7dN7kJKEYpro0VWRhjMArMIGbutu6vN2OSHb6nvd508S4Q34uCRKu96bSAD7YHASNVhzXv8N8jroYf5Y7E9s4wTpkvo3BZkkWqpF0M1vka3jjUC/JuZvw9V8avX+D9bciICl12vr/bQJxDe+TN9MQwDJwOe5HRWZKtCtH/1/2brHVDE381FF3JIILjZf20UTFL4MLwmZtFv3M88Bv1x6hEyoaAlZ5p5QEWzlw8bJBt8orARhiododtduYtJBSF7octT9JzbeKdozaif0LBWL/u9RjbeVNLZ8UV44Ye6Sz56Vn8QlwftWL01WoPryii3ZZ930Zx6Ins/HGvGQmHAD+2qvuKQAs8Y6ublb+Dvhp3Y2NNMjsuzOvb6m4YtkPzbhlctKadex8tBQuo0zhmSxfDIZm5VnEDdG2vZ6kcykYFxgAz3wrkVyXQnwxyQIeYMIHQYT+257jBWD0yJIiC3PqmohMzTC/65XVgSsowG2kgnlR7pYY18nBQ8aVfJ64D79rH2pymM4xMU1Zk/OS14XiDcldhO0c0RhQxiPSY72XYxpiaKVYmzOcEvI1PzQa7+LVZ6pBIwn8ffWvhqa38b3IskTs4RBkYs9i+i9/AqdAQg2IOeWv2fuo5tEcFyefI9nATJXQchbBEQO2Cj3kaBe2X+81o97B22kYSwjOkgZybf53qZFQ6p/N0dL/VnuL1cYTGi8k6rMpkKGx4j+Mc/fcHUVNXTKhyO10FkvHiN+qSbJGepJ/aLXoLZ8RET0Bshv/4hAQgzeS7yl0n74cedqdnmAeHmQ2CyXvMM0MWpEvA2ezZIKU+WvUSaGpTt1kvMloerqnqxHLfT01Yh2n3iD29EWnrQsyjedi1I5SUgvQKBM9G+oAai15cO1con2QFz3UK7w7ZgzM+vPmbk2QqR87fzlbdTSAhrLXzqVfLnWBA/4+5aC+0BRMZ6iX9lH3QXtKU9D01K3HprdilL456y5lsl38VQaMbz9hk0LgquziMY01Znz2WE4ClHG9cF/e7stVmn89oNFUE9NZ1RAc97KzDEWHLoKwlCG6L20/2Gj7/M6PDhsvhY+FMzYRg+v/0jo2gPT0UTCfaLBDRVvKQgUSYPMG1dr6ox7ohepBUS0msHq/V7A6Y9WfKDgSLatqTzwhOXnuXAoFc1LsdlV/Nv7XHqg5TAohZGa1mOn44SyY1fyPMCxL1QmxvhBC7mxDyj9DUnBpbjdAzrBW0mUzZ51brDVW3f0A8oKL6FYBf0mwK6YxDMJogq94OPgpZyKHKBYvJXMfs6u0pYnEn/jPeTVQMK6uY9Egww5setjqwdQmwi1ea0/uoNw7QKPorCWZohFt4VB+HUy/ObjCDdxryIg/y0wXGMwFyftSyf0v/ESOVaUNOHg1aA0SQ0KOwx/oqBneMvSoxZc7SqvQaHcx3ZLg7I0FQgQ9799KuVGTfGNgWvzIMnHqMNnCyCLJMNoNQK9XA4Wkq+6tVuCUREehKj+szE6KlaSwgAPfb6JeGqIyBrjJK/wNw2yPaYB9wHia3A56M5r4OplAvdVjO1vrsc4I8LAy1zqqpo0yM1hfixHeLNDG6ufXaX/4mWxYpqL3hBHpPbnox49P3jj/wGgdZFaJe1JTer036xd0Xak5qCI6SV86xqAdAChv6sj7ESw0SU7w0leCi/08lfYfucRQHdzjO3JkA7lvHw0ouMCSCweP+ms5HlStT1HLlgQ/pkLQ0HiDkuoPtTY6fDW0UPlH3ebKJKJsiIlEwAnWQ1ExfQhfs1IRdbEO6sgyC7u2YqSye9WFoH3s0+d4P2X78UPcUsRitbiSflMds3+5ixk47wEAbwHOouv3l0AUb9zZIP32hh+8n3fJx3LXT4wqErJXRmufydvyJuKW5IkA+rD7B5y3hJGUFrf+je8x2WEZ93MMZZjKF3R4hY4E82J7y0z9znWEXqtnGce0dejOBkrf6CbP1VCh4ixhRvmOXO9yA0A2XQqeWYNfk1eUkRWlybRDBiE5SOOtjudxOpqC6Hv0XRqdL58/dsrEItVoppvb13l9MrZRKzOe/vtw9JP9aAkOa7ra6MbT/3YE4LlEJ5ticKWKe+rOGibg+N20Vx6Vg7J3byZG9+hIpULnZWH4Tq3LmlMA+oUfgAbbzPl3twbDuQozSElI95KSsXaBWevUxIWPQdY+4eolMlTtLwn+51SP6BWFEiioYy+r2Rza4OqKJPMbx7t0CZCtpMKxYQ5JCowbAH7J4Y3Eh3C04j1H/2a7qH3cVo01mg0KjVVR59qENmLLCnQ4LNMS3i2XshEK7QAIvi4D+egZPpMUywog3s+tqRiaGXIEMFp3rd3TuvLXVT9tpJGxjgQLGMKXmGL1MVjoN97by2NaOn0JoIbOQqeBIHTVbBYNON5DD3XP+rStPIfVbuHd+90TJpGh8BlfV0dLneK2wDMnndVGVvQLhvaQxu6sL3XsvtxmQzeFWUSHLeAlmTc9yNQKkXtOJWS9faewS8yotiXdJQ6EI1vpVOHgh46gljSllVDRx9qlH7i2QFU/dKpaQEbpAFUBI/eSUGbpgT2ORGcUGXXDWjQJQo+nCkQVnIMRUCP367os5Iw4Rb3LDvOi+/mwcBozzUa4WkjVcSIURKO3RTFCiY9j3O6C5MBS6Y0WbBooC0nOzhKxL8xMIIaM/tnyEzIdlABrz3f9XlCiQ0hh+C7/bNp14eUvnjcHWjBOSw8E7BjzeXkRQkpIuZSOriwZ8PiOLZxCkXFOQ4hbXa4Tu69lccJ9Hd0F1lxkg5QnAhhfx5WdcTkBH3SibBUMCLPb/cYypz6s4GGDMV5smYibldp//j9gbCEhqanpxLsoexOMik4SOt879z21iz+8V3wgG8CicQsmxcsqCc5QUqOZhnpO4qAFgzHF+noxN835P4xf5EsOcPvYWwtzK3WEYVGy5tuvxE5WZB246SGIDgeC4sMge0B4p70Tse4b6NjlPHW+90GmqnySqY83r0ilaew46qmwi4RzmOcPehbn4YPCoISjQ44RURV++dfU53vcKhkSj6cWuh75tdSSUNMysFwoP+lN2gGTwxOfrha9wWxDPpimhEBVrt6dcBIvdoUbCLTDQDZuUOVVhZP4sATqq8z7Ai0STnGxzKmAHG+3I+/tvrDN/OOTHwR6W5aWSRj+M5wmS5hfdvimlus2z4pE6RV+l6scSEX3XjFUVgbSuuufln4qZfmgBxNvIZmkPtMh4WHAtuqRVdgDOLksqdhjqc9jrNVpRsYL4L5fXaKhNXYNJfTorxbaoSpoqj6ZEp05xsc4y4Qryx7BRs3iYvuHRbCUsiCPmmGdUPXDn6H7woEjiz1YeriH6NPF5au5aVrtcw0DvEgLLKMuVq6QvzE1mu+x9AFhhIEE3jVvzGWs7x+IBGJ2hfG8Kb57q5sDsPmddrc0s2doavGt3j59SpKkbETAVxcSwwHbpAEsYTNPM1KhVl7EPpQp+gNotyPx7hI11xG47CrYE7+4xlCFpaDwvf9FWescjE9qNrcgCXvSeme0GAOo6QjsttWQcRguwWZb6OG1VPN2xZcfyUeEGLHhPkrziDDf4SHNaCcXXJ9CtFdyRMVueZNWqaoSKhpFI91MMLSXju3pGbSzJlM8FPf/oxZbRADvlZZCyb8fbb4mQVBZZ3GWV4hj4PCrLA1qQvEqs9XLsRnoal9WaSQhWRzLJmCurnGGRc6wxyAAejp0pAR70k0M8R+ziXphTbSz5jU2xp2cFe1EhegrqPqjFAtYWbYwsm9X969oYf76RSVpD5DfI8iDfFILBkfvnZaZtHikQ2tfNY1T0QOYafZ+dfiQjWZxqrDxXDWbc/jYZSbOzpgJ0HvC9wodOgTk5d5d9dmNrnM0LH8bvtI4zgktUZdf/DkYM10EF8yMhbFqvpMTi+TaLBUNd9aLSzSGAqu41xsKxsEYHFPhxozYZMPCafc4U5t8Ja7k34czb9pTsN2JFnwl8AmZSpI39KzBoEcD8fz0CAcio2KlaDIhPF8V0HkEbwc2c0mkpBazhOMI1d4cxnKG15nlJ+haP4D9g/H1z7jIEHS7enL9st+r19iJpqLFuJiKD2NT7LXyBzaAcFxIJ/fo4roeZSvHUyfgqUjSVcPiszEAuk4Fgqjxih+ln6TZW8b5sbDIvrB1Ul++c1B63XbFgHdVJTaRPzIXeh5f5u+QYvfa7pHyQV0ZUIv4SnfFMvTC0g0/fdaaBd9rcpxu/CBpbobKZgCIyVRDZGdPlZs8UGyu7+Hxb64E/k0YIIyG0d7ZSIcU1dOwyAQt25Ow5B4W/oUhgU+Gf+qB/Eqf+V11+GylEkiyGag2sSabnAwgaqTr549u7USX8FH6EnKLv1g9jl2zIU7C6GM3aeDn8kP+9aBM0Agrl165RV4/UHaXPnrBjs3YOHlrMK9jziNkwwt6+rC5FPPvSm2uVuOQouD4+Rk/8X2VoT+8bijB9PNpfsOsNhiSOVgntu7dzfzJItraFExs2ylPt0vanTgZJP3SIxPvZsgaDSBNmxIh0KPLS+EZkJ1Xy0gY8WVOZDbYF9v0GJta6+GUy7ek8lisYumJ1nyw90NF5n7L6H1aFMYqA/WI2COJA7pWaf9Ugf5pniETIJNyNXtonwZOLeCG380p2a2m5Fs4WDJIbVCtkJ77ah+h3HMvJJ0fzW8OXfnZDuzbWB935lP5zr2+vOc7CL44LjNt8p2deJJKd+d8n1mwKwxWxUjkxJRVlpIqwq1a+Sfeu1oNGDaOXyS/LVoiWAi4/RFFK77j8sVBWyTeqc13DCYWKdEbHTgEcIdtBewm3fvU99V8J4gYLJijdis2O/D+3FBz8kG/SwAXwjzKgO1TmXuA3syLPxxfnEUxttkUPpzQJgAzcN6o79tpHr3QWX3TVy4USKZJPX/G7/sFv7TB2RKaM9LvG8518UTl/oNK6/mqMpSOqsv0xRVzNjumgamqz/e3LG3e1lkrW5SquqlrDJIrN90AProjO2hsva2vAv1ZNPbHVfvH6K8KnMmDbXcZImS+YAXafdXLVILS/Q0MSKuRaLPQABT6AsH1SpBlkiSLXyhT/gT5IbfD6Z1Jx0n7l33o2uGW4lgd8BRn8WUeEHBHEn2SCXVQwlREQtvN7iSC2y8qSngF4ytc3vgOucrGccauebyUn9sdKmkhMom+XHRGLg4yr7NW/ZAq8UDCTjimw0unj204NYoihtZTNdXwgmCpqzA6Y4a3S/braI7FEXELgpjVSnB+dqkyFq3Tny2G8lAz1OtN0TZdE3wgbqL8XtsE5Ut1NayTqmPNmEhJVC0f6ZfMop0HP5VawTxA+lq1XoeRAoIGH0ojuV+9O13sh2V2zoxj5jVyNGuZDtqZVlEeSIRI05PVi7nZfKw+EuT5YTkdX/qnx/AmQXABJR8mEbt5A8Oab2RqMdG+P0zvDI0gODnGDSO2w4ZOrD1zi5LnYaIljibbOMhpDWcwsd6Ry5eUmiLQ24OpaErO6a3/sYLybm9xOJLqfn7DNg/5SKBxEfKNyyUYP4KtkSMQI5Xo7dHcIhqH4l3CRK/gB7WtFU6bj0mReNJIitL8grYbUyZpqDuMDT5s5WQsWjOEmRSbMiH7HIkEIPvRu0WxMnRCJKjGFWdlKGqK96T7jlsEHCjsPjk/9VEQ4W5qB2tRAFGJ5YGgbmyYxqxGxduvkNdd3IZKcIbvtEtH4X7aHeyV4Dcn4wkEzUNRRhISM51Av5I1mwi2lj3DP8d6K9iFzNVDCSb+eb9pBu+SEqYrvFC8WKSi8OcZDj50KV871120hgz6n6OZy1KOh8OzKNuCKFt9mVlUfJKzD9gcuL53q+oTHGGIKFz4+4/zLC13N3l3y4Fn9dzM02uGyBGoJXmF3jrwW9OguOsh1FVykE1suM6kC/e005VRngkgcn29tixbfGSx7k8JzTId+5wTXE1HgKXCtGlwA7L6FxS+RUGGP2az1Em91D7THACjjqlVdoDOltQ7Yb4S8n4kG/m/CvtFfQB0e/e/JMgICLGKds6v5THENB7WYOdJ0P5s3GQzdbeXjUAG5Y2WCUBs5LZ6xDZzv1L7jfUHqBbmnHW7U4g+UTYB/tW7B0Ya0JAbpzWFSoVQH6CbY6q9fM8ccelwWdxeWdjZm+TcmBAHpje+emw8T5mUgl7Omvks7D2xk04/HjynzVyBN2dI3dBgxTkB1keL9tMN0WgyjY0ddKI8pigHP9lOa8hb7F2bZIa/FqS6JJPPHnlyPbVl+weIG7j4ocmWH/OkvaT4qtcbnafk2ocwOkjSqUob66ehit1UDMwKXreD2R92MZugTHNe/PWAZesANg9eBbm2p+4kqK52j8MW3AhqaffDN+kK195DUM4FLVYm8BQhOF+OWoM5tTD8LImCNRenutbU6qRxpaMDXCBU37/K3Y7eobcg/IaZaBuw44FteI67Hdgufk5VqCDjlK7jDBUtVq07hpPI9ymWW/m3nNLQlusNGDSBNYXOUBDRWNnHira/1eo9GEwVgpXn2tG1PUUxT15p/fbfGXCvpsj0QlzwErC0ge/Oqlsh7E0QhpqDAcvlBJOiXDD/bv01SkM269rmghWHJPUbmpq4trj7H6cCMXMIwWgOLaTXR0w3tamzJpReC8FXDNwkxSCbmg/ag17JdPyptz7mR3k6KvXor6tFCfEv85TW7CDWLEap1AC12Ym+LK9/CxdKPnXz9Qz4xNXGn3sG1wAfthifQfjDyiCnLo2uhuMzI9yKxH4PUTt52mReMLmnHFrrLpDYcPC+cU7ge55guYhGv/ANB92YzoXrI+Hs6gdXnnfE8GGhfydGwvKBKCtpDecGnu41Mz28j9/LTVtSV9WZEoxANMgPGo4BDbY2p69ixYGQWATdyg9TRDAK7f/Lrlubat60yuVZ9wcwqZ7NBP71mX6NEgdvfK1EgMnkZzsDQl/wWDHdAoOYCo4pKwY5I/V26cKTO4aMYcV/YDdgglOtas2KtIXBJAcgotsV4YfF+CDN4T5WdX808VdXh3/UXLrAdcMDF3QIXj1HyUHIOkXBH7DXICbJt9eNiowRXiuB0d1J/FqjPFe2IlNdXnwFwpRusB5PLSv0Lk/AdI1gQmao8wwLmnoh/L9riMbMMsWAOI+5B71d+lGTKlxx4hQn4ixRfedyZUUsRcpGrgAS1XqCKzggl0/LFuyQpe9BsgvZGkEHQ4ELkl6bcLtiHZ+7uFxmRjnV7v8PP1Whug1igIT3OTMnmb/dGJPuGKY5fRdvWoatxfNU3ABi+fY7eHiPqC0gQDpAC19twVfWBtBur+ST+y7fzmSE5Q0C3mcp8/31XIdqm7sEZJHtFnXBgaTyG+fWRGAY70K10IBvKH2TE6IMzm1k92/Cn2payTupKTtojgP3uaWIgFVgV0lD0WGR0PanqiKtrBFwqznvb/rz2PgpSjWd2BESLQpxY+6tmKXZnjvY9xfR12CQ8o/aKz1t+XxCSzy0uE5f/kaFUCrwxjL8gT7SEUJshp//5/yvPFJHgJlgsvXp+gRQCSzz+vS6rl3BhMsbj/HzwJYz8GsWppOQDGVswlOHEaFE/qhImhDrt2DUfNxtt21GW7KwJRn9/mtYIjlnnwgESPEpwoLyTru3SsVGzRxnZG6x+BiseUs57lTdb3H8KG7UPeH1SSjy9wZHELnar9x5cOtOR7lOvyjWm4Ab18Q+qoMxxLCFit0V8SmOu7AU8XGY3eSXb6Ly+kaQmDkRlOstgmcj+rD34KNz7LTvLL0O1Z9J/nCjp+1flOFgtbd7Yg0t5eNrPuppxYxJfSpnJRNL4S3YTffnV+x+zVsuioseET/On2wNi/TnL2rAQIKswi7Er3Sv48D/+PLsa2WJOSk6DqcCLmusILDiz0FwKEhMewrxtNyM2IAE0/6hiopIQoUgC6U8CLirhWbfVibSnCGZlF5uywIcaUlcEaYP/evokbi1NSquO62XNnWR4+fB3M1N7LaI5pwdHYOKEjg9OaSiTtEDypKGOVxZhdQS0jEvZ46foNS4SBpwZfPn60p6pQldNUmimhWeU5LUnEpZYjPJU6hmAsh4AKaLFfJANrZ9ou428yoEIFuiY9UgOYkqtSUocWxyijxK+NTtuDdbh7NJcyLIl6CUBWQjZiL34Bk0Qe3vmT9tpIKus3r5CvEdEu5Va2Wxm8CQJT9bESzuFBeH0QIRybKFAUVqNa9tCXukd1jwLXYKWsuMuFda8R1UjVG2cvAZ+R3lBV+nLksL4Ti6lubX3hKFcSyFsG5rK9pJt5nlSGIkBLP/HFqLL/KX0S96NdOo4CS+GYPBk+lBZxz6Yie12vvUj8l4t1ik/5PmvbLOTPCcaoPeZ7APUQIKIcxcNUDin3R1okbeAUGwt7Ja3G0ntQokBhlajisyXeqbfPLrTTKpTauclKp+DGdyBsbzFHEYtIqZnlLe5wjluF/UID6EgwWPGj0FVKM59Jom3+0Y1QTb+IKqHZv/0FIEEuVItlJHSixdza2w0UN80Hyc/eUGv6SBybC/EEs9cOcLBR1eeQXXe7p7hfIhtxxBrGhk9n7jom/4LXF125WzPmMCUiNyE8iO7sVSmRf/iSNFBveZWGPeCirfJ8a43fk5jCfA3NPEJyMAamu3Q5im0DKo8aonWXtye9iE8vraixlVTAGSXFMjP3+XiOE9jrnXTDzARnt7+9gvHctQpaAI0za6N7bq9R1lb55jILwmx4Ih4OA0K1/Xx7B9jytPFBRhEO8xqXLhxotsIRjnGRvnkMK/KJ1YhE9T2mNmclLYgMSn+7dzik8BzoHt+EcXstV8yNpTspqsnS96ATq3A66NbF449w9JqViBt4gWi7yVzt3kR4XSJ8iEB5anMqG+EsSyrMQVv0sMeEysGx+yYs6G2xPJw3zqTq4RzDQXPhYra/VMlt7E8zzl4D7L3HS3kkWf4ZkmFmnjcENPQdkmohl6p/gqkOg+8McyzNxxb5Fl19DsSr3MTuSMqhSKDn95ibzYCEdrZXJiKaqu7BFBuju+jSObOPchog2IsE/u/3U/UK2mntvSnD0qNkPYoRTskBnLJ3NJamL0V4sEbryX8NMr7MKMJ0+h2+xMKY4KERpvUrd0c6ABXWHqLdY1QTugC/5dhdoLy3+KwgG5FnL0MZw6qvOvHkKQRoQrcKLuwUld15s05QxurH67A9eAr02a/vUWNBIgP6vOa69ZZuZKElWttIerRDGIAkZ54fw7HBctSZtfspPxaliwbOEH/Laxot3ZQonzvXknSVodzZHA1Jw7BcNRsYvl+KJ0Y6pMRPpIbaN/QSuHtnjUoej+vlVhq5021xMUPKxCK/D8rSRbOmduHG85/JrIimgo5wXWP83lLvRaxwCxeTGVt44fTUqsfUARmQcS3f5DbHR9SZ4nJYIEvcCjIqLezJ3I6S7xBop57j3ZyMQX0Xxr5mc6IUmrlOXM9fJG5iDZQQ9rWsGZ0Y26GzTAEsD6pjPuDa1XAT1MRpxyZ8zN53sl1YEV0E0EHvZqcnBnqMTXRh6zC9PwDXEk3OHs2zLLIjBhY5+7lDxp1X0qcm8XtWorat33mUx+kEDDgaDUdpclQq/ZM6mMYoF433nKbCKDxCozugSPVaRjNPosMDy8FujvIJSb763XuBGBIYLS9x+HZhYiUa9xod0xKV9aRt7yczWWlLgfK8qn4fULHMBSP48m/wTWfDBdTH8uDAKt5WM033+2bCpxDhmZtE+d7XP65yBTOf9/EWaCG+Gs9/5kVbWS0JlfoDH6Si2tVCzCRGfV0XZAUWfXOMJ5F9dkMagbwaeqVqqbVONDQGg8zID5MUV7IkazdAz4JLOXsn1RuZnoZNIGV2Na15+dRKYUAmXFmkWBJpPMBwT8N4bd8VZwBnhm3WzH9S0sbpoP0sgf2OmPvQ6smMyfkVK+OLjXYubmtioAhdwDb5/pLRg3PGwfHEz6v9OOe4AK8iw2cma49tV44In8Rc9jGcqSQlFXPdlC8366ke4U/ITFy0/SQBl1vWvGk40KycwWGaLf8cCtEi/4X2W8961i6lYnpfNQhGcQyC8s2oIOW+Pw545Thq3ZBEyNC8YDr/pzCEmBI8U3A4IiQJoHiD9kUMNd8wfzysC2Kqc4OGeWYsJxmDev4Jn4HV+vqpgN6xxSEMABhRMdTteHiJAgnQEX9BR2V1sNqh5EcMvQNYYa5+bblQn7Rli1UFCtQkP6ECmGkxmPNkg2CGS2mmf0/WEuTZSyPMtbbrnftPgleOmJ3jSm0m1EU9fQHQo1NZti+KczpJ8mSYIVtXzXh4rNJcL3Fm7Bbftpjmj5UnuDpPk8HvqKOj2DGJyk4R0Md1x7umiH0DTOXaLwO0EI94k7n6R8nfqiwekgUQZ1rRek0HViM5YN0JLWp4f4NRE8ErcGNSHZd58+9Kx8lmkc9ogfQmX0rX1kB8QQzNbH+eVDee0jOQNUgQcew3y+0QbifXrtLHXDIxsqsej41Kz7vfcQRE1zUnY2phYNILK8a657zyHNMzPiRhxs28s1JX2kiCMEloubOXnc8BzU+n7LM9wztf63eFWN/eWHXVivSdCWg5DfWsk2CF8aFJrOP277QEPdkWlOlewCVEkLjyd5wUn9ZzaKOJKnDQDLfliiRLTKlU8TOeQj8jOU8FfpM9tayJTDpxw6sVlZuJRAILfxn+QAGIB/W1FGDjuuVu62hFDBdvzVSfge95Ebf9pclp0GrpV3S+gwBWn5J7aGiim/fRyIN7YVVXJsnAnVeq90vDdAV0XearTqjT2Ck/AMkBW6T/ls/6VUVnFWs01wxkahKR0tRwyLRKgHefm3RWie/pTVQpUMZw+/7ozQSW+7vuZd8lsvT1iX5rwlpiaFnOnDbHsr1As6vLETd5HVbcBCGbJHcS7ax9Byd50jdYyagUtjAaHYX8ryyuR/bDkw1o4j8+hXMfbzy+CVmgrfRDyl4dn+5LxrqRAXLoDKpQREAHqdLSsVSJh1s8KnZ/SsUVq27cq+O6LMSBmhT4X3E750rmWwCsoCre6bT//oFWYALjp2SbcxnULBaTvnYDHtfEbO1m/3c9nJk8ZO5KHQTV88ivTWN/S2EXwmisTPdcupMrvI8e48QZdkZu9WHyKron7MKhGFJw6Z0KZ3tleVrvvJo89siUwByPY+Hs4gkKPBQbLQOaedcv/xeM+Ih8rl1eHEC/C65xWVciToVqSGp9HfbhVzFSrO6kBnv7mJwnRLvMEwqiNankVdJJMw4icU3lKyw/ecNSWIUddqlbThYMiq8nHjRRufs+28cq0OI9zhpvxFvFgSZE/eAYvm0x+9lZO+EH9NkBngaqU1NMYhdombNuy3awUN9p0mJQ//e9L65YbShgoc+ZUlNy+c6F6gDEHXV0JrzevPIZFAe2RyRa2dNqzLvihAAMCszYueqszzXRkSyobx5+LTLK2V3lfg3wbS9DzP3QW7VHdHbjZcttQRvtjrGveJnNn2DE2ZDIbvkCrT0H8RzbGDdmIq4P1ey+hoY/W6NuZKOz4dv4HUNznxdKV1Wf3MvqUv35r2jTKvpPWBUWNm5fytX/QJwp6qkIOsSx7Y67BSCbCDVLM8/VcMG+T0j+INrgL9sfT1ICtACH8BI0G6ViUZPVzzCmQHW2oVIwZjAoFl6+meO/pD8teO1E+1y03mCpYfW9S8qhtH2GhlFlebPf4NbezVv9xbXKWz0xezRNQWqUqtYRTUbuzK7KTvjG4rQHfzBpVmK4wDLnSIwdSzTSk1fPNeY0WOpPZTLlvQ59xwgfFrb326vT2hS1JAZ9E6sujFtKTiJ7bxI6o4cBhDaX+adXREThhR+MwA4TqD7rga/o9iY7d6TVRe14CS2S3iSQsD0R6ApnhG/2Wa0A0AY2NtWTjmabdKU+KgIRDP9RQYVjXiF1qC+xyNVG03I9vpmEpY/G/zC4nLOKgXAZ/uTikHI9Afbkhfgfgo9arWbix5eH7WUo9RQygDzwCnVSjbXc7MihEufVj6WGbK963pw8VjY3RS8IH1cy2yZbIcKLO5CgAUcXJfF2+McnDLKtXxyZaf7SPA6KJq+zF2NHyfoeTOwHhGqNcnHVr1hT73pcoyXyfvCYBnG1Bp/aR9t8hoI7CXM3UZOisWGA1SHZ2jf7k9GlRnp3mF/c1AV+JjvUsnZrsybEOQJg/dn/9eJkyykQHjbF56zgcPX6DdMG03WKUMlYz+uOZ+5DZy9E9MZOZ9GMoLFdrIPPQQLjv+GlCMpoyHPXkzIODjHAID2PrnaRpqWVHh0rnieDILKq+Emrd5RnjgE9pDUXWTmHaKuqqYlcgEz4zbi46dbWrAAFBjsQq1rLHIiPJEcwFLCOY4JNlXRXQJqCUKXk2d1RSBGzDP6HDSpo863BhVRFFF6uIpjQV7j5ebFe3UkkO/+coIo2BTAcgBqOtQ134s9a4QJvofuqBYMGOBMsWZ+sn/2AOxDx6SfAnDFGw==";const VJ=Uint8Array.from(atob(vI),n=>n.charCodeAt(0));function yI(n,e,t){if(e.getQueryParameter(n,e.QUERY_RESULT_AVAILABLE)){const s=e.getQueryParameter(n,e.QUERY_RESULT)/1e6;t.lastTime=s}else setTimeout(()=>{yI(n,e,t)},1)}class WJ extends jn{constructor(e,t,i=512,r=512){super(),this.width=i,this.height=r,this.clear=!0,this.camera=t,this.scene=e,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new Ee(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,colorMultiply:!0},{set:(s,a,o)=>{const l=s[a];return s[a]=o,a==="aoSamples"&&l!==o&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),a==="denoiseSamples"&&l!==o&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),a==="halfRes"&&l!==o&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),a==="depthAwareUpsampling"&&l!==o&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),a==="gammaCorrection"&&(this.autosetGamma=!1),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.copyQuad=new rd(new Mt({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = vec4(position, 1);
            }
            `,fragmentShader:`
            uniform sampler2D tDiffuse;
            varying vec2 vUv;
            void main() {
                gl_FragColor = texture2D(tDiffuse, vUv);
            }
            `})),this.writeTargetInternal=new Ct(this.width,this.height,{minFilter:qe,magFilter:qe,depthBuffer:!1}),this.readTargetInternal=new Ct(this.width,this.height,{minFilter:qe,magFilter:qe,depthBuffer:!1}),this.outputTargetInternal=new Ct(this.width,this.height,{minFilter:qe,magFilter:qe,depthBuffer:!1}),this.bluenoise=new Bs(VJ,128,128),this.bluenoise.colorSpace=YR,this.bluenoise.wrapS=Pi,this.bluenoise.wrapT=Pi,this.bluenoise.minFilter=ht,this.bluenoise.magFilter=ht,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new se,this._c=new Ee}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new cM(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=z0,this.depthDownsampleTarget.texture[0].type=Pn,this.depthDownsampleTarget.texture[0].minFilter=ht,this.depthDownsampleTarget.texture[0].magFilter=ht,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=pn,this.depthDownsampleTarget.texture[1].type=er,this.depthDownsampleTarget.texture[1].minFilter=ht,this.depthDownsampleTarget.texture[1].magFilter=ht,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new rd(new Mt(GJ))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);const t={...OJ};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new Mt(t)):this.effectShaderQuad=new rd(new Mt(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const t={...HJ};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new Mt(t)):this.poissonBlurQuad=new rd(new Mt(t))}configureEffectCompositer(e=!1){const t={...zJ};e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new Mt(t)):this.effectCompositerQuad=new rd(new Mt(t))}generateHemisphereSamples(e){const t=[];for(let i=0;i<e;i++){const r=2.399963*i,s=Math.sqrt(i+.5)/Math.sqrt(e),a=s*Math.cos(r),o=s*Math.sin(r),l=Math.sqrt(1-(a*a+o*o));t.push(new k(a,o,l))}return t}generateHemisphereSamplesR(e){let t=[];for(let i=0;i<e;i++)t.push((i+1)/e);return t}generateDenoiseSamples(e,t){const i=2*Math.PI*t/e,r=1/e,s=r,a=[];let o=r,l=0;for(let u=0;u<e;u++)a.push(new se(Math.cos(l),Math.sin(l)).multiplyScalar(Math.pow(o,.75))),o+=s,l+=i;return a}setSize(e,t){this.width=e,this.height=t;const i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(e*i,t*i),this.readTargetInternal.setSize(e*i,t*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*i,t*i),this.outputTargetInternal.setSize(e,t)}setDepthTexture(e){this.depthTexture=e}render(e,t,i){const r=e.xr.enabled;e.xr.enabled=!1,e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer)),t.texture.type!==this.outputTargetInternal.texture.type&&(this.outputTargetInternal.texture.type=t.texture.type,this.outputTargetInternal.texture.needsUpdate=!0);let s,a,o;this.debugMode&&(s=e.getContext(),a=s.getExtension("EXT_disjoint_timer_query_webgl2"),a===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(o=s.createQuery(),s.beginQuery(a.TIME_ELAPSED_EXT,o)),this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let l=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(l*=.5),this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new k),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=l,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let u=0;u<this.configuration.denoiseIterations;u++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new k),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=l,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=u,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=l,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new k),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(e),e.setRenderTarget(this.renderToScreen?null:i),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(e),this.debugMode&&(s.endQuery(a.TIME_ELAPSED_EXT),yI(o,s,this)),e.xr.enabled=r}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}Uint8Array.from(atob(vI),n=>n.charCodeAt(0));N.forwardRef(({halfRes:n,screenSpaceRadius:e,quality:t,depthAwareUpsampling:i=!0,aoRadius:r=5,aoSamples:s=16,denoiseSamples:a=4,denoiseRadius:o=12,distanceFalloff:l=1,intensity:u=1,color:d,renderMode:h=0},p)=>{const{camera:v,scene:m}=Ei(),g=N.useMemo(()=>new WJ(m,v),[]);return N.useLayoutEffect(()=>{iu(g.configuration,{color:d,aoRadius:r,distanceFalloff:l,intensity:u,aoSamples:s,denoiseSamples:a,denoiseRadius:o,screenSpaceRadius:e,renderMode:h,halfRes:n,depthAwareUpsampling:i})},[e,d,r,l,u,s,a,o,h,n,i]),N.useLayoutEffect(()=>{t&&g.setQualityMode(t.charAt(0).toUpperCase()+t.slice(1))},[t]),C("primitive",{ref:p,object:g})});new ev;const jJ=NW({uTime:0,uColorStart:new Ee("#f6e0cb"),uColorEnd:new Ee("#cacccc")},zW,HW);JM({PortalMaterial:jJ});function JJ(n){const e=N.useRef(),t=N.useRef(),[i,r]=N.useState(!1),[s,a]=N.useState("true"),[o,l]=N.useState(.5),[u,d]=N.useState(.1),[h,p]=N.useState(.2),v=N.useRef(),{nodes:m,materials:g}=fv("/carlsOfficeAug21.gltf");UW();const w=OW();return fh((x,S)=>{v.current.uTime+=S}),fh((x,S)=>{x.clock.elapsedTime,w.width<=400?(a("false"),l(-1.3),d(-.4),p(.12)):w.width<=500?(a("false"),l(-1.2),d(-.4),p(.15)):w.width<860?(a("false"),l(-1.3),d(-.3),p(.18)):w.width<940?(a("false"),l(-1.2),d(-.4),p(.18)):w.width<1200?(a("true"),l(-2.6),d(.2),p(.2)):w.width<1400?(a("true"),l(-2.8),d(.02),p(.24)):(a("true"),l(-2.85),d(.14),p(.24))}),te(bo,{children:[C("color",{args:["#fff6d7"],attach:"background"}),C($j,{children:C(iJ,{mitmapBlur:!0})}),C(FW,{"position-y":u,"position-x":o,right:s,onPointerOver:x=>{r(!0)},onPointerOut:x=>{r(!1)},children:te("group",{...n,dispose:null,className:"model",scale:h,ref:e,"rotation-y":.5,"rotation-z":0,"rotation-x":0,children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.poster.geometry,onPointerOver:x=>{x.stopPropagation()},material:g["Material.014"],position:[-.228,3.625,4.41],rotation:[1.559,-.044,1.312]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Floor.geometry,material:m.Floor.material,position:[.577,0,-.796],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.WallBack.geometry,material:g["Material.005"],position:[1.853,2.905,3.954],rotation:[0,.259,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.WallRight.geometry,material:g["Material.006"],position:[-4.21,3.006,.388],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Carpet.geometry,material:g["Material.012"],position:[.613,.018,-.86],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube001.geometry,material:g["Material.007"],color:"red",position:[4.27,3.977,2.734],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube002.geometry,material:g["Material.008"],position:[4.27,3.03,2.734],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane001.geometry,material:g["Material.062"],position:[-2.61,2.261,-.21],rotation:[1.65,.293,-1.844]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube003.geometry,material:g["Material.003"],position:[-2.067,1.553,-.096],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder001.geometry,material:m.Cylinder001.material,position:[-.759,.762,2.662],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder002.geometry,material:m.Cylinder002.material,position:[-2.295,.762,-3.139],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder003.geometry,material:g["Material.004"],position:[-1.814,.762,2.941],rotation:[0,-1.312,0]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder004.geometry,material:m.Cylinder004.material,position:[-3.349,.762,-2.86],rotation:[0,-1.312,0]}),te("group",{position:[-1.601,2.052,1.791],rotation:[Math.PI/2,0,-2.398],scale:.026,children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.monitor_1.geometry,material:g.base_1}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.monitor_2.geometry,material:g.base_2}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.monitor_3.geometry,material:m.monitor_3.material}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.monitor_4.geometry,material:g.screen}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.monitor_5.geometry,material:g.frame})]}),te("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Chair.geometry,material:g.Chair,position:[-.489,1.243,-.482],rotation:[0,.834,0],scale:[.75,.152,.75],children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.BezierCurve001.geometry,material:g.Metal,position:[.175,-1.622,-.743],rotation:[0,1.544,0],scale:[.85,4.204,.85]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube069.geometry,material:g.Chair,position:[1.376,3.312,.001],scale:[.169,5.262,.914]}),te("group",{position:[.077,-7.365,0],scale:[.234,.752,.234],children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder000.geometry,material:g["Steel Black Polished"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder000_1.geometry,material:g["Steel White"]})]})]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube004.geometry,material:g["Material.060"],position:[-2.63,2.232,-.204],rotation:[1.607,.136,1.31],scale:[.75,.021,.685]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube005.geometry,material:g["Material.054"],position:[-2.209,1.709,-.33],rotation:[-Math.PI,1.312,-Math.PI],scale:[.049,.004,.042]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube006.geometry,material:g["Material.026"],position:[-2.511,1.681,-.235],rotation:[-Math.PI,1.312,0],scale:[-.025,-.016,-.017]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube007.geometry,material:g["Material.055"],position:[-1.979,1.69,-.384],rotation:[0,-1.312,0],scale:[.747,.021,.68]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plant_leafs_Plane030.geometry,material:g["Material.009"],position:[-3.935,1.517,-3.831],rotation:[Math.PI/2,0,1.312],scale:2.334}),te("group",{position:[-3.94,.386,-3.808],rotation:[Math.PI/2,0,1.312],scale:2.334,children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plant_jar_Cube001_1.geometry,material:g.jar}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plant_jar_Cube001_2.geometry,material:g.soil})]}),te("group",{position:[5.612,3.344,2.523],rotation:[Math.PI,-.252,3.02],scale:2.971,children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_1.geometry,material:g["Material.027"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_2.geometry,material:g["Material.028"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_3.geometry,material:g["Material.029"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_4.geometry,material:g["Material.011"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_5.geometry,material:g["Material.030"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_6.geometry,material:g["Material.031"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_7.geometry,material:g["Material.032"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_8.geometry,material:g["Material.033"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_9.geometry,material:g["Material.034"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_10.geometry,material:g["Material.035"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_11.geometry,material:g["Material.036"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_12.geometry,material:g["Material.037"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_13.geometry,material:g["Material.038"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_14.geometry,material:g["Material.039"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_15.geometry,material:g["Material.040"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_16.geometry,material:g["Material.041"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_17.geometry,material:g["Material.042"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_18.geometry,material:g["Material.043"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_19.geometry,material:g["Material.044"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_20.geometry,material:g["Material.045"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_21.geometry,material:g["Material.046"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_22.geometry,material:g["Material.047"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_23.geometry,material:g["Material.048"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_24.geometry,material:g["Material.049"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_25.geometry,material:g["Material.050"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_26.geometry,material:g["Material.051"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_27.geometry,material:g["Material.052"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Book0_28.geometry,material:g["Material.053"]})]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Sphere.geometry,material:g.Eye,position:[3.261,4.323,2.907],rotation:[Math.PI/2,0,2.935],scale:0}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube008.geometry,material:g.Body,position:[3.26,4.246,2.941],rotation:[Math.PI/2,0,2.935],scale:0}),te("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane.geometry,material:g.rubber,position:[4.708,4.118,2.352],rotation:[3.05,-.051,1.266],scale:[.17,.154,.154],children:[te("group",{position:[-.038,-1.981,.86],rotation:[-1.424,1.448,2.997],scale:[.948,.949,.739],children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle004_1.geometry,material:g["metal cp"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle004_2.geometry,material:g["rubber.002"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle004_3.geometry,material:g.sony})]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle005.geometry,material:g["metal cp"],position:[-.062,-1.119,1.264],rotation:[-1.424,1.448,2.997],scale:[.948,.949,.739]}),te("group",{position:[.037,-1.873,-.866],rotation:[-1.568,-1.494,-.015],scale:[.949,.949,.739],children:[C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle009.geometry,material:g["metal cp"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle009_1.geometry,material:g["rubber.002"]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle009_2.geometry,material:g.sony})]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Circle007.geometry,material:g["metal cp"],position:[.074,-1.163,-1.295],rotation:[-1.568,-1.494,-.015],scale:[.949,.949,.739]})]}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m["02LP"].geometry,material:g.lamp_base,position:[-3.126,2.724,-2.542],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m["03LP"].geometry,material:g.lamp_base,position:[-3.066,2.742,-2.497],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box009.geometry,material:g.lamp_base,position:[-3.398,2.222,-2.747],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box024.geometry,material:g.lamp_base,position:[-3.195,2.726,-2.593],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box055.geometry,material:g.lamp_base,position:[-3.279,1.741,-2.658],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box060.geometry,material:g.lamp_base,position:[-3.235,1.71,-2.624],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box061.geometry,material:g.lamp_base,position:[-3.413,2.301,-2.759],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box062.geometry,material:g.lamp_base,position:[-3.456,2.194,-2.791],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Box063.geometry,material:g.lamp_base,position:[-3.293,1.756,-2.668],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder001_1.geometry,material:g.lamp_base,position:[-3.233,1.632,-2.623],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder002_1.geometry,material:g.lamp_base,position:[-3.233,1.632,-2.623],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder003_1.geometry,material:g.lamp_base,position:[-3.271,1.686,-2.651],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder018.geometry,material:g.lamp_base,position:[-3.158,2.718,-2.545],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder037.geometry,material:g.lamp_base,position:[-3.281,2.449,-2.659],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder044.geometry,material:g.lamp_base,position:[-3.096,2.724,-2.582],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder056.geometry,material:g.lamp_base,position:[-3.09,2.78,-2.515],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder059.geometry,material:g.lamp_base,position:[-3.078,2.92,-2.505],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder060.geometry,material:g.lamp_base,position:[-3.023,2.822,-2.464],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder061.geometry,material:g.lamp_base,position:[-2.971,2.731,-2.424],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder069.geometry,material:g.base,position:[-3.429,2.283,-2.733],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder070.geometry,material:g.base,position:[-3.252,1.797,-2.609],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder071.geometry,material:g.lamp_base,position:[-3.138,2.718,-2.572],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder072.geometry,material:g.lamp_base,position:[-3.416,2.275,-2.762],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder073.geometry,material:g.lamp_base,position:[-3.328,1.963,-2.695],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder074.geometry,material:g.lamp_base,position:[-3.37,2.221,-2.786],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder075.geometry,material:g.plastik,position:[-3.08,2.747,-2.47],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder076.geometry,material:g.plastik,position:[-3.04,2.745,-2.52],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder077.geometry,material:g.base,position:[-3.392,2.283,-2.782],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cylinder079.geometry,material:g.base,position:[-3.225,1.797,-2.645],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,ref:t,geometry:m.Helix007.geometry,position:[-2.958,2.706,-2.414],rotation:[0,.923,0],scale:.03,children:C("meshStandardMaterial",{color:[5,2,1],toneMapped:!1})}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.LP01.geometry,material:g.lamp_base,position:[-3.416,2.276,-2.761],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.LP01_lowpart.geometry,material:g.lamp_base,position:[-3.256,1.737,-2.641],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.LP_01.geometry,material:g.base,position:[-3.056,2.88,-2.489],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane009.geometry,material:g.lamp_base,position:[-3.44,2.239,-2.759],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane011.geometry,material:g.base,position:[-3.306,2.444,-2.641],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane012.geometry,material:g.base,position:[-3.429,2.282,-2.734],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane013.geometry,material:g.lamp_base,position:[-3.421,2.239,-2.784],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane014.geometry,material:g.base,position:[-3.335,1.957,-2.673],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane015.geometry,material:g.base,position:[-3.252,1.797,-2.61],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane016.geometry,material:g.base,position:[-3.27,2.444,-2.688],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane017.geometry,material:g.base,position:[-3.393,2.282,-2.782],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane020.geometry,material:g.base,position:[-3.308,1.957,-2.708],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Plane021.geometry,material:g.base,position:[-3.225,1.797,-2.645],rotation:[0,.923,0],scale:.03}),C("mesh",{castShadow:!0,receiveShadow:!0,geometry:m.Cube.geometry,position:[.642,0,-.839],rotation:[0,1.045,0],children:C("portalMaterial",{ref:v})})]})})]})}fv.preload("./carlsOfficeAug21.gltf");function XJ(n){return C(bo,{children:te("mesh",{...n,children:[C("boxGeometry",{arg:[1,1,1,2,2,2]}),C("meshBasicMaterial",{wireframe:!0,color:"orange"})]})})}function KJ(){return N.useRef(),Ei(),te(bo,{children:[C("directionalLight",{position:[1,2,1],intensity:1.5}),C("ambientLight",{intensity:.75}),C(N.Suspense,{fallback:C(XJ,{"position-x":.8,scale:[.75,.75,.75]}),children:C($V,{global:!0,rotation:[0,3.5,0],polar:[-.01,.01],azimuth:[0,.2],config:{mass:1,tension:400},snap:{mass:1,tension:200},children:C(kW,{rotationIntensity:.4,floatingRange:.8,floatIntensity:.1,children:C(JJ,{})})})})]})}const QJ=vn.createContext({}),xI=!0;function YJ({baseColor:n,highlightColor:e,width:t,height:i,borderRadius:r,circle:s,direction:a,duration:o,enableAnimation:l=xI}){const u={};return a==="rtl"&&(u["--animation-direction"]="reverse"),typeof o=="number"&&(u["--animation-duration"]=`${o}s`),l||(u["--pseudo-element-display"]="none"),(typeof t=="string"||typeof t=="number")&&(u.width=t),(typeof i=="string"||typeof i=="number")&&(u.height=i),(typeof r=="string"||typeof r=="number")&&(u.borderRadius=r),s&&(u.borderRadius="50%"),typeof n<"u"&&(u["--base-color"]=n),typeof e<"u"&&(u["--highlight-color"]=e),u}function NT({count:n=1,wrapper:e,className:t,containerClassName:i,containerTestId:r,circle:s=!1,style:a,...o}){var l,u,d;const h=vn.useContext(QJ),p={...o};for(const[M,A]of Object.entries(o))typeof A>"u"&&delete p[M];const v={...h,...p,circle:s},m={...a,...YJ(v)};let g="react-loading-skeleton";t&&(g+=` ${t}`);const w=(l=v.inline)!==null&&l!==void 0?l:!1,x=[],S=Math.ceil(n);for(let M=0;M<S;M++){let A=m;if(S>n&&M===S-1){const R=(u=A.width)!==null&&u!==void 0?u:"100%",D=n%1,T=typeof R=="number"?R*D:`calc(${R} * ${D})`;A={...A,width:T}}const E=vn.createElement("span",{className:g,style:A,key:M},"");w?x.push(E):x.push(vn.createElement(vn.Fragment,{key:M},E,vn.createElement("br",null)))}return vn.createElement("span",{className:i,"data-testid":r,"aria-live":"polite","aria-busy":(d=v.enableAnimation)!==null&&d!==void 0?d:xI},e?x.map((M,A)=>vn.createElement(e,{key:A},M)):x)}function ZJ(n){N.useState("800px"),N.useState("600px");const[e,t]=N.useState(30),[i,r]=N.useState(1.2),[s,a]=N.useState(.5),[o,l]=N.useState(120),[u,d]=N.useState([4.2,.4,4.75]);N.useRef([window.innerWidth,window.innerHeight]);const h=N.useRef();return console.log(h),te("div",{className:"bg-background-light h-[500px]",children:[te("div",{className:"modelScene",children:[C($6,{shadows:!0,ref:h,camera:{fov:e,zoom:i,near:s,far:o,position:u},children:C(KJ,{})}),C(n9,{})]}),C("div",{className:"interface",children:C("div",{className:"xs:px-0 overflow-hidden grid grid-cols-12 min-h-[400px] ease-in-out duration-500  sm:px-10",children:te("div",{className:"xs:col-span-12 sm:col-span-12 sm:mt-14 lgsm:col-span-6 lg:col-span-5 lgsm:m-auto md:col-span-12 mdlg:mt-4 md:mt-10 xs:mt-10 xs:mx-5 grid-rows-2",children:[te("div",{className:"xs:px-4 row-span-1",children:[C("div",{className:"iphone:text-[42px] xs:px-4 xs:text-[42px] sm:text-[42px] md:text-[48px] mdlg:text-[48px] lgsm:text-[40px] lg:text-[46px] xl:text-[58px] font-extrabold tracking-wider text-jet sm:mt-1 md:mt-10",children:n.title}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1 animate-bganimate "})]}),C("div",{className:"row-span-1",children:C("div",{className:"xs: px-4 pt-5",children:n.desc})})]})})})]})}/**
 * @remix-run/router v1.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jt(){return Jt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Jt.apply(this,arguments)}var zn;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(zn||(zn={}));const FT="popstate";function qJ(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return yh("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Ol(r)}return eX(e,t,null,n)}function Rt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $J(){return Math.random().toString(36).substr(2,8)}function kT(n,e){return{usr:n.state,key:n.key,idx:e}}function yh(n,e,t,i){return t===void 0&&(t=null),Jt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Da(e):e,{state:t,key:e&&e.key||i||$J()})}function Ol(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Da(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function eX(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=zn.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(Jt({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=zn.Pop;let w=d(),x=w==null?null:w-u;u=w,l&&l({action:o,location:g.location,delta:x})}function p(w,x){o=zn.Push;let S=yh(g.location,w,x);t&&t(S,w),u=d()+1;let M=kT(S,u),A=g.createHref(S);try{a.pushState(M,"",A)}catch{r.location.assign(A)}s&&l&&l({action:o,location:g.location,delta:1})}function v(w,x){o=zn.Replace;let S=yh(g.location,w,x);t&&t(S,w),u=d();let M=kT(S,u),A=g.createHref(S);a.replaceState(M,"",A),s&&l&&l({action:o,location:g.location,delta:0})}function m(w){let x=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof w=="string"?w:Ol(w);return Rt(x,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,x)}let g={get action(){return o},get location(){return n(r,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(FT,h),l=w,()=>{r.removeEventListener(FT,h),l=null}},createHref(w){return e(r,w)},createURL:m,encodeLocation(w){let x=m(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:v,go(w){return a.go(w)}};return g}var Kn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Kn||(Kn={}));const tX=new Set(["lazy","caseSensitive","path","id","index","children"]);function nX(n){return n.index===!0}function wI(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let a=[...t,s],o=typeof r.id=="string"?r.id:a.join("-");if(Rt(r.index!==!0||!r.children,"Cannot specify children on an index route"),Rt(!i[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),nX(r)){let l=Jt({},r,e(r),{id:o});return i[o]=l,l}else{let l=Jt({},r,e(r),{id:o,children:void 0});return i[o]=l,r.children&&(l.children=wI(r.children,e,a,i)),l}})}function au(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Da(e):e,r=Zh(i.pathname||"/",t);if(r==null)return null;let s=SI(n);iX(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=dX(s[o],mX(r));return a}function SI(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Rt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=ya([i,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(Rt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),SI(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:uX(u,s.index),routesMeta:d})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of MI(s.path))r(s,a,l)}),e}function MI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=MI(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function iX(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fX(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const rX=/^:\w+$/,sX=3,aX=2,oX=1,lX=10,cX=-2,UT=n=>n==="*";function uX(n,e){let t=n.split("/"),i=t.length;return t.some(UT)&&(i+=cX),e&&(i+=aX),t.filter(r=>!UT(r)).reduce((r,s)=>r+(rX.test(s)?sX:s===""?oX:lX),i)}function fX(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function dX(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let a=0;a<t.length;++a){let o=t[a],l=a===t.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=hX({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!d)return null;Object.assign(i,d.params);let h=o.route;s.push({params:i,pathname:ya([r,d.pathname]),pathnameBase:xX(ya([r,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(r=ya([r,d.pathnameBase]))}return s}function hX(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=pX(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((u,d,h)=>{if(d==="*"){let p=o[h]||"";a=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}return u[d]=gX(o[h]||"",d),u},{}),pathname:s,pathnameBase:a,pattern:n}}function pX(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Gu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(i.push(o),"/([^\\/]+)"));return n.endsWith("*")?(i.push("*"),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function mX(n){try{return decodeURI(n)}catch(e){return Gu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function gX(n,e){try{return decodeURIComponent(n)}catch(t){return Gu(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function Zh(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function vX(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Da(n):n;return{pathname:t?t.startsWith("/")?t:yX(t,e):e,search:wX(i),hash:SX(r)}}function yX(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Yx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hv(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function x_(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Da(n):(r=Jt({},n),Rt(!r.pathname||!r.pathname.includes("?"),Yx("?","pathname","search",r)),Rt(!r.pathname||!r.pathname.includes("#"),Yx("#","pathname","hash",r)),Rt(!r.search||!r.search.includes("#"),Yx("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(i||a==null)o=t;else{let h=e.length-1;if(a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=vX(r,o),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ya=n=>n.join("/").replace(/\/\/+/g,"/"),xX=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wX=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SX=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class w_{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function _I(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const AI=["post","put","patch","delete"],MX=new Set(AI),_X=["get",...AI],AX=new Set(_X),bX=new Set([301,302,303,307,308]),CX=new Set([307,308]),Zx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},EX={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},OT={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TX=!CI,PX=n=>({hasErrorBoundary:!!n.hasErrorBoundary});function RX(n){Rt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let e;if(n.mapRouteProperties)e=n.mapRouteProperties;else if(n.detectErrorBoundary){let G=n.detectErrorBoundary;e=$=>({hasErrorBoundary:G($)})}else e=PX;let t={},i=wI(n.routes,e,void 0,t),r,s=n.basename||"/",a=Jt({v7_normalizeFormMethod:!1,v7_prependBasename:!1},n.future),o=null,l=new Set,u=null,d=null,h=null,p=n.hydrationData!=null,v=au(i,n.history.location,s),m=null;if(v==null){let G=ts(404,{pathname:n.history.location.pathname}),{matches:$,route:le}=JT(i);v=$,m={[le.id]:G}}let g=!v.some(G=>G.route.lazy)&&(!v.some(G=>G.route.loader)||n.hydrationData!=null),w,x={historyAction:n.history.action,location:n.history.location,matches:v,initialized:g,navigation:Zx,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||m,fetchers:new Map,blockers:new Map},S=zn.Pop,M=!1,A,E=!1,R=!1,D=[],T=[],B=new Map,L=0,H=-1,Z=new Map,W=new Set,K=new Map,ie=new Map,ue=new Map,pe=!1;function I(){return o=n.history.listen(G=>{let{action:$,location:le,delta:ye}=G;if(pe){pe=!1;return}Gu(ue.size===0||ye!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Me=fe({currentLocation:x.location,nextLocation:le,historyAction:$});if(Me&&ye!=null){pe=!0,n.history.go(ye*-1),F(Me,{state:"blocked",location:le,proceed(){F(Me,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),n.history.go(ye)},reset(){z(Me),V({blockers:new Map(w.state.blockers)})}});return}return be($,le)}),x.initialized||be(zn.Pop,x.location),w}function J(){o&&o(),l.clear(),A&&A.abort(),x.fetchers.forEach((G,$)=>Le($)),x.blockers.forEach((G,$)=>z($))}function j(G){return l.add(G),()=>l.delete(G)}function V(G){x=Jt({},x,G),l.forEach($=>$(x))}function Q(G,$){var le,ye;let Me=x.actionData!=null&&x.navigation.formMethod!=null&&oa(x.navigation.formMethod)&&x.navigation.state==="loading"&&((le=G.state)==null?void 0:le._isRedirect)!==!0,Ae;$.actionData?Object.keys($.actionData).length>0?Ae=$.actionData:Ae=null:Me?Ae=x.actionData:Ae=null;let ke=$.loaderData?jT(x.loaderData,$.loaderData,$.matches||[],$.errors):x.loaderData;for(let[Oe]of ue)z(Oe);let Ue=M===!0||x.navigation.formMethod!=null&&oa(x.navigation.formMethod)&&((ye=G.state)==null?void 0:ye._isRedirect)!==!0;r&&(i=r,r=void 0),V(Jt({},$,{actionData:Ae,loaderData:ke,historyAction:S,location:G,initialized:!0,navigation:Zx,revalidation:"idle",restoreScrollPosition:ct(G,$.matches||x.matches),preventScrollReset:Ue,blockers:new Map(x.blockers)})),E||S===zn.Pop||(S===zn.Push?n.history.push(G,G.state):S===zn.Replace&&n.history.replace(G,G.state)),S=zn.Pop,M=!1,E=!1,R=!1,D=[],T=[]}async function ge(G,$){if(typeof G=="number"){n.history.go(G);return}let le=Qw(x.location,x.matches,s,a.v7_prependBasename,G,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:ye,submission:Me,error:Ae}=zT(a.v7_normalizeFormMethod,!1,le,$),ke=x.location,Ue=yh(x.location,ye,$&&$.state);Ue=Jt({},Ue,n.history.encodeLocation(Ue));let Oe=$&&$.replace!=null?$.replace:void 0,X=zn.Push;Oe===!0?X=zn.Replace:Oe===!1||Me!=null&&oa(Me.formMethod)&&Me.formAction===x.location.pathname+x.location.search&&(X=zn.Replace);let ae=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,_e=fe({currentLocation:ke,nextLocation:Ue,historyAction:X});if(_e){F(_e,{state:"blocked",location:Ue,proceed(){F(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:Ue}),ge(G,$)},reset(){z(_e),V({blockers:new Map(x.blockers)})}});return}return await be(X,Ue,{submission:Me,pendingError:Ae,preventScrollReset:ae,replace:$&&$.replace})}function xe(){if(Be(),V({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){be(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}be(S||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation})}}async function be(G,$,le){A&&A.abort(),A=null,S=G,E=(le&&le.startUninterruptedRevalidation)===!0,He(x.location,x.matches),M=(le&&le.preventScrollReset)===!0;let ye=r||i,Me=le&&le.overrideNavigation,Ae=au(ye,$,s);if(!Ae){let Re=ts(404,{pathname:$.pathname}),{matches:ze,route:ft}=JT(ye);Ce(),Q($,{matches:ze,loaderData:{},errors:{[ft.id]:Re}});return}if(NX(x.location,$)&&!(le&&le.submission&&oa(le.submission.formMethod))){Q($,{matches:Ae});return}A=new AbortController;let ke=ad(n.history,$,A.signal,le&&le.submission),Ue,Oe;if(le&&le.pendingError)Oe={[ou(Ae).route.id]:le.pendingError};else if(le&&le.submission&&oa(le.submission.formMethod)){let Re=await ce(ke,$,le.submission,Ae,{replace:le.replace});if(Re.shortCircuited)return;Ue=Re.pendingActionData,Oe=Re.pendingActionError,Me=Jt({state:"loading",location:$},le.submission),ke=new Request(ke.url,{signal:ke.signal})}let{shortCircuited:X,loaderData:ae,errors:_e}=await Ye(ke,$,Ae,Me,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,Ue,Oe);X||(A=null,Q($,Jt({matches:Ae},Ue?{actionData:Ue}:{},{loaderData:ae,errors:_e})))}async function ce(G,$,le,ye,Me){Be();let Ae=Jt({state:"submitting",location:$},le);V({navigation:Ae});let ke,Ue=Yw(ye,$);if(!Ue.route.action&&!Ue.route.lazy)ke={type:Kn.error,error:ts(405,{method:G.method,pathname:$.pathname,routeId:Ue.route.id})};else if(ke=await sd("action",G,Ue,ye,t,e,s),G.signal.aborted)return{shortCircuited:!0};if(xu(ke)){let Oe;return Me&&Me.replace!=null?Oe=Me.replace:Oe=ke.location===x.location.pathname+x.location.search,await Se(x,ke,{submission:le,replace:Oe}),{shortCircuited:!0}}if(Bd(ke)){let Oe=ou(ye,Ue.route.id);return(Me&&Me.replace)!==!0&&(S=zn.Push),{pendingActionData:{},pendingActionError:{[Oe.route.id]:ke.error}}}if(Sl(ke))throw ts(400,{type:"defer-action"});return{pendingActionData:{[Ue.route.id]:ke.data}}}async function Ye(G,$,le,ye,Me,Ae,ke,Ue,Oe){let X=ye;X||(X=Jt({state:"loading",location:$,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Me));let ae=Me||Ae?Me||Ae:X.formMethod&&X.formAction&&X.formData&&X.formEncType?{formMethod:X.formMethod,formAction:X.formAction,formData:X.formData,formEncType:X.formEncType}:void 0,_e=r||i,[Re,ze]=HT(n.history,x,le,ae,$,R,D,T,K,_e,s,Ue,Oe);if(Ce(Zt=>!(le&&le.some(U=>U.route.id===Zt))||Re&&Re.some(U=>U.route.id===Zt)),Re.length===0&&ze.length===0){let Zt=nt();return Q($,Jt({matches:le,loaderData:{},errors:Oe||null},Ue?{actionData:Ue}:{},Zt?{fetchers:new Map(x.fetchers)}:{})),{shortCircuited:!0}}if(!E){ze.forEach(U=>{let re=x.fetchers.get(U.key),ve={state:"loading",data:re&&re.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};x.fetchers.set(U.key,ve)});let Zt=Ue||x.actionData;V(Jt({navigation:X},Zt?Object.keys(Zt).length===0?{actionData:null}:{actionData:Zt}:{},ze.length>0?{fetchers:new Map(x.fetchers)}:{}))}H=++L,ze.forEach(Zt=>{Zt.controller&&B.set(Zt.key,Zt.controller)});let ft=()=>ze.forEach(Zt=>ot(Zt.key));A&&A.signal.addEventListener("abort",ft);let{results:en,loaderResults:Mn,fetcherResults:Di}=await me(x.matches,le,Re,ze,G);if(G.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",ft),ze.forEach(Zt=>B.delete(Zt.key));let Et=XT(en);if(Et)return await Se(x,Et,{replace:ke}),{shortCircuited:!0};let{loaderData:fi,errors:ti}=WT(x,le,Re,Mn,Oe,ze,Di,ie);ie.forEach((Zt,U)=>{Zt.subscribe(re=>{(re||Zt.done)&&ie.delete(U)})});let Ba=nt(),Oo=Nt(H),Hs=Ba||Oo||ze.length>0;return Jt({loaderData:fi,errors:ti},Hs?{fetchers:new Map(x.fetchers)}:{})}function Je(G){return x.fetchers.get(G)||EX}function st(G,$,le,ye){if(TX)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");B.has(G)&&ot(G);let Me=r||i,Ae=Qw(x.location,x.matches,s,a.v7_prependBasename,le,$,ye==null?void 0:ye.relative),ke=au(Me,Ae,s);if(!ke){Xe(G,$,ts(404,{pathname:Ae}));return}let{path:Ue,submission:Oe}=zT(a.v7_normalizeFormMethod,!0,Ae,ye),X=Yw(ke,Ue);if(M=(ye&&ye.preventScrollReset)===!0,Oe&&oa(Oe.formMethod)){Fe(G,$,Ue,X,ke,Oe);return}K.set(G,{routeId:$,path:Ue}),at(G,$,Ue,X,ke,Oe)}async function Fe(G,$,le,ye,Me,Ae){if(Be(),K.delete(G),!ye.route.action&&!ye.route.lazy){let ee=ts(405,{method:Ae.formMethod,pathname:le,routeId:$});Xe(G,$,ee);return}let ke=x.fetchers.get(G),Ue=Jt({state:"submitting"},Ae,{data:ke&&ke.data," _hasFetcherDoneAnything ":!0});x.fetchers.set(G,Ue),V({fetchers:new Map(x.fetchers)});let Oe=new AbortController,X=ad(n.history,le,Oe.signal,Ae);B.set(G,Oe);let ae=await sd("action",X,ye,Me,t,e,s);if(X.signal.aborted){B.get(G)===Oe&&B.delete(G);return}if(xu(ae)){B.delete(G),W.add(G);let ee=Jt({state:"loading"},Ae,{data:void 0," _hasFetcherDoneAnything ":!0});return x.fetchers.set(G,ee),V({fetchers:new Map(x.fetchers)}),Se(x,ae,{submission:Ae,isFetchActionRedirect:!0})}if(Bd(ae)){Xe(G,$,ae.error);return}if(Sl(ae))throw ts(400,{type:"defer-action"});let _e=x.navigation.location||x.location,Re=ad(n.history,_e,Oe.signal),ze=r||i,ft=x.navigation.state!=="idle"?au(ze,x.navigation.location,s):x.matches;Rt(ft,"Didn't find any matches after fetcher action");let en=++L;Z.set(G,en);let Mn=Jt({state:"loading",data:ae.data},Ae,{" _hasFetcherDoneAnything ":!0});x.fetchers.set(G,Mn);let[Di,Et]=HT(n.history,x,ft,Ae,_e,R,D,T,K,ze,s,{[ye.route.id]:ae.data},void 0);Et.filter(ee=>ee.key!==G).forEach(ee=>{let we=ee.key,tt=x.fetchers.get(we),ut={state:"loading",data:tt&&tt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};x.fetchers.set(we,ut),ee.controller&&B.set(we,ee.controller)}),V({fetchers:new Map(x.fetchers)});let fi=()=>Et.forEach(ee=>ot(ee.key));Oe.signal.addEventListener("abort",fi);let{results:ti,loaderResults:Ba,fetcherResults:Oo}=await me(x.matches,ft,Di,Et,Re);if(Oe.signal.aborted)return;Oe.signal.removeEventListener("abort",fi),Z.delete(G),B.delete(G),Et.forEach(ee=>B.delete(ee.key));let Hs=XT(ti);if(Hs)return Se(x,Hs);let{loaderData:Zt,errors:U}=WT(x,x.matches,Di,Ba,void 0,Et,Oo,ie),re={state:"idle",data:ae.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};x.fetchers.set(G,re);let ve=Nt(en);x.navigation.state==="loading"&&en>H?(Rt(S,"Expected pending action"),A&&A.abort(),Q(x.navigation.location,{matches:ft,loaderData:Zt,errors:U,fetchers:new Map(x.fetchers)})):(V(Jt({errors:U,loaderData:jT(x.loaderData,Zt,ft,U)},ve?{fetchers:new Map(x.fetchers)}:{})),R=!1)}async function at(G,$,le,ye,Me,Ae){let ke=x.fetchers.get(G),Ue=Jt({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Ae,{data:ke&&ke.data," _hasFetcherDoneAnything ":!0});x.fetchers.set(G,Ue),V({fetchers:new Map(x.fetchers)});let Oe=new AbortController,X=ad(n.history,le,Oe.signal);B.set(G,Oe);let ae=await sd("loader",X,ye,Me,t,e,s);if(Sl(ae)&&(ae=await RI(ae,X.signal,!0)||ae),B.get(G)===Oe&&B.delete(G),X.signal.aborted)return;if(xu(ae)){W.add(G),await Se(x,ae);return}if(Bd(ae)){let Re=ou(x.matches,$);x.fetchers.delete(G),V({fetchers:new Map(x.fetchers),errors:{[Re.route.id]:ae.error}});return}Rt(!Sl(ae),"Unhandled fetcher deferred data");let _e={state:"idle",data:ae.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};x.fetchers.set(G,_e),V({fetchers:new Map(x.fetchers)})}async function Se(G,$,le){var ye;let{submission:Me,replace:Ae,isFetchActionRedirect:ke}=le===void 0?{}:le;$.revalidate&&(R=!0);let Ue=yh(G.location,$.location,Jt({_isRedirect:!0},ke?{_isFetchActionRedirect:!0}:{}));if(Rt(Ue,"Expected a location on the redirect navigation"),bI.test($.location)&&CI&&typeof((ye=window)==null?void 0:ye.location)<"u"){let ze=n.history.createURL($.location),ft=Zh(ze.pathname,s)==null;if(window.location.origin!==ze.origin||ft){Ae?window.location.replace($.location):window.location.assign($.location);return}}A=null;let Oe=Ae===!0?zn.Replace:zn.Push,{formMethod:X,formAction:ae,formEncType:_e,formData:Re}=G.navigation;!Me&&X&&ae&&Re&&_e&&(Me={formMethod:X,formAction:ae,formEncType:_e,formData:Re}),CX.has($.status)&&Me&&oa(Me.formMethod)?await be(Oe,Ue,{submission:Jt({},Me,{formAction:$.location}),preventScrollReset:M}):ke?await be(Oe,Ue,{overrideNavigation:{state:"loading",location:Ue,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:Me,preventScrollReset:M}):await be(Oe,Ue,{overrideNavigation:{state:"loading",location:Ue,formMethod:Me?Me.formMethod:void 0,formAction:Me?Me.formAction:void 0,formEncType:Me?Me.formEncType:void 0,formData:Me?Me.formData:void 0},preventScrollReset:M})}async function me(G,$,le,ye,Me){let Ae=await Promise.all([...le.map(Oe=>sd("loader",Me,Oe,$,t,e,s)),...ye.map(Oe=>Oe.matches&&Oe.match&&Oe.controller?sd("loader",ad(n.history,Oe.path,Oe.controller.signal),Oe.match,Oe.matches,t,e,s):{type:Kn.error,error:ts(404,{pathname:Oe.path})})]),ke=Ae.slice(0,le.length),Ue=Ae.slice(le.length);return await Promise.all([KT(G,le,ke,ke.map(()=>Me.signal),!1,x.loaderData),KT(G,ye.map(Oe=>Oe.match),Ue,ye.map(Oe=>Oe.controller?Oe.controller.signal:null),!0)]),{results:Ae,loaderResults:ke,fetcherResults:Ue}}function Be(){R=!0,D.push(...Ce()),K.forEach((G,$)=>{B.has($)&&(T.push($),ot($))})}function Xe(G,$,le){let ye=ou(x.matches,$);Le(G),V({errors:{[ye.route.id]:le},fetchers:new Map(x.fetchers)})}function Le(G){B.has(G)&&ot(G),K.delete(G),Z.delete(G),W.delete(G),x.fetchers.delete(G)}function ot(G){let $=B.get(G);Rt($,"Expected fetch controller: "+G),$.abort(),B.delete(G)}function it(G){for(let $ of G){let ye={state:"idle",data:Je($).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};x.fetchers.set($,ye)}}function nt(){let G=[],$=!1;for(let le of W){let ye=x.fetchers.get(le);Rt(ye,"Expected fetcher: "+le),ye.state==="loading"&&(W.delete(le),G.push(le),$=!0)}return it(G),$}function Nt(G){let $=[];for(let[le,ye]of Z)if(ye<G){let Me=x.fetchers.get(le);Rt(Me,"Expected fetcher: "+le),Me.state==="loading"&&(ot(le),Z.delete(le),$.push(le))}return it($),$.length>0}function Ot(G,$){let le=x.blockers.get(G)||OT;return ue.get(G)!==$&&ue.set(G,$),le}function z(G){x.blockers.delete(G),ue.delete(G)}function F(G,$){let le=x.blockers.get(G)||OT;Rt(le.state==="unblocked"&&$.state==="blocked"||le.state==="blocked"&&$.state==="blocked"||le.state==="blocked"&&$.state==="proceeding"||le.state==="blocked"&&$.state==="unblocked"||le.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+le.state+" -> "+$.state),x.blockers.set(G,$),V({blockers:new Map(x.blockers)})}function fe(G){let{currentLocation:$,nextLocation:le,historyAction:ye}=G;if(ue.size===0)return;ue.size>1&&Gu(!1,"A router only supports one blocker at a time");let Me=Array.from(ue.entries()),[Ae,ke]=Me[Me.length-1],Ue=x.blockers.get(Ae);if(!(Ue&&Ue.state==="proceeding")&&ke({currentLocation:$,nextLocation:le,historyAction:ye}))return Ae}function Ce(G){let $=[];return ie.forEach((le,ye)=>{(!G||G(ye))&&(le.cancel(),$.push(ye),ie.delete(ye))}),$}function De(G,$,le){if(u=G,h=$,d=le||(ye=>ye.key),!p&&x.navigation===Zx){p=!0;let ye=ct(x.location,x.matches);ye!=null&&V({restoreScrollPosition:ye})}return()=>{u=null,h=null,d=null}}function He(G,$){if(u&&d&&h){let le=$.map(Me=>QT(Me,x.loaderData)),ye=d(G,le)||G.key;u[ye]=h()}}function ct(G,$){if(u&&d&&h){let le=$.map(Ae=>QT(Ae,x.loaderData)),ye=d(G,le)||G.key,Me=u[ye];if(typeof Me=="number")return Me}return null}function Ve(G){r=G}return w={get basename(){return s},get state(){return x},get routes(){return i},initialize:I,subscribe:j,enableScrollRestoration:De,navigate:ge,fetch:st,revalidate:xe,createHref:G=>n.history.createHref(G),encodeLocation:G=>n.history.encodeLocation(G),getFetcher:Je,deleteFetcher:Le,dispose:J,getBlocker:Ot,deleteBlocker:z,_internalFetchControllers:B,_internalActiveDeferreds:ie,_internalSetRoutes:Ve},w}function DX(n){return n!=null&&"formData"in n}function Qw(n,e,t,i,r,s,a){let o,l;if(s!=null&&a!=="path"){o=[];for(let d of e)if(o.push(d),d.route.id===s){l=d;break}}else o=e,l=e[e.length-1];let u=x_(r||".",hv(o).map(d=>d.pathnameBase),n.pathname,a==="path");return r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&l&&l.route.index&&!S_(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ya([t,u.pathname])),Ol(u)}function zT(n,e,t,i){if(!i||!DX(i))return{path:t};if(i.formMethod&&!UX(i.formMethod))return{path:t,error:ts(405,{method:i.formMethod})};let r;if(i.formData){let o=i.formMethod||"get";if(r={formMethod:n?o.toUpperCase():o.toLowerCase(),formAction:PI(t),formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:i.formData},oa(r.formMethod))return{path:t,submission:r}}let s=Da(t),a=TI(i.formData);return e&&s.search&&S_(s.search)&&a.append("index",""),s.search="?"+a,{path:Ol(s),submission:r}}function BX(n,e){let t=n;if(e){let i=n.findIndex(r=>r.route.id===e);i>=0&&(t=n.slice(0,i))}return t}function HT(n,e,t,i,r,s,a,o,l,u,d,h,p){let v=p?Object.values(p)[0]:h?Object.values(h)[0]:void 0,m=n.createURL(e.location),g=n.createURL(r),w=p?Object.keys(p)[0]:void 0,S=BX(t,w).filter((A,E)=>{if(A.route.lazy)return!0;if(A.route.loader==null)return!1;if(IX(e.loaderData,e.matches[E],A)||a.some(T=>T===A.route.id))return!0;let R=e.matches[E],D=A;return GT(A,Jt({currentUrl:m,currentParams:R.params,nextUrl:g,nextParams:D.params},i,{actionResult:v,defaultShouldRevalidate:s||m.toString()===g.toString()||m.search!==g.search||EI(R,D)}))}),M=[];return l.forEach((A,E)=>{if(!t.some(B=>B.route.id===A.routeId))return;let R=au(u,A.path,d);if(!R){M.push({key:E,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let D=Yw(R,A.path);if(o.includes(E)){M.push({key:E,routeId:A.routeId,path:A.path,matches:R,match:D,controller:new AbortController});return}GT(D,Jt({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:t[t.length-1].params},i,{actionResult:v,defaultShouldRevalidate:s}))&&M.push({key:E,routeId:A.routeId,path:A.path,matches:R,match:D,controller:new AbortController})}),[S,M]}function IX(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function EI(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function GT(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function VT(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];Rt(r,"No route found in manifest");let s={};for(let a in i){let l=r[a]!==void 0&&a!=="hasErrorBoundary";Gu(!l,'Route "'+r.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!tX.has(a)&&(s[a]=i[a])}Object.assign(r,s),Object.assign(r,Jt({},e(r),{lazy:void 0}))}async function sd(n,e,t,i,r,s,a,o,l,u){o===void 0&&(o=!1),l===void 0&&(l=!1);let d,h,p,v=w=>{let x,S=new Promise((M,A)=>x=A);return p=()=>x(),e.signal.addEventListener("abort",p),Promise.race([w({request:e,params:t.params,context:u}),S])};try{let w=t.route[n];if(t.route.lazy)if(w)h=(await Promise.all([v(w),VT(t.route,s,r)]))[0];else if(await VT(t.route,s,r),w=t.route[n],w)h=await v(w);else if(n==="action"){let x=new URL(e.url),S=x.pathname+x.search;throw ts(405,{method:e.method,pathname:S,routeId:t.route.id})}else return{type:Kn.data,data:void 0};else if(w)h=await v(w);else{let x=new URL(e.url),S=x.pathname+x.search;throw ts(404,{pathname:S})}Rt(h!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(w){d=Kn.error,h=w}finally{p&&e.signal.removeEventListener("abort",p)}if(kX(h)){let w=h.status;if(bX.has(w)){let M=h.headers.get("Location");if(Rt(M,"Redirects returned/thrown from loaders/actions must have a Location header"),!bI.test(M))M=Qw(new URL(e.url),i.slice(0,i.indexOf(t)+1),a,!0,M);else if(!o){let A=new URL(e.url),E=M.startsWith("//")?new URL(A.protocol+M):new URL(M),R=Zh(E.pathname,a)!=null;E.origin===A.origin&&R&&(M=E.pathname+E.search+E.hash)}if(o)throw h.headers.set("Location",M),h;return{type:Kn.redirect,status:w,location:M,revalidate:h.headers.get("X-Remix-Revalidate")!==null}}if(l)throw{type:d||Kn.data,response:h};let x,S=h.headers.get("Content-Type");return S&&/\bapplication\/json\b/.test(S)?x=await h.json():x=await h.text(),d===Kn.error?{type:d,error:new w_(w,h.statusText,x),headers:h.headers}:{type:Kn.data,data:x,statusCode:h.status,headers:h.headers}}if(d===Kn.error)return{type:d,error:h};if(FX(h)){var m,g;return{type:Kn.deferred,deferredData:h,statusCode:(m=h.init)==null?void 0:m.status,headers:((g=h.init)==null?void 0:g.headers)&&new Headers(h.init.headers)}}return{type:Kn.data,data:h}}function ad(n,e,t,i){let r=n.createURL(PI(e)).toString(),s={signal:t};if(i&&oa(i.formMethod)){let{formMethod:a,formEncType:o,formData:l}=i;s.method=a.toUpperCase(),s.body=o==="application/x-www-form-urlencoded"?TI(l):l}return new Request(r,s)}function TI(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,i instanceof File?i.name:i);return e}function LX(n,e,t,i,r){let s={},a=null,o,l=!1,u={};return t.forEach((d,h)=>{let p=e[h].route.id;if(Rt(!xu(d),"Cannot handle redirect results in processLoaderData"),Bd(d)){let v=ou(n,p),m=d.error;i&&(m=Object.values(i)[0],i=void 0),a=a||{},a[v.route.id]==null&&(a[v.route.id]=m),s[p]=void 0,l||(l=!0,o=_I(d.error)?d.error.status:500),d.headers&&(u[p]=d.headers)}else Sl(d)?(r.set(p,d.deferredData),s[p]=d.deferredData.data):s[p]=d.data,d.statusCode!=null&&d.statusCode!==200&&!l&&(o=d.statusCode),d.headers&&(u[p]=d.headers)}),i&&(a=i,s[Object.keys(i)[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:u}}function WT(n,e,t,i,r,s,a,o){let{loaderData:l,errors:u}=LX(e,t,i,r,o);for(let d=0;d<s.length;d++){let{key:h,match:p,controller:v}=s[d];Rt(a!==void 0&&a[d]!==void 0,"Did not find corresponding fetcher result");let m=a[d];if(!(v&&v.signal.aborted))if(Bd(m)){let g=ou(n.matches,p==null?void 0:p.route.id);u&&u[g.route.id]||(u=Jt({},u,{[g.route.id]:m.error})),n.fetchers.delete(h)}else if(xu(m))Rt(!1,"Unhandled fetcher revalidation redirect");else if(Sl(m))Rt(!1,"Unhandled fetcher deferred data");else{let g={state:"idle",data:m.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};n.fetchers.set(h,g)}}return{loaderData:l,errors:u}}function jT(n,e,t,i){let r=Jt({},e);for(let s of t){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(r[a]=e[a]):n[a]!==void 0&&s.route.loader&&(r[a]=n[a]),i&&i.hasOwnProperty(a))break}return r}function ou(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function JT(n){let e=n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ts(n,e){let{pathname:t,routeId:i,method:r,type:s}=e===void 0?{}:e,a="Unknown Server Error",o="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&t&&i?o="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"&&(o="defer() is not supported in actions")):n===403?(a="Forbidden",o='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",o='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?o="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(o='Invalid request method "'+r.toUpperCase()+'"')),new w_(n||500,a,new Error(o),!0)}function XT(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(xu(t))return t}}function PI(n){let e=typeof n=="string"?Da(n):n;return Ol(Jt({},e,{hash:""}))}function NX(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash!==e.hash}function Sl(n){return n.type===Kn.deferred}function Bd(n){return n.type===Kn.error}function xu(n){return(n&&n.type)===Kn.redirect}function FX(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function kX(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function UX(n){return AX.has(n.toLowerCase())}function oa(n){return MX.has(n.toLowerCase())}async function KT(n,e,t,i,r,s){for(let a=0;a<t.length;a++){let o=t[a],l=e[a];if(!l)continue;let u=n.find(h=>h.route.id===l.route.id),d=u!=null&&!EI(u,l)&&(s&&s[l.route.id])!==void 0;if(Sl(o)&&(r||d)){let h=i[a];Rt(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await RI(o,h,r).then(p=>{p&&(t[a]=p||t[a])})}}}async function RI(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Kn.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Kn.error,error:r}}return{type:Kn.data,data:n.deferredData.data}}}function S_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function QT(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function Yw(n,e){let t=typeof e=="string"?Da(e).search:e.search;if(n[n.length-1].route.index&&S_(t||""))return n[n.length-1];let i=hv(n);return i[i.length-1]}/**
 * React Router v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function y0(){return y0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},y0.apply(this,arguments)}const pv=N.createContext(null),M_=N.createContext(null),Yl=N.createContext(null),mv=N.createContext(null),Zl=N.createContext({outlet:null,matches:[]}),DI=N.createContext(null);function OX(n,e){let{relative:t}=e===void 0?{}:e;qh()||Rt(!1);let{basename:i,navigator:r}=N.useContext(Yl),{hash:s,pathname:a,search:o}=__(n,{relative:t}),l=a;return i!=="/"&&(l=a==="/"?i:ya([i,a])),r.createHref({pathname:l,search:o,hash:s})}function qh(){return N.useContext(mv)!=null}function ql(){return qh()||Rt(!1),N.useContext(mv).location}function BI(n){N.useContext(Yl).static||N.useLayoutEffect(n)}function zX(){return N.useContext(pv)!=null?$X():HX()}function HX(){qh()||Rt(!1);let{basename:n,navigator:e}=N.useContext(Yl),{matches:t}=N.useContext(Zl),{pathname:i}=ql(),r=JSON.stringify(hv(t).map(o=>o.pathnameBase)),s=N.useRef(!1);return BI(()=>{s.current=!0}),N.useCallback(function(o,l){if(l===void 0&&(l={}),!s.current)return;if(typeof o=="number"){e.go(o);return}let u=x_(o,JSON.parse(r),i,l.relative==="path");n!=="/"&&(u.pathname=u.pathname==="/"?n:ya([n,u.pathname])),(l.replace?e.replace:e.push)(u,l.state,l)},[n,e,r,i])}const GX=N.createContext(null);function VX(n){let e=N.useContext(Zl).outlet;return e&&N.createElement(GX.Provider,{value:n},e)}function __(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=N.useContext(Zl),{pathname:r}=ql(),s=JSON.stringify(hv(i).map(a=>a.pathnameBase));return N.useMemo(()=>x_(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}function WX(n,e,t){qh()||Rt(!1);let{navigator:i}=N.useContext(Yl),{matches:r}=N.useContext(Zl),s=r[r.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let l=ql(),u;if(e){var d;let g=typeof e=="string"?Da(e):e;o==="/"||(d=g.pathname)!=null&&d.startsWith(o)||Rt(!1),u=g}else u=l;let h=u.pathname||"/",p=o==="/"?h:h.slice(o.length)||"/",v=au(n,{pathname:p}),m=QX(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:ya([o,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?o:ya([o,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),r,t);return e&&m?N.createElement(mv.Provider,{value:{location:y0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:zn.Pop}},m):m}function jX(){let n=LI(),e=_I(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:r},t):null,s)}const JX=N.createElement(jX,null);class XX extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?N.createElement(Zl.Provider,{value:this.props.routeContext},N.createElement(DI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KX(n){let{routeContext:e,match:t,children:i}=n,r=N.useContext(pv);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Zl.Provider,{value:e},i)}function QX(n,e,t){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n==null){var r;if((r=t)!=null&&r.errors)n=t.matches;else return null}let s=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let o=s.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id]));o>=0||Rt(!1),s=s.slice(0,Math.min(s.length,o+1))}return s.reduceRight((o,l,u)=>{let d=l.route.id?a==null?void 0:a[l.route.id]:null,h=null;t&&(h=l.route.errorElement||JX);let p=e.concat(s.slice(0,u+1)),v=()=>{let m;return d?m=h:l.route.element?m=l.route.element:m=o,N.createElement(KX,{match:l,routeContext:{outlet:o,matches:p},children:m})};return t&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?N.createElement(XX,{location:t.location,revalidation:t.revalidation,component:h,error:d,children:v(),routeContext:{outlet:null,matches:p}}):v()},null)}var Zw;(function(n){n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate"})(Zw||(Zw={}));var xh;(function(n){n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId"})(xh||(xh={}));function YX(n){let e=N.useContext(pv);return e||Rt(!1),e}function ZX(n){let e=N.useContext(M_);return e||Rt(!1),e}function qX(n){let e=N.useContext(Zl);return e||Rt(!1),e}function II(n){let e=qX(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function LI(){var n;let e=N.useContext(DI),t=ZX(xh.UseRouteError),i=II(xh.UseRouteError);return e||((n=t.errors)==null?void 0:n[i])}function $X(){let{router:n}=YX(Zw.UseNavigateStable),e=II(xh.UseNavigateStable),t=N.useRef(!1);return BI(()=>{t.current=!0}),N.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,y0({fromRouteId:e},s)))},[n,e])}function eK(n){let{fallbackElement:e,router:t}=n,[i,r]=N.useState(t.state);N.useLayoutEffect(()=>t.subscribe(r),[t,r]);let s=N.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:l=>t.navigate(l),push:(l,u,d)=>t.navigate(l,{state:u,preventScrollReset:d==null?void 0:d.preventScrollReset}),replace:(l,u,d)=>t.navigate(l,{replace:!0,state:u,preventScrollReset:d==null?void 0:d.preventScrollReset})}),[t]),a=t.basename||"/",o=N.useMemo(()=>({router:t,navigator:s,static:!1,basename:a}),[t,s,a]);return N.createElement(N.Fragment,null,N.createElement(pv.Provider,{value:o},N.createElement(M_.Provider,{value:i},N.createElement(iK,{basename:t.basename,location:t.state.location,navigationType:t.state.historyAction,navigator:s},t.state.initialized?N.createElement(tK,{routes:t.routes,state:i}):e))),null)}function tK(n){let{routes:e,state:t}=n;return WX(e,void 0,t)}function nK(n){return VX(n.context)}function iK(n){let{basename:e="/",children:t=null,location:i,navigationType:r=zn.Pop,navigator:s,static:a=!1}=n;qh()&&Rt(!1);let o=e.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof i=="string"&&(i=Da(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:v="default"}=i,m=N.useMemo(()=>{let g=Zh(u,o);return g==null?null:{location:{pathname:g,search:d,hash:h,state:p,key:v},navigationType:r}},[o,u,d,h,p,v,r]);return m==null?null:N.createElement(Yl.Provider,{value:l},N.createElement(mv.Provider,{children:t,value:m}))}var YT;(function(n){n[n.pending=0]="pending",n[n.success=1]="success",n[n.error=2]="error"})(YT||(YT={}));new Promise(()=>{});function rK(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:N.createElement(n.Component),Component:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:N.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vu.apply(this,arguments)}function NI(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function sK(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aK(n,e){return n.button===0&&(!e||e==="_self")&&!sK(n)}const oK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],lK=["aria-current","caseSensitive","className","end","style","to","children"];function cK(n,e){return RX({basename:e==null?void 0:e.basename,future:Vu({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:qJ({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||uK(),routes:n,mapRouteProperties:rK}).initialize()}function uK(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Vu({},e,{errors:fK(e.errors)})),e}function fK(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new w_(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){let s=new Error(r.message);s.stack="",t[i]=s}else t[i]=r;return t}const dK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FI=N.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:d}=e,h=NI(e,oK),{basename:p}=N.useContext(Yl),v,m=!1;if(typeof u=="string"&&hK.test(u)&&(v=u,dK))try{let S=new URL(window.location.href),M=u.startsWith("//")?new URL(S.protocol+u):new URL(u),A=Zh(M.pathname,p);M.origin===S.origin&&A!=null?u=A+M.search+M.hash:m=!0}catch{}let g=OX(u,{relative:r}),w=pK(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:r});function x(S){i&&i(S),S.defaultPrevented||w(S)}return N.createElement("a",Vu({},h,{href:v||g,onClick:m||s?i:x,ref:t,target:l}))}),Za=N.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:a=!1,style:o,to:l,children:u}=e,d=NI(e,lK),h=__(l,{relative:d.relative}),p=ql(),v=N.useContext(M_),{navigator:m}=N.useContext(Yl),g=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,w=p.pathname,x=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(w=w.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase());let S=w===g||!a&&w.startsWith(g)&&w.charAt(g.length)==="/",M=x!=null&&(x===g||!a&&x.startsWith(g)&&x.charAt(g.length)==="/"),A=S?i:void 0,E;typeof s=="function"?E=s({isActive:S,isPending:M}):E=[s,S?"active":null,M?"pending":null].filter(Boolean).join(" ");let R=typeof o=="function"?o({isActive:S,isPending:M}):o;return N.createElement(FI,Vu({},d,{"aria-current":A,className:E,ref:t,style:R,to:l}),typeof u=="function"?u({isActive:S,isPending:M}):u)});var ZT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmitImpl="useSubmitImpl",n.UseFetcher="useFetcher"})(ZT||(ZT={}));var qT;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(qT||(qT={}));function pK(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:a}=e===void 0?{}:e,o=zX(),l=ql(),u=__(n,{relative:a});return N.useCallback(d=>{if(aK(d,t)){d.preventDefault();let h=i!==void 0?i:Ol(l)===Ol(u);o(n,{replace:h,state:r,preventScrollReset:s,relative:a})}},[l,o,u,i,r,t,n,s,a])}function qx(n){const[e,t]=N.useState(!0);return N.useEffect(()=>{setTimeout(()=>{t(!1)},1e3)},[]),C("div",{className:"w-[300px] bg-[#f4f4f4] rounded-lg border-solid border-jet-light border-2",children:C("div",{className:"grid",children:e?te("div",{className:"bg-white",children:[C(NT,{height:218}),C(NT,{count:4})]}):te("div",{children:[C("div",{className:"grid",children:C("img",{src:n.featuredImg})}),te("div",{className:"p-5",children:[C("div",{className:"text-lg font-extra-bold",children:n.projName}),C("div",{className:"text-sm",children:n.projDesc})]}),C("div",{className:"text-center p-5",children:C(FI,{to:n.buttonLink,children:C("div",{className:`button border-solid border-jet-light border-2 p-4 text-sm text-white
                        font-semibold rounded-lg bg-[#28262d] hover:bg-opacity-80 hover:shadow-sm duration-300`,children:n.buttonCTA})})})]})})})}function kI(n){return te("div",{className:"m-auto grid grid-cols-3 mt-16 mb-28",children:[te("div",{className:"m-auto col-start-2",children:[C("h2",{className:"text-center font-bold text-3xl text-jet tracking-in-expand",children:n.title||C(Skeleton,{})}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"col-span-3 m-auto",children:te("div",{className:"grid grid-cols-auto :grid-cols-1 mdlg:grid-cols-3 gap-6 items-center mt-10",children:[C("div",{className:n.cardMargin,children:C(qx,{featuredImg:"/AgentXploreFeatureImage.png",projName:"Agentxplore",projDesc:"A design case study for an insurance agent search tool that allows users to find professionals that match their specific needs.",buttonCTA:"View AgentXplore Study",buttonLink:"/portfolio/agentxplore"})}),C("div",{children:C(qx,{featuredImg:"/FinaryFeatureImage.png",projName:"Finary",projDesc:"A design case study for an financial advisor CRM to track clients progress and analyze their needs and goals.",buttonCTA:"View Finary Study",buttonLink:"/portfolio/finary"})}),C("div",{className:n.cardMargin,children:C(qx,{featuredImg:"/iptiqEappFeatureImage.png",projName:"IptiQ E-App",projDesc:"A case study for an insurance agent electronic application tool that allows users to input and apply for insurance products.",buttonCTA:"View iptiQ Study",buttonLink:"/portfolio/iptiq"})})]})})]})}var UI={};function mK(n){if(!n||typeof window>"u")return;const e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}Object.defineProperty(UI,"__esModule",{value:!0});var In=N;function gK(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var qa=gK(In);mK(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const vK=In.forwardRef(function({style:e={},className:t="",autoFill:i=!1,play:r=!0,pauseOnHover:s=!1,pauseOnClick:a=!1,direction:o="left",speed:l=50,delay:u=0,loop:d=0,gradient:h=!1,gradientColor:p=[255,255,255],gradientWidth:v=200,onFinish:m,onCycleComplete:g,children:w},x){const[S,M]=In.useState(0),[A,E]=In.useState(0),[R,D]=In.useState(1),[T,B]=In.useState(!1),L=In.useRef(null),H=x||L,Z=In.useRef(null),W=In.useCallback(()=>{if(Z.current&&H.current){const V=H.current.getBoundingClientRect(),Q=Z.current.getBoundingClientRect();let ge=V.width,xe=Q.width;(o==="up"||o==="down")&&(ge=V.height,xe=Q.height),D(i&&ge&&xe&&xe<ge?Math.ceil(ge/xe):1),M(ge),E(xe)}},[i,H,o]);In.useEffect(()=>{if(T&&(W(),Z.current&&H.current)){const V=new ResizeObserver(()=>W());return V.observe(H.current),V.observe(Z.current),()=>{V&&V.disconnect()}}},[W,H,T]),In.useEffect(()=>{W()},[W,w]),In.useEffect(()=>{B(!0)},[]);const K=In.useMemo(()=>i?A*R/l:A<S?S/l:A/l,[i,S,A,R,l]),ie=`rgba(${p[0]}, ${p[1]}, ${p[2]}`,ue=In.useMemo(()=>Object.assign(Object.assign({},e),{["--pause-on-hover"]:!r||s?"paused":"running",["--pause-on-click"]:!r||s&&!a||a?"paused":"running",["--width"]:o==="up"||o==="down"?"100vh":"100%",["--transform"]:o==="up"?"rotate(-90deg)":o==="down"?"rotate(90deg)":"none"}),[e,r,s,a,o]),pe=In.useMemo(()=>({["--gradient-color"]:`${ie}, 1), ${ie}, 0)`,["--gradient-width"]:typeof v=="number"?`${v}px`:v}),[ie,v]),I=In.useMemo(()=>({["--play"]:r?"running":"paused",["--direction"]:o==="left"?"normal":"reverse",["--duration"]:`${K}s`,["--delay"]:`${u}s`,["--iteration-count"]:d?`${d}`:"infinite",["--min-width"]:i?"auto":"100%"}),[r,o,K,u,d,i]),J=In.useMemo(()=>({["--transform"]:o==="up"?"rotate(90deg)":o==="down"?"rotate(-90deg)":"none"}),[o]),j=In.useCallback(V=>[...Array(Number.isFinite(V)&&V>=0?V:0)].map((Q,ge)=>qa.default.createElement(In.Fragment,{key:ge},In.Children.map(w,xe=>qa.default.createElement("div",{style:J,className:"child"},xe)))),[J,w]);return T?qa.default.createElement("div",{ref:H,style:ue,className:"marquee-container "+t},h&&qa.default.createElement("div",{style:pe,className:"overlay"}),qa.default.createElement("div",{className:"marquee",style:I,onAnimationIteration:g,onAnimationEnd:m},qa.default.createElement("div",{className:"initial-child-container",ref:Z},In.Children.map(w,V=>qa.default.createElement("div",{style:J,className:"child"},V))),j(R-1)),qa.default.createElement("div",{className:"marquee",style:I},j(R))):null});var yK=UI.default=vK,OI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$T=vn.createContext&&vn.createContext(OI),Ao=globalThis&&globalThis.__assign||function(){return Ao=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ao.apply(this,arguments)},xK=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function zI(n){return n&&n.map(function(e,t){return vn.createElement(e.tag,Ao({key:t},e.attr),zI(e.child))})}function Wr(n){return function(e){return vn.createElement(wK,Ao({attr:Ao({},n.attr)},e),zI(n.child))}}function wK(n){var e=function(t){var i=n.attr,r=n.size,s=n.title,a=xK(n,["attr","size","title"]),o=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),vn.createElement("svg",Ao({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:l,style:Ao(Ao({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&vn.createElement("title",null,s),n.children)};return $T!==void 0?vn.createElement($T.Consumer,null,function(t){return e(t)}):e(OI)}function or(n){return Wr({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:"currentColor"}}]})(n)}function SK(){const n={padding:"0 2rem",fontSize:"1rem",color:"white"};return C("div",{className:"bg-jet w-full -rotate-1 mb-3",children:te(yK,{className:"p-8",pauseOnHover:"true",speed:"30",children:[C("div",{style:n,children:"Product Design"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"Javascript"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"Figma"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"ThreeJS"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"User Research"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"Design Thinking"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"ReactJS"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"CSS"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"UX/UI Design"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"Data Visualization"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"VueJS"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})}),C("div",{style:n,children:"Angular"}),C("div",{children:C(or,{size:14,className:"m-1",color:"white"})})]})})}function cg(){return te(bo,{children:[C(ZJ,{title:"Carl G.W. Smith",desc:`Im Carl, a senior product designer and creative developer.
I design and implement thoughtful and easy to use experiences for companies with complex problems.`}),C(SK,{}),C(kI,{cardMargin:"mt-16 iphone:mt-0 xs:mt-0",title:"Featured Work"})]})}function A_(n){return C(bo,{children:te("div",{className:"grid grid-cols-12 min-h-[400px] ease-in-out duration-500 bg-background-light xs:px-10 sm:px-10 md:px-40",children:[te("div",{className:"xs: col-span-12 sm:col-span-6 m-auto grid-rows-2",children:[te("div",{className:"row-span-1",children:[C("div",{className:"iphone:text-2xl xs: mt-10 xs: text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-wider text-jet sm:mt-0",children:n.title}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1 animate-bganimate "})]}),C("div",{className:"row-span-1",children:C("div",{className:"pt-5",children:n.desc})})]}),C("div",{className:"xs: col-span-12 sm:col-span-6 text-center m-auto",children:n.image?C("img",{src:n.rightSide}):n.rightSide})]})})}const MK="/assets/finary-hero-b53fc124.png";function b_(n){return te("div",{className:"sm:text-base md:text-base lg:text-base grid grid-cols-3 text-center text-jet m-auto justify-center my-6 xs:my-4 xs:text-xs/5 xs:px-10 sm:px-10 md:px-40 py-10",children:[te("div",{className:"sm:p-1 p-4 justify-center justify-self-center my-auto",children:[C("p",{className:"font-bold",children:"Year:"}),n.year]}),te("div",{className:"sm:p-1 p-4 justify-center justify-self-center my-auto",children:[C("p",{className:"font-bold",children:"Role:"}),n.role]}),te("div",{className:"sm:p-1 p-4 justify-center justify-self-center my-auto",children:[C("p",{className:"font-bold",children:"Duration:"}),n.duration]})]})}function _K(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 20h6v2H9zm7.906-6.288C17.936 12.506 19 11.259 19 9c0-3.859-3.141-7-7-7S5 5.141 5 9c0 2.285 1.067 3.528 2.101 4.73.358.418.729.851 1.084 1.349.144.206.38.996.591 1.921H8v2h8v-2h-.774c.213-.927.45-1.719.593-1.925.352-.503.726-.94 1.087-1.363zm-2.724.213c-.434.617-.796 2.075-1.006 3.075h-2.351c-.209-1.002-.572-2.463-1.011-3.08a20.502 20.502 0 0 0-1.196-1.492C7.644 11.294 7 10.544 7 9c0-2.757 2.243-5 5-5s5 2.243 5 5c0 1.521-.643 2.274-1.615 3.413-.373.438-.796.933-1.203 1.512z"}}]})(n)}function Ui(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"}}]})(n)}function AK(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m7.375 16.781 1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 0 0 0 1.562l5 4zm9.25-9.562-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 0 0 0-1.562l-5-4zm-1.649-4.003-4 18-1.953-.434 4-18z"}}]})(n)}function bK(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 6h-5v2h4v9H4V8h5v3l5-4-5-4v3H3a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"}}]})(n)}function CK(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"}},{tag:"path",attr:{d:"M11.412 8.586c.379.38.588.882.588 1.414h2a3.977 3.977 0 0 0-1.174-2.828c-1.514-1.512-4.139-1.512-5.652 0l1.412 1.416c.76-.758 2.07-.756 2.826-.002z"}}]})(n)}function EK(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.277 8c.347.596.985 1 1.723 1a2 2 0 0 0 0-4c-.738 0-1.376.404-1.723 1H16V4a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H5.723C5.376 5.404 4.738 5 4 5a2 2 0 0 0 0 4c.738 0 1.376-.404 1.723-1H8v.369C5.133 9.84 4.318 12.534 4.091 14H3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-.877c.197-.959.718-2.406 2.085-3.418A.984.984 0 0 0 9 11h6a.98.98 0 0 0 .792-.419c1.373 1.013 1.895 2.458 2.089 3.419H17a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-1.092c-.227-1.466-1.042-4.161-3.908-5.632V8h2.277zM6 18H4v-2h2v2zm14 0h-2v-2h2v2zm-6-9h-4V5h4v4z"}}]})(n)}function TK(){return te("div",{className:"grid grid-cols-6 text-jet bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 gap-10",children:[te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Objectives & Goals"}),te("ol",{className:"list-decimal mt-4 ml-10 text-sm",children:[C("li",{className:"mb-4",children:"Improve customer service by providing financial advisors with a centralized system for managing customer interactions, storing customer data, and tracking customer satisfaction."}),C("li",{className:"mb-4",children:"Customer relationship management. The tool should allow financial advisors to store customer data, track customer interactions, and manage customer relationships."}),C("li",{className:"mb-4",children:"Reporting. The tool should allow financial advisors to track and measure their progress, and to gain insights into their business."}),C("li",{className:"mb-4",children:"Lead management. The tool should allow financial advisors to track leads, nurture them, and close deals."})]})]}),te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Business Challenges"}),te("ul",{className:"xs:ml-0 md:ml-20 mt-4 text-md font-medium",children:[te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Attracting & Retaining Clients"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Managing Risk"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Regulatory Compliance"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Complex Data Structures"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Keeping up with Industry Changes"]})]})]})]})}function C_(){const n="border-solid border-2 border-jet rounded-full p-3 w-fit drop-shadow-md bg-white m-auto",e="font-medium mt-2";return te("div",{className:"sm:px-20 md:px-40 py-10 grid grid-cols-6 text-jet",children:[te("div",{className:"m-auto xs: col-start-0 col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-2",children:"Process"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"xs:col-span-12 sm: col-span-8 lgsm: col-span-8 lgsm: col-start-4 col-start-1 pb-5",children:te("div",{className:"grid grid-cols-auto md:grid-cols-5 sm:grid-cols-5 mt-10 text-center gap-8",children:[te("div",{children:[C("div",{className:n,children:C(CK,{size:"40px",color:"#323031"})}),C("h3",{className:e,children:"Research"})]}),te("div",{children:[C("div",{className:n,children:C(_K,{size:"40px",color:"#323031"})}),C("h3",{className:e,children:"Define"})]}),te("div",{children:[C("div",{className:n,children:C(EK,{size:"40px",color:"#323031"})}),C("h3",{className:e,children:"Design"})]}),te("div",{children:[C("div",{className:n,children:C(bK,{size:"40px",color:"#323031"})}),C("h3",{className:e,children:"Ideate"})]}),te("div",{children:[C("div",{className:n,children:C(AK,{size:"40px",color:"#323031"})}),C("h3",{className:e,children:"Develop"})]})]})})]})}function x0(n){const e=n.isFlow;return te("div",{className:"bg-background-light md:px-40 pt-6 pb-10 text-jet sm:px-10 px-10",children:[te("div",{className:"grid grid-cols-3 gap-4 rounded border-solid border-2 border-stone-800 bg-white p-10",children:[te("div",{className:"xs:col-span-3 sm:col-span-3 md:col-span-1 col-span-1",children:[C("img",{src:n.pic,className:"sm:hidden md:flex m-auto w-[150px]"}),C("h2",{className:"sm:text-left md:text-center text-xl font-semibold mt-3",children:n.name}),C("p",{className:"sm:text-left md:text-center text-sm text-poppy-red font-semibold",children:n.title}),C("p",{className:"sm:text-left md:text-center mt-2 text-xs font-semibold",children:n.city}),te("p",{className:"sm:text-left md:text-center text-xs",children:["Age: ",n.age]})]}),te("div",{className:"xs:col-span-3 sm:col-span-3 md:col-span-1 col-span-1",children:[C("h2",{className:"font-semibold mt-4",children:"Motivations"}),n.motivations.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id)),C("h2",{className:"font-semibold mt-4",children:"Goals"}),n.goals.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id)),C("h2",{className:"font-semibold mt-4",children:"Pain Points"}),n.pain.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id))]}),te("div",{className:"xs:col-span-3 sm:col-span-3 md:col-span-1 col-span-1",children:[C("h2",{className:"font-semibold mt-4",children:"Challenges"}),n.challenges.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id)),C("h2",{className:"font-semibold mt-4",children:"Solutions"}),n.solutions.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id)),C("h2",{className:"font-semibold mt-4",children:"Benefits"}),n.benefits.map(t=>C("li",{className:"text-xs mt-1 mb-1",children:t.content},t.id))]})]}),e&&te("div",{className:"text-center mt-10 pb-10",children:[C("h2",{className:"text-lg font-semibold mb-2",children:"User Flow"}),C("img",{src:n.flowSrc,class:"w-full"})]})]})}function E_(n){return te("div",{className:"bg-background-light p-10 pt-6 pb-10 text-jet sm:p-2",children:[C("div",{className:"grid grid-cols-6",children:te("div",{className:"m-auto col-start-2 col-span-4 pt-10 xs:col-span-6 xs:col-start-1",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Research"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1 animate-bganimate "})]})}),C("div",{className:"grid grid-cols-6 sm:px-20 md:px-40 py-10",children:C("div",{className:"col-span-full",children:n.content})})]})}const T_="/assets/agents-user1-0c370102.png",PK="/assets/UserFlow-36846f17.png";function P_(n){return C("div",{children:te("div",{className:"py-6 grid grid-cols-6 text-jet px-20 sm:px-20 md:px-40 ",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-2",children:"Defining the Project"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),te("div",{className:"col-span-6 mb-10",children:[C("h2",{className:"text-lg font-semibold mb-2",children:"Identify:"}),C("p",{className:"pb-10",children:n.identify}),C("h2",{className:"text-lg font-semibold mb-2 mt-4",children:"Purpose:"}),C("p",{className:"pb-10",children:n.purpose}),C("h2",{className:"text-lg font-semibold mb-2 mt-4",children:"Features:"}),C("p",{className:"pb-10",children:n.features})]})]})})}const RK="/assets/ColorPalette-bddb97ab.png",DK="/assets/ui1-104441b3.png",BK="/assets/ui2-83962e4e.png",IK="/assets/Buttons-b914fe73.png";function LK(){return C("div",{className:"bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Design System"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"xs:col-span-6 sm:col-span-3",children:C("img",{src:RK,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Color Palette"}),C("p",{children:"a color palette is a vital aspect of a design system as it helps maintain consistency, establish brand identity, improve accessibility, and streamline the design process."})]}),C("div",{className:"xs:col-span-6 sm:col-span-3 m-auto",children:C("img",{src:IK})}),C("div",{className:"xs:hidden sm:block sm:col-span-1",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Buttons"}),C("p",{children:"buttons have a consistent style, size, and placement, users can quickly understand how to navigate the product."})]}),te("div",{className:"xs:col-span-6 sm:col-start-2 sm:col-span-4 mt-4",children:[C("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Input Components"}),C("p",{className:"mt-4",children:"Each input component has a consistent design crafted for flexibility and reusability. There are defined states that allow users to clearly identify their input selection with visual feedback. The components allow for scalability for added features."})]}),C("div",{className:"col-span-6",children:C("img",{src:BK})}),C("div",{className:"col-span-6",children:C("img",{src:DK})})]})})}const NK="/assets/mock1-6696e1cb.png",FK="/assets/mock2-b3f5ba1e.png",kK="/assets/mock3-e78e0e36.png";function UK(){return C("div",{className:"bg-white py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Mockups & Prototypes"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"col-start-2 col-span-4",children:C("p",{className:"mb-10",children:"When designing, we needed to take account for not only the desktop view but the mobile view as well. We also had to take into account how the application would look from the perspective of both the searcher vs. the agent. There we are a set of key features that I wanted to included like customer reviews, and contextual search. "})}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Home Page"}),C("img",{src:NK,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Client View"}),C("img",{src:FK,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Quick Analysis"}),C("img",{src:kK,className:"m-auto"})]})]})})}function OK(){return te("div",{children:[C(A_,{title:"Finary CRM",desc:"This application assists financial advisors and representatives in tracking customer interactions, managing data, engagement and performance of their financial portfolio.  The tool is intended to improve customer service and increase an advisors book of business.",rightSide:MK,image:"true"}),C(b_,{year:"2023",role:"Product Designer, Developer",duration:"4 mos"}),C(TK,{}),C(C_,{}),C(E_,{content:te("div",{children:[C("p",{children:"We began the research process by conducting user research. We looked up potential users of the tool to understand their needs and pain points. We also analyzed data from existing financial advisor CRMs to get a sense of the market."}),C("p",{className:"mt-5",children:"Based on our research, we developed a set of user personas. These personas represent the different types of users who would use the tool. We used the personas to guide our design decisions."}),C("p",{className:"mt-5",children:"We then created wireframes and prototypes of the tool."})]})}),C(x0,{pic:T_,name:"John Smith",title:"Financial Advisor",city:"New York, NY",age:"35",motivations:[{id:1,content:"To help his clients achieve their financial goals, and to be successful in his career."},{id:2,content:"To maintain clients and grow his book of business by creating an edge."}],goals:[{id:1,content:"To grow his client base and provide them with the best possible financial advice."},{id:2,content:"He is passionate about helping people achieve their financial goals."},{id:3,content:"He is always looking for new ways to improve his skills and knowledge."}],pain:[{id:1,content:"Finding the time to meet with clients, and keeping track of all of his client data."},{id:2,content:"It takes time and effort to build a network and gain a reputation as a trusted advisor."}],challenges:[{id:1,content:"To stay up-to-date on the latest financial news and trends, and to manage his time effectively."},{id:2,content:"John doesnt feel his is most efficient about his time management"},{id:3,content:"John has trouble keeping track of all of his clients data."}],solutions:[{id:1,content:"A CRM tool can help John to stay informed about the latest financial news and trends. This can help him to provide his clients with the best possible advice."},{id:2,content:"A CRM tool can help John to store and organize all of his client data in one place. This can help him to easily access the information he needs when he needs it."},{id:3,content:"A CRM tool can help John keep track of his appointments, tasks, and deadlines. This can help him to be more efficient and productive."}],benefits:[{id:1,content:"Peace of mind knowing that his family is financially secure"},{id:2,content:"The confidence that he is getting the best possible policy for his needs"},{id:3,content:"The ability to save money on life insurance"}],isFlow:"true",flowSrc:PK}),C(P_,{identify:"a CRM system can be a valuable tool for financial advisors in a number of ways. By helping to track client interactions, automate tasks, generate reports, and comply with regulations, a CRM system can help financial advisors improve their service, increase their efficiency, and reduce their risk.",purpose:"A CRM can help financial advisors build stronger relationships with their clients by keeping track of their interactions and preferences. This information can be used to personalize communications and provide more relevant advice, increase profitability, and increase efficency.",features:"The CRM should be able to track client interaction, performance and relationships. The CRM should be able to generate a report and insights to show the consumer their performance and give the advisor the position of subject matter expert."}),C(LK,{}),C(UK,{})]})}const zK="/assets/imaciptiq-c4c75e13.png";function HK(){return te("div",{className:"grid grid-cols-6 text-jet bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 gap-10",children:[te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Objectives & Goals"}),te("ol",{className:"list-decimal mt-4 ml-10 text-sm",children:[C("li",{className:"mb-4",children:"Improve customer service by providing financial advisors with a centralized system for managing customer interactions, storing customer data, and tracking customers."}),C("li",{className:"mb-4",children:"Provide more convenience for clients by allowing them to complete their applications online, at your their own pace and time."}),C("li",{className:"mb-4",children:"Reduce inaccuracies that are often found within traditional paper application through the use of validation."}),C("li",{className:"mb-4",children:"Offer more security to protect private identifiable information for clients and agents by reducing third parties."}),C("li",{className:"mb-4",children:"Reduce paper and third party costs by bringing digital applications in-house"})]})]}),te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Business Challenges"}),te("ul",{className:"xs:ml-0 md:ml-20 mt-4 text-md font-medium",children:[te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Security"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Usability"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Regulatory Compliance"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Business Ownership/Integration"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Cost"]})]})]})]})}const GK="/assets/colors-2048e566.png",VK="/assets/inputs2-da6c66ac.png",WK="/assets/typo-c87bf6c6.png",jK="/assets/buttons-d7833993.png";function JK(){return C("div",{className:"bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Design System"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"xs:col-span-6 sm:col-span-3",children:C("img",{src:GK,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Color Palette"}),C("p",{children:"a color palette is a vital aspect of a design system as it helps maintain consistency, establish brand identity, improve accessibility, and streamline the design process."})]}),C("div",{className:"xs:col-span-6 sm:col-span-3",children:C("img",{src:jK,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Buttons"}),C("p",{children:"buttons have a consistent style, size, and placement, users can quickly understand how to navigate the product."})]}),C("div",{className:"xs:col-span-6 sm:col-span-3",children:C("img",{src:WK,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Typography & Iconography"}),te("p",{children:["Type has a consistent style, size, and hierarchy. Using larger text for call to actions, smaller size for body to create a sense of structure. Consistent space between headings, body, and around images create visual separation. The creation of a typography system helps improve the overall usability and design.",C("br",{}),C("br",{}),"The iconography in this project is meant to be modern but familiar, designed to be consistent with the overall theme."]})]}),te("div",{className:"xs:col-span-6 sm:col-start-2 sm:col-span-4 mt-4",children:[C("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Input Components"}),C("p",{className:"mt-4",children:"Each input component has a consistent design crafted for flexibility and reusability. There are defined states that allow users to clearly identify their input selection with visual feedback. The components allow for scalability for added features."})]}),C("div",{className:"xs:col-span-6 sm:col-span-6",children:C("img",{src:VK})})]})})}const XK="/assets/home1-e0ce2835.png",KK="/assets/startinganapp-f944e8d2.png",QK="/assets/quoteandpay-eaf6afa4.png";function YK(){return C("div",{className:"bg-white p-10 pt-6 pb-10 text-jetbg-white py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Mockups & Prototypes"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"col-start-2 col-span-4",children:C("p",{className:"mb-10",children:"When designing, we needed to take account for not only the desktop view but the mobile view as well. We also had to take into account how the application would look from the perspective of both the searcher vs. the agent. There we are a set of key features that I wanted to included like customer reviews, and contextual search. "})}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Agent Login and Portal"}),C("img",{src:XK,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Starting an Application"}),C("img",{src:KK,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Quote and Pay"}),C("img",{src:QK,className:"m-auto"})]})]})})}function ZK(){return te("div",{children:[C(A_,{title:"IptiQ E-App",desc:"The IptiQ Electronic insurance applications are designed to make the process of applying for insurance easier and more efficient for both consumers and insurance companies. They allow consumers to complete their applications online, at their convenience, and without having to mail in any paperwork saving consumers time, money, and it can also help to reduce the risk of errors in the application process.",rightSide:zK,image:"true"}),C(b_,{year:"2022",role:"Product Designer, Developer",duration:"1 Yr"}),C(HK,{}),C(C_,{}),C(E_,{content:C("div",{children:C("p",{className:"mb-10",children:"The need for an internal e-application came from the need to remove reliance on a third party, improve user experience, and be more agile with new features while growing business. A deep analysis of the previous e-application was taken and critiqued. External analysis of competitor products were conducted by our competitive audit team. "})})}),C(x0,{pic:T_,name:"John Smith",title:"Insurance Agent",city:"Denver, CO",age:"42",motivations:[{id:1,content:"To help his clients achieve their financial goals, and to be successful in his career."},{id:2,content:"To maintain clients and grow his book of business by creating an edge."}],goals:[{id:1,content:"Wants to streamline their practice to save time and and the process for their clients."},{id:2,content:"Wants to be able to provide their clients with more accurate quotes and coverage options."},{id:3,content:"Would like a centralized location to find pending and in-process applications."}],pain:[{id:1,content:"Finds their current workflow time-consuming and inefficent."},{id:2,content:"Finds manually entry error prone and spends a lot of time comparing quotes and policy options."}],challenges:[{id:1,content:"Wants the process to be easier to use and to get help if needed."},{id:2,content:"Expects secure functionality that is easily accessible."},{id:3,content:"Wants to be able to hand off to the insurance company easier."}],solutions:[{id:1,content:"An insurance application that is easy-to-use."},{id:2,content:"A portal which they can see their progress, completed work and pending applications."},{id:3,content:"Quick and accurate policy options and quotes."}],benefits:[{id:1,content:"Peace of mind by providing a secure option directly managed by the insurance company, no third parties."},{id:2,content:"The confidence that he is getting the best possible policy for his needs"},{id:3,content:"The ability to save money on life insurance for their clients by shopping different options."}]}),C(P_,{identify:"Online applications allow you to apply for insurance at any time, from anywhere. You can also save time by completing the application online, rather than having to visit an insurance agent in person.",purpose:"Online applications can be processed more quickly than traditional applications. This is because the information is entered directly into the insurance company's system, rather than being sent through a third party.",features:"Online applications are more efficient for both the insurance company and the applicant. The insurance company can save money on processing costs, and the applicant can save time and hassle."}),C(JK,{}),C(YK,{})]})}const qK="/assets/agents-hero-26955090.png";function $K(){return te("div",{className:"grid grid-cols-6 text-jet bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 gap-10",children:[te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Objectives & Goals"}),te("ol",{className:"list-decimal mt-4 text-sm",children:[C("li",{className:"mb-4",children:"Provide an easy-to-use platform for users to search and compare life insurance products offered by different agents."}),C("li",{className:"mb-4",children:"Enable users to easily contact licensed life insurance agents who can provide personalized guidance and advice on choosing the right policy."}),C("li",{className:"mb-4",children:"Provide a forum or community for users to share their experiences with different life insurance providers and agents, and to ask questions or seek advice from other users."}),C("li",{className:"mb-4",children:"Provide a secure platform for users to submit their personal information and receive quotes from different insurance companies."})]})]}),te("div",{className:"mt-4 md:col-span-3 sm:col-span-6 col-span-6",children:[C("h2",{className:"text-center text-xl font-semibold",children:"Business Challenges"}),te("ul",{className:"xs:ml-0 md:ml-20 mt-4 text-md font-medium",children:[te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Competition"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Building Trust"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Regulatory Compliance"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Complex Data Structures"]}),te("li",{className:"mb-4",children:[C(Ui,{className:"inline -mt-1",size:"22px"})," Keeping up with Industry Changes"]})]})]})]})}const eQ="/assets/agents-user2-70236988.png",tQ="/assets/agents-palette-47d2c016.png",nQ="/assets/agents-ui1-b1586a69.png",iQ="/assets/agents-ui2-b4ddc547.png",rQ="/assets/agents-buttons-92ac0d4e.png";function sQ(){return C("div",{className:"bg-background-light py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Design System"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"xs:col-span-6 sm:col-span-3 py-5",children:C("img",{src:tQ,width:"600px"})}),C("div",{className:"xs:hidden sm:block col-span-1 py-5",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2 py-5",children:[C("h2",{className:"text-xl font-semibold my-2",children:"Color Palette"}),C("p",{children:"a color palette is a vital aspect of a design system as it helps maintain consistency, establish brand identity, improve accessibility, and streamline the design process."})]}),C("div",{className:"xs:col-span-6 sm:col-span-3 py-5",children:C("img",{src:rQ,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1 py-5",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2 py-5",children:[C("h2",{className:"text-xl font-semibold my-2",children:"Buttons"}),C("p",{children:"buttons have a consistent style, size, and placement, users can quickly understand how to navigate the product."})]}),C("div",{className:"xs:col-span-6 sm:col-span-3 py-5",children:C("img",{src:nQ,width:"600px"})}),C("div",{className:"xs:hidden sm:block sm:col-span-1 py-5",children:C("div",{className:"horizontal-circle m-auto"})}),te("div",{className:"xs:col-span-6 sm:col-span-2 py-5",children:[C("h2",{className:"text-xl font-semibold my-2",children:"Typography & Iconography"}),te("p",{children:["Type has a consistent style, size, and hierarchy. Using larger text for call to actions, smaller size for body to create a sense of structure. Consistent space between headings, body, and around images create visual separation. The creation of a typography system helps improve the overall usability and design.",C("br",{}),C("br",{}),"The iconography in this project is meant to be modern but familiar, designed to be consistent with the overall theme."]})]}),te("div",{className:"xs:col-span-6 col-start-2 sm:col-span-6 mt-4 py-5",children:[C("h2",{className:"text-xl font-semibold mb-2 text-center",children:"Input Components"}),C("p",{className:"my-4",children:"Each input component has a consistent design crafted for flexibility and reusability. There are defined states that allow users to clearly identify their input selection with visual feedback. The components allow for scalability for added features."})]}),C("div",{className:"col-span-6",children:C("img",{src:iQ})})]})})}const aQ="/assets/agents-mock1-d2cfc640.png",oQ="/assets/agents-mock2-6bec0863.png",lQ="/assets/agents-mock3-8e5c2588.png";function cQ(){return C("div",{className:"bg-white py-10 xs:px-10 sm:px-10 md:px-40 text-jet",children:te("div",{className:"grid grid-cols-6 gap-4 align-middle items-center",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold text-3xl text-jet mb-3",children:"Mockups & Prototypes"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"xs:col-span-6 col-start-2 col-span-4",children:C("p",{children:"When designing, we needed to take account for not only the desktop view but the mobile view as well. We also had to take into account how the application would look from the perspective of both the searcher vs. the agent. There we are a set of key features that I wanted to included like customer reviews, and contextual search. "})}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Home Page"}),C("img",{src:aQ,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Individual Agent Page"}),C("img",{src:oQ,className:"m-auto"})]}),te("div",{className:"col-span-6 text-center mt-10",children:[C("h2",{className:"text-xl font-semibold mb-2",children:"Search Results"}),C("img",{src:lQ,className:"m-auto"})]})]})})}function uQ(){const n=[{id:1,content:"Wants to provide financial security for his family in the event of his death"},{id:2,content:"Wants to make sure his family is taken care of financially"},{id:3,content:"Wants to find a policy that is affordable and meets her needs"}],e=[{id:1,content:"Wants to provide financial security for his family in the event of his death"},{id:2,content:"Wants to make sure his family is taken care of financially"},{id:3,content:"Wants to find a policy that is affordable and meets her needs"}],t=[{id:1,content:"Find the best life insurance policy for his family"},{id:2,content:"Get quotes from multiple companies"},{id:3,content:"Compare policies and prices"}],i=[{id:1,content:"Find the best life insurance policy for his family"},{id:2,content:"Get quotes from multiple companies"},{id:3,content:"Compare policies and prices"}],r=[{id:1,content:"Not sure where to start when looking for life insuranceFind the best life insurance policy for his family"},{id:2,content:"Don't know what questions to ask"},{id:3,content:"Don't want to get overwhelmed by the proces"}],s=[{id:1,content:"Not sure where to start when looking for life insuranceFind the best life insurance policy for his family"},{id:2,content:"Don't know what questions to ask"},{id:3,content:"Don't want to get overwhelmed by the process"}],a=[{id:1,content:"Finding the time to research life insurance"},{id:2,content:"Understanding the different types of life insurance policies"},{id:3,content:"Comparing policies and prices"}],o=[{id:1,content:"Finding the time to research life insurance"},{id:2,content:"Understanding the different types of life insurance policies"},{id:3,content:"Comparing policies and prices"}],l=[{id:1,content:"A life insurance search tool that can help him find the best policy for his needs"},{id:2,content:"A tool that can provide him with quotes from multiple companies"},{id:3,content:"A tool that can help him compare policies and prices"}],u=[{id:1,content:"A life insurance search tool that can help him find the best policy for his needs"},{id:2,content:"A tool that can provide him with quotes from multiple companies"},{id:3,content:"A tool that can help him compare policies and prices"}],d=[{id:1,content:"Peace of mind knowing that his family is financially secure"},{id:2,content:"The confidence that he is getting the best possible policy for his needs"},{id:3,content:"The ability to save money on life insurance"}];return te("div",{children:[C(A_,{title:"AgentXplore",desc:"This application assists users in finding an insurance agent near them that suits their particular needs. Agents can also sign up to join the site to gain more visibility and engage with potential new clients.",rightSide:qK,image:"true"}),C(b_,{year:"2023",role:"Product Designer, Developer",duration:"4 mos"}),C($K,{}),C(C_,{}),C(E_,{content:te("div",{className:"col-span-full",children:[C("p",{children:"We began the research process by conducting user research. We looked up potential users of the tool to understand their needs and pain points. We also analyzed data from existing life insurance websites to get a sense of the market."}),C("p",{className:"mt-5",children:"Based on our research, we developed a set of user personas. These personas represent the different types of users who would use the tool. We used the personas to guide our design decisions."}),C("p",{className:"mt-5",children:"We then created wireframes and prototypes of the tool."})]})}),C(x0,{pic:T_,name:"John Smith",title:"Software Engineer",city:"San Francisco, CA",age:"35",motivations:n,goals:t,pain:r,challenges:a,solutions:l,benefits:d}),C(x0,{pic:eQ,name:"Jane D.",title:"Stay at Home Mom",city:"Kansas City, KS",age:"45",motivations:e,goals:i,pain:s,challenges:o,solutions:u,benefits:d}),C(P_,{identify:"In this case, the need for the application is to help people find life insurance agents in their area. The users of the application are people who are looking for life insurance. Their needs are to find agents who are qualified and trustworthy, and who can help them find the right life insurance policy for their needs.",purpose:"The purpose of the application is to help people find life insurance agents in their area. The application will help users accomplish this by providing them with a list of agents in their area, as well as information about each agent, such as their experience, qualifications, and fees.",features:"The features that the application will need to have include the ability to search for agents by location, specialty, and other criteria. The application will also need to provide users with information about each agent, such as their experience, qualifications, and fees."}),C(sQ,{}),C(cQ,{})]})}function fQ(){return C("div",{className:"min-h-[500px]",children:C(kI,{cardMargin:"mt-0",title:"Case Studies"})})}function dQ(){return te("div",{children:[C("div",{className:"grid grid-cols-12 min-h-[200px] ease-in-out duration-500 bg-white px-4",children:te("div",{className:"col-span-12 m-auto grid-rows-2",children:[C("h1",{className:"text-4xl font-bold tracking-in-expand",children:"Carl G.W. Smith"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1 animate-bganimate "}),C("h1",{className:"text-xl mt-2 tracking-in-expand text-center font-bold uppercase",children:"Creative Developer"})]})}),te("div",{className:"grid grid-cols-12 min-h-[200px] ease-in-out duration-500 bg-background-light",children:[te("div",{className:"sm: col-span-12 lgsm:col-span-6  sm: px-20 sm: py-20 sm: gap-20",children:[C("h2",{className:"font-bold uppercase text-2xl",children:"Experience"}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Senior Software Engineer"}),C("h4",{className:"text-base text-gray-500",children:"T. Rowe Price"}),C("h4",{className:"text-base text-gray-500",children:"June 2022 - Current"}),C("p",{className:"text-sm pt-2",children:"Design and engineer UI for enterprise financial software to align with global design system using ReactJS, VueJS and more."})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Product Design Lead"}),C("h4",{className:"text-base text-gray-500",children:"Iptiq by Swiss Re"}),C("h4",{className:"text-base text-gray-500",children:"Boston, MA | February 2022 - June 2023"}),C("p",{className:"text-sm pt-2",children:"Lead product design team in maintaining global design system, creating new product design requirements, areas of opportunity, implementing design in development environments (Unqork, Angular)."})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Senior UX & UI Designer / Developer"}),C("h4",{className:"text-base text-gray-500",children:"Social Security Solutions"}),C("h4",{className:"text-base text-gray-500",children:"Kansas City, KS | September 2019 - February 2022"}),C("p",{className:"text-sm pt-2",children:"Competitive audits, user journeys, wireframes, prototypes and mockups of interactions for our suite of financial software. Usability testing and research. Handing off to development. Develop UI in VueJs."})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Lead Web & Graphic Designer"}),C("h4",{className:"text-base text-gray-500",children:"Legacy Financial Partners"}),C("h4",{className:"text-base text-gray-500",children:"Topeka, KS | March 2012 - September 2019"}),te("p",{className:"text-sm pt-2",children:["Full service marketing agency for Independent Life Insurance and Annuity Agents.",C("br",{}),C("br",{}),"Motivate and manage a team of creatives. Create functional and accessible websites, develop print and digital collateral, troubleshoot SaSS technical issues develop proprietary applications, brand development remain flexible."]})]})]}),te("div",{className:"sm: col-span-12 lgsm:col-span-6 sm: px-20 sm: py-20 sm: gap-20",children:[C("h2",{className:"font-bold uppercase text-2xl",children:"Education"}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Master of Professional Studies"}),C("h4",{className:"text-base text-gray-500",children:"Web & Mobile Application Development"}),C("h4",{className:"text-base text-gray-500",children:"Fort Hays State University | 2021"}),C("p",{className:"text-sm pt-2",children:"Gained expert knowledge in frontend and backend web development utilizing the latest technology for building desktop and mobile application. Database design and programming, research methods, human computer interaction, law of cyberspace."})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Bachelor of Fine Arts"}),C("h4",{className:"text-base text-gray-500",children:"Digital & Graphic Design"}),C("h4",{className:"text-base text-gray-500",children:"Washburn University | 2017"}),C("p",{className:"text-sm pt-2",children:"Gained expert knowledge in digital and print media using industry standard tools and technology. Sharpened skills in typography, color theory, accessibility, history of design, modern trends and use of software"})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"UX Professional Certificate"}),C("h4",{className:"text-base text-gray-500",children:"Google Certificates | 2021"}),C("p",{className:"text-sm pt-2",children:"Foundations of UX design, including empathizing with users, building wireframes and prototypes, and conducting research to test designs. Practice in user-centered design, the design process, and accessibility."})]}),te("div",{className:"mt-5",children:[C("h3",{className:"text-lg font-semibold",children:"Data Visualization Specialization Certificate"}),C("h4",{className:"text-base text-gray-500",children:"NYU Tandon | 2022"}),C("p",{className:"text-sm pt-2",children:"Foundations of Data Visualization, Best practices for communicating business-relevant data analyses using various technology. Developing visualizations using D3.js and other tools."})]})]})]}),te("div",{className:"grid grid-cols-12 min-h-[200px] ease-in-out duration-500 bg-white",children:[te("div",{className:"xs: col-span-12 mdlg:col-span-6 sm: px-20 sm: py-20 sm: gap-20",children:[C("h2",{className:"font-bold uppercase text-2xl",children:"Hard Skills"}),te("ul",{className:"list-none",children:[C("li",{children:"HTML"}),C("li",{children:"CSS (SCSS, SASS, Styled Components, Quasar, Tailwind)"}),C("li",{children:"JS (ES6, JSX, VueJS, React, Native, Angular)"}),C("li",{children:"Adobe Creative Suite"}),C("li",{children:"Figma"}),C("li",{children:"CMS (Hubspot CMS, Wordpress, Unqork)"})]})]}),te("div",{className:"xs: col-span-12 sm:col-span-6 sm: px-20 sm: py-20 sm: gap-20",children:[C("h2",{className:"font-bold uppercase text-2xl",children:"Soft Skills"}),te("ul",{className:"list-none",children:[C("li",{children:"User & Accessibilty Focused"}),C("li",{children:"Diligent and Timely"}),C("li",{children:"Responsive to Criticism"}),C("li",{children:"Team Forward"}),C("li",{children:"Holistically Empathetic"}),C("li",{children:"Open & Adaptive"})]})]})]})]})}function hQ(){const n="p-2 border-solid border-2 border-slate-900 rounded-md mb-5 focus:bg-slate-100",e="bg-sunglow h-10 px-4 text-jet font-semibold float-right rounded-md hover:opacity-80",t="block text-jet mb-1";return C("div",{children:C("div",{className:"xs: px-3 m-auto grid mt-16 mb-28 px-[100px]",children:te("div",{children:[te("h1",{className:"text-4xl font-bold mb-10 text-jet",children:["Would love to hear from you, Lets talk. ",C("span",{class:"wave",children:""})]}),te("form",{action:"https://api.web3forms.com/submit",method:"POST",children:[C("input",{className:n,type:"hidden",name:"access_key",value:{}.VITE_REACT_APP_WEB3FORMS_KEY}),te("div",{className:"grid grid-cols-2 gap-4",children:[te("div",{children:[te("label",{className:t,for:"fullname",children:["Full Name ",C("span",{className:"text-rose-800",children:"*"})]}),C("input",{className:n+" h-14 w-full",type:"text",name:"name",id:"fullname",placeholder:"John Doe",required:!0})]}),te("div",{children:[te("label",{className:t,for:"emailaddress",children:["Email Address ",C("span",{className:"text-rose-800",children:"*"})]}),C("input",{className:n+" h-14 w-full",id:"emailaddress",type:"email",name:"email",required:!0,placeholder:"test@test.com"})]})]}),te("label",{for:"message",className:t,children:["Message",C("span",{className:"text-rose-800",children:"*"})]}),C("textarea",{className:n+" w-full h-40",name:"message",id:"message",required:!0,placeholder:"type your message here..."}),C("input",{type:"hidden",name:"redirect",value:"https://web3forms.com/success"}),C("button",{type:"submit",className:e,children:"Submit Form"})]})]})})})}function pQ(n){return Wr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8c4.408 0 8-3.584 8-8s-3.592-8-8-8zm5.284 3.688a6.802 6.802 0 0 1 1.545 4.251c-.226-.043-2.482-.503-4.755-.217-.052-.112-.096-.234-.148-.355-.139-.33-.295-.668-.451-.99 2.516-1.023 3.662-2.498 3.81-2.69zM8 1.18c1.735 0 3.323.65 4.53 1.718-.122.174-1.155 1.553-3.584 2.464-1.12-2.056-2.36-3.74-2.551-4A6.95 6.95 0 0 1 8 1.18zm-2.907.642A43.123 43.123 0 0 1 7.627 5.77c-3.193.85-6.013.833-6.317.833a6.865 6.865 0 0 1 3.783-4.78zM1.163 8.01V7.8c.295.01 3.61.053 7.02-.971.199.381.381.772.555 1.162l-.27.078c-3.522 1.137-5.396 4.243-5.553 4.504a6.817 6.817 0 0 1-1.752-4.564zM8 14.837a6.785 6.785 0 0 1-4.19-1.44c.12-.252 1.509-2.924 5.361-4.269.018-.009.026-.009.044-.017a28.246 28.246 0 0 1 1.457 5.18A6.722 6.722 0 0 1 8 14.837zm3.81-1.171c-.07-.417-.435-2.412-1.328-4.868 2.143-.338 4.017.217 4.251.295a6.774 6.774 0 0 1-2.924 4.573z"}}]})(n)}function mQ(n){return Wr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"}}]})(n)}function gQ(n){return Wr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"}}]})(n)}function vQ(){return te("div",{className:"left-0 bottom-0 mt-10 pb-4 w-full bg-background-light text-jet",children:[te("div",{className:"xs:px-10 sm:px-10 md:px-40 py-10 bg-background-light grid grid-cols-6",children:[te("div",{className:"m-auto col-start-2 col-span-4 pt-5 pb-5",children:[C("h2",{className:"text-center font-bold iphone:text-xl md:text-3xl text-jet",children:"Check me out elsewhere"}),C("div",{className:"bg-gradient-to-r from-[#FF3C35] via-[#fbb21b] to-[#ff3c35] h-1  animate-bganimate "})]}),C("div",{className:"col-span-4 col-start-2 pb-5",children:te("div",{className:"grid grid-cols-auto iphone:grid-cols-3 iphone:gap-10 md:grid-cols-3 mt-10 text-center",children:[C("div",{children:te("a",{href:"https://dribbble.com/carlgwsmith",target:"_blank",className:"hover:underline",children:[C(pQ,{size:20,style:{display:"inline-block"}})," Dribbble"]})}),C("div",{children:te("a",{href:"https://www.linkedin.com/in/carl-gw-smith/",target:"_blank",className:"hover:underline",children:[C(gQ,{size:20,style:{display:"inline-block"}})," LinkedIn"]})}),C("div",{children:te("a",{href:"https://github.com/carlgwsmith",target:"_blank",className:"hover:underline",children:[C(mQ,{size:20,style:{display:"inline-block"}})," GitHub"]})})]})})]}),te("div",{className:"text-center bg-[#fff] w-full p-4 border-y-[2px] border-solid border-jet text-sm font-semibold text-jet",children:[" 2023 ",C(or,{size:14,className:"inline-block"})," Built and Designed by Carl G.W. Smith"]})]})}function yQ(n){return Wr({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"}}]})(n)}function xQ(n){return Wr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(n)}function wQ(){const[n,e]=N.useState(!1),[t,i]=N.useState("w-full text-[24px] font-bold tracking-tighter text-jet"),r=()=>{e(!n)},s=ql();N.useEffect(()=>{e(!1),i("tracking-in-expand w-full text-[24px] font-bold tracking-tighter text-jet"),console.log(s)},[s]);const a="m-4 hover:text-shadow-pop-bl hover:border-jet-light border-white border-b-[3px] duration-300";return te("div",{className:"flex justify-between items-center w-full bg-white border-b-2 py-8 px-10 border-jet h-12 text-jet",children:[C("div",{className:t,children:"CGWS"}),te("ul",{className:"hidden md:flex text-[16px] ease-in-out duration-500",children:[C("li",{className:a,children:C(Za,{to:"/",children:"Home"})}),C("li",{className:a,children:C(Za,{to:"portfolio",children:"Portfolio"})}),C("li",{className:a,children:C(Za,{to:"resume",children:"Resume"})}),C("li",{className:a,children:C(Za,{to:"contact",children:"Contact"})})]}),C("div",{onClick:r,className:"block md:hidden",children:C(yQ,{size:20,navbarOpen:!0})}),te("div",{className:n?"fixed left-0 top-0 w-[100%] border-right border-r-gray-900 h-full bg-background-light ease-in-out duration-500 z-[99999]":"z-[99999] bg-light fixed left-[-100%] ease-in-out duration-500",children:[te("div",{className:"grid grid-cols-6",children:[C("div",{className:"col-span-3 text-xl font-bold tracking-tighter m-4 w-[75%] inline-block",children:"CGWS"}),C("div",{className:"col-span-3 p-4 inline-block",children:C(xQ,{size:20,navbarOpen:!1,onClick:r,className:"float-right"})})]}),te("ul",{className:"uppercase",children:[C("li",{className:"p-4",children:C(Za,{to:"home",children:"Home"})}),C("li",{className:"p-4",children:C(Za,{to:"portfolio",children:"Portfolio"})}),C("li",{className:"p-4",children:C(Za,{to:"resume",children:"Resume"})}),C("li",{className:"p-4",children:C(Za,{to:"contact",children:"Contact"})})]})]})]})}function SQ(){const{pathname:n}=ql();return N.useEffect(()=>{window.scrollTo(0,0)},[n]),null}function MQ(){return te(bo,{children:[C(SQ,{}),C(wQ,{}),C(nK,{}),C(vQ,{})]})}function _Q(){const n=LI();return console.error(n),te("div",{id:"error-page",children:[C("h1",{children:"Oops!"}),C("p",{children:"Sorry, an unexpected error has occurred."}),C("p",{children:C("i",{children:n.statusText||n.message})})]})}const AQ=[{path:"/*",element:C(cg,{})},{path:"",element:C(MQ,{}),errorElement:C(_Q,{}),children:[{index:!0,element:C(cg,{})},{path:"/*",element:C(cg,{})},{path:"/home",element:C(cg,{})},{path:"/portfolio/finary",element:C(OK,{})},{path:"/portfolio/iptiq",element:C(ZK,{})},{path:"/portfolio/agentxplore",element:C(uQ,{})},{path:"/portfolio",element:C(fQ,{})},{path:"/resume",element:C(dQ,{})},{path:"/contact",element:C(hQ,{})}]}],bQ=cK(AQ,{basename:"/"});$x.createRoot(document.getElementById("root")).render(C(vn.StrictMode,{children:C(eK,{router:bQ})}));
